var XU=Object.defineProperty;var YU=(i,t,e)=>t in i?XU(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var $i=(i,t,e)=>YU(i,typeof t!="symbol"?t+"":t,e);function qU(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in i)){const r=Object.getOwnPropertyDescriptor(n,a);r&&Object.defineProperty(i,a,r.get?r:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();function d_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var j1={exports:{}},Gm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function WU(){if(BT)return Gm;BT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,r){var l=null;if(r!==void 0&&(l=""+r),a.key!==void 0&&(l=""+a.key),"key"in a){r={};for(var u in a)u!=="key"&&(r[u]=a[u])}else r=a;return a=r.ref,{$$typeof:i,type:n,key:l,ref:a!==void 0?a:null,props:r}}return Gm.Fragment=t,Gm.jsx=e,Gm.jsxs=e,Gm}var zT;function ZU(){return zT||(zT=1,j1.exports=WU()),j1.exports}var O=ZU(),k1={exports:{}},bn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function KU(){if(FT)return bn;FT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=y&&j[y]||j["@@iterator"],typeof j=="function"?j:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function T(j,st,wt){this.props=j,this.context=st,this.refs=C,this.updater=wt||_}T.prototype.isReactComponent={},T.prototype.setState=function(j,st){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,st,"setState")},T.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function M(){}M.prototype=T.prototype;function R(j,st,wt){this.props=j,this.context=st,this.refs=C,this.updater=wt||_}var D=R.prototype=new M;D.constructor=R,E(D,T.prototype),D.isPureReactComponent=!0;var L=Array.isArray,P={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function G(j,st,wt,Ct,Mt,Vt){return wt=Vt.ref,{$$typeof:i,type:j,key:st,ref:wt!==void 0?wt:null,props:Vt}}function V(j,st){return G(j.type,st,void 0,void 0,void 0,j.props)}function N(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function I(j){var st={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(wt){return st[wt]})}var W=/\/+/g;function lt(j,st){return typeof j=="object"&&j!==null&&j.key!=null?I(""+j.key):st.toString(36)}function tt(){}function rt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(tt,tt):(j.status="pending",j.then(function(st){j.status==="pending"&&(j.status="fulfilled",j.value=st)},function(st){j.status==="pending"&&(j.status="rejected",j.reason=st)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function mt(j,st,wt,Ct,Mt){var Vt=typeof j;(Vt==="undefined"||Vt==="boolean")&&(j=null);var ft=!1;if(j===null)ft=!0;else switch(Vt){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(j.$$typeof){case i:case t:ft=!0;break;case g:return ft=j._init,mt(ft(j._payload),st,wt,Ct,Mt)}}if(ft)return Mt=Mt(j),ft=Ct===""?"."+lt(j,0):Ct,L(Mt)?(wt="",ft!=null&&(wt=ft.replace(W,"$&/")+"/"),mt(Mt,st,wt,"",function(Se){return Se})):Mt!=null&&(N(Mt)&&(Mt=V(Mt,wt+(Mt.key==null||j&&j.key===Mt.key?"":(""+Mt.key).replace(W,"$&/")+"/")+ft)),st.push(Mt)),1;ft=0;var Rt=Ct===""?".":Ct+":";if(L(j))for(var Ft=0;Ft<j.length;Ft++)Ct=j[Ft],Vt=Rt+lt(Ct,Ft),ft+=mt(Ct,st,wt,Vt,Mt);else if(Ft=x(j),typeof Ft=="function")for(j=Ft.call(j),Ft=0;!(Ct=j.next()).done;)Ct=Ct.value,Vt=Rt+lt(Ct,Ft++),ft+=mt(Ct,st,wt,Vt,Mt);else if(Vt==="object"){if(typeof j.then=="function")return mt(rt(j),st,wt,Ct,Mt);throw st=String(j),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return ft}function $(j,st,wt){if(j==null)return j;var Ct=[],Mt=0;return mt(j,Ct,"","",function(Vt){return st.call(wt,Vt,Mt++)}),Ct}function et(j){if(j._status===-1){var st=j._result;st=st(),st.then(function(wt){(j._status===0||j._status===-1)&&(j._status=1,j._result=wt)},function(wt){(j._status===0||j._status===-1)&&(j._status=2,j._result=wt)}),j._status===-1&&(j._status=0,j._result=st)}if(j._status===1)return j._result.default;throw j._result}var vt=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function ut(){}return bn.Children={map:$,forEach:function(j,st,wt){$(j,function(){st.apply(this,arguments)},wt)},count:function(j){var st=0;return $(j,function(){st++}),st},toArray:function(j){return $(j,function(st){return st})||[]},only:function(j){if(!N(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},bn.Component=T,bn.Fragment=e,bn.Profiler=a,bn.PureComponent=R,bn.StrictMode=n,bn.Suspense=d,bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,bn.act=function(){throw Error("act(...) is not supported in production builds of React.")},bn.cache=function(j){return function(){return j.apply(null,arguments)}},bn.cloneElement=function(j,st,wt){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Ct=E({},j.props),Mt=j.key,Vt=void 0;if(st!=null)for(ft in st.ref!==void 0&&(Vt=void 0),st.key!==void 0&&(Mt=""+st.key),st)!B.call(st,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&st.ref===void 0||(Ct[ft]=st[ft]);var ft=arguments.length-2;if(ft===1)Ct.children=wt;else if(1<ft){for(var Rt=Array(ft),Ft=0;Ft<ft;Ft++)Rt[Ft]=arguments[Ft+2];Ct.children=Rt}return G(j.type,Mt,void 0,void 0,Vt,Ct)},bn.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:r,_context:j},j},bn.createElement=function(j,st,wt){var Ct,Mt={},Vt=null;if(st!=null)for(Ct in st.key!==void 0&&(Vt=""+st.key),st)B.call(st,Ct)&&Ct!=="key"&&Ct!=="__self"&&Ct!=="__source"&&(Mt[Ct]=st[Ct]);var ft=arguments.length-2;if(ft===1)Mt.children=wt;else if(1<ft){for(var Rt=Array(ft),Ft=0;Ft<ft;Ft++)Rt[Ft]=arguments[Ft+2];Mt.children=Rt}if(j&&j.defaultProps)for(Ct in ft=j.defaultProps,ft)Mt[Ct]===void 0&&(Mt[Ct]=ft[Ct]);return G(j,Vt,void 0,void 0,null,Mt)},bn.createRef=function(){return{current:null}},bn.forwardRef=function(j){return{$$typeof:u,render:j}},bn.isValidElement=N,bn.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:et}},bn.memo=function(j,st){return{$$typeof:p,type:j,compare:st===void 0?null:st}},bn.startTransition=function(j){var st=P.T,wt={};P.T=wt;try{var Ct=j(),Mt=P.S;Mt!==null&&Mt(wt,Ct),typeof Ct=="object"&&Ct!==null&&typeof Ct.then=="function"&&Ct.then(ut,vt)}catch(Vt){vt(Vt)}finally{P.T=st}},bn.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},bn.use=function(j){return P.H.use(j)},bn.useActionState=function(j,st,wt){return P.H.useActionState(j,st,wt)},bn.useCallback=function(j,st){return P.H.useCallback(j,st)},bn.useContext=function(j){return P.H.useContext(j)},bn.useDebugValue=function(){},bn.useDeferredValue=function(j,st){return P.H.useDeferredValue(j,st)},bn.useEffect=function(j,st){return P.H.useEffect(j,st)},bn.useId=function(){return P.H.useId()},bn.useImperativeHandle=function(j,st,wt){return P.H.useImperativeHandle(j,st,wt)},bn.useInsertionEffect=function(j,st){return P.H.useInsertionEffect(j,st)},bn.useLayoutEffect=function(j,st){return P.H.useLayoutEffect(j,st)},bn.useMemo=function(j,st){return P.H.useMemo(j,st)},bn.useOptimistic=function(j,st){return P.H.useOptimistic(j,st)},bn.useReducer=function(j,st,wt){return P.H.useReducer(j,st,wt)},bn.useRef=function(j){return P.H.useRef(j)},bn.useState=function(j){return P.H.useState(j)},bn.useSyncExternalStore=function(j,st,wt){return P.H.useSyncExternalStore(j,st,wt)},bn.useTransition=function(){return P.H.useTransition()},bn.version="19.0.0",bn}var VT;function bp(){return VT||(VT=1,k1.exports=KU()),k1.exports}var Z=bp();const Bl=d_(Z),QU=qU({__proto__:null,default:Bl},[Z]);var X1={exports:{}},jm={},Y1={exports:{}},q1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT;function JU(){return HT||(HT=1,(function(i){function t($,et){var vt=$.length;$.push(et);t:for(;0<vt;){var ut=vt-1>>>1,j=$[ut];if(0<a(j,et))$[ut]=et,$[vt]=j,vt=ut;else break t}}function e($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var et=$[0],vt=$.pop();if(vt!==et){$[0]=vt;t:for(var ut=0,j=$.length,st=j>>>1;ut<st;){var wt=2*(ut+1)-1,Ct=$[wt],Mt=wt+1,Vt=$[Mt];if(0>a(Ct,vt))Mt<j&&0>a(Vt,Ct)?($[ut]=Vt,$[Mt]=vt,ut=Mt):($[ut]=Ct,$[wt]=vt,ut=wt);else if(Mt<j&&0>a(Vt,vt))$[ut]=Vt,$[Mt]=vt,ut=Mt;else break t}}return et}function a($,et){var vt=$.sortIndex-et.sortIndex;return vt!==0?vt:$.id-et.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var d=[],p=[],g=1,y=null,x=3,_=!1,E=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D($){for(var et=e(p);et!==null;){if(et.callback===null)n(p);else if(et.startTime<=$)n(p),et.sortIndex=et.expirationTime,t(d,et);else break;et=e(p)}}function L($){if(C=!1,D($),!E)if(e(d)!==null)E=!0,rt();else{var et=e(p);et!==null&&mt(L,et.startTime-$)}}var P=!1,B=-1,G=5,V=-1;function N(){return!(i.unstable_now()-V<G)}function I(){if(P){var $=i.unstable_now();V=$;var et=!0;try{t:{E=!1,C&&(C=!1,M(B),B=-1),_=!0;var vt=x;try{e:{for(D($),y=e(d);y!==null&&!(y.expirationTime>$&&N());){var ut=y.callback;if(typeof ut=="function"){y.callback=null,x=y.priorityLevel;var j=ut(y.expirationTime<=$);if($=i.unstable_now(),typeof j=="function"){y.callback=j,D($),et=!0;break e}y===e(d)&&n(d),D($)}else n(d);y=e(d)}if(y!==null)et=!0;else{var st=e(p);st!==null&&mt(L,st.startTime-$),et=!1}}break t}finally{y=null,x=vt,_=!1}et=void 0}}finally{et?W():P=!1}}}var W;if(typeof R=="function")W=function(){R(I)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,tt=lt.port2;lt.port1.onmessage=I,W=function(){tt.postMessage(null)}}else W=function(){T(I,0)};function rt(){P||(P=!0,W())}function mt($,et){B=T(function(){$(i.unstable_now())},et)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function($){$.callback=null},i.unstable_continueExecution=function(){E||_||(E=!0,rt())},i.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<$?Math.floor(1e3/$):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function($){switch(x){case 1:case 2:case 3:var et=3;break;default:et=x}var vt=x;x=et;try{return $()}finally{x=vt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function($,et){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var vt=x;x=$;try{return et()}finally{x=vt}},i.unstable_scheduleCallback=function($,et,vt){var ut=i.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?ut+vt:ut):vt=ut,$){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=vt+j,$={id:g++,callback:et,priorityLevel:$,startTime:vt,expirationTime:j,sortIndex:-1},vt>ut?($.sortIndex=vt,t(p,$),e(d)===null&&$===e(p)&&(C?(M(B),B=-1):C=!0,mt(L,vt-ut))):($.sortIndex=j,t(d,$),E||_||(E=!0,rt())),$},i.unstable_shouldYield=N,i.unstable_wrapCallback=function($){var et=x;return function(){var vt=x;x=et;try{return $.apply(this,arguments)}finally{x=vt}}}})(q1)),q1}var GT;function pM(){return GT||(GT=1,Y1.exports=JU()),Y1.exports}var W1={exports:{}},ls={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function $U(){if(jT)return ls;jT=1;var i=bp();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(d,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:p,implementation:g}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ls.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ls.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return r(d,p,null,g)},ls.flushSync=function(d){var p=l.T,g=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=p,n.p=g,n.d.f()}},ls.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},ls.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},ls.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:_}):g==="script"&&n.d.X(d,{crossOrigin:y,integrity:x,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ls.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=u(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},ls.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=u(g,p.crossOrigin);n.d.L(d,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ls.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=u(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},ls.requestFormReset=function(d){n.d.r(d)},ls.unstable_batchedUpdates=function(d,p){return d(p)},ls.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},ls.useFormStatus=function(){return l.H.useHostTransitionStatus()},ls.version="19.0.0",ls}var kT;function HC(){if(kT)return W1.exports;kT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),W1.exports=$U(),W1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function tO(){if(XT)return jm;XT=1;var i=pM(),t=bp(),e=HC();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var r=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var G=Symbol.for("react.client.reference");function V(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===G?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case d:return"Fragment";case u:return"Portal";case g:return"Profiler";case p:return"StrictMode";case C:return"Suspense";case T:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case _:return(s.displayName||"Context")+".Provider";case x:return(s._context.displayName||"Context")+".Consumer";case E:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return o=s.displayName||null,o!==null?o:V(s.type)||"Memo";case R:o=s._payload,s=s._init;try{return V(s(o))}catch{}}return null}var N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,W,lt;function tt(s){if(W===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);W=o&&o[1]||"",lt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+W+s+lt}var rt=!1;function mt(s,o){if(!s||rt)return"";rt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(jt){var Ot=jt}Reflect.construct(s,[],le)}else{try{le.call()}catch(jt){Ot=jt}s.call(le.prototype)}}else{try{throw Error()}catch(jt){Ot=jt}(le=s())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(jt){if(jt&&Ot&&typeof jt.stack=="string")return[jt.stack,Ot.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),z=A[0],X=A[1];if(z&&X){var at=z.split(`
`),St=X.split(`
`);for(S=m=0;m<at.length&&!at[m].includes("DetermineComponentFrameRoot");)m++;for(;S<St.length&&!St[S].includes("DetermineComponentFrameRoot");)S++;if(m===at.length||S===St.length)for(m=at.length-1,S=St.length-1;1<=m&&0<=S&&at[m]!==St[S];)S--;for(;1<=m&&0<=S;m--,S--)if(at[m]!==St[S]){if(m!==1||S!==1)do if(m--,S--,0>S||at[m]!==St[S]){var Xt=`
`+at[m].replace(" at new "," at ");return s.displayName&&Xt.includes("<anonymous>")&&(Xt=Xt.replace("<anonymous>",s.displayName)),Xt}while(1<=m&&0<=S);break}}}finally{rt=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?tt(h):""}function $(s){switch(s.tag){case 26:case 27:case 5:return tt(s.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return s=mt(s.type,!1),s;case 11:return s=mt(s.type.render,!1),s;case 1:return s=mt(s.type,!0),s;default:return""}}function et(s){try{var o="";do o+=$(s),s=s.return;while(s);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function vt(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function ut(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function j(s){if(vt(s)!==s)throw Error(n(188))}function st(s){var o=s.alternate;if(!o){if(o=vt(s),o===null)throw Error(n(188));return o!==s?null:s}for(var h=s,m=o;;){var S=h.return;if(S===null)break;var A=S.alternate;if(A===null){if(m=S.return,m!==null){h=m;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===h)return j(S),s;if(A===m)return j(S),o;A=A.sibling}throw Error(n(188))}if(h.return!==m.return)h=S,m=A;else{for(var z=!1,X=S.child;X;){if(X===h){z=!0,h=S,m=A;break}if(X===m){z=!0,m=S,h=A;break}X=X.sibling}if(!z){for(X=A.child;X;){if(X===h){z=!0,h=A,m=S;break}if(X===m){z=!0,m=A,h=S;break}X=X.sibling}if(!z)throw Error(n(189))}}if(h.alternate!==m)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?s:o}function wt(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=wt(s),o!==null)return o;s=s.sibling}return null}var Ct=Array.isArray,Mt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Vt={pending:!1,data:null,method:null,action:null},ft=[],Rt=-1;function Ft(s){return{current:s}}function Se(s){0>Rt||(s.current=ft[Rt],ft[Rt]=null,Rt--)}function $t(s,o){Rt++,ft[Rt]=s.current,s.current=o}var ze=Ft(null),Qe=Ft(null),Oe=Ft(null),Gt=Ft(null);function se(s,o){switch($t(Oe,o),$t(Qe,s),$t(ze,null),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)&&(o=o.namespaceURI)?hT(o):0;break;default:if(s=s===8?o.parentNode:o,o=s.tagName,s=s.namespaceURI)s=hT(s),o=dT(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Se(ze),$t(ze,o)}function Wt(){Se(ze),Se(Qe),Se(Oe)}function ve(s){s.memoizedState!==null&&$t(Gt,s);var o=ze.current,h=dT(o,s.type);o!==h&&($t(Qe,s),$t(ze,h))}function J(s){Qe.current===s&&(Se(ze),Se(Qe)),Gt.current===s&&(Se(Gt),Bm._currentValue=Vt)}var Fe=Object.prototype.hasOwnProperty,be=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,ye=i.unstable_shouldYield,Q=i.unstable_requestPaint,F=i.unstable_now,gt=i.unstable_getCurrentPriorityLevel,Bt=i.unstable_ImmediatePriority,qt=i.unstable_UserBlockingPriority,Pt=i.unstable_NormalPriority,Le=i.unstable_LowPriority,Me=i.unstable_IdlePriority,Pe=i.log,Ye=i.unstable_setDisableYieldValue,Zt=null,Kt=null;function De(s){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Zt,s,void 0,(s.current.flags&128)===128)}catch{}}function nt(s){if(typeof Pe=="function"&&Ye(s),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Zt,s)}catch{}}var _t=Math.clz32?Math.clz32:At,te=Math.log,ot=Math.LN2;function At(s){return s>>>=0,s===0?32:31-(te(s)/ot|0)|0}var Qt=128,Ee=4194304;function ne(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Yt(s,o){var h=s.pendingLanes;if(h===0)return 0;var m=0,S=s.suspendedLanes,A=s.pingedLanes,z=s.warmLanes;s=s.finishedLanes!==0;var X=h&134217727;return X!==0?(h=X&~S,h!==0?m=ne(h):(A&=X,A!==0?m=ne(A):s||(z=X&~z,z!==0&&(m=ne(z))))):(X=h&~S,X!==0?m=ne(X):A!==0?m=ne(A):s||(z=h&~z,z!==0&&(m=ne(z)))),m===0?0:o!==0&&o!==m&&(o&S)===0&&(S=m&-m,z=o&-o,S>=z||S===32&&(z&4194176)!==0)?o:m}function ce(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function je(s,o){switch(s){case 1:case 2:case 4:case 8:return o+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pn(){var s=Qt;return Qt<<=1,(Qt&4194176)===0&&(Qt=128),s}function hn(){var s=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),s}function xi(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function _i(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Nc(s,o,h,m,S,A){var z=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var X=s.entanglements,at=s.expirationTimes,St=s.hiddenUpdates;for(h=z&~h;0<h;){var Xt=31-_t(h),le=1<<Xt;X[Xt]=0,at[Xt]=-1;var Ot=St[Xt];if(Ot!==null)for(St[Xt]=null,Xt=0;Xt<Ot.length;Xt++){var jt=Ot[Xt];jt!==null&&(jt.lane&=-536870913)}h&=~le}m!==0&&Qr(s,m,0),A!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=A&~(z&~o))}function Qr(s,o,h){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-_t(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|h&4194218}function vs(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var m=31-_t(h),S=1<<m;S&o|s[m]&o&&(s[m]|=o),h&=~S}}function ys(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bs(){var s=Mt.p;return s!==0?s:(s=window.event,s===void 0?32:NT(s.type))}function va(s,o){var h=Mt.p;try{return Mt.p=s,o()}finally{Mt.p=h}}var ke=Math.random().toString(36).slice(2),ai="__reactFiber$"+ke,xn="__reactProps$"+ke,H="__reactContainer$"+ke,q="__reactEvents$"+ke,ht="__reactListeners$"+ke,Nt="__reactHandles$"+ke,Ht="__reactResources$"+ke,zt="__reactMarker$"+ke;function pe(s){delete s[ai],delete s[xn],delete s[q],delete s[ht],delete s[Nt]}function ie(s){var o=s[ai];if(o)return o;for(var h=s.parentNode;h;){if(o=h[H]||h[ai]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=gT(s);s!==null;){if(h=s[ai])return h;s=gT(s)}return o}s=h,h=s.parentNode}return null}function oe(s){if(s=s[ai]||s[H]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function ee(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function ge(s){var o=s[Ht];return o||(o=s[Ht]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function re(s){s[zt]=!0}var k=new Set,it={};function pt(s,o){yt(s,o),yt(s+"Capture",o)}function yt(s,o){for(it[s]=o,s=0;s<o.length;s++)k.add(o[s])}var dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ae=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ue={},fe={};function Te(s){return Fe.call(fe,s)?!0:Fe.call(ue,s)?!1:ae.test(s)?fe[s]=!0:(ue[s]=!0,!1)}function xe(s,o,h){if(Te(o))if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+h)}}function Ve(s,o,h){if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+h)}}function _e(s,o,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(o,h,""+m)}}function Ie(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function mn(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Vn(s){var o=mn(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,A=h.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return S.call(this)},set:function(z){m=""+z,A.call(this,z)}}),Object.defineProperty(s,o,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(z){m=""+z},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function gn(s){s._valueTracker||(s._valueTracker=Vn(s))}function Xe(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return s&&(m=mn(s)?s.checked?"true":"false":s.value),s=m,s!==h?(o.setValue(s),!0):!1}function we(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var qe=/[\n"\\]/g;function Ce(s){return s.replace(qe,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Hn(s,o,h,m,S,A,z,X){s.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?s.type=z:s.removeAttribute("type"),o!=null?z==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Ie(o)):s.value!==""+Ie(o)&&(s.value=""+Ie(o)):z!=="submit"&&z!=="reset"||s.removeAttribute("value"),o!=null?Bn(s,z,Ie(o)):h!=null?Bn(s,z,Ie(h)):m!=null&&s.removeAttribute("value"),S==null&&A!=null&&(s.defaultChecked=!!A),S!=null&&(s.checked=S&&typeof S!="function"&&typeof S!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?s.name=""+Ie(X):s.removeAttribute("name")}function ua(s,o,h,m,S,A,z,X){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),o!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||o!=null))return;h=h!=null?""+Ie(h):"",o=o!=null?""+Ie(o):h,X||o===s.value||(s.value=o),s.defaultValue=o}m=m??S,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=X?s.checked:!!m,s.defaultChecked=!!m,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(s.name=z)}function Bn(s,o,h){o==="number"&&we(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function Di(s,o,h,m){if(s=s.options,o){o={};for(var S=0;S<h.length;S++)o["$"+h[S]]=!0;for(h=0;h<s.length;h++)S=o.hasOwnProperty("$"+s[h].value),s[h].selected!==S&&(s[h].selected=S),S&&m&&(s[h].defaultSelected=!0)}else{for(h=""+Ie(h),o=null,S=0;S<s.length;S++){if(s[S].value===h){s[S].selected=!0,m&&(s[S].defaultSelected=!0);return}o!==null||s[S].disabled||(o=s[S])}o!==null&&(o.selected=!0)}}function jn(s,o,h){if(o!=null&&(o=""+Ie(o),o!==s.value&&(s.value=o),h==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=h!=null?""+Ie(h):""}function Ei(s,o,h,m){if(o==null){if(m!=null){if(h!=null)throw Error(n(92));if(Ct(m)){if(1<m.length)throw Error(n(93));m=m[0]}h=m}h==null&&(h=""),o=h}h=Ie(o),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m)}function Gi(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ki(s,o,h){var m=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,h):typeof h!="number"||h===0||ji.has(o)?o==="float"?s.cssFloat=h:s[o]=(""+h).trim():s[o]=h+"px"}function jl(s,o,h){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var S in o)m=o[S],o.hasOwnProperty(S)&&h[S]!==m&&ki(s,S,m)}else for(var A in o)o.hasOwnProperty(A)&&ki(s,A,o[A])}function xs(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Eg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qu(s){return Eg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ah=null;function Wu(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var kl=null,Xl=null;function wh(s){var o=oe(s);if(o&&(s=o.stateNode)){var h=s[xn]||null;t:switch(s=o.stateNode,o.type){case"input":if(Hn(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ce(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==s&&m.form===s.form){var S=m[xn]||null;if(!S)throw Error(n(90));Hn(m,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(o=0;o<h.length;o++)m=h[o],m.form===s.form&&Xe(m)}break t;case"textarea":jn(s,h.value,h.defaultValue);break t;case"select":o=h.value,o!=null&&Di(s,!!h.multiple,o,!1)}}}var Ch=!1;function Up(s,o,h){if(Ch)return s(o,h);Ch=!0;try{var m=s(o);return m}finally{if(Ch=!1,(kl!==null||Xl!==null)&&(dc(),kl&&(o=kl,s=Xl,Xl=kl=null,wh(o),s)))for(o=0;o<s.length;o++)wh(s[o])}}function Uc(s,o){var h=s.stateNode;if(h===null)return null;var m=h[xn]||null;if(m===null)return null;h=m[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(n(231,o,typeof h));return h}var Zu=!1;if(dt)try{var Oc={};Object.defineProperty(Oc,"passive",{get:function(){Zu=!0}}),window.addEventListener("test",Oc,Oc),window.removeEventListener("test",Oc,Oc)}catch{Zu=!1}var Jr=null,Op=null,Rh=null;function Lp(){if(Rh)return Rh;var s,o=Op,h=o.length,m,S="value"in Jr?Jr.value:Jr.textContent,A=S.length;for(s=0;s<h&&o[s]===S[s];s++);var z=h-s;for(m=1;m<=z&&o[h-m]===S[A-m];m++);return Rh=S.slice(s,1<m?1-m:void 0)}function ko(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Lc(){return!0}function Ku(){return!1}function Va(s){function o(h,m,S,A,z){this._reactName=h,this._targetInst=S,this.type=m,this.nativeEvent=A,this.target=z,this.currentTarget=null;for(var X in s)s.hasOwnProperty(X)&&(h=s[X],this[X]=h?h(A):A[X]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Lc:Ku,this.isPropagationStopped=Ku,this}return I(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Lc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Lc)},persist:function(){},isPersistent:Lc}),o}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pc=Va(Xo),Ic=I({},Xo,{view:0,detail:0}),Tg=Va(Ic),$r,Bc,zc,Fc=I({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ju,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==zc&&(zc&&s.type==="mousemove"?($r=s.screenX-zc.screenX,Bc=s.screenY-zc.screenY):Bc=$r=0,zc=s),$r)},movementY:function(s){return"movementY"in s?s.movementY:Bc}}),Pp=Va(Fc),Ag=I({},Fc,{dataTransfer:0}),l1=Va(Ag),ya=I({},Ic,{relatedTarget:0}),Dh=Va(ya),wg=I({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Cg=Va(wg),Rg=I({},Xo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Dg=Va(Rg),Qu=I({},Xo,{data:0}),Nh=Va(Qu),Ng={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ug={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Og={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ip(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Og[s])?!!o[s]:!1}function Ju(){return Ip}var Lg=I({},Ic,{key:function(s){if(s.key){var o=Ng[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=ko(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ug[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ju,charCode:function(s){return s.type==="keypress"?ko(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ko(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Bp=Va(Lg),zp=I({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uh=Va(zp),Pg=I({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ju}),Fp=Va(Pg),Ig=I({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),to=Va(Ig),Vp=I({},Fc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),c1=Va(Vp),Bg=I({},Xo,{newState:0,oldState:0}),Yo=Va(Bg),eo=[9,13,27,32],$u=dt&&"CompositionEvent"in window,Yl=null;dt&&"documentMode"in document&&(Yl=document.documentMode);var tf=dt&&"TextEvent"in window&&!Yl,ef=dt&&(!$u||Yl&&8<Yl&&11>=Yl),qo=" ",xa=!1;function nf(s,o){switch(s){case"keyup":return eo.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wo=!1;function af(s,o){switch(s){case"compositionend":return Hp(o);case"keypress":return o.which!==32?null:(xa=!0,qo);case"textInput":return s=o.data,s===qo&&xa?null:s;default:return null}}function Gp(s,o){if(Wo)return s==="compositionend"||!$u&&nf(s,o)?(s=Lp(),Rh=Op=Jr=null,Wo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ef&&o.locale!=="ko"?null:o.data;default:return null}}var Oh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Oh[s.type]:o==="textarea"}function Ja(s,o,h,m){kl?Xl?Xl.push(m):Xl=[m]:kl=m,o=Bv(o,"onChange"),0<o.length&&(h=new Pc("onChange","change",null,h,m),s.push({event:h,listeners:o}))}var Vc=null,ql=null;function zg(s){oT(s,0)}function sf(s){var o=ee(s);if(Xe(o))return s}function Lh(s,o){if(s==="change")return o}var Ph=!1;if(dt){var Ih;if(dt){var Hc="oninput"in document;if(!Hc){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),Hc=typeof Gc.oninput=="function"}Ih=Hc}else Ih=!1;Ph=Ih&&(!document.documentMode||9<document.documentMode)}function mi(){Vc&&(Vc.detachEvent("onpropertychange",Fg),ql=Vc=null)}function Fg(s){if(s.propertyName==="value"&&sf(ql)){var o=[];Ja(o,ql,s,Wu(s)),Up(zg,o)}}function u1(s,o,h){s==="focusin"?(mi(),Vc=o,ql=h,Vc.attachEvent("onpropertychange",Fg)):s==="focusout"&&mi()}function Vg(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return sf(ql)}function rf(s,o){if(s==="click")return sf(o)}function Zo(s,o){if(s==="input"||s==="change")return sf(o)}function Hg(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var $a=typeof Object.is=="function"?Object.is:Hg;function sr(s,o){if($a(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var S=h[m];if(!Fe.call(o,S)||!$a(s[S],o[S]))return!1}return!0}function ts(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kp(s,o){var h=ts(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=o&&m>=o)return{node:h,offset:o-s};s=m}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=ts(h)}}function Xp(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Xp(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Yp(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=we(s.document);o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=we(s.document)}return o}function of(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function qp(s,o){var h=Yp(o);o=s.focusedElem;var m=s.selectionRange;if(h!==o&&o&&o.ownerDocument&&Xp(o.ownerDocument.documentElement,o)){if(m!==null&&of(o)){if(s=m.start,h=m.end,h===void 0&&(h=s),"selectionStart"in o)o.selectionStart=s,o.selectionEnd=Math.min(h,o.value.length);else if(h=(s=o.ownerDocument||document)&&s.defaultView||window,h.getSelection){h=h.getSelection();var S=o.textContent.length,A=Math.min(m.start,S);m=m.end===void 0?A:Math.min(m.end,S),!h.extend&&A>m&&(S=m,m=A,A=S),S=kp(o,A);var z=kp(o,m);S&&z&&(h.rangeCount!==1||h.anchorNode!==S.node||h.anchorOffset!==S.offset||h.focusNode!==z.node||h.focusOffset!==z.offset)&&(s=s.createRange(),s.setStart(S.node,S.offset),h.removeAllRanges(),A>m?(h.addRange(s),h.extend(z.node,z.offset)):(s.setEnd(z.node,z.offset),h.addRange(s)))}}for(s=[],h=o;h=h.parentNode;)h.nodeType===1&&s.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<s.length;o++)h=s[o],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Bh=dt&&"documentMode"in document&&11>=document.documentMode,Wl=null,Wp=null,jc=null,zh=!1;function zs(s,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;zh||Wl==null||Wl!==we(m)||(m=Wl,"selectionStart"in m&&of(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),jc&&sr(jc,m)||(jc=m,m=Bv(Wp,"onSelect"),0<m.length&&(o=new Pc("onSelect","select",null,o,h),s.push({event:o,listeners:m}),o.target=Wl)))}function no(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var Zl={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},Zp={},Fh={};dt&&(Fh=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Xi(s){if(Zp[s])return Zp[s];if(!Zl[s])return s;var o=Zl[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in Fh)return Zp[s]=o[h];return s}var Kp=Xi("animationend"),es=Xi("animationiteration"),Qp=Xi("animationstart"),io=Xi("transitionrun"),kc=Xi("transitionstart"),Ko=Xi("transitioncancel"),Vh=Xi("transitionend"),Hh=new Map,ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Fs(s,o){Hh.set(s,o),pt(o,[s])}var _a=[],Tr=0,so=0;function lf(){for(var s=Tr,o=so=Tr=0;o<s;){var h=_a[o];_a[o++]=null;var m=_a[o];_a[o++]=null;var S=_a[o];_a[o++]=null;var A=_a[o];if(_a[o++]=null,m!==null&&S!==null){var z=m.pending;z===null?S.next=S:(S.next=z.next,z.next=S),m.pending=S}A!==0&&uf(h,S,A)}}function cf(s,o,h,m){_a[Tr++]=s,_a[Tr++]=o,_a[Tr++]=h,_a[Tr++]=m,so|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Kl(s,o,h,m){return cf(s,o,h,m),ff(s)}function ro(s,o){return cf(s,null,null,o),ff(s)}function uf(s,o,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var S=!1,A=s.return;A!==null;)A.childLanes|=h,m=A.alternate,m!==null&&(m.childLanes|=h),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(S=!0)),s=A,A=A.return;S&&o!==null&&s.tag===3&&(A=s.stateNode,S=31-_t(h),A=A.hiddenUpdates,s=A[S],s===null?A[S]=[o]:s.push(o),o.lane=h|536870912)}function ff(s){if(50<Zs)throw Zs=0,Co=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Qo={},Gh=new WeakMap;function ns(s,o){if(typeof s=="object"&&s!==null){var h=Gh.get(s);return h!==void 0?h:(o={value:s,source:o,stack:et(o)},Gh.set(s,o),o)}return{value:s,source:o,stack:et(o)}}var Ql=[],Jo=0,wa=null,hf=0,si=[],_s=0,oo=null,Ar=1,lo="";function Ha(s,o){Ql[Jo++]=hf,Ql[Jo++]=wa,wa=s,hf=o}function Jp(s,o,h){si[_s++]=Ar,si[_s++]=lo,si[_s++]=oo,oo=s;var m=Ar;s=lo;var S=32-_t(m)-1;m&=~(1<<S),h+=1;var A=32-_t(o)+S;if(30<A){var z=S-S%5;A=(m&(1<<z)-1).toString(32),m>>=z,S-=z,Ar=1<<32-_t(o)+S|h<<S|m,lo=A+s}else Ar=1<<A|h<<S|m,lo=s}function df(s){s.return!==null&&(Ha(s,1),Jp(s,1,0))}function $o(s){for(;s===wa;)wa=Ql[--Jo],Ql[Jo]=null,hf=Ql[--Jo],Ql[Jo]=null;for(;s===oo;)oo=si[--_s],si[_s]=null,lo=si[--_s],si[_s]=null,Ar=si[--_s],si[_s]=null}var Ca=null,fa=null,Ln=!1,Vs=null,Hs=!1,pf=Error(n(519));function Jl(s){var o=Error(n(418,""));throw wr(ns(o,s)),pf}function Gg(s){var o=s.stateNode,h=s.type,m=s.memoizedProps;switch(o[ai]=s,o[xn]=m,h){case"dialog":In("cancel",o),In("close",o);break;case"iframe":case"object":case"embed":In("load",o);break;case"video":case"audio":for(h=0;h<Um.length;h++)In(Um[h],o);break;case"source":In("error",o);break;case"img":case"image":case"link":In("error",o),In("load",o);break;case"details":In("toggle",o);break;case"input":In("invalid",o),ua(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),gn(o);break;case"select":In("invalid",o);break;case"textarea":In("invalid",o),Ei(o,m.value,m.defaultValue,m.children),gn(o)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||m.suppressHydrationWarning===!0||fT(o.textContent,h)?(m.popover!=null&&(In("beforetoggle",o),In("toggle",o)),m.onScroll!=null&&In("scroll",o),m.onScrollEnd!=null&&In("scrollend",o),m.onClick!=null&&(o.onclick=zv),o=!0):o=!1,o||Jl(s)}function jg(s){for(Ca=s.return;Ca;)switch(Ca.tag){case 3:case 27:Hs=!0;return;case 5:case 13:Hs=!1;return;default:Ca=Ca.return}}function Xc(s){if(s!==Ca)return!1;if(!Ln)return jg(s),Ln=!0,!1;var o=!1,h;if((h=s.tag!==3&&s.tag!==27)&&((h=s.tag===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||D1(s.type,s.memoizedProps)),h=!h),h&&(o=!0),o&&fa&&Jl(s),jg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(h=s.data,h==="/$"){if(o===0){fa=Do(s.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++;s=s.nextSibling}fa=null}}else fa=Ca?Do(s.stateNode.nextSibling):null;return!0}function Yc(){fa=Ca=null,Ln=!1}function wr(s){Vs===null?Vs=[s]:Vs.push(s)}var tl=Error(n(460)),$p=Error(n(474)),jh={then:function(){}};function kg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function mf(){}function el(s,o,h){switch(h=s[h],h===void 0?s.push(o):h!==o&&(o.then(mf,mf),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===tl?Error(n(483)):s;default:if(typeof o.status=="string")o.then(mf,mf);else{if(s=Qn,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var S=o;S.status="fulfilled",S.value=m}},function(m){if(o.status==="pending"){var S=o;S.status="rejected",S.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,s===tl?Error(n(483)):s}throw qc=o,tl}}var qc=null;function kn(){if(qc===null)throw Error(n(459));var s=qc;return qc=null,s}var nl=null,gf=0;function vf(s){var o=gf;return gf+=1,nl===null&&(nl=[]),el(nl,s,o)}function yf(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function kh(s,o){throw o.$$typeof===r?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Xg(s){var o=s._init;return o(s._payload)}function Yg(s){function o(Et,xt){if(s){var Dt=Et.deletions;Dt===null?(Et.deletions=[xt],Et.flags|=16):Dt.push(xt)}}function h(Et,xt){if(!s)return null;for(;xt!==null;)o(Et,xt),xt=xt.sibling;return null}function m(Et){for(var xt=new Map;Et!==null;)Et.key!==null?xt.set(Et.key,Et):xt.set(Et.index,Et),Et=Et.sibling;return xt}function S(Et,xt){return Et=Xa(Et,xt),Et.index=0,Et.sibling=null,Et}function A(Et,xt,Dt){return Et.index=Dt,s?(Dt=Et.alternate,Dt!==null?(Dt=Dt.index,Dt<xt?(Et.flags|=33554434,xt):Dt):(Et.flags|=33554434,xt)):(Et.flags|=1048576,xt)}function z(Et){return s&&Et.alternate===null&&(Et.flags|=33554434),Et}function X(Et,xt,Dt,Jt){return xt===null||xt.tag!==6?(xt=Zi(Dt,Et.mode,Jt),xt.return=Et,xt):(xt=S(xt,Dt),xt.return=Et,xt)}function at(Et,xt,Dt,Jt){var Ge=Dt.type;return Ge===d?Xt(Et,xt,Dt.props.children,Jt,Dt.key):xt!==null&&(xt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===R&&Xg(Ge)===xt.type)?(xt=S(xt,Dt.props),yf(xt,Dt),xt.return=Et,xt):(xt=lu(Dt.type,Dt.key,Dt.props,null,Et.mode,Jt),yf(xt,Dt),xt.return=Et,xt)}function St(Et,xt,Dt,Jt){return xt===null||xt.tag!==4||xt.stateNode.containerInfo!==Dt.containerInfo||xt.stateNode.implementation!==Dt.implementation?(xt=Df(Dt,Et.mode,Jt),xt.return=Et,xt):(xt=S(xt,Dt.children||[]),xt.return=Et,xt)}function Xt(Et,xt,Dt,Jt,Ge){return xt===null||xt.tag!==7?(xt=Sl(Dt,Et.mode,Jt,Ge),xt.return=Et,xt):(xt=S(xt,Dt),xt.return=Et,xt)}function le(Et,xt,Dt){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return xt=Zi(""+xt,Et.mode,Dt),xt.return=Et,xt;if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case l:return Dt=lu(xt.type,xt.key,xt.props,null,Et.mode,Dt),yf(Dt,xt),Dt.return=Et,Dt;case u:return xt=Df(xt,Et.mode,Dt),xt.return=Et,xt;case R:var Jt=xt._init;return xt=Jt(xt._payload),le(Et,xt,Dt)}if(Ct(xt)||B(xt))return xt=Sl(xt,Et.mode,Dt,null),xt.return=Et,xt;if(typeof xt.then=="function")return le(Et,vf(xt),Dt);if(xt.$$typeof===_)return le(Et,od(Et,xt),Dt);kh(Et,xt)}return null}function Ot(Et,xt,Dt,Jt){var Ge=xt!==null?xt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Ge!==null?null:X(Et,xt,""+Dt,Jt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case l:return Dt.key===Ge?at(Et,xt,Dt,Jt):null;case u:return Dt.key===Ge?St(Et,xt,Dt,Jt):null;case R:return Ge=Dt._init,Dt=Ge(Dt._payload),Ot(Et,xt,Dt,Jt)}if(Ct(Dt)||B(Dt))return Ge!==null?null:Xt(Et,xt,Dt,Jt,null);if(typeof Dt.then=="function")return Ot(Et,xt,vf(Dt),Jt);if(Dt.$$typeof===_)return Ot(Et,xt,od(Et,Dt),Jt);kh(Et,Dt)}return null}function jt(Et,xt,Dt,Jt,Ge){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number"||typeof Jt=="bigint")return Et=Et.get(Dt)||null,X(xt,Et,""+Jt,Ge);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case l:return Et=Et.get(Jt.key===null?Dt:Jt.key)||null,at(xt,Et,Jt,Ge);case u:return Et=Et.get(Jt.key===null?Dt:Jt.key)||null,St(xt,Et,Jt,Ge);case R:var Dn=Jt._init;return Jt=Dn(Jt._payload),jt(Et,xt,Dt,Jt,Ge)}if(Ct(Jt)||B(Jt))return Et=Et.get(Dt)||null,Xt(xt,Et,Jt,Ge,null);if(typeof Jt.then=="function")return jt(Et,xt,Dt,vf(Jt),Ge);if(Jt.$$typeof===_)return jt(Et,xt,Dt,od(xt,Jt),Ge);kh(xt,Jt)}return null}function Ze(Et,xt,Dt,Jt){for(var Ge=null,Dn=null,Je=xt,an=xt=0,Pa=null;Je!==null&&an<Dt.length;an++){Je.index>an?(Pa=Je,Je=null):Pa=Je.sibling;var Xn=Ot(Et,Je,Dt[an],Jt);if(Xn===null){Je===null&&(Je=Pa);break}s&&Je&&Xn.alternate===null&&o(Et,Je),xt=A(Xn,xt,an),Dn===null?Ge=Xn:Dn.sibling=Xn,Dn=Xn,Je=Pa}if(an===Dt.length)return h(Et,Je),Ln&&Ha(Et,an),Ge;if(Je===null){for(;an<Dt.length;an++)Je=le(Et,Dt[an],Jt),Je!==null&&(xt=A(Je,xt,an),Dn===null?Ge=Je:Dn.sibling=Je,Dn=Je);return Ln&&Ha(Et,an),Ge}for(Je=m(Je);an<Dt.length;an++)Pa=jt(Je,Et,an,Dt[an],Jt),Pa!==null&&(s&&Pa.alternate!==null&&Je.delete(Pa.key===null?an:Pa.key),xt=A(Pa,xt,an),Dn===null?Ge=Pa:Dn.sibling=Pa,Dn=Pa);return s&&Je.forEach(function(vu){return o(Et,vu)}),Ln&&Ha(Et,an),Ge}function dn(Et,xt,Dt,Jt){if(Dt==null)throw Error(n(151));for(var Ge=null,Dn=null,Je=xt,an=xt=0,Pa=null,Xn=Dt.next();Je!==null&&!Xn.done;an++,Xn=Dt.next()){Je.index>an?(Pa=Je,Je=null):Pa=Je.sibling;var vu=Ot(Et,Je,Xn.value,Jt);if(vu===null){Je===null&&(Je=Pa);break}s&&Je&&vu.alternate===null&&o(Et,Je),xt=A(vu,xt,an),Dn===null?Ge=vu:Dn.sibling=vu,Dn=vu,Je=Pa}if(Xn.done)return h(Et,Je),Ln&&Ha(Et,an),Ge;if(Je===null){for(;!Xn.done;an++,Xn=Dt.next())Xn=le(Et,Xn.value,Jt),Xn!==null&&(xt=A(Xn,xt,an),Dn===null?Ge=Xn:Dn.sibling=Xn,Dn=Xn);return Ln&&Ha(Et,an),Ge}for(Je=m(Je);!Xn.done;an++,Xn=Dt.next())Xn=jt(Je,Et,an,Xn.value,Jt),Xn!==null&&(s&&Xn.alternate!==null&&Je.delete(Xn.key===null?an:Xn.key),xt=A(Xn,xt,an),Dn===null?Ge=Xn:Dn.sibling=Xn,Dn=Xn);return s&&Je.forEach(function(kU){return o(Et,kU)}),Ln&&Ha(Et,an),Ge}function Ji(Et,xt,Dt,Jt){if(typeof Dt=="object"&&Dt!==null&&Dt.type===d&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case l:t:{for(var Ge=Dt.key;xt!==null;){if(xt.key===Ge){if(Ge=Dt.type,Ge===d){if(xt.tag===7){h(Et,xt.sibling),Jt=S(xt,Dt.props.children),Jt.return=Et,Et=Jt;break t}}else if(xt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===R&&Xg(Ge)===xt.type){h(Et,xt.sibling),Jt=S(xt,Dt.props),yf(Jt,Dt),Jt.return=Et,Et=Jt;break t}h(Et,xt);break}else o(Et,xt);xt=xt.sibling}Dt.type===d?(Jt=Sl(Dt.props.children,Et.mode,Jt,Dt.key),Jt.return=Et,Et=Jt):(Jt=lu(Dt.type,Dt.key,Dt.props,null,Et.mode,Jt),yf(Jt,Dt),Jt.return=Et,Et=Jt)}return z(Et);case u:t:{for(Ge=Dt.key;xt!==null;){if(xt.key===Ge)if(xt.tag===4&&xt.stateNode.containerInfo===Dt.containerInfo&&xt.stateNode.implementation===Dt.implementation){h(Et,xt.sibling),Jt=S(xt,Dt.children||[]),Jt.return=Et,Et=Jt;break t}else{h(Et,xt);break}else o(Et,xt);xt=xt.sibling}Jt=Df(Dt,Et.mode,Jt),Jt.return=Et,Et=Jt}return z(Et);case R:return Ge=Dt._init,Dt=Ge(Dt._payload),Ji(Et,xt,Dt,Jt)}if(Ct(Dt))return Ze(Et,xt,Dt,Jt);if(B(Dt)){if(Ge=B(Dt),typeof Ge!="function")throw Error(n(150));return Dt=Ge.call(Dt),dn(Et,xt,Dt,Jt)}if(typeof Dt.then=="function")return Ji(Et,xt,vf(Dt),Jt);if(Dt.$$typeof===_)return Ji(Et,xt,od(Et,Dt),Jt);kh(Et,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,xt!==null&&xt.tag===6?(h(Et,xt.sibling),Jt=S(xt,Dt),Jt.return=Et,Et=Jt):(h(Et,xt),Jt=Zi(Dt,Et.mode,Jt),Jt.return=Et,Et=Jt),z(Et)):h(Et,xt)}return function(Et,xt,Dt,Jt){try{gf=0;var Ge=Ji(Et,xt,Dt,Jt);return nl=null,Ge}catch(Je){if(Je===tl)throw Je;var Dn=Bi(29,Je,null,Et.mode);return Dn.lanes=Jt,Dn.return=Et,Dn}finally{}}}var co=Yg(!0),uo=Yg(!1),$l=Ft(null),tc=Ft(0);function il(s,o){s=wo,$t(tc,s),$t($l,o),wo=s|o.baseLanes}function Xh(){$t(tc,wo),$t($l,$l.current)}function xf(){wo=tc.current,Se($l),Se(tc)}var is=Ft(null),Cr=null;function fo(s){var o=s.alternate;$t(Yi,Yi.current&1),$t(is,s),Cr===null&&(o===null||$l.current!==null||o.memoizedState!==null)&&(Cr=s)}function tm(s){if(s.tag===22){if($t(Yi,Yi.current),$t(is,s),Cr===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Cr=s)}}else ho()}function ho(){$t(Yi,Yi.current),$t(is,is.current)}function Rr(s){Se(is),Cr===s&&(Cr=null),Se(Yi)}var Yi=Ft(0);function Wc(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var An=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(h){return h()})}},f1=i.unstable_scheduleCallback,Ss=i.unstable_NormalPriority,Ni={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function em(){return{controller:new An,data:new Map,refCount:0}}function al(s){s.refCount--,s.refCount===0&&f1(Ss,function(){s.controller.abort()})}var Dr=null,sl=0,ec=0,rl=null;function h1(s,o){if(Dr===null){var h=Dr=[];sl=0,ec=S1(),rl={status:"pending",value:void 0,then:function(m){h.push(m)}}}return sl++,o.then(nm,nm),o}function nm(){if(--sl===0&&Dr!==null){rl!==null&&(rl.status="fulfilled");var s=Dr;Dr=null,ec=0,rl=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function ol(s,o){var h=[],m={status:"pending",value:null,reason:null,then:function(S){h.push(S)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var S=0;S<h.length;S++)(0,h[S])(o)},function(S){for(m.status="rejected",m.reason=S,S=0;S<h.length;S++)(0,h[S])(void 0)}),m}var Yh=N.S;N.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&h1(s,o),Yh!==null&&Yh(s,o)};var po=Ft(null);function _f(){var s=po.current;return s!==null?s:Qn.pooledCache}function Zc(s,o){o===null?$t(po,po.current):$t(po,o.pool)}function mo(){var s=_f();return s===null?null:{parent:Ni._currentValue,pool:s}}var go=0,_n=null,Yn=null,qi=null,nn=!1,ll=!1,cl=!1,Kc=0,ul=0,Qc=null,d1=0;function Ti(){throw Error(n(321))}function nc(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!$a(s[h],o[h]))return!1;return!0}function im(s,o,h,m,S,A){return go=A,_n=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,N.H=s===null||s.memoizedState===null?hl:yo,cl=!1,A=h(m,S),cl=!1,ll&&(A=Wg(o,h,m,S)),qg(s),A}function qg(s){N.H=Ur;var o=Yn!==null&&Yn.next!==null;if(go=0,qi=Yn=_n=null,nn=!1,ul=0,Qc=null,o)throw Error(n(300));s===null||aa||(s=s.dependencies,s!==null&&nu(s)&&(aa=!0))}function Wg(s,o,h,m){_n=s;var S=0;do{if(ll&&(Qc=null),ul=0,ll=!1,25<=S)throw Error(n(301));if(S+=1,qi=Yn=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}N.H=sc,A=o(h,m)}while(ll);return A}function p1(){var s=N.H,o=s.useState()[0];return o=typeof o.then=="function"?bf(o):o,s=s.useState()[0],(Yn!==null?Yn.memoizedState:null)!==s&&(_n.flags|=1024),o}function am(){var s=Kc!==0;return Kc=0,s}function Sf(s,o,h){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~h}function qh(s){if(nn){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}nn=!1}go=0,qi=Yn=_n=null,ll=!1,ul=Kc=0,Qc=null}function Sa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?_n.memoizedState=qi=s:qi=qi.next=s,qi}function Ui(){if(Yn===null){var s=_n.alternate;s=s!==null?s.memoizedState:null}else s=Yn.next;var o=qi===null?_n.memoizedState:qi.next;if(o!==null)qi=o,Yn=s;else{if(s===null)throw _n.alternate===null?Error(n(467)):Error(n(310));Yn=s,s={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},qi===null?_n.memoizedState=qi=s:qi=qi.next=s}return qi}var Wh;Wh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function bf(s){var o=ul;return ul+=1,Qc===null&&(Qc=[]),s=el(Qc,s,o),o=_n,(qi===null?o.memoizedState:qi.next)===null&&(o=o.alternate,N.H=o===null||o.memoizedState===null?hl:yo),s}function Jc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return bf(s);if(s.$$typeof===_)return Ra(s)}throw Error(n(438,String(s)))}function rr(s){var o=null,h=_n.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var m=_n.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(S){return S.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=Wh(),_n.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(s),m=0;m<s;m++)h[m]=L;return o.index++,h}function gi(s,o){return typeof o=="function"?o(s):o}function or(s){var o=Ui();return as(o,Yn,s)}function as(s,o,h){var m=s.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=h;var S=s.baseQueue,A=m.pending;if(A!==null){if(S!==null){var z=S.next;S.next=A.next,A.next=z}o.baseQueue=S=A,m.pending=null}if(A=s.baseState,S===null)s.memoizedState=A;else{o=S.next;var X=z=null,at=null,St=o,Xt=!1;do{var le=St.lane&-536870913;if(le!==St.lane?($e&le)===le:(go&le)===le){var Ot=St.revertLane;if(Ot===0)at!==null&&(at=at.next={lane:0,revertLane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),le===ec&&(Xt=!0);else if((go&Ot)===Ot){St=St.next,Ot===ec&&(Xt=!0);continue}else le={lane:0,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},at===null?(X=at=le,z=A):at=at.next=le,_n.lanes|=Ot,pr|=Ot;le=St.action,cl&&h(A,le),A=St.hasEagerState?St.eagerState:h(A,le)}else Ot={lane:le,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},at===null?(X=at=Ot,z=A):at=at.next=Ot,_n.lanes|=le,pr|=le;St=St.next}while(St!==null&&St!==o);if(at===null?z=A:at.next=X,!$a(A,s.memoizedState)&&(aa=!0,Xt&&(h=rl,h!==null)))throw h;s.memoizedState=A,s.baseState=z,s.baseQueue=at,m.lastRenderedState=A}return S===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function Zh(s){var o=Ui(),h=o.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var m=h.dispatch,S=h.pending,A=o.memoizedState;if(S!==null){h.pending=null;var z=S=S.next;do A=s(A,z.action),z=z.next;while(z!==S);$a(A,o.memoizedState)||(aa=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),h.lastRenderedState=A}return[A,m]}function Zg(s,o,h){var m=_n,S=Ui(),A=Ln;if(A){if(h===void 0)throw Error(n(407));h=h()}else h=o();var z=!$a((Yn||S).memoizedState,h);if(z&&(S.memoizedState=h,aa=!0),S=S.queue,lm(Kg.bind(null,m,S,s),[s]),S.getSnapshot!==o||z||qi!==null&&qi.memoizedState.tag&1){if(m.flags|=2048,Nr(9,fl.bind(null,m,S,h,o),{destroy:void 0},null),Qn===null)throw Error(n(349));A||(go&60)!==0||Ga(m,o,h)}return h}function Ga(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=_n.updateQueue,o===null?(o=Wh(),_n.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function fl(s,o,h,m){o.value=h,o.getSnapshot=m,Qg(o)&&Jg(s)}function Kg(s,o,h){return h(function(){Qg(o)&&Jg(s)})}function Qg(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!$a(s,h)}catch{return!0}}function Jg(s){var o=ro(s,2);o!==null&&Qi(o,s,2)}function sm(s){var o=Sa();if(typeof s=="function"){var h=s;if(s=h(),cl){nt(!0);try{h()}finally{nt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:s},o}function rm(s,o,h,m){return s.baseState=h,as(s,Yn,typeof m=="function"?m:gi)}function m1(s,o,h,m,S){if(td(s))throw Error(n(485));if(s=o.action,s!==null){var A={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){A.listeners.push(z)}};N.T!==null?h(!0):A.isTransition=!1,m(A),h=o.pending,h===null?(A.next=o.pending=A,om(o,A)):(A.next=h.next,o.pending=h.next=A)}}function om(s,o){var h=o.action,m=o.payload,S=s.state;if(o.isTransition){var A=N.T,z={};N.T=z;try{var X=h(S,m),at=N.S;at!==null&&at(z,X),$g(s,o,X)}catch(St){vo(s,o,St)}finally{N.T=A}}else try{A=h(S,m),$g(s,o,A)}catch(St){vo(s,o,St)}}function $g(s,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){ic(s,o,m)},function(m){return vo(s,o,m)}):ic(s,o,h)}function ic(s,o,h){o.status="fulfilled",o.value=h,tv(o),s.state=h,o=s.pending,o!==null&&(h=o.next,h===o?s.pending=null:(h=h.next,o.next=h,om(s,h)))}function vo(s,o,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=h,tv(o),o=o.next;while(o!==m)}s.action=null}function tv(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function ev(s,o){return o}function nv(s,o){if(Ln){var h=Qn.formState;if(h!==null){t:{var m=_n;if(Ln){if(fa){e:{for(var S=fa,A=Hs;S.nodeType!==8;){if(!A){S=null;break e}if(S=Do(S.nextSibling),S===null){S=null;break e}}A=S.data,S=A==="F!"||A==="F"?S:null}if(S){fa=Do(S.nextSibling),m=S.data==="F!";break t}}Jl(m)}m=!1}m&&(o=h[0])}}return h=Sa(),h.memoizedState=h.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ev,lastRenderedState:o},h.queue=m,h=hm.bind(null,_n,m),m.dispatch=h,m=sm(!1),A=Mf.bind(null,_n,!1,m.queue),m=Sa(),S={state:o,dispatch:null,action:s,pending:null},m.queue=S,h=m1.bind(null,_n,S,A,h),S.dispatch=h,m.memoizedState=s,[o,h,!1]}function $c(s){var o=Ui();return iv(o,Yn,s)}function iv(s,o,h){o=as(s,o,ev)[0],s=or(gi)[0],o=typeof o=="object"&&o!==null&&typeof o.then=="function"?bf(o):o;var m=Ui(),S=m.queue,A=S.dispatch;return h!==m.memoizedState&&(_n.flags|=2048,Nr(9,g1.bind(null,S,h),{destroy:void 0},null)),[o,A,s]}function g1(s,o){s.action=o}function av(s){var o=Ui(),h=Yn;if(h!==null)return iv(o,h,s);Ui(),o=o.memoizedState,h=Ui();var m=h.queue.dispatch;return h.memoizedState=s,[o,m,!1]}function Nr(s,o,h,m){return s={tag:s,create:o,inst:h,deps:m,next:null},o=_n.updateQueue,o===null&&(o=Wh(),_n.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,o.lastEffect=s),s}function sv(){return Ui().memoizedState}function Kh(s,o,h,m){var S=Sa();_n.flags|=s,S.memoizedState=Nr(1|o,h,{destroy:void 0},m===void 0?null:m)}function Qh(s,o,h,m){var S=Ui();m=m===void 0?null:m;var A=S.memoizedState.inst;Yn!==null&&m!==null&&nc(m,Yn.memoizedState.deps)?S.memoizedState=Nr(o,h,A,m):(_n.flags|=s,S.memoizedState=Nr(1|o,h,A,m))}function rv(s,o){Kh(8390656,8,s,o)}function lm(s,o){Qh(2048,8,s,o)}function ov(s,o){return Qh(4,2,s,o)}function lv(s,o){return Qh(4,4,s,o)}function cv(s,o){if(typeof o=="function"){s=s();var h=o(s);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function uv(s,o,h){h=h!=null?h.concat([s]):null,Qh(4,4,cv.bind(null,o,s),h)}function cm(){}function fv(s,o){var h=Ui();o=o===void 0?null:o;var m=h.memoizedState;return o!==null&&nc(o,m[1])?m[0]:(h.memoizedState=[s,o],s)}function hv(s,o){var h=Ui();o=o===void 0?null:o;var m=h.memoizedState;if(o!==null&&nc(o,m[1]))return m[0];if(m=s(),cl){nt(!0);try{s()}finally{nt(!1)}}return h.memoizedState=[m,o],m}function Jh(s,o,h){return h===void 0||(go&1073741824)!==0?s.memoizedState=o:(s.memoizedState=h,s=As(),_n.lanes|=s,pr|=s,h)}function dv(s,o,h,m){return $a(h,o)?h:$l.current!==null?(s=Jh(s,h,m),$a(s,o)||(aa=!0),s):(go&42)===0?(aa=!0,s.memoizedState=h):(s=As(),_n.lanes|=s,pr|=s,o)}function pv(s,o,h,m,S){var A=Mt.p;Mt.p=A!==0&&8>A?A:8;var z=N.T,X={};N.T=X,Mf(s,!1,o,h);try{var at=S(),St=N.S;if(St!==null&&St(X,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var Xt=ol(at,m);ac(s,o,Xt,qa(s))}else ac(s,o,m,qa(s))}catch(le){ac(s,o,{then:function(){},status:"rejected",reason:le},qa())}finally{Mt.p=A,N.T=z}}function v1(){}function um(s,o,h,m){if(s.tag!==5)throw Error(n(476));var S=mv(s).queue;pv(s,S,o,Vt,h===null?v1:function(){return gv(s),h(m)})}function mv(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Vt,baseState:Vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:Vt},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:h},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function gv(s){var o=mv(s).next.queue;ac(s,o,{},qa())}function $h(){return Ra(Bm)}function fm(){return Ui().memoizedState}function vv(){return Ui().memoizedState}function yv(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var h=qa();s=Es(h);var m=Ts(o,s,h);m!==null&&(Qi(m,o,h),ml(m,o,h)),o={cache:em()},s.payload=o;return}o=o.return}}function xv(s,o,h){var m=qa();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},td(s)?_v(o,h):(h=Kl(s,o,h,m),h!==null&&(Qi(h,s,m),Sv(h,o,m)))}function hm(s,o,h){var m=qa();ac(s,o,h,m)}function ac(s,o,h,m){var S={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(td(s))_v(o,S);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var z=o.lastRenderedState,X=A(z,h);if(S.hasEagerState=!0,S.eagerState=X,$a(X,z))return cf(s,o,S,0),Qn===null&&lf(),!1}catch{}finally{}if(h=Kl(s,o,S,m),h!==null)return Qi(h,s,m),Sv(h,o,m),!0}return!1}function Mf(s,o,h,m){if(m={lane:2,revertLane:S1(),action:m,hasEagerState:!1,eagerState:null,next:null},td(s)){if(o)throw Error(n(479))}else o=Kl(s,h,m,2),o!==null&&Qi(o,s,2)}function td(s){var o=s.alternate;return s===_n||o!==null&&o===_n}function _v(s,o){ll=nn=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function Sv(s,o,h){if((h&4194176)!==0){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,vs(s,h)}}var Ur={readContext:Ra,use:Jc,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useLayoutEffect:Ti,useInsertionEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useSyncExternalStore:Ti,useId:Ti};Ur.useCacheRefresh=Ti,Ur.useMemoCache=Ti,Ur.useHostTransitionStatus=Ti,Ur.useFormState=Ti,Ur.useActionState=Ti,Ur.useOptimistic=Ti;var hl={readContext:Ra,use:Jc,useCallback:function(s,o){return Sa().memoizedState=[s,o===void 0?null:o],s},useContext:Ra,useEffect:rv,useImperativeHandle:function(s,o,h){h=h!=null?h.concat([s]):null,Kh(4194308,4,cv.bind(null,o,s),h)},useLayoutEffect:function(s,o){return Kh(4194308,4,s,o)},useInsertionEffect:function(s,o){Kh(4,2,s,o)},useMemo:function(s,o){var h=Sa();o=o===void 0?null:o;var m=s();if(cl){nt(!0);try{s()}finally{nt(!1)}}return h.memoizedState=[m,o],m},useReducer:function(s,o,h){var m=Sa();if(h!==void 0){var S=h(o);if(cl){nt(!0);try{h(o)}finally{nt(!1)}}}else S=o;return m.memoizedState=m.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},m.queue=s,s=s.dispatch=xv.bind(null,_n,s),[m.memoizedState,s]},useRef:function(s){var o=Sa();return s={current:s},o.memoizedState=s},useState:function(s){s=sm(s);var o=s.queue,h=hm.bind(null,_n,o);return o.dispatch=h,[s.memoizedState,h]},useDebugValue:cm,useDeferredValue:function(s,o){var h=Sa();return Jh(h,s,o)},useTransition:function(){var s=sm(!1);return s=pv.bind(null,_n,s.queue,!0,!1),Sa().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,h){var m=_n,S=Sa();if(Ln){if(h===void 0)throw Error(n(407));h=h()}else{if(h=o(),Qn===null)throw Error(n(349));($e&60)!==0||Ga(m,o,h)}S.memoizedState=h;var A={value:h,getSnapshot:o};return S.queue=A,rv(Kg.bind(null,m,A,s),[s]),m.flags|=2048,Nr(9,fl.bind(null,m,A,h,o),{destroy:void 0},null),h},useId:function(){var s=Sa(),o=Qn.identifierPrefix;if(Ln){var h=lo,m=Ar;h=(m&~(1<<32-_t(m)-1)).toString(32)+h,o=":"+o+"R"+h,h=Kc++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=d1++,o=":"+o+"r"+h.toString(32)+":";return s.memoizedState=o},useCacheRefresh:function(){return Sa().memoizedState=yv.bind(null,_n)}};hl.useMemoCache=rr,hl.useHostTransitionStatus=$h,hl.useFormState=nv,hl.useActionState=nv,hl.useOptimistic=function(s){var o=Sa();o.memoizedState=o.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=Mf.bind(null,_n,!0,h),h.dispatch=o,[s,o]};var yo={readContext:Ra,use:Jc,useCallback:fv,useContext:Ra,useEffect:lm,useImperativeHandle:uv,useInsertionEffect:ov,useLayoutEffect:lv,useMemo:hv,useReducer:or,useRef:sv,useState:function(){return or(gi)},useDebugValue:cm,useDeferredValue:function(s,o){var h=Ui();return dv(h,Yn.memoizedState,s,o)},useTransition:function(){var s=or(gi)[0],o=Ui().memoizedState;return[typeof s=="boolean"?s:bf(s),o]},useSyncExternalStore:Zg,useId:fm};yo.useCacheRefresh=vv,yo.useMemoCache=rr,yo.useHostTransitionStatus=$h,yo.useFormState=$c,yo.useActionState=$c,yo.useOptimistic=function(s,o){var h=Ui();return rm(h,Yn,s,o)};var sc={readContext:Ra,use:Jc,useCallback:fv,useContext:Ra,useEffect:lm,useImperativeHandle:uv,useInsertionEffect:ov,useLayoutEffect:lv,useMemo:hv,useReducer:Zh,useRef:sv,useState:function(){return Zh(gi)},useDebugValue:cm,useDeferredValue:function(s,o){var h=Ui();return Yn===null?Jh(h,s,o):dv(h,Yn.memoizedState,s,o)},useTransition:function(){var s=Zh(gi)[0],o=Ui().memoizedState;return[typeof s=="boolean"?s:bf(s),o]},useSyncExternalStore:Zg,useId:fm};sc.useCacheRefresh=vv,sc.useMemoCache=rr,sc.useHostTransitionStatus=$h,sc.useFormState=av,sc.useActionState=av,sc.useOptimistic=function(s,o){var h=Ui();return Yn!==null?rm(h,Yn,s,o):(h.baseState=s,[s,h.queue.dispatch])};function dm(s,o,h,m){o=s.memoizedState,h=h(m,o),h=h==null?o:I({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var pm={isMounted:function(s){return(s=s._reactInternals)?vt(s)===s:!1},enqueueSetState:function(s,o,h){s=s._reactInternals;var m=qa(),S=Es(m);S.payload=o,h!=null&&(S.callback=h),o=Ts(s,S,m),o!==null&&(Qi(o,s,m),ml(o,s,m))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var m=qa(),S=Es(m);S.tag=1,S.payload=o,h!=null&&(S.callback=h),o=Ts(s,S,m),o!==null&&(Qi(o,s,m),ml(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=qa(),m=Es(h);m.tag=2,o!=null&&(m.callback=o),o=Ts(s,m,h),o!==null&&(Qi(o,s,h),ml(o,s,h))}};function bv(s,o,h,m,S,A,z){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,A,z):o.prototype&&o.prototype.isPureReactComponent?!sr(h,m)||!sr(S,A):!0}function Mv(s,o,h,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==s&&pm.enqueueReplaceState(o,o.state,null)}function rc(s,o){var h=o;if("ref"in o){h={};for(var m in o)m!=="ref"&&(h[m]=o[m])}if(s=s.defaultProps){h===o&&(h=I({},h));for(var S in s)h[S]===void 0&&(h[S]=s[S])}return h}var ed=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Ev(s){ed(s)}function Tv(s){console.error(s)}function Av(s){ed(s)}function nd(s,o){try{var h=s.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function wv(s,o,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function mm(s,o,h){return h=Es(h),h.tag=3,h.payload={element:null},h.callback=function(){nd(s,o)},h}function gm(s){return s=Es(s),s.tag=3,s}function Cv(s,o,h,m){var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var A=m.value;s.payload=function(){return S(A)},s.callback=function(){wv(o,h,m)}}var z=h.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(s.callback=function(){wv(o,h,m),typeof S!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})})}function y1(s,o,h,m,S){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=h.alternate,o!==null&&Tf(o,h,S,!0),h=is.current,h!==null){switch(h.tag){case 13:return Cr===null?Of():h.alternate===null&&hi===0&&(hi=3),h.flags&=-257,h.flags|=65536,h.lanes=S,m===jh?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([m]):o.add(m),fn(s,m,S)),!1;case 22:return h.flags|=65536,m===jh?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([m]):h.add(m)),fn(s,m,S)),!1}throw Error(n(435,h.tag))}return fn(s,m,S),Of(),!1}if(Ln)return o=is.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=S,m!==pf&&(s=Error(n(422),{cause:m}),wr(ns(s,h)))):(m!==pf&&(o=Error(n(423),{cause:m}),wr(ns(o,h))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,m=ns(m,h),S=mm(s.stateNode,m,S),au(s,S),hi!==4&&(hi=2)),!1;var A=Error(n(520),{cause:m});if(A=ns(A,h),Uf===null?Uf=[A]:Uf.push(A),hi!==4&&(hi=2),o===null)return!0;m=ns(m,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,s=S&-S,h.lanes|=s,s=mm(h.stateNode,m,s),au(h,s),!1;case 1:if(o=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ki===null||!Ki.has(A))))return h.flags|=65536,S&=-S,h.lanes|=S,S=gm(S),Cv(S,s,h,m),au(h,S),!1}h=h.return}while(h!==null);return!1}var bs=Error(n(461)),aa=!1;function sa(s,o,h,m){o.child=s===null?uo(o,null,h,m):co(o,s.child,h,m)}function vm(s,o,h,m,S){h=h.render;var A=o.ref;if("ref"in m){var z={};for(var X in m)X!=="ref"&&(z[X]=m[X])}else z=m;return lc(o),m=im(s,o,h,z,A,S),X=am(),s!==null&&!aa?(Sf(s,o,S),Oi(s,o,S)):(Ln&&X&&df(o),o.flags|=1,sa(s,o,m,S),o.child)}function ym(s,o,h,m,S){if(s===null){var A=h.type;return typeof A=="function"&&!To(A)&&A.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=A,xm(s,o,A,m,S)):(s=lu(h.type,null,m,o,o.mode,S),s.ref=o.ref,s.return=o,o.child=s)}if(A=s.child,!Am(s,S)){var z=A.memoizedProps;if(h=h.compare,h=h!==null?h:sr,h(z,m)&&s.ref===o.ref)return Oi(s,o,S)}return o.flags|=1,s=Xa(A,m),s.ref=o.ref,s.return=o,o.child=s}function xm(s,o,h,m,S){if(s!==null){var A=s.memoizedProps;if(sr(A,m)&&s.ref===o.ref)if(aa=!1,o.pendingProps=m=A,Am(s,S))(s.flags&131072)!==0&&(aa=!0);else return o.lanes=s.lanes,Oi(s,o,S)}return Sm(s,o,h,m,S)}function Rv(s,o,h){var m=o.pendingProps,S=m.children,A=(o.stateNode._pendingVisibility&2)!==0,z=s!==null?s.memoizedState:null;if(tu(s,o),m.mode==="hidden"||A){if((o.flags&128)!==0){if(m=z!==null?z.baseLanes|h:h,s!==null){for(S=o.child=s.child,A=0;S!==null;)A=A|S.lanes|S.childLanes,S=S.sibling;o.childLanes=A&~m}else o.childLanes=0,o.child=null;return _m(s,o,m,h)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Zc(o,z!==null?z.cachePool:null),z!==null?il(o,z):Xh(),tm(o);else return o.lanes=o.childLanes=536870912,_m(s,o,z!==null?z.baseLanes|h:h,h)}else z!==null?(Zc(o,z.cachePool),il(o,z),ho(),o.memoizedState=null):(s!==null&&Zc(o,null),Xh(),ho());return sa(s,o,S,h),o.child}function _m(s,o,h,m){var S=_f();return S=S===null?null:{parent:Ni._currentValue,pool:S},o.memoizedState={baseLanes:h,cachePool:S},s!==null&&Zc(o,null),Xh(),tm(o),s!==null&&Tf(s,o,m,!0),null}function tu(s,o){var h=o.ref;if(h===null)s!==null&&s.ref!==null&&(o.flags|=2097664);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(s===null||s.ref!==h)&&(o.flags|=2097664)}}function Sm(s,o,h,m,S){return lc(o),h=im(s,o,h,m,void 0,S),m=am(),s!==null&&!aa?(Sf(s,o,S),Oi(s,o,S)):(Ln&&m&&df(o),o.flags|=1,sa(s,o,h,S),o.child)}function Dv(s,o,h,m,S,A){return lc(o),o.updateQueue=null,h=Wg(o,m,h,S),qg(s),m=am(),s!==null&&!aa?(Sf(s,o,A),Oi(s,o,A)):(Ln&&m&&df(o),o.flags|=1,sa(s,o,h,A),o.child)}function Nv(s,o,h,m,S){if(lc(o),o.stateNode===null){var A=Qo,z=h.contextType;typeof z=="object"&&z!==null&&(A=Ra(z)),A=new h(m,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=pm,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=m,A.state=o.memoizedState,A.refs={},ja(o),z=h.contextType,A.context=typeof z=="object"&&z!==null?Ra(z):Qo,A.state=o.memoizedState,z=h.getDerivedStateFromProps,typeof z=="function"&&(dm(o,h,z,m),A.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(z=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),z!==A.state&&pm.enqueueReplaceState(A,A.state,null),cr(o,m,A,S),Da(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){A=o.stateNode;var X=o.memoizedProps,at=rc(h,X);A.props=at;var St=A.context,Xt=h.contextType;z=Qo,typeof Xt=="object"&&Xt!==null&&(z=Ra(Xt));var le=h.getDerivedStateFromProps;Xt=typeof le=="function"||typeof A.getSnapshotBeforeUpdate=="function",X=o.pendingProps!==X,Xt||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(X||St!==z)&&Mv(o,A,m,z),Wi=!1;var Ot=o.memoizedState;A.state=Ot,cr(o,m,A,S),Da(),St=o.memoizedState,X||Ot!==St||Wi?(typeof le=="function"&&(dm(o,h,le,m),St=o.memoizedState),(at=Wi||bv(o,h,at,m,Ot,St,z))?(Xt||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=St),A.props=m,A.state=St,A.context=z,m=at):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{A=o.stateNode,ld(s,o),z=o.memoizedProps,Xt=rc(h,z),A.props=Xt,le=o.pendingProps,Ot=A.context,St=h.contextType,at=Qo,typeof St=="object"&&St!==null&&(at=Ra(St)),X=h.getDerivedStateFromProps,(St=typeof X=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z!==le||Ot!==at)&&Mv(o,A,m,at),Wi=!1,Ot=o.memoizedState,A.state=Ot,cr(o,m,A,S),Da();var jt=o.memoizedState;z!==le||Ot!==jt||Wi||s!==null&&s.dependencies!==null&&nu(s.dependencies)?(typeof X=="function"&&(dm(o,h,X,m),jt=o.memoizedState),(Xt=Wi||bv(o,h,Xt,m,Ot,jt,at)||s!==null&&s.dependencies!==null&&nu(s.dependencies))?(St||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,jt,at),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,jt,at)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||z===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=jt),A.props=m,A.state=jt,A.context=at,m=Xt):(typeof A.componentDidUpdate!="function"||z===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&Ot===s.memoizedState||(o.flags|=1024),m=!1)}return A=m,tu(s,o),m=(o.flags&128)!==0,A||m?(A=o.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,s!==null&&m?(o.child=co(o,s.child,null,S),o.child=co(o,null,h,S)):sa(s,o,h,S),o.memoizedState=A.state,s=o.child):s=Oi(s,o,S),s}function bm(s,o,h,m){return Yc(),o.flags|=256,sa(s,o,h,m),o.child}var Mm={dehydrated:null,treeContext:null,retryLane:0};function ha(s){return{baseLanes:s,cachePool:mo()}}function id(s,o,h){return s=s!==null?s.childLanes&~h:0,o&&(s|=Ya),s}function Uv(s,o,h){var m=o.pendingProps,S=!1,A=(o.flags&128)!==0,z;if((z=A)||(z=s!==null&&s.memoizedState===null?!1:(Yi.current&2)!==0),z&&(S=!0,o.flags&=-129),z=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ln){if(S?fo(o):ho(),Ln){var X=fa,at;if(at=X){t:{for(at=X,X=Hs;at.nodeType!==8;){if(!X){X=null;break t}if(at=Do(at.nextSibling),at===null){X=null;break t}}X=at}X!==null?(o.memoizedState={dehydrated:X,treeContext:oo!==null?{id:Ar,overflow:lo}:null,retryLane:536870912},at=Bi(18,null,null,0),at.stateNode=X,at.return=o,o.child=at,Ca=o,fa=null,at=!0):at=!1}at||Jl(o)}if(X=o.memoizedState,X!==null&&(X=X.dehydrated,X!==null))return X.data==="$!"?o.lanes=16:o.lanes=536870912,null;Rr(o)}return X=m.children,m=m.fallback,S?(ho(),S=o.mode,X=Tm({mode:"hidden",children:X},S),m=Sl(m,S,h,null),X.return=o,m.return=o,X.sibling=m,o.child=X,S=o.child,S.memoizedState=ha(h),S.childLanes=id(s,z,h),o.memoizedState=Mm,m):(fo(o),Em(o,X))}if(at=s.memoizedState,at!==null&&(X=at.dehydrated,X!==null)){if(A)o.flags&256?(fo(o),o.flags&=-257,o=ad(s,o,h)):o.memoizedState!==null?(ho(),o.child=s.child,o.flags|=128,o=null):(ho(),S=m.fallback,X=o.mode,m=Tm({mode:"visible",children:m.children},X),S=Sl(S,X,h,null),S.flags|=2,m.return=o,S.return=o,m.sibling=S,o.child=m,co(o,s.child,null,h),m=o.child,m.memoizedState=ha(h),m.childLanes=id(s,z,h),o.memoizedState=Mm,o=S);else if(fo(o),X.data==="$!"){if(z=X.nextSibling&&X.nextSibling.dataset,z)var St=z.dgst;z=St,m=Error(n(419)),m.stack="",m.digest=z,wr({value:m,source:null,stack:null}),o=ad(s,o,h)}else if(aa||Tf(s,o,h,!1),z=(h&s.childLanes)!==0,aa||z){if(z=Qn,z!==null){if(m=h&-h,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&(z.suspendedLanes|h))!==0?0:m,m!==0&&m!==at.retryLane)throw at.retryLane=m,ro(s,m),Qi(z,s,m),bs}X.data==="$?"||Of(),o=ad(s,o,h)}else X.data==="$?"?(o.flags|=128,o.child=s.child,o=mc.bind(null,s),X._reactRetry=o,o=null):(s=at.treeContext,fa=Do(X.nextSibling),Ca=o,Ln=!0,Vs=null,Hs=!1,s!==null&&(si[_s++]=Ar,si[_s++]=lo,si[_s++]=oo,Ar=s.id,lo=s.overflow,oo=o),o=Em(o,m.children),o.flags|=4096);return o}return S?(ho(),S=m.fallback,X=o.mode,at=s.child,St=at.sibling,m=Xa(at,{mode:"hidden",children:m.children}),m.subtreeFlags=at.subtreeFlags&31457280,St!==null?S=Xa(St,S):(S=Sl(S,X,h,null),S.flags|=2),S.return=o,m.return=o,m.sibling=S,o.child=m,m=S,S=o.child,X=s.child.memoizedState,X===null?X=ha(h):(at=X.cachePool,at!==null?(St=Ni._currentValue,at=at.parent!==St?{parent:St,pool:St}:at):at=mo(),X={baseLanes:X.baseLanes|h,cachePool:at}),S.memoizedState=X,S.childLanes=id(s,z,h),o.memoizedState=Mm,m):(fo(o),h=s.child,s=h.sibling,h=Xa(h,{mode:"visible",children:m.children}),h.return=o,h.sibling=null,s!==null&&(z=o.deletions,z===null?(o.deletions=[s],o.flags|=16):z.push(s)),o.child=h,o.memoizedState=null,h)}function Em(s,o){return o=Tm({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Tm(s,o){return Cm(s,o,0,null)}function ad(s,o,h){return co(o,s.child,null,h),s=Em(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function sd(s,o,h){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),Ms(s.return,o,h)}function dl(s,o,h,m,S){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:S}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=h,A.tailMode=S)}function oc(s,o,h){var m=o.pendingProps,S=m.revealOrder,A=m.tail;if(sa(s,o,m.children,h),m=Yi.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&sd(s,h,o);else if(s.tag===19)sd(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch($t(Yi,m),S){case"forwards":for(h=o.child,S=null;h!==null;)s=h.alternate,s!==null&&Wc(s)===null&&(S=h),h=h.sibling;h=S,h===null?(S=o.child,o.child=null):(S=h.sibling,h.sibling=null),dl(o,!1,S,h,A);break;case"backwards":for(h=null,S=o.child,o.child=null;S!==null;){if(s=S.alternate,s!==null&&Wc(s)===null){o.child=S;break}s=S.sibling,S.sibling=h,h=S,S=s}dl(o,!0,h,null,A);break;case"together":dl(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Oi(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),pr|=o.lanes,(h&o.childLanes)===0)if(s!==null){if(Tf(s,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,h=Xa(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Xa(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function Am(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&nu(s)))}function x1(s,o,h){switch(o.tag){case 3:se(o,o.stateNode.containerInfo),pl(o,Ni,s.memoizedState.cache),Yc();break;case 27:case 5:ve(o);break;case 4:se(o,o.stateNode.containerInfo);break;case 10:pl(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(fo(o),o.flags|=128,null):(h&o.child.childLanes)!==0?Uv(s,o,h):(fo(o),s=Oi(s,o,h),s!==null?s.sibling:null);fo(o);break;case 19:var S=(s.flags&128)!==0;if(m=(h&o.childLanes)!==0,m||(Tf(s,o,h,!1),m=(h&o.childLanes)!==0),S){if(m)return oc(s,o,h);o.flags|=128}if(S=o.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),$t(Yi,Yi.current),m)break;return null;case 22:case 23:return o.lanes=0,Rv(s,o,h);case 24:pl(o,Ni,s.memoizedState.cache)}return Oi(s,o,h)}function Ef(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps)aa=!0;else{if(!Am(s,h)&&(o.flags&128)===0)return aa=!1,x1(s,o,h);aa=(s.flags&131072)!==0}else aa=!1,Ln&&(o.flags&1048576)!==0&&Jp(o,hf,o.index);switch(o.lanes=0,o.tag){case 16:t:{s=o.pendingProps;var m=o.elementType,S=m._init;if(m=S(m._payload),o.type=m,typeof m=="function")To(m)?(s=rc(m,s),o.tag=1,o=Nv(null,o,m,s,h)):(o.tag=0,o=Sm(null,o,m,s,h));else{if(m!=null){if(S=m.$$typeof,S===E){o.tag=11,o=vm(null,o,m,s,h);break t}else if(S===M){o.tag=14,o=ym(null,o,m,s,h);break t}}throw o=V(m)||m,Error(n(306,o,""))}}return o;case 0:return Sm(s,o,o.type,o.pendingProps,h);case 1:return m=o.type,S=rc(m,o.pendingProps),Nv(s,o,m,S,h);case 3:t:{if(se(o,o.stateNode.containerInfo),s===null)throw Error(n(387));var A=o.pendingProps;S=o.memoizedState,m=S.element,ld(s,o),cr(o,A,null,h);var z=o.memoizedState;if(A=z.cache,pl(o,Ni,A),A!==S.cache&&rd(o,[Ni],h,!0),Da(),A=z.element,S.isDehydrated)if(S={element:A,isDehydrated:!1,cache:z.cache},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){o=bm(s,o,A,h);break t}else if(A!==m){m=ns(Error(n(424)),o),wr(m),o=bm(s,o,A,h);break t}else for(fa=Do(o.stateNode.containerInfo.firstChild),Ca=o,Ln=!0,Vs=null,Hs=!0,h=uo(o,null,A,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Yc(),A===m){o=Oi(s,o,h);break t}sa(s,o,A,h)}o=o.child}return o;case 26:return tu(s,o),s===null?(h=_T(o.type,null,o.pendingProps,null))?o.memoizedState=h:Ln||(h=o.type,s=o.pendingProps,m=Fv(Oe.current).createElement(h),m[ai]=o,m[xn]=s,Wa(m,h,s),re(m),o.stateNode=m):o.memoizedState=_T(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return ve(o),s===null&&Ln&&(m=o.stateNode=vT(o.type,o.pendingProps,Oe.current),Ca=o,Hs=!0,fa=Do(m.firstChild)),m=o.pendingProps.children,s!==null||Ln?sa(s,o,m,h):o.child=co(o,null,m,h),tu(s,o),o.child;case 5:return s===null&&Ln&&((S=m=fa)&&(m=_U(m,o.type,o.pendingProps,Hs),m!==null?(o.stateNode=m,Ca=o,fa=Do(m.firstChild),Hs=!1,S=!0):S=!1),S||Jl(o)),ve(o),S=o.type,A=o.pendingProps,z=s!==null?s.memoizedProps:null,m=A.children,D1(S,A)?m=null:z!==null&&D1(S,z)&&(o.flags|=32),o.memoizedState!==null&&(S=im(s,o,p1,null,null,h),Bm._currentValue=S),tu(s,o),sa(s,o,m,h),o.child;case 6:return s===null&&Ln&&((s=h=fa)&&(h=SU(h,o.pendingProps,Hs),h!==null?(o.stateNode=h,Ca=o,fa=null,s=!0):s=!1),s||Jl(o)),null;case 13:return Uv(s,o,h);case 4:return se(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=co(o,null,m,h):sa(s,o,m,h),o.child;case 11:return vm(s,o,o.type,o.pendingProps,h);case 7:return sa(s,o,o.pendingProps,h),o.child;case 8:return sa(s,o,o.pendingProps.children,h),o.child;case 12:return sa(s,o,o.pendingProps.children,h),o.child;case 10:return m=o.pendingProps,pl(o,o.type,m.value),sa(s,o,m.children,h),o.child;case 9:return S=o.type._context,m=o.pendingProps.children,lc(o),S=Ra(S),m=m(S),o.flags|=1,sa(s,o,m,h),o.child;case 14:return ym(s,o,o.type,o.pendingProps,h);case 15:return xm(s,o,o.type,o.pendingProps,h);case 19:return oc(s,o,h);case 22:return Rv(s,o,h);case 24:return lc(o),m=Ra(Ni),s===null?(S=_f(),S===null&&(S=Qn,A=em(),S.pooledCache=A,A.refCount++,A!==null&&(S.pooledCacheLanes|=h),S=A),o.memoizedState={parent:m,cache:S},ja(o),pl(o,Ni,S)):((s.lanes&h)!==0&&(ld(s,o),cr(o,null,null,h),Da()),S=s.memoizedState,A=o.memoizedState,S.parent!==m?(S={parent:m,cache:m},o.memoizedState=S,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=S),pl(o,Ni,m)):(m=A.cache,pl(o,Ni,m),m!==S.cache&&rd(o,[Ni],h,!0))),sa(s,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}var eu=Ft(null),Or=null,lr=null;function pl(s,o,h){$t(eu,o._currentValue),o._currentValue=h}function xo(s){s._currentValue=eu.current,Se(eu)}function Ms(s,o,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===h)break;s=s.return}}function rd(s,o,h,m){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var A=S.dependencies;if(A!==null){var z=S.child;A=A.firstContext;t:for(;A!==null;){var X=A;A=S;for(var at=0;at<o.length;at++)if(X.context===o[at]){A.lanes|=h,X=A.alternate,X!==null&&(X.lanes|=h),Ms(A.return,h,s),m||(z=null);break t}A=X.next}}else if(S.tag===18){if(z=S.return,z===null)throw Error(n(341));z.lanes|=h,A=z.alternate,A!==null&&(A.lanes|=h),Ms(z,h,s),z=null}else z=S.child;if(z!==null)z.return=S;else for(z=S;z!==null;){if(z===s){z=null;break}if(S=z.sibling,S!==null){S.return=z.return,z=S;break}z=z.return}S=z}}function Tf(s,o,h,m){s=null;for(var S=o,A=!1;S!==null;){if(!A){if((S.flags&524288)!==0)A=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var z=S.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var X=S.type;$a(S.pendingProps.value,z.value)||(s!==null?s.push(X):s=[X])}}else if(S===Gt.current){if(z=S.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(Bm):s=[Bm])}S=S.return}s!==null&&rd(o,s,h,m),o.flags|=262144}function nu(s){for(s=s.firstContext;s!==null;){if(!$a(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function lc(s){Or=s,lr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ra(s){return iu(Or,s)}function od(s,o){return Or===null&&lc(s),iu(s,o)}function iu(s,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},lr===null){if(s===null)throw Error(n(308));lr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else lr=lr.next=o;return h}var Wi=!1;function ja(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Es(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ts(s,o,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(un&2)!==0){var S=m.pending;return S===null?o.next=o:(o.next=S.next,S.next=o),m.pending=o,o=ff(s),uf(s,null,h),o}return cf(s,m,o,h),ff(s)}function ml(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194176)!==0)){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,vs(s,h)}}function au(s,o){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var S=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var z={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?S=A=z:A=A.next=z,h=h.next}while(h!==null);A===null?S=A=o:A=A.next=o}else S=A=o;h={baseState:m.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}var ss=!1;function Da(){if(ss){var s=rl;if(s!==null)throw s}}function cr(s,o,h,m){ss=!1;var S=s.updateQueue;Wi=!1;var A=S.firstBaseUpdate,z=S.lastBaseUpdate,X=S.shared.pending;if(X!==null){S.shared.pending=null;var at=X,St=at.next;at.next=null,z===null?A=St:z.next=St,z=at;var Xt=s.alternate;Xt!==null&&(Xt=Xt.updateQueue,X=Xt.lastBaseUpdate,X!==z&&(X===null?Xt.firstBaseUpdate=St:X.next=St,Xt.lastBaseUpdate=at))}if(A!==null){var le=S.baseState;z=0,Xt=St=at=null,X=A;do{var Ot=X.lane&-536870913,jt=Ot!==X.lane;if(jt?($e&Ot)===Ot:(m&Ot)===Ot){Ot!==0&&Ot===ec&&(ss=!0),Xt!==null&&(Xt=Xt.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});t:{var Ze=s,dn=X;Ot=o;var Ji=h;switch(dn.tag){case 1:if(Ze=dn.payload,typeof Ze=="function"){le=Ze.call(Ji,le,Ot);break t}le=Ze;break t;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=dn.payload,Ot=typeof Ze=="function"?Ze.call(Ji,le,Ot):Ze,Ot==null)break t;le=I({},le,Ot);break t;case 2:Wi=!0}}Ot=X.callback,Ot!==null&&(s.flags|=64,jt&&(s.flags|=8192),jt=S.callbacks,jt===null?S.callbacks=[Ot]:jt.push(Ot))}else jt={lane:Ot,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Xt===null?(St=Xt=jt,at=le):Xt=Xt.next=jt,z|=Ot;if(X=X.next,X===null){if(X=S.shared.pending,X===null)break;jt=X,X=jt.next,jt.next=null,S.lastBaseUpdate=jt,S.shared.pending=null}}while(!0);Xt===null&&(at=le),S.baseState=at,S.firstBaseUpdate=St,S.lastBaseUpdate=Xt,A===null&&(S.shared.lanes=0),pr|=z,s.lanes=z,s.memoizedState=le}}function Lr(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function Pr(s,o){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)Lr(h[s],o)}function Li(s,o){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var S=m.next;h=S;do{if((h.tag&s)===s){m=void 0;var A=h.create,z=h.inst;m=A(),z.destroy=m}h=h.next}while(h!==S)}}catch(X){de(o,o.return,X)}}function Gs(s,o,h){try{var m=o.updateQueue,S=m!==null?m.lastEffect:null;if(S!==null){var A=S.next;m=A;do{if((m.tag&s)===s){var z=m.inst,X=z.destroy;if(X!==void 0){z.destroy=void 0,S=o;var at=h;try{X()}catch(St){de(S,at,St)}}}m=m.next}while(m!==A)}}catch(St){de(o,o.return,St)}}function _o(s){var o=s.updateQueue;if(o!==null){var h=s.stateNode;try{Pr(o,h)}catch(m){de(s,s.return,m)}}}function Af(s,o,h){h.props=rc(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){de(s,o,m)}}function Pi(s,o){try{var h=s.ref;if(h!==null){var m=s.stateNode;switch(s.tag){case 26:case 27:case 5:var S=m;break;default:S=m}typeof h=="function"?s.refCleanup=h(S):h.current=S}}catch(A){de(s,o,A)}}function Kn(s,o){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(S){de(s,o,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(S){de(s,o,S)}else h.current=null}function Pn(s){var o=s.type,h=s.memoizedProps,m=s.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break t;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(S){de(s,s.return,S)}}function js(s,o,h){try{var m=s.stateNode;mU(m,s.type,h,o),m[xn]=o}catch(S){de(s,s.return,S)}}function ur(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function wf(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||ur(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function rs(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(s,o):h.insertBefore(s,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(s,h)):(o=h,o.appendChild(s)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=zv));else if(m!==4&&m!==27&&(s=s.child,s!==null))for(rs(s,o,h),s=s.sibling;s!==null;)rs(s,o,h),s=s.sibling}function So(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(m!==4&&m!==27&&(s=s.child,s!==null))for(So(s,o,h),s=s.sibling;s!==null;)So(s,o,h),s=s.sibling}var fr=!1,ui=!1,gl=!1,cd=typeof WeakSet=="function"?WeakSet:Set,Ii=null,ud=!1;function su(s,o){if(s=s.containerInfo,C1=Xv,s=Yp(s),of(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var S=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break t}var z=0,X=-1,at=-1,St=0,Xt=0,le=s,Ot=null;e:for(;;){for(var jt;le!==h||S!==0&&le.nodeType!==3||(X=z+S),le!==A||m!==0&&le.nodeType!==3||(at=z+m),le.nodeType===3&&(z+=le.nodeValue.length),(jt=le.firstChild)!==null;)Ot=le,le=jt;for(;;){if(le===s)break e;if(Ot===h&&++St===S&&(X=z),Ot===A&&++Xt===m&&(at=z),(jt=le.nextSibling)!==null)break;le=Ot,Ot=le.parentNode}le=jt}h=X===-1||at===-1?null:{start:X,end:at}}else h=null}h=h||{start:0,end:0}}else h=null;for(R1={focusedElem:s,selectionRange:h},Xv=!1,Ii=o;Ii!==null;)if(o=Ii,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Ii=s;else for(;Ii!==null;){switch(o=Ii,A=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,h=o,S=A.memoizedProps,A=A.memoizedState,m=h.stateNode;try{var Ze=rc(h.type,S,h.elementType===h.type);s=m.getSnapshotBeforeUpdate(Ze,A),m.__reactInternalSnapshotBeforeUpdate=s}catch(dn){de(h,h.return,dn)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,h=s.nodeType,h===9)O1(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":O1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,Ii=s;break}Ii=o.return}return Ze=ud,ud=!1,Ze}function ru(s,o,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Ir(s,h),m&4&&Li(5,h);break;case 1:if(Ir(s,h),m&4)if(s=h.stateNode,o===null)try{s.componentDidMount()}catch(X){de(h,h.return,X)}else{var S=rc(h.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(S,o,s.__reactInternalSnapshotBeforeUpdate)}catch(X){de(h,h.return,X)}}m&64&&_o(h),m&512&&Pi(h,h.return);break;case 3:if(Ir(s,h),m&64&&(m=h.updateQueue,m!==null)){if(s=null,h.child!==null)switch(h.child.tag){case 27:case 5:s=h.child.stateNode;break;case 1:s=h.child.stateNode}try{Pr(m,s)}catch(X){de(h,h.return,X)}}break;case 26:Ir(s,h),m&512&&Pi(h,h.return);break;case 27:case 5:Ir(s,h),o===null&&m&4&&Pn(h),m&512&&Pi(h,h.return);break;case 12:Ir(s,h);break;case 13:Ir(s,h),m&4&&Ov(s,h);break;case 22:if(S=h.memoizedState!==null||fr,!S){o=o!==null&&o.memoizedState!==null||ui;var A=fr,z=ui;fr=S,(ui=o)&&!z?dr(s,h,(h.subtreeFlags&8772)!==0):Ir(s,h),fr=A,ui=z}m&512&&(h.memoizedProps.mode==="manual"?Pi(h,h.return):Kn(h,h.return));break;default:Ir(s,h)}}function fd(s){var o=s.alternate;o!==null&&(s.alternate=null,fd(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&pe(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var fi=null,da=!1;function Na(s,o,h){for(h=h.child;h!==null;)hd(s,o,h),h=h.sibling}function hd(s,o,h){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Zt,h)}catch{}switch(h.tag){case 26:ui||Kn(h,o),Na(s,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ui||Kn(h,o);var m=fi,S=da;for(fi=h.stateNode,Na(s,o,h),h=h.stateNode,o=h.attributes;o.length;)h.removeAttributeNode(o[0]);pe(h),fi=m,da=S;break;case 5:ui||Kn(h,o);case 6:S=fi;var A=da;if(fi=null,Na(s,o,h),fi=S,da=A,fi!==null)if(da)try{s=fi,m=h.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)}catch(z){de(h,o,z)}else try{fi.removeChild(h.stateNode)}catch(z){de(h,o,z)}break;case 18:fi!==null&&(da?(o=fi,h=h.stateNode,o.nodeType===8?U1(o.parentNode,h):o.nodeType===1&&U1(o,h),Hm(o)):U1(fi,h.stateNode));break;case 4:m=fi,S=da,fi=h.stateNode.containerInfo,da=!0,Na(s,o,h),fi=m,da=S;break;case 0:case 11:case 14:case 15:ui||Gs(2,h,o),ui||Gs(4,h,o),Na(s,o,h);break;case 1:ui||(Kn(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"&&Af(h,o,m)),Na(s,o,h);break;case 21:Na(s,o,h);break;case 22:ui||Kn(h,o),ui=(m=ui)||h.memoizedState!==null,Na(s,o,h),ui=m;break;default:Na(s,o,h)}}function Ov(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hm(s)}catch(h){de(o,o.return,h)}}function Cf(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new cd),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new cd),o;default:throw Error(n(435,s.tag))}}function Rf(s,o){var h=Cf(s);o.forEach(function(m){var S=Ut.bind(null,s,m);h.has(m)||(h.add(m),m.then(S,S))})}function ka(s,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var S=h[m],A=s,z=o,X=z;t:for(;X!==null;){switch(X.tag){case 27:case 5:fi=X.stateNode,da=!1;break t;case 3:fi=X.stateNode.containerInfo,da=!0;break t;case 4:fi=X.stateNode.containerInfo,da=!0;break t}X=X.return}if(fi===null)throw Error(n(160));hd(A,z,S),fi=null,da=!1,A=S.alternate,A!==null&&(A.return=null),S.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)cc(o,s),o=o.sibling}var Ua=null;function cc(s,o){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ka(o,s),Oa(s),m&4&&(Gs(3,s,s.return),Li(3,s),Gs(5,s,s.return));break;case 1:ka(o,s),Oa(s),m&512&&(ui||h===null||Kn(h,h.return)),m&64&&fr&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var S=Ua;if(ka(o,s),Oa(s),m&512&&(ui||h===null||Kn(h,h.return)),m&4){var A=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){t:{m=s.type,h=s.memoizedProps,S=S.ownerDocument||S;e:switch(m){case"title":A=S.getElementsByTagName("title")[0],(!A||A[zt]||A[ai]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=S.createElement(m),S.head.insertBefore(A,S.querySelector("head > title"))),Wa(A,m,h),A[ai]=s,re(A),m=A;break t;case"link":var z=MT("link","href",S).get(m+(h.href||""));if(z){for(var X=0;X<z.length;X++)if(A=z[X],A.getAttribute("href")===(h.href==null?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){z.splice(X,1);break e}}A=S.createElement(m),Wa(A,m,h),S.head.appendChild(A);break;case"meta":if(z=MT("meta","content",S).get(m+(h.content||""))){for(X=0;X<z.length;X++)if(A=z[X],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){z.splice(X,1);break e}}A=S.createElement(m),Wa(A,m,h),S.head.appendChild(A);break;default:throw Error(n(468,m))}A[ai]=s,re(A),m=A}s.stateNode=m}else ET(S,s.type,s.stateNode);else s.stateNode=bT(S,m,s.memoizedProps);else A!==m?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,m===null?ET(S,s.type,s.stateNode):bT(S,m,s.memoizedProps)):m===null&&s.stateNode!==null&&js(s,s.memoizedProps,h.memoizedProps)}break;case 27:if(m&4&&s.alternate===null){S=s.stateNode,A=s.memoizedProps;try{for(var at=S.firstChild;at;){var St=at.nextSibling,Xt=at.nodeName;at[zt]||Xt==="HEAD"||Xt==="BODY"||Xt==="SCRIPT"||Xt==="STYLE"||Xt==="LINK"&&at.rel.toLowerCase()==="stylesheet"||S.removeChild(at),at=St}for(var le=s.type,Ot=S.attributes;Ot.length;)S.removeAttributeNode(Ot[0]);Wa(S,le,A),S[ai]=s,S[xn]=A}catch(Ze){de(s,s.return,Ze)}}case 5:if(ka(o,s),Oa(s),m&512&&(ui||h===null||Kn(h,h.return)),s.flags&32){S=s.stateNode;try{Gi(S,"")}catch(Ze){de(s,s.return,Ze)}}m&4&&s.stateNode!=null&&(S=s.memoizedProps,js(s,S,h!==null?h.memoizedProps:S)),m&1024&&(gl=!0);break;case 6:if(ka(o,s),Oa(s),m&4){if(s.stateNode===null)throw Error(n(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(Ze){de(s,s.return,Ze)}}break;case 3:if(Gv=null,S=Ua,Ua=Vv(o.containerInfo),ka(o,s),Ua=S,Oa(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Hm(o.containerInfo)}catch(Ze){de(s,s.return,Ze)}gl&&(gl=!1,vl(s));break;case 4:m=Ua,Ua=Vv(s.stateNode.containerInfo),ka(o,s),Oa(s),Ua=m;break;case 12:ka(o,s),Oa(s);break;case 13:ka(o,s),Oa(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Sn=F()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Rf(s,m)));break;case 22:if(m&512&&(ui||h===null||Kn(h,h.return)),at=s.memoizedState!==null,St=h!==null&&h.memoizedState!==null,Xt=fr,le=ui,fr=Xt||at,ui=le||St,ka(o,s),ui=le,fr=Xt,Oa(s),o=s.stateNode,o._current=s,o._visibility&=-3,o._visibility|=o._pendingVisibility&2,m&8192&&(o._visibility=at?o._visibility&-2:o._visibility|1,at&&(o=fr||ui,h===null||St||o||hr(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))t:for(h=null,o=s;;){if(o.tag===5||o.tag===26||o.tag===27){if(h===null){St=h=o;try{if(S=St.stateNode,at)A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{z=St.stateNode,X=St.memoizedProps.style;var jt=X!=null&&X.hasOwnProperty("display")?X.display:null;z.style.display=jt==null||typeof jt=="boolean"?"":(""+jt).trim()}}catch(Ze){de(St,St.return,Ze)}}}else if(o.tag===6){if(h===null){St=o;try{St.stateNode.nodeValue=at?"":St.memoizedProps}catch(Ze){de(St,St.return,Ze)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break t;for(;o.sibling===null;){if(o.return===null||o.return===s)break t;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Rf(s,h))));break;case 19:ka(o,s),Oa(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Rf(s,m)));break;case 21:break;default:ka(o,s),Oa(s)}}function Oa(s){var o=s.flags;if(o&2){try{if(s.tag!==27){t:{for(var h=s.return;h!==null;){if(ur(h)){var m=h;break t}h=h.return}throw Error(n(160))}switch(m.tag){case 27:var S=m.stateNode,A=wf(s);So(s,A,S);break;case 5:var z=m.stateNode;m.flags&32&&(Gi(z,""),m.flags&=-33);var X=wf(s);So(s,X,z);break;case 3:case 4:var at=m.stateNode.containerInfo,St=wf(s);rs(s,St,at);break;default:throw Error(n(161))}}}catch(Xt){de(s,s.return,Xt)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function vl(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;vl(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Ir(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ru(s,o.alternate,o),o=o.sibling}function hr(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Gs(4,o,o.return),hr(o);break;case 1:Kn(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&Af(o,o.return,h),hr(o);break;case 26:case 27:case 5:Kn(o,o.return),hr(o);break;case 22:Kn(o,o.return),o.memoizedState===null&&hr(o);break;default:hr(o)}s=s.sibling}}function dr(s,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,S=s,A=o,z=A.flags;switch(A.tag){case 0:case 11:case 15:dr(S,A,h),Li(4,A);break;case 1:if(dr(S,A,h),m=A,S=m.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(St){de(m,m.return,St)}if(m=A,S=m.updateQueue,S!==null){var X=m.stateNode;try{var at=S.shared.hiddenCallbacks;if(at!==null)for(S.shared.hiddenCallbacks=null,S=0;S<at.length;S++)Lr(at[S],X)}catch(St){de(m,m.return,St)}}h&&z&64&&_o(A),Pi(A,A.return);break;case 26:case 27:case 5:dr(S,A,h),h&&m===null&&z&4&&Pn(A),Pi(A,A.return);break;case 12:dr(S,A,h);break;case 13:dr(S,A,h),h&&z&4&&Ov(S,A);break;case 22:A.memoizedState===null&&dr(S,A,h),Pi(A,A.return);break;default:dr(S,A,h)}o=o.sibling}}function os(s,o){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&al(h))}function ks(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&al(s))}function ri(s,o,h,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)bo(s,o,h,m),o=o.sibling}function bo(s,o,h,m){var S=o.flags;switch(o.tag){case 0:case 11:case 15:ri(s,o,h,m),S&2048&&Li(9,o);break;case 3:ri(s,o,h,m),S&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&al(s)));break;case 12:if(S&2048){ri(s,o,h,m),s=o.stateNode;try{var A=o.memoizedProps,z=A.id,X=A.onPostCommit;typeof X=="function"&&X(z,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(at){de(o,o.return,at)}}else ri(s,o,h,m);break;case 23:break;case 22:A=o.stateNode,o.memoizedState!==null?A._visibility&4?ri(s,o,h,m):zn(s,o):A._visibility&4?ri(s,o,h,m):(A._visibility|=4,cn(s,o,h,m,(o.subtreeFlags&10256)!==0)),S&2048&&os(o.alternate,o);break;case 24:ri(s,o,h,m),S&2048&&ks(o.alternate,o);break;default:ri(s,o,h,m)}}function cn(s,o,h,m,S){for(S=S&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var A=s,z=o,X=h,at=m,St=z.flags;switch(z.tag){case 0:case 11:case 15:cn(A,z,X,at,S),Li(8,z);break;case 23:break;case 22:var Xt=z.stateNode;z.memoizedState!==null?Xt._visibility&4?cn(A,z,X,at,S):zn(A,z):(Xt._visibility|=4,cn(A,z,X,at,S)),S&&St&2048&&os(z.alternate,z);break;case 24:cn(A,z,X,at,S),S&&St&2048&&ks(z.alternate,z);break;default:cn(A,z,X,at,S)}o=o.sibling}}function zn(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=s,m=o,S=m.flags;switch(m.tag){case 22:zn(h,m),S&2048&&os(m.alternate,m);break;case 24:zn(h,m),S&2048&&ks(m.alternate,m);break;default:zn(h,m)}o=o.sibling}}var vi=8192;function Mo(s){if(s.subtreeFlags&vi)for(s=s.child;s!==null;)uc(s),s=s.sibling}function uc(s){switch(s.tag){case 26:Mo(s),s.flags&vi&&s.memoizedState!==null&&LU(Ua,s.memoizedState,s.memoizedProps);break;case 5:Mo(s);break;case 3:case 4:var o=Ua;Ua=Vv(s.stateNode.containerInfo),Mo(s),Ua=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=vi,vi=16777216,Mo(s),vi=o):Mo(s));break;default:Mo(s)}}function yl(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function xl(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];Ii=m,Lv(m,s)}yl(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ou(s),s=s.sibling}function ou(s){switch(s.tag){case 0:case 11:case 15:xl(s),s.flags&2048&&Gs(9,s,s.return);break;case 3:xl(s);break;case 12:xl(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&4&&(s.return===null||s.return.tag!==13)?(o._visibility&=-5,Eo(s)):xl(s);break;default:xl(s)}}function Eo(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];Ii=m,Lv(m,s)}yl(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Gs(8,o,o.return),Eo(o);break;case 22:h=o.stateNode,h._visibility&4&&(h._visibility&=-5,Eo(o));break;default:Eo(o)}s=s.sibling}}function Lv(s,o){for(;Ii!==null;){var h=Ii;switch(h.tag){case 0:case 11:case 15:Gs(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:al(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Ii=m;else t:for(h=s;Ii!==null;){m=Ii;var S=m.sibling,A=m.return;if(fd(m),m===h){Ii=null;break t}if(S!==null){S.return=A,Ii=S;break t}Ii=A}}}function wm(s,o,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(s,o,h,m){return new wm(s,o,h,m)}function To(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Xa(s,o){var h=s.alternate;return h===null?(h=Bi(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&31457280,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function _l(s,o){s.flags&=31457282;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,o=h.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function lu(s,o,h,m,S,A){var z=0;if(m=s,typeof s=="function")To(s)&&(z=1);else if(typeof s=="string")z=UU(s,h,ze.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case d:return Sl(h.children,S,A,o);case p:z=8,S|=24;break;case g:return s=Bi(12,h,o,S|2),s.elementType=g,s.lanes=A,s;case C:return s=Bi(13,h,o,S),s.elementType=C,s.lanes=A,s;case T:return s=Bi(19,h,o,S),s.elementType=T,s.lanes=A,s;case D:return Cm(h,S,A,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case y:case _:z=10;break t;case x:z=9;break t;case E:z=11;break t;case M:z=14;break t;case R:z=16,m=null;break t}z=29,h=Error(n(130,s===null?"null":typeof s,"")),m=null}return o=Bi(z,h,o,S),o.elementType=s,o.type=m,o.lanes=A,o}function Sl(s,o,h,m){return s=Bi(7,s,m,o),s.lanes=h,s}function Cm(s,o,h,m){s=Bi(22,s,m,o),s.elementType=D,s.lanes=h;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var A=S._current;if(A===null)throw Error(n(456));if((S._pendingVisibility&2)===0){var z=ro(A,2);z!==null&&(S._pendingVisibility|=2,Qi(z,A,2))}},attach:function(){var A=S._current;if(A===null)throw Error(n(456));if((S._pendingVisibility&2)!==0){var z=ro(A,2);z!==null&&(S._pendingVisibility&=-3,Qi(z,A,2))}}};return s.stateNode=S,s}function Zi(s,o,h){return s=Bi(6,s,null,o),s.lanes=h,s}function Df(s,o,h){return o=Bi(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function Xs(s){s.flags|=4}function bl(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!TT(o)){if(o=is.current,o!==null&&(($e&4194176)===$e?Cr!==null:($e&62914560)!==$e&&($e&536870912)===0||o!==Cr))throw qc=jh,$p;s.flags|=8192}}function Ys(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?hn():536870912,s.lanes|=o,zr|=o)}function Nf(s,o){if(!Ln)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Si(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(o)for(var S=s.child;S!==null;)h|=S.lanes|S.childLanes,m|=S.subtreeFlags&31457280,m|=S.flags&31457280,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)h|=S.lanes|S.childLanes,m|=S.subtreeFlags,m|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=m,s.childLanes=h,o}function _1(s,o,h){var m=o.pendingProps;switch($o(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(o),null;case 1:return Si(o),null;case 3:return h=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),xo(Ni),Wt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Xc(o)?Xs(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Vs!==null&&(Ks(Vs),Vs=null))),Si(o),null;case 26:return h=o.memoizedState,s===null?(Xs(o),h!==null?(Si(o),bl(o,h)):(Si(o),o.flags&=-16777217)):h?h!==s.memoizedState?(Xs(o),Si(o),bl(o,h)):(Si(o),o.flags&=-16777217):(s.memoizedProps!==m&&Xs(o),Si(o),o.flags&=-16777217),null;case 27:J(o),h=Oe.current;var S=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Xs(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Si(o),null}s=ze.current,Xc(o)?Gg(o):(s=vT(S,m,h),o.stateNode=s,Xs(o))}return Si(o),null;case 5:if(J(o),h=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Xs(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Si(o),null}if(s=ze.current,Xc(o))Gg(o);else{switch(S=Fv(Oe.current),s){case 1:s=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:s=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":s=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":s=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?S.createElement("select",{is:m.is}):S.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?S.createElement(h,{is:m.is}):S.createElement(h)}}s[ai]=o,s[xn]=m;t:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)s.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break t;for(;S.sibling===null;){if(S.return===null||S.return===o)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=s;t:switch(Wa(s,h,m),h){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Xs(o)}}return Si(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&Xs(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(s=Oe.current,Xc(o)){if(s=o.stateNode,h=o.memoizedProps,m=null,S=Ca,S!==null)switch(S.tag){case 27:case 5:m=S.memoizedProps}s[ai]=o,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||fT(s.nodeValue,h)),s||Jl(o)}else s=Fv(s).createTextNode(m),s[ai]=o,o.stateNode=s}return Si(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=Xc(o),m!==null&&m.dehydrated!==null){if(s===null){if(!S)throw Error(n(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[ai]=o}else Yc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Si(o),S=!1}else Vs!==null&&(Ks(Vs),Vs=null),S=!0;if(!S)return o.flags&256?(Rr(o),o):(Rr(o),null)}if(Rr(o),(o.flags&128)!==0)return o.lanes=h,o;if(h=m!==null,s=s!==null&&s.memoizedState!==null,h){m=o.child,S=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(S=m.alternate.memoizedState.cachePool.pool);var A=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==S&&(m.flags|=2048)}return h!==s&&h&&(o.child.flags|=8192),Ys(o,o.updateQueue),Si(o),null;case 4:return Wt(),s===null&&T1(o.stateNode.containerInfo),Si(o),null;case 10:return xo(o.type),Si(o),null;case 19:if(Se(Yi),S=o.memoizedState,S===null)return Si(o),null;if(m=(o.flags&128)!==0,A=S.rendering,A===null)if(m)Nf(S,!1);else{if(hi!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(A=Wc(s),A!==null){for(o.flags|=128,Nf(S,!1),s=A.updateQueue,o.updateQueue=s,Ys(o,s),o.subtreeFlags=0,s=h,h=o.child;h!==null;)_l(h,s),h=h.sibling;return $t(Yi,Yi.current&1|2),o.child}s=s.sibling}S.tail!==null&&F()>Cn&&(o.flags|=128,m=!0,Nf(S,!1),o.lanes=4194304)}else{if(!m)if(s=Wc(A),s!==null){if(o.flags|=128,m=!0,s=s.updateQueue,o.updateQueue=s,Ys(o,s),Nf(S,!0),S.tail===null&&S.tailMode==="hidden"&&!A.alternate&&!Ln)return Si(o),null}else 2*F()-S.renderingStartTime>Cn&&h!==536870912&&(o.flags|=128,m=!0,Nf(S,!1),o.lanes=4194304);S.isBackwards?(A.sibling=o.child,o.child=A):(s=S.last,s!==null?s.sibling=A:o.child=A,S.last=A)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=F(),o.sibling=null,s=Yi.current,$t(Yi,m?s&1|2:s&1),o):(Si(o),null);case 22:case 23:return Rr(o),xf(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(h&536870912)!==0&&(o.flags&128)===0&&(Si(o),o.subtreeFlags&6&&(o.flags|=8192)):Si(o),h=o.updateQueue,h!==null&&Ys(o,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048),s!==null&&Se(po),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),xo(Ni),Si(o),null;case 25:return null}throw Error(n(156,o.tag))}function Ai(s,o){switch($o(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return xo(Ni),Wt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return J(o),null;case 13:if(Rr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Yc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Se(Yi),null;case 4:return Wt(),null;case 10:return xo(o.type),null;case 22:case 23:return Rr(o),xf(),s!==null&&Se(po),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return xo(Ni),null;case 25:return null;default:return null}}function Rm(s,o){switch($o(o),o.tag){case 3:xo(Ni),Wt();break;case 26:case 27:case 5:J(o);break;case 4:Wt();break;case 13:Rr(o);break;case 19:Se(Yi);break;case 10:xo(o.type);break;case 22:case 23:Rr(o),xf(),s!==null&&Se(po);break;case 24:xo(Ni)}}var fc={getCacheForType:function(s){var o=Ra(Ni),h=o.data.get(s);return h===void 0&&(h=s(),o.data.set(s,h)),h}},Ao=typeof WeakMap=="function"?WeakMap:Map,un=0,Qn=null,En=null,$e=0,ei=0,Fn=null,zi=!1,La=!1,Ml=!1,wo=0,hi=0,pr=0,Br=0,cu=0,Ya=0,zr=0,Uf=null,wn=null,Jn=!1,Sn=0,Cn=1/0,qn=null,Ki=null,qs=!1,Ws=null,hc=0,mr=0,yi=null,Zs=0,Co=null;function qa(){if((un&2)!==0&&$e!==0)return $e&-$e;if(N.T!==null){var s=ec;return s!==0?s:S1()}return Bs()}function As(){Ya===0&&(Ya=($e&536870912)===0||Ln?pn():536870912);var s=is.current;return s!==null&&(s.flags|=32),Ya}function Qi(s,o,h){(s===Qn&&ei===2||s.cancelPendingCommit!==null)&&(Ro(s,0),ws(s,$e,Ya,!1)),_i(s,h),((un&2)===0||s!==Qn)&&(s===Qn&&((un&2)===0&&(Br|=h),hi===4&&ws(s,$e,Ya,!1)),ni(s))}function uu(s,o,h){if((un&6)!==0)throw Error(n(327));var m=!h&&(o&60)===0&&(o&s.expiredLanes)===0||ce(s,o),S=m?c(s,o):pc(s,o,!0),A=m;do{if(S===0){La&&!m&&ws(s,o,0,!1);break}else if(S===6)ws(s,o,0,!zi);else{if(h=s.current.alternate,A&&!Dm(h)){S=pc(s,o,!1),A=!1;continue}if(S===2){if(A=o,s.errorRecoveryDisabledLanes&A)var z=0;else z=s.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){o=z;t:{var X=s;S=Uf;var at=X.current.memoizedState.isDehydrated;if(at&&(Ro(X,z).flags|=256),z=pc(X,z,!1),z!==2){if(Ml&&!at){X.errorRecoveryDisabledLanes|=A,Br|=A,S=4;break t}A=wn,wn=S,A!==null&&Ks(A)}S=z}if(A=!1,S!==2)continue}}if(S===1){Ro(s,0),ws(s,o,0,!0);break}t:{switch(m=s,S){case 0:case 1:throw Error(n(345));case 4:if((o&4194176)===o){ws(m,o,Ya,!zi);break t}break;case 2:wn=null;break;case 3:case 5:break;default:throw Error(n(329))}if(m.finishedWork=h,m.finishedLanes=o,(o&62914560)===o&&(A=Sn+300-F(),10<A)){if(ws(m,o,Ya,!zi),Yt(m,0)!==0)break t;m.timeoutHandle=pT(dd.bind(null,m,h,wn,qn,Jn,o,Ya,Br,zr,zi,2,-0,0),A);break t}dd(m,h,wn,qn,Jn,o,Ya,Br,zr,zi,0,-0,0)}}break}while(!0);ni(s)}function Ks(s){wn===null?wn=s:wn.push.apply(wn,s)}function dd(s,o,h,m,S,A,z,X,at,St,Xt,le,Ot){var jt=o.subtreeFlags;if((jt&8192||(jt&16785408)===16785408)&&(Im={stylesheets:null,count:0,unsuspend:OU},uc(o),o=PU(),o!==null)){s.cancelPendingCommit=o(ct.bind(null,s,h,m,S,z,X,at,1,le,Ot)),ws(s,A,z,!St);return}ct(s,h,m,S,z,X,at,Xt,le,Ot)}function Dm(s){for(var o=s;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var S=h[m],A=S.getSnapshot;S=S.value;try{if(!$a(A(),S))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ws(s,o,h,m){o&=~cu,o&=~Br,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var S=o;0<S;){var A=31-_t(S),z=1<<A;m[A]=-1,S&=~z}h!==0&&Qr(s,h,o)}function dc(){return(un&6)===0?(Rn(0),!1):!0}function Fr(){if(En!==null){if(ei===0)var s=En.return;else s=En,lr=Or=null,qh(s),nl=null,gf=0,s=En;for(;s!==null;)Rm(s.alternate,s),s=s.return;En=null}}function Ro(s,o){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,vU(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Fr(),Qn=s,En=h=Xa(s.current,null),$e=o,ei=0,Fn=null,zi=!1,La=ce(s,o),Ml=!1,zr=Ya=cu=Br=pr=hi=0,wn=Uf=null,Jn=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var S=31-_t(m),A=1<<S;o|=s[S],m&=~A}return wo=o,lf(),h}function El(s,o){_n=null,N.H=Ur,o===tl?(o=kn(),ei=3):o===$p?(o=kn(),ei=4):ei=o===bs?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Fn=o,En===null&&(hi=1,nd(s,ns(o,s.current)))}function fu(){var s=N.H;return N.H=Ur,s===null?Ur:s}function pd(){var s=N.A;return N.A=fc,s}function Of(){hi=4,zi||($e&4194176)!==$e&&is.current!==null||(La=!0),(pr&134217727)===0&&(Br&134217727)===0||Qn===null||ws(Qn,$e,Ya,!1)}function pc(s,o,h){var m=un;un|=2;var S=fu(),A=pd();(Qn!==s||$e!==o)&&(qn=null,Ro(s,o)),o=!1;var z=hi;t:do try{if(ei!==0&&En!==null){var X=En,at=Fn;switch(ei){case 8:Fr(),z=6;break t;case 3:case 2:case 6:is.current===null&&(o=!0);var St=ei;if(ei=0,Fn=null,w(s,X,at,St),h&&La){z=0;break t}break;default:St=ei,ei=0,Fn=null,w(s,X,at,St)}}Nm(),z=hi;break}catch(Xt){El(s,Xt)}while(!0);return o&&s.shellSuspendCounter++,lr=Or=null,un=m,N.H=S,N.A=A,En===null&&(Qn=null,$e=0,lf()),z}function Nm(){for(;En!==null;)v(En)}function c(s,o){var h=un;un|=2;var m=fu(),S=pd();Qn!==s||$e!==o?(qn=null,Cn=F()+500,Ro(s,o)):La=ce(s,o);t:do try{if(ei!==0&&En!==null){o=En;var A=Fn;e:switch(ei){case 1:ei=0,Fn=null,w(s,o,A,1);break;case 2:if(kg(A)){ei=0,Fn=null,b(o);break}o=function(){ei===2&&Qn===s&&(ei=7),ni(s)},A.then(o,o);break t;case 3:ei=7;break t;case 4:ei=5;break t;case 7:kg(A)?(ei=0,Fn=null,b(o)):(ei=0,Fn=null,w(s,o,A,7));break;case 5:var z=null;switch(En.tag){case 26:z=En.memoizedState;case 5:case 27:var X=En;if(!z||TT(z)){ei=0,Fn=null;var at=X.sibling;if(at!==null)En=at;else{var St=X.return;St!==null?(En=St,U(St)):En=null}break e}}ei=0,Fn=null,w(s,o,A,5);break;case 6:ei=0,Fn=null,w(s,o,A,6);break;case 8:Fr(),hi=6;break t;default:throw Error(n(462))}}f();break}catch(Xt){El(s,Xt)}while(!0);return lr=Or=null,N.H=m,N.A=S,un=h,En!==null?0:(Qn=null,$e=0,lf(),hi)}function f(){for(;En!==null&&!ye();)v(En)}function v(s){var o=Ef(s.alternate,s,wo);s.memoizedProps=s.pendingProps,o===null?U(s):En=o}function b(s){var o=s,h=o.alternate;switch(o.tag){case 15:case 0:o=Dv(h,o,o.pendingProps,o.type,void 0,$e);break;case 11:o=Dv(h,o,o.pendingProps,o.type.render,o.ref,$e);break;case 5:qh(o);default:Rm(h,o),o=En=_l(o,wo),o=Ef(h,o,wo)}s.memoizedProps=s.pendingProps,o===null?U(s):En=o}function w(s,o,h,m){lr=Or=null,qh(o),nl=null,gf=0;var S=o.return;try{if(y1(s,S,o,h,$e)){hi=1,nd(s,ns(h,s.current)),En=null;return}}catch(A){if(S!==null)throw En=S,A;hi=1,nd(s,ns(h,s.current)),En=null;return}o.flags&32768?(Ln||m===1?s=!0:La||($e&536870912)!==0?s=!1:(zi=s=!0,(m===2||m===3||m===6)&&(m=is.current,m!==null&&m.tag===13&&(m.flags|=16384))),Y(o,s)):U(o)}function U(s){var o=s;do{if((o.flags&32768)!==0){Y(o,zi);return}s=o.return;var h=_1(o.alternate,o,wo);if(h!==null){En=h;return}if(o=o.sibling,o!==null){En=o;return}En=o=s}while(o!==null);hi===0&&(hi=5)}function Y(s,o){do{var h=Ai(s.alternate,s);if(h!==null){h.flags&=32767,En=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(s=s.sibling,s!==null)){En=s;return}En=s=h}while(s!==null);hi=6,En=null}function ct(s,o,h,m,S,A,z,X,at,St){var Xt=N.T,le=Mt.p;try{Mt.p=2,N.T=null,Tt(s,o,h,m,le,S,A,z,X,at,St)}finally{N.T=Xt,Mt.p=le}}function Tt(s,o,h,m,S,A,z,X){do me();while(Ws!==null);if((un&6)!==0)throw Error(n(327));var at=s.finishedWork;if(m=s.finishedLanes,at===null)return null;if(s.finishedWork=null,s.finishedLanes=0,at===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var St=at.lanes|at.childLanes;if(St|=so,Nc(s,m,St,A,z,X),s===Qn&&(En=Qn=null,$e=0),(at.subtreeFlags&10256)===0&&(at.flags&10256)===0||qs||(qs=!0,mr=St,yi=h,bt(Pt,function(){return me(),null})),h=(at.flags&15990)!==0,(at.subtreeFlags&15990)!==0||h?(h=N.T,N.T=null,A=Mt.p,Mt.p=2,z=un,un|=4,su(s,at),cc(at,s),qp(R1,s.containerInfo),Xv=!!C1,R1=C1=null,s.current=at,ru(s,at.alternate,at),Q(),un=z,Mt.p=A,N.T=h):s.current=at,qs?(qs=!1,Ws=s,hc=m):kt(s,St),St=s.pendingLanes,St===0&&(Ki=null),De(at.stateNode),ni(s),o!==null)for(S=s.onRecoverableError,at=0;at<o.length;at++)St=o[at],S(St.value,{componentStack:St.stack});return(hc&3)!==0&&me(),St=s.pendingLanes,(m&4194218)!==0&&(St&42)!==0?s===Co?Zs++:(Zs=0,Co=s):Zs=0,Rn(0),null}function kt(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,al(o)))}function me(){if(Ws!==null){var s=Ws,o=mr;mr=0;var h=ys(hc),m=N.T,S=Mt.p;try{if(Mt.p=32>h?32:h,N.T=null,Ws===null)var A=!1;else{h=yi,yi=null;var z=Ws,X=hc;if(Ws=null,hc=0,(un&6)!==0)throw Error(n(331));var at=un;if(un|=4,ou(z.current),bo(z,z.current,X,h),un=at,Rn(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Zt,z)}catch{}A=!0}return A}finally{Mt.p=S,N.T=m,kt(s,o)}}return!1}function Ne(s,o,h){o=ns(h,o),o=mm(s.stateNode,o,2),s=Ts(s,o,2),s!==null&&(_i(s,2),ni(s))}function de(s,o,h){if(s.tag===3)Ne(s,s,h);else for(;o!==null;){if(o.tag===3){Ne(o,s,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ki===null||!Ki.has(m))){s=ns(h,s),h=gm(2),m=Ts(o,h,2),m!==null&&(Cv(h,m,o,s),_i(m,2),ni(m));break}}o=o.return}}function fn(s,o,h){var m=s.pingCache;if(m===null){m=s.pingCache=new Ao;var S=new Set;m.set(o,S)}else S=m.get(o),S===void 0&&(S=new Set,m.set(o,S));S.has(h)||(Ml=!0,S.add(h),s=Qs.bind(null,s,o,h),o.then(s,s))}function Qs(s,o,h){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,Qn===s&&($e&h)===h&&(hi===4||hi===3&&($e&62914560)===$e&&300>F()-Sn?(un&2)===0&&Ro(s,0):cu|=h,zr===$e&&(zr=0)),ni(s)}function hu(s,o){o===0&&(o=hn()),s=ro(s,o),s!==null&&(_i(s,o),ni(s))}function mc(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),hu(s,h)}function Ut(s,o){var h=0;switch(s.tag){case 13:var m=s.stateNode,S=s.memoizedState;S!==null&&(h=S.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),hu(s,h)}function bt(s,o){return be(s,o)}var Lt=null,he=null,We=!1,$n=!1,en=!1,Tn=0;function ni(s){s!==he&&s.next===null&&(he===null?Lt=he=s:he=he.next=s),$n=!0,We||(We=!0,lU(Tl))}function Rn(s,o){if(!en&&$n){en=!0;do for(var h=!1,m=Lt;m!==null;){if(s!==0){var S=m.pendingLanes;if(S===0)var A=0;else{var z=m.suspendedLanes,X=m.pingedLanes;A=(1<<31-_t(42|s)+1)-1,A&=S&~(z&~X),A=A&201326677?A&201326677|1:A?A|2:0}A!==0&&(h=!0,aT(m,A))}else A=$e,A=Yt(m,m===Qn?A:0),(A&3)===0||ce(m,A)||(h=!0,aT(m,A));m=m.next}while(h);en=!1}}function Tl(){$n=We=!1;var s=0;Tn!==0&&(gU()&&(s=Tn),Tn=0);for(var o=F(),h=null,m=Lt;m!==null;){var S=m.next,A=Pv(m,o);A===0?(m.next=null,h===null?Lt=S:h.next=S,S===null&&(he=h)):(h=m,(s!==0||(A&3)!==0)&&($n=!0)),m=S}Rn(s)}function Pv(s,o){for(var h=s.suspendedLanes,m=s.pingedLanes,S=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var z=31-_t(A),X=1<<z,at=S[z];at===-1?((X&h)===0||(X&m)!==0)&&(S[z]=je(X,o)):at<=o&&(s.expiredLanes|=X),A&=~X}if(o=Qn,h=$e,h=Yt(s,s===o?h:0),m=s.callbackNode,h===0||s===o&&ei===2||s.cancelPendingCommit!==null)return m!==null&&m!==null&&He(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||ce(s,h)){if(o=h&-h,o===s.callbackPriority)return o;switch(m!==null&&He(m),ys(h)){case 2:case 8:h=qt;break;case 32:h=Pt;break;case 268435456:h=Me;break;default:h=Pt}return m=iT.bind(null,s),h=be(h,m),s.callbackPriority=o,s.callbackNode=h,o}return m!==null&&m!==null&&He(m),s.callbackPriority=2,s.callbackNode=null,2}function iT(s,o){var h=s.callbackNode;if(me()&&s.callbackNode!==h)return null;var m=$e;return m=Yt(s,s===Qn?m:0),m===0?null:(uu(s,m,o),Pv(s,F()),s.callbackNode!=null&&s.callbackNode===h?iT.bind(null,s):null)}function aT(s,o){if(me())return null;uu(s,o,!0)}function lU(s){yU(function(){(un&6)!==0?be(Bt,s):s()})}function S1(){return Tn===0&&(Tn=pn()),Tn}function sT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:qu(""+s)}function rT(s,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,s.id&&h.setAttribute("form",s.id),o.parentNode.insertBefore(h,o),s=new FormData(s),h.parentNode.removeChild(h),s}function cU(s,o,h,m,S){if(o==="submit"&&h&&h.stateNode===S){var A=sT((S[xn]||null).action),z=m.submitter;z&&(o=(o=z[xn]||null)?sT(o.formAction):z.getAttribute("formAction"),o!==null&&(A=o,z=null));var X=new Pc("action","action",null,m,S);s.push({event:X,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Tn!==0){var at=z?rT(S,z):new FormData(S);um(h,{pending:!0,data:at,method:S.method,action:A},null,at)}}else typeof A=="function"&&(X.preventDefault(),at=z?rT(S,z):new FormData(S),um(h,{pending:!0,data:at,method:S.method,action:A},A,at))},currentTarget:S}]})}}for(var b1=0;b1<ao.length;b1++){var M1=ao[b1],uU=M1.toLowerCase(),fU=M1[0].toUpperCase()+M1.slice(1);Fs(uU,"on"+fU)}Fs(Kp,"onAnimationEnd"),Fs(es,"onAnimationIteration"),Fs(Qp,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(io,"onTransitionRun"),Fs(kc,"onTransitionStart"),Fs(Ko,"onTransitionCancel"),Fs(Vh,"onTransitionEnd"),yt("onMouseEnter",["mouseout","mouseover"]),yt("onMouseLeave",["mouseout","mouseover"]),yt("onPointerEnter",["pointerout","pointerover"]),yt("onPointerLeave",["pointerout","pointerover"]),pt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pt("onBeforeInput",["compositionend","keypress","textInput","paste"]),pt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Um="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Um));function oT(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],S=m.event;m=m.listeners;t:{var A=void 0;if(o)for(var z=m.length-1;0<=z;z--){var X=m[z],at=X.instance,St=X.currentTarget;if(X=X.listener,at!==A&&S.isPropagationStopped())break t;A=X,S.currentTarget=St;try{A(S)}catch(Xt){ed(Xt)}S.currentTarget=null,A=at}else for(z=0;z<m.length;z++){if(X=m[z],at=X.instance,St=X.currentTarget,X=X.listener,at!==A&&S.isPropagationStopped())break t;A=X,S.currentTarget=St;try{A(S)}catch(Xt){ed(Xt)}S.currentTarget=null,A=at}}}}function In(s,o){var h=o[q];h===void 0&&(h=o[q]=new Set);var m=s+"__bubble";h.has(m)||(lT(o,s,2,!1),h.add(m))}function E1(s,o,h){var m=0;o&&(m|=4),lT(h,s,m,o)}var Iv="_reactListening"+Math.random().toString(36).slice(2);function T1(s){if(!s[Iv]){s[Iv]=!0,k.forEach(function(h){h!=="selectionchange"&&(hU.has(h)||E1(h,!1,s),E1(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Iv]||(o[Iv]=!0,E1("selectionchange",!1,o))}}function lT(s,o,h,m){switch(NT(o)){case 2:var S=zU;break;case 8:S=FU;break;default:S=z1}h=S.bind(null,o,h,s),S=void 0,!Zu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(S=!0),m?S!==void 0?s.addEventListener(o,h,{capture:!0,passive:S}):s.addEventListener(o,h,!0):S!==void 0?s.addEventListener(o,h,{passive:S}):s.addEventListener(o,h,!1)}function A1(s,o,h,m,S){var A=m;if((o&1)===0&&(o&2)===0&&m!==null)t:for(;;){if(m===null)return;var z=m.tag;if(z===3||z===4){var X=m.stateNode.containerInfo;if(X===S||X.nodeType===8&&X.parentNode===S)break;if(z===4)for(z=m.return;z!==null;){var at=z.tag;if((at===3||at===4)&&(at=z.stateNode.containerInfo,at===S||at.nodeType===8&&at.parentNode===S))return;z=z.return}for(;X!==null;){if(z=ie(X),z===null)return;if(at=z.tag,at===5||at===6||at===26||at===27){m=A=z;continue t}X=X.parentNode}}m=m.return}Up(function(){var St=A,Xt=Wu(h),le=[];t:{var Ot=Hh.get(s);if(Ot!==void 0){var jt=Pc,Ze=s;switch(s){case"keypress":if(ko(h)===0)break t;case"keydown":case"keyup":jt=Bp;break;case"focusin":Ze="focus",jt=Dh;break;case"focusout":Ze="blur",jt=Dh;break;case"beforeblur":case"afterblur":jt=Dh;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=l1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=Fp;break;case Kp:case es:case Qp:jt=Cg;break;case Vh:jt=to;break;case"scroll":case"scrollend":jt=Tg;break;case"wheel":jt=c1;break;case"copy":case"cut":case"paste":jt=Dg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=Uh;break;case"toggle":case"beforetoggle":jt=Yo}var dn=(o&4)!==0,Ji=!dn&&(s==="scroll"||s==="scrollend"),Et=dn?Ot!==null?Ot+"Capture":null:Ot;dn=[];for(var xt=St,Dt;xt!==null;){var Jt=xt;if(Dt=Jt.stateNode,Jt=Jt.tag,Jt!==5&&Jt!==26&&Jt!==27||Dt===null||Et===null||(Jt=Uc(xt,Et),Jt!=null&&dn.push(Om(xt,Jt,Dt))),Ji)break;xt=xt.return}0<dn.length&&(Ot=new jt(Ot,Ze,null,h,Xt),le.push({event:Ot,listeners:dn}))}}if((o&7)===0){t:{if(Ot=s==="mouseover"||s==="pointerover",jt=s==="mouseout"||s==="pointerout",Ot&&h!==Ah&&(Ze=h.relatedTarget||h.fromElement)&&(ie(Ze)||Ze[H]))break t;if((jt||Ot)&&(Ot=Xt.window===Xt?Xt:(Ot=Xt.ownerDocument)?Ot.defaultView||Ot.parentWindow:window,jt?(Ze=h.relatedTarget||h.toElement,jt=St,Ze=Ze?ie(Ze):null,Ze!==null&&(Ji=vt(Ze),dn=Ze.tag,Ze!==Ji||dn!==5&&dn!==27&&dn!==6)&&(Ze=null)):(jt=null,Ze=St),jt!==Ze)){if(dn=Pp,Jt="onMouseLeave",Et="onMouseEnter",xt="mouse",(s==="pointerout"||s==="pointerover")&&(dn=Uh,Jt="onPointerLeave",Et="onPointerEnter",xt="pointer"),Ji=jt==null?Ot:ee(jt),Dt=Ze==null?Ot:ee(Ze),Ot=new dn(Jt,xt+"leave",jt,h,Xt),Ot.target=Ji,Ot.relatedTarget=Dt,Jt=null,ie(Xt)===St&&(dn=new dn(Et,xt+"enter",Ze,h,Xt),dn.target=Dt,dn.relatedTarget=Ji,Jt=dn),Ji=Jt,jt&&Ze)e:{for(dn=jt,Et=Ze,xt=0,Dt=dn;Dt;Dt=md(Dt))xt++;for(Dt=0,Jt=Et;Jt;Jt=md(Jt))Dt++;for(;0<xt-Dt;)dn=md(dn),xt--;for(;0<Dt-xt;)Et=md(Et),Dt--;for(;xt--;){if(dn===Et||Et!==null&&dn===Et.alternate)break e;dn=md(dn),Et=md(Et)}dn=null}else dn=null;jt!==null&&cT(le,Ot,jt,dn,!1),Ze!==null&&Ji!==null&&cT(le,Ji,Ze,dn,!0)}}t:{if(Ot=St?ee(St):window,jt=Ot.nodeName&&Ot.nodeName.toLowerCase(),jt==="select"||jt==="input"&&Ot.type==="file")var Ge=Lh;else if(jp(Ot))if(Ph)Ge=Zo;else{Ge=Vg;var Dn=u1}else jt=Ot.nodeName,!jt||jt.toLowerCase()!=="input"||Ot.type!=="checkbox"&&Ot.type!=="radio"?St&&xs(St.elementType)&&(Ge=Lh):Ge=rf;if(Ge&&(Ge=Ge(s,St))){Ja(le,Ge,h,Xt);break t}Dn&&Dn(s,Ot,St),s==="focusout"&&St&&Ot.type==="number"&&St.memoizedProps.value!=null&&Bn(Ot,"number",Ot.value)}switch(Dn=St?ee(St):window,s){case"focusin":(jp(Dn)||Dn.contentEditable==="true")&&(Wl=Dn,Wp=St,jc=null);break;case"focusout":jc=Wp=Wl=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,zs(le,h,Xt);break;case"selectionchange":if(Bh)break;case"keydown":case"keyup":zs(le,h,Xt)}var Je;if($u)t:{switch(s){case"compositionstart":var an="onCompositionStart";break t;case"compositionend":an="onCompositionEnd";break t;case"compositionupdate":an="onCompositionUpdate";break t}an=void 0}else Wo?nf(s,h)&&(an="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(an="onCompositionStart");an&&(ef&&h.locale!=="ko"&&(Wo||an!=="onCompositionStart"?an==="onCompositionEnd"&&Wo&&(Je=Lp()):(Jr=Xt,Op="value"in Jr?Jr.value:Jr.textContent,Wo=!0)),Dn=Bv(St,an),0<Dn.length&&(an=new Nh(an,s,null,h,Xt),le.push({event:an,listeners:Dn}),Je?an.data=Je:(Je=Hp(h),Je!==null&&(an.data=Je)))),(Je=tf?af(s,h):Gp(s,h))&&(an=Bv(St,"onBeforeInput"),0<an.length&&(Dn=new Nh("onBeforeInput","beforeinput",null,h,Xt),le.push({event:Dn,listeners:an}),Dn.data=Je)),cU(le,s,St,h,Xt)}oT(le,o)})}function Om(s,o,h){return{instance:s,listener:o,currentTarget:h}}function Bv(s,o){for(var h=o+"Capture",m=[];s!==null;){var S=s,A=S.stateNode;S=S.tag,S!==5&&S!==26&&S!==27||A===null||(S=Uc(s,h),S!=null&&m.unshift(Om(s,S,A)),S=Uc(s,o),S!=null&&m.push(Om(s,S,A))),s=s.return}return m}function md(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function cT(s,o,h,m,S){for(var A=o._reactName,z=[];h!==null&&h!==m;){var X=h,at=X.alternate,St=X.stateNode;if(X=X.tag,at!==null&&at===m)break;X!==5&&X!==26&&X!==27||St===null||(at=St,S?(St=Uc(h,A),St!=null&&z.unshift(Om(h,St,at))):S||(St=Uc(h,A),St!=null&&z.push(Om(h,St,at)))),h=h.return}z.length!==0&&s.push({event:o,listeners:z})}var dU=/\r\n?/g,pU=/\u0000|\uFFFD/g;function uT(s){return(typeof s=="string"?s:""+s).replace(dU,`
`).replace(pU,"")}function fT(s,o){return o=uT(o),uT(s)===o}function zv(){}function oi(s,o,h,m,S,A){switch(h){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Gi(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Gi(s,""+m);break;case"className":Ve(s,"class",m);break;case"tabIndex":Ve(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ve(s,h,m);break;case"style":jl(s,m,A);break;case"data":if(o!=="object"){Ve(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=qu(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(o!=="input"&&oi(s,o,"name",S.name,S,null),oi(s,o,"formEncType",S.formEncType,S,null),oi(s,o,"formMethod",S.formMethod,S,null),oi(s,o,"formTarget",S.formTarget,S,null)):(oi(s,o,"encType",S.encType,S,null),oi(s,o,"method",S.method,S,null),oi(s,o,"target",S.target,S,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=qu(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=zv);break;case"onScroll":m!=null&&In("scroll",s);break;case"onScrollEnd":m!=null&&In("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(S.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=qu(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":In("beforetoggle",s),In("toggle",s),xe(s,"popover",m);break;case"xlinkActuate":_e(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":_e(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":_e(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":_e(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":_e(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":_e(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":_e(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":_e(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":_e(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":xe(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Mg.get(h)||h,xe(s,h,m))}}function w1(s,o,h,m,S,A){switch(h){case"style":jl(s,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(S.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"children":typeof m=="string"?Gi(s,m):(typeof m=="number"||typeof m=="bigint")&&Gi(s,""+m);break;case"onScroll":m!=null&&In("scroll",s);break;case"onScrollEnd":m!=null&&In("scrollend",s);break;case"onClick":m!=null&&(s.onclick=zv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(S=h.endsWith("Capture"),o=h.slice(2,S?h.length-7:void 0),A=s[xn]||null,A=A!=null?A[h]:null,typeof A=="function"&&s.removeEventListener(o,A,S),typeof m=="function")){typeof A!="function"&&A!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(o,m,S);break t}h in s?s[h]=m:m===!0?s.setAttribute(h,""):xe(s,h,m)}}}function Wa(s,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":In("error",s),In("load",s);var m=!1,S=!1,A;for(A in h)if(h.hasOwnProperty(A)){var z=h[A];if(z!=null)switch(A){case"src":m=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:oi(s,o,A,z,h,null)}}S&&oi(s,o,"srcSet",h.srcSet,h,null),m&&oi(s,o,"src",h.src,h,null);return;case"input":In("invalid",s);var X=A=z=S=null,at=null,St=null;for(m in h)if(h.hasOwnProperty(m)){var Xt=h[m];if(Xt!=null)switch(m){case"name":S=Xt;break;case"type":z=Xt;break;case"checked":at=Xt;break;case"defaultChecked":St=Xt;break;case"value":A=Xt;break;case"defaultValue":X=Xt;break;case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(n(137,o));break;default:oi(s,o,m,Xt,h,null)}}ua(s,A,X,at,St,z,S,!1),gn(s);return;case"select":In("invalid",s),m=z=A=null;for(S in h)if(h.hasOwnProperty(S)&&(X=h[S],X!=null))switch(S){case"value":A=X;break;case"defaultValue":z=X;break;case"multiple":m=X;default:oi(s,o,S,X,h,null)}o=A,h=z,s.multiple=!!m,o!=null?Di(s,!!m,o,!1):h!=null&&Di(s,!!m,h,!0);return;case"textarea":In("invalid",s),A=S=m=null;for(z in h)if(h.hasOwnProperty(z)&&(X=h[z],X!=null))switch(z){case"value":m=X;break;case"defaultValue":S=X;break;case"children":A=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:oi(s,o,z,X,h,null)}Ei(s,m,S,A),gn(s);return;case"option":for(at in h)if(h.hasOwnProperty(at)&&(m=h[at],m!=null))switch(at){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:oi(s,o,at,m,h,null)}return;case"dialog":In("cancel",s),In("close",s);break;case"iframe":case"object":In("load",s);break;case"video":case"audio":for(m=0;m<Um.length;m++)In(Um[m],s);break;case"image":In("error",s),In("load",s);break;case"details":In("toggle",s);break;case"embed":case"source":case"link":In("error",s),In("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(St in h)if(h.hasOwnProperty(St)&&(m=h[St],m!=null))switch(St){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:oi(s,o,St,m,h,null)}return;default:if(xs(o)){for(Xt in h)h.hasOwnProperty(Xt)&&(m=h[Xt],m!==void 0&&w1(s,o,Xt,m,h,void 0));return}}for(X in h)h.hasOwnProperty(X)&&(m=h[X],m!=null&&oi(s,o,X,m,h,null))}function mU(s,o,h,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,A=null,z=null,X=null,at=null,St=null,Xt=null;for(jt in h){var le=h[jt];if(h.hasOwnProperty(jt)&&le!=null)switch(jt){case"checked":break;case"value":break;case"defaultValue":at=le;default:m.hasOwnProperty(jt)||oi(s,o,jt,null,m,le)}}for(var Ot in m){var jt=m[Ot];if(le=h[Ot],m.hasOwnProperty(Ot)&&(jt!=null||le!=null))switch(Ot){case"type":A=jt;break;case"name":S=jt;break;case"checked":St=jt;break;case"defaultChecked":Xt=jt;break;case"value":z=jt;break;case"defaultValue":X=jt;break;case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(n(137,o));break;default:jt!==le&&oi(s,o,Ot,jt,m,le)}}Hn(s,z,X,at,St,Xt,A,S);return;case"select":jt=z=X=Ot=null;for(A in h)if(at=h[A],h.hasOwnProperty(A)&&at!=null)switch(A){case"value":break;case"multiple":jt=at;default:m.hasOwnProperty(A)||oi(s,o,A,null,m,at)}for(S in m)if(A=m[S],at=h[S],m.hasOwnProperty(S)&&(A!=null||at!=null))switch(S){case"value":Ot=A;break;case"defaultValue":X=A;break;case"multiple":z=A;default:A!==at&&oi(s,o,S,A,m,at)}o=X,h=z,m=jt,Ot!=null?Di(s,!!h,Ot,!1):!!m!=!!h&&(o!=null?Di(s,!!h,o,!0):Di(s,!!h,h?[]:"",!1));return;case"textarea":jt=Ot=null;for(X in h)if(S=h[X],h.hasOwnProperty(X)&&S!=null&&!m.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:oi(s,o,X,null,m,S)}for(z in m)if(S=m[z],A=h[z],m.hasOwnProperty(z)&&(S!=null||A!=null))switch(z){case"value":Ot=S;break;case"defaultValue":jt=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==A&&oi(s,o,z,S,m,A)}jn(s,Ot,jt);return;case"option":for(var Ze in h)if(Ot=h[Ze],h.hasOwnProperty(Ze)&&Ot!=null&&!m.hasOwnProperty(Ze))switch(Ze){case"selected":s.selected=!1;break;default:oi(s,o,Ze,null,m,Ot)}for(at in m)if(Ot=m[at],jt=h[at],m.hasOwnProperty(at)&&Ot!==jt&&(Ot!=null||jt!=null))switch(at){case"selected":s.selected=Ot&&typeof Ot!="function"&&typeof Ot!="symbol";break;default:oi(s,o,at,Ot,m,jt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dn in h)Ot=h[dn],h.hasOwnProperty(dn)&&Ot!=null&&!m.hasOwnProperty(dn)&&oi(s,o,dn,null,m,Ot);for(St in m)if(Ot=m[St],jt=h[St],m.hasOwnProperty(St)&&Ot!==jt&&(Ot!=null||jt!=null))switch(St){case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(n(137,o));break;default:oi(s,o,St,Ot,m,jt)}return;default:if(xs(o)){for(var Ji in h)Ot=h[Ji],h.hasOwnProperty(Ji)&&Ot!==void 0&&!m.hasOwnProperty(Ji)&&w1(s,o,Ji,void 0,m,Ot);for(Xt in m)Ot=m[Xt],jt=h[Xt],!m.hasOwnProperty(Xt)||Ot===jt||Ot===void 0&&jt===void 0||w1(s,o,Xt,Ot,m,jt);return}}for(var Et in h)Ot=h[Et],h.hasOwnProperty(Et)&&Ot!=null&&!m.hasOwnProperty(Et)&&oi(s,o,Et,null,m,Ot);for(le in m)Ot=m[le],jt=h[le],!m.hasOwnProperty(le)||Ot===jt||Ot==null&&jt==null||oi(s,o,le,Ot,m,jt)}var C1=null,R1=null;function Fv(s){return s.nodeType===9?s:s.ownerDocument}function hT(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dT(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function D1(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var N1=null;function gU(){var s=window.event;return s&&s.type==="popstate"?s===N1?!1:(N1=s,!0):(N1=null,!1)}var pT=typeof setTimeout=="function"?setTimeout:void 0,vU=typeof clearTimeout=="function"?clearTimeout:void 0,mT=typeof Promise=="function"?Promise:void 0,yU=typeof queueMicrotask=="function"?queueMicrotask:typeof mT<"u"?function(s){return mT.resolve(null).then(s).catch(xU)}:pT;function xU(s){setTimeout(function(){throw s})}function U1(s,o){var h=o,m=0;do{var S=h.nextSibling;if(s.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(m===0){s.removeChild(S),Hm(o);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=S}while(h);Hm(o)}function O1(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":O1(h),pe(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function _U(s,o,h,m){for(;s.nodeType===1;){var S=h;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[zt])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==S.rel||s.getAttribute("href")!==(S.href==null?null:S.href)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||s.getAttribute("title")!==(S.title==null?null:S.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(S.src==null?null:S.src)||s.getAttribute("type")!==(S.type==null?null:S.type)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var A=S.name==null?null:""+S.name;if(S.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=Do(s.nextSibling),s===null)break}return null}function SU(s,o,h){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=Do(s.nextSibling),s===null))return null;return s}function Do(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}function gT(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return s;o--}else h==="/$"&&o++}s=s.previousSibling}return null}function vT(s,o,h){switch(o=Fv(h),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}var Vr=new Map,yT=new Set;function Vv(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var gc=Mt.d;Mt.d={f:bU,r:MU,D:EU,C:TU,L:AU,m:wU,X:RU,S:CU,M:DU};function bU(){var s=gc.f(),o=dc();return s||o}function MU(s){var o=oe(s);o!==null&&o.tag===5&&o.type==="form"?gv(o):gc.r(s)}var gd=typeof document>"u"?null:document;function xT(s,o,h){var m=gd;if(m&&typeof o=="string"&&o){var S=Ce(o);S='link[rel="'+s+'"][href="'+S+'"]',typeof h=="string"&&(S+='[crossorigin="'+h+'"]'),yT.has(S)||(yT.add(S),s={rel:s,crossOrigin:h,href:o},m.querySelector(S)===null&&(o=m.createElement("link"),Wa(o,"link",s),re(o),m.head.appendChild(o)))}}function EU(s){gc.D(s),xT("dns-prefetch",s,null)}function TU(s,o){gc.C(s,o),xT("preconnect",s,o)}function AU(s,o,h){gc.L(s,o,h);var m=gd;if(m&&s&&o){var S='link[rel="preload"][as="'+Ce(o)+'"]';o==="image"&&h&&h.imageSrcSet?(S+='[imagesrcset="'+Ce(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(S+='[imagesizes="'+Ce(h.imageSizes)+'"]')):S+='[href="'+Ce(s)+'"]';var A=S;switch(o){case"style":A=vd(s);break;case"script":A=yd(s)}Vr.has(A)||(s=I({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:s,as:o},h),Vr.set(A,s),m.querySelector(S)!==null||o==="style"&&m.querySelector(Lm(A))||o==="script"&&m.querySelector(Pm(A))||(o=m.createElement("link"),Wa(o,"link",s),re(o),m.head.appendChild(o)))}}function wU(s,o){gc.m(s,o);var h=gd;if(h&&s){var m=o&&typeof o.as=="string"?o.as:"script",S='link[rel="modulepreload"][as="'+Ce(m)+'"][href="'+Ce(s)+'"]',A=S;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=yd(s)}if(!Vr.has(A)&&(s=I({rel:"modulepreload",href:s},o),Vr.set(A,s),h.querySelector(S)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Pm(A)))return}m=h.createElement("link"),Wa(m,"link",s),re(m),h.head.appendChild(m)}}}function CU(s,o,h){gc.S(s,o,h);var m=gd;if(m&&s){var S=ge(m).hoistableStyles,A=vd(s);o=o||"default";var z=S.get(A);if(!z){var X={loading:0,preload:null};if(z=m.querySelector(Lm(A)))X.loading=5;else{s=I({rel:"stylesheet",href:s,"data-precedence":o},h),(h=Vr.get(A))&&L1(s,h);var at=z=m.createElement("link");re(at),Wa(at,"link",s),at._p=new Promise(function(St,Xt){at.onload=St,at.onerror=Xt}),at.addEventListener("load",function(){X.loading|=1}),at.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Hv(z,o,m)}z={type:"stylesheet",instance:z,count:1,state:X},S.set(A,z)}}}function RU(s,o){gc.X(s,o);var h=gd;if(h&&s){var m=ge(h).hoistableScripts,S=yd(s),A=m.get(S);A||(A=h.querySelector(Pm(S)),A||(s=I({src:s,async:!0},o),(o=Vr.get(S))&&P1(s,o),A=h.createElement("script"),re(A),Wa(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(S,A))}}function DU(s,o){gc.M(s,o);var h=gd;if(h&&s){var m=ge(h).hoistableScripts,S=yd(s),A=m.get(S);A||(A=h.querySelector(Pm(S)),A||(s=I({src:s,async:!0,type:"module"},o),(o=Vr.get(S))&&P1(s,o),A=h.createElement("script"),re(A),Wa(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(S,A))}}function _T(s,o,h,m){var S=(S=Oe.current)?Vv(S):null;if(!S)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=vd(h.href),h=ge(S).hoistableStyles,m=h.get(o),m||(m={type:"style",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=vd(h.href);var A=ge(S).hoistableStyles,z=A.get(s);if(z||(S=S.ownerDocument||S,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,z),(A=S.querySelector(Lm(s)))&&!A._p&&(z.instance=A,z.state.loading=5),Vr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Vr.set(s,h),A||NU(S,s,h,z.state))),o&&m===null)throw Error(n(528,""));return z}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=yd(h),h=ge(S).hoistableScripts,m=h.get(o),m||(m={type:"script",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function vd(s){return'href="'+Ce(s)+'"'}function Lm(s){return'link[rel="stylesheet"]['+s+"]"}function ST(s){return I({},s,{"data-precedence":s.precedence,precedence:null})}function NU(s,o,h,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Wa(o,"link",h),re(o),s.head.appendChild(o))}function yd(s){return'[src="'+Ce(s)+'"]'}function Pm(s){return"script[async]"+s}function bT(s,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+Ce(h.href)+'"]');if(m)return o.instance=m,re(m),m;var S=I({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),re(m),Wa(m,"style",S),Hv(m,h.precedence,s),o.instance=m;case"stylesheet":S=vd(h.href);var A=s.querySelector(Lm(S));if(A)return o.state.loading|=4,o.instance=A,re(A),A;m=ST(h),(S=Vr.get(S))&&L1(m,S),A=(s.ownerDocument||s).createElement("link"),re(A);var z=A;return z._p=new Promise(function(X,at){z.onload=X,z.onerror=at}),Wa(A,"link",m),o.state.loading|=4,Hv(A,h.precedence,s),o.instance=A;case"script":return A=yd(h.src),(S=s.querySelector(Pm(A)))?(o.instance=S,re(S),S):(m=h,(S=Vr.get(A))&&(m=I({},h),P1(m,S)),s=s.ownerDocument||s,S=s.createElement("script"),re(S),Wa(S,"link",m),s.head.appendChild(S),o.instance=S);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Hv(m,h.precedence,s));return o.instance}function Hv(s,o,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=m.length?m[m.length-1]:null,A=S,z=0;z<m.length;z++){var X=m[z];if(X.dataset.precedence===o)A=X;else if(A!==S)break}A?A.parentNode.insertBefore(s,A.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(s,o.firstChild))}function L1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function P1(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Gv=null;function MT(s,o,h){if(Gv===null){var m=new Map,S=Gv=new Map;S.set(h,m)}else S=Gv,m=S.get(h),m||(m=new Map,S.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),S=0;S<h.length;S++){var A=h[S];if(!(A[zt]||A[ai]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var z=A.getAttribute(o)||"";z=s+z;var X=m.get(z);X?X.push(A):m.set(z,[A])}}return m}function ET(s,o,h){s=s.ownerDocument||s,s.head.insertBefore(h,o==="title"?s.querySelector("head > title"):null)}function UU(s,o,h){if(h===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function TT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Im=null;function OU(){}function LU(s,o,h){if(Im===null)throw Error(n(475));var m=Im;if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var S=vd(h.href),A=s.querySelector(Lm(S));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=jv.bind(m),s.then(m,m)),o.state.loading|=4,o.instance=A,re(A);return}A=s.ownerDocument||s,h=ST(h),(S=Vr.get(S))&&L1(h,S),A=A.createElement("link"),re(A);var z=A;z._p=new Promise(function(X,at){z.onload=X,z.onerror=at}),Wa(A,"link",h),o.instance=A}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=jv.bind(m),s.addEventListener("load",o),s.addEventListener("error",o))}}function PU(){if(Im===null)throw Error(n(475));var s=Im;return s.stylesheets&&s.count===0&&I1(s,s.stylesheets),0<s.count?function(o){var h=setTimeout(function(){if(s.stylesheets&&I1(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(h)}}:null}function jv(){if(this.count--,this.count===0){if(this.stylesheets)I1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var kv=null;function I1(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,kv=new Map,o.forEach(IU,s),kv=null,jv.call(s))}function IU(s,o){if(!(o.state.loading&4)){var h=kv.get(s);if(h)var m=h.get(null);else{h=new Map,kv.set(s,h);for(var S=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<S.length;A++){var z=S[A];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(h.set(z.dataset.precedence,z),m=z)}m&&h.set(null,m)}S=o.instance,z=S.getAttribute("data-precedence"),A=h.get(z)||m,A===m&&h.set(null,S),h.set(z,S),this.count++,m=jv.bind(this),S.addEventListener("load",m),S.addEventListener("error",m),A?A.parentNode.insertBefore(S,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(S,s.firstChild)),o.state.loading|=4}}var Bm={$$typeof:_,Provider:null,Consumer:null,_currentValue:Vt,_currentValue2:Vt,_threadCount:0};function BU(s,o,h,m,S,A,z,X){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=m,this.onUncaughtError=S,this.onCaughtError=A,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function AT(s,o,h,m,S,A,z,X,at,St,Xt,le){return s=new BU(s,o,h,z,X,at,St,le),o=1,A===!0&&(o|=24),A=Bi(3,null,null,o),s.current=A,A.stateNode=s,o=em(),o.refCount++,s.pooledCache=o,o.refCount++,A.memoizedState={element:m,isDehydrated:h,cache:o},ja(A),s}function wT(s){return s?(s=Qo,s):Qo}function CT(s,o,h,m,S,A){S=wT(S),m.context===null?m.context=S:m.pendingContext=S,m=Es(o),m.payload={element:h},A=A===void 0?null:A,A!==null&&(m.callback=A),h=Ts(s,m,o),h!==null&&(Qi(h,s,o),ml(h,s,o))}function RT(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function B1(s,o){RT(s,o),(s=s.alternate)&&RT(s,o)}function DT(s){if(s.tag===13){var o=ro(s,67108864);o!==null&&Qi(o,s,67108864),B1(s,67108864)}}var Xv=!0;function zU(s,o,h,m){var S=N.T;N.T=null;var A=Mt.p;try{Mt.p=2,z1(s,o,h,m)}finally{Mt.p=A,N.T=S}}function FU(s,o,h,m){var S=N.T;N.T=null;var A=Mt.p;try{Mt.p=8,z1(s,o,h,m)}finally{Mt.p=A,N.T=S}}function z1(s,o,h,m){if(Xv){var S=F1(m);if(S===null)A1(s,o,m,Yv,h),UT(s,m);else if(HU(S,s,o,h,m))m.stopPropagation();else if(UT(s,m),o&4&&-1<VU.indexOf(s)){for(;S!==null;){var A=oe(S);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var z=ne(A.pendingLanes);if(z!==0){var X=A;for(X.pendingLanes|=2,X.entangledLanes|=2;z;){var at=1<<31-_t(z);X.entanglements[1]|=at,z&=~at}ni(A),(un&6)===0&&(Cn=F()+500,Rn(0))}}break;case 13:X=ro(A,2),X!==null&&Qi(X,A,2),dc(),B1(A,2)}if(A=F1(m),A===null&&A1(s,o,m,Yv,h),A===S)break;S=A}S!==null&&m.stopPropagation()}else A1(s,o,m,null,h)}}function F1(s){return s=Wu(s),V1(s)}var Yv=null;function V1(s){if(Yv=null,s=ie(s),s!==null){var o=vt(s);if(o===null)s=null;else{var h=o.tag;if(h===13){if(s=ut(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Yv=s,null}function NT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case Bt:return 2;case qt:return 8;case Pt:case Le:return 32;case Me:return 268435456;default:return 32}default:return 32}}var H1=!1,du=null,pu=null,mu=null,zm=new Map,Fm=new Map,gu=[],VU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UT(s,o){switch(s){case"focusin":case"focusout":du=null;break;case"dragenter":case"dragleave":pu=null;break;case"mouseover":case"mouseout":mu=null;break;case"pointerover":case"pointerout":zm.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fm.delete(o.pointerId)}}function Vm(s,o,h,m,S,A){return s===null||s.nativeEvent!==A?(s={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:A,targetContainers:[S]},o!==null&&(o=oe(o),o!==null&&DT(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,S!==null&&o.indexOf(S)===-1&&o.push(S),s)}function HU(s,o,h,m,S){switch(o){case"focusin":return du=Vm(du,s,o,h,m,S),!0;case"dragenter":return pu=Vm(pu,s,o,h,m,S),!0;case"mouseover":return mu=Vm(mu,s,o,h,m,S),!0;case"pointerover":var A=S.pointerId;return zm.set(A,Vm(zm.get(A)||null,s,o,h,m,S)),!0;case"gotpointercapture":return A=S.pointerId,Fm.set(A,Vm(Fm.get(A)||null,s,o,h,m,S)),!0}return!1}function OT(s){var o=ie(s.target);if(o!==null){var h=vt(o);if(h!==null){if(o=h.tag,o===13){if(o=ut(h),o!==null){s.blockedOn=o,va(s.priority,function(){if(h.tag===13){var m=qa(),S=ro(h,m);S!==null&&Qi(S,h,m),B1(h,m)}});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function qv(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=F1(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);Ah=m,h.target.dispatchEvent(m),Ah=null}else return o=oe(h),o!==null&&DT(o),s.blockedOn=h,!1;o.shift()}return!0}function LT(s,o,h){qv(s)&&h.delete(o)}function GU(){H1=!1,du!==null&&qv(du)&&(du=null),pu!==null&&qv(pu)&&(pu=null),mu!==null&&qv(mu)&&(mu=null),zm.forEach(LT),Fm.forEach(LT)}function Wv(s,o){s.blockedOn===o&&(s.blockedOn=null,H1||(H1=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,GU)))}var Zv=null;function PT(s){Zv!==s&&(Zv=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zv===s&&(Zv=null);for(var o=0;o<s.length;o+=3){var h=s[o],m=s[o+1],S=s[o+2];if(typeof m!="function"){if(V1(m||h)===null)continue;break}var A=oe(h);A!==null&&(s.splice(o,3),o-=3,um(A,{pending:!0,data:S,method:h.method,action:m},m,S))}}))}function Hm(s){function o(at){return Wv(at,s)}du!==null&&Wv(du,s),pu!==null&&Wv(pu,s),mu!==null&&Wv(mu,s),zm.forEach(o),Fm.forEach(o);for(var h=0;h<gu.length;h++){var m=gu[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<gu.length&&(h=gu[0],h.blockedOn===null);)OT(h),h.blockedOn===null&&gu.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var S=h[m],A=h[m+1],z=S[xn]||null;if(typeof A=="function")z||PT(h);else if(z){var X=null;if(A&&A.hasAttribute("formAction")){if(S=A,z=A[xn]||null)X=z.formAction;else if(V1(S)!==null)continue}else X=z.action;typeof X=="function"?h[m+1]=X:(h.splice(m,3),m-=3),PT(h)}}}function G1(s){this._internalRoot=s}Kv.prototype.render=G1.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var h=o.current,m=qa();CT(h,m,s,o,null,null)},Kv.prototype.unmount=G1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;s.tag===0&&me(),CT(s.current,2,null,s,null,null),dc(),o[H]=null}};function Kv(s){this._internalRoot=s}Kv.prototype.unstable_scheduleHydration=function(s){if(s){var o=Bs();s={blockedOn:null,target:s,priority:o};for(var h=0;h<gu.length&&o!==0&&o<gu[h].priority;h++);gu.splice(h,0,s),h===0&&OT(s)}};var IT=t.version;if(IT!=="19.0.0")throw Error(n(527,IT,"19.0.0"));Mt.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=st(o),s=s!==null?wt(s):null,s=s===null?null:s.stateNode,s};var jU={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:ie,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qv.isDisabled&&Qv.supportsFiber)try{Zt=Qv.inject(jU),Kt=Qv}catch{}}return jm.createRoot=function(s,o){if(!a(s))throw Error(n(299));var h=!1,m="",S=Ev,A=Tv,z=Av,X=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(S=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(X=o.unstable_transitionCallbacks)),o=AT(s,1,!1,null,null,h,m,S,A,z,X,null),s[H]=o.current,T1(s.nodeType===8?s.parentNode:s),new G1(o)},jm.hydrateRoot=function(s,o,h){if(!a(s))throw Error(n(299));var m=!1,S="",A=Ev,z=Tv,X=Av,at=null,St=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(z=h.onCaughtError),h.onRecoverableError!==void 0&&(X=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(at=h.unstable_transitionCallbacks),h.formState!==void 0&&(St=h.formState)),o=AT(s,1,!0,o,h??null,m,S,A,z,X,at,St),o.context=wT(null),h=o.current,m=qa(),S=Es(m),S.callback=null,Ts(h,S,m),o.current.lanes=m,_i(o,m),ni(o),s[H]=o.current,T1(s),new Kv(o)},jm.version="19.0.0",jm}var YT;function eO(){if(YT)return X1.exports;YT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),X1.exports=tO(),X1.exports}var nO=eO();const iO=d_(nO),mM=Z.createContext({});function gM(i){const t=Z.useRef(null);return t.current===null&&(t.current=i()),t.current}const vM=typeof window<"u",GC=vM?Z.useLayoutEffect:Z.useEffect,p_=Z.createContext(null);function yM(i,t){i.indexOf(t)===-1&&i.push(t)}function xM(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const wc=(i,t,e)=>e>t?t:e<i?i:e;let _M=()=>{};const Cc={},jC=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function kC(i){return typeof i=="object"&&i!==null}const XC=i=>/^0[^.\s]+$/u.test(i);function SM(i){let t;return()=>(t===void 0&&(t=i()),t)}const Xr=i=>i,aO=(i,t)=>e=>t(i(e)),$0=(...i)=>i.reduce(aO),T0=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class bM{constructor(){this.subscriptions=[]}add(t){return yM(this.subscriptions,t),()=>xM(this.subscriptions,t)}notify(t,e,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,n);else for(let r=0;r<a;r++){const l=this.subscriptions[r];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pl=i=>i*1e3,kr=i=>i/1e3;function YC(i,t){return t?i*(1e3/t):0}const qC=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,sO=1e-7,rO=12;function oO(i,t,e,n,a){let r,l,u=0;do l=t+(e-t)/2,r=qC(l,n,a)-i,r>0?e=l:t=l;while(Math.abs(r)>sO&&++u<rO);return l}function tg(i,t,e,n){if(i===t&&e===n)return Xr;const a=r=>oO(r,0,1,i,e);return r=>r===0||r===1?r:qC(a(r),t,n)}const WC=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,ZC=i=>t=>1-i(1-t),KC=tg(.33,1.53,.69,.99),MM=ZC(KC),QC=WC(MM),JC=i=>(i*=2)<1?.5*MM(i):.5*(2-Math.pow(2,-10*(i-1))),EM=i=>1-Math.sin(Math.acos(i)),$C=ZC(EM),tR=WC(EM),lO=tg(.42,0,1,1),cO=tg(0,0,.58,1),eR=tg(.42,0,.58,1),uO=i=>Array.isArray(i)&&typeof i[0]!="number",nR=i=>Array.isArray(i)&&typeof i[0]=="number",fO={linear:Xr,easeIn:lO,easeInOut:eR,easeOut:cO,circIn:EM,circInOut:tR,circOut:$C,backIn:MM,backInOut:QC,backOut:KC,anticipate:JC},hO=i=>typeof i=="string",qT=i=>{if(nR(i)){_M(i.length===4);const[t,e,n,a]=i;return tg(t,e,n,a)}else if(hO(i))return fO[i];return i},Jv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function dO(i,t){let e=new Set,n=new Set,a=!1,r=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(g){l.has(g)&&(p.schedule(g),i()),g(u)}const p={schedule:(g,y=!1,x=!1)=>{const E=x&&a?e:n;return y&&l.add(g),E.has(g)||E.add(g),g},cancel:g=>{n.delete(g),l.delete(g)},process:g=>{if(u=g,a){r=!0;return}a=!0,[e,n]=[n,e],e.forEach(d),e.clear(),a=!1,r&&(r=!1,p.process(g))}};return p}const pO=40;function iR(i,t){let e=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,l=Jv.reduce((D,L)=>(D[L]=dO(r),D),{}),{setup:u,read:d,resolveKeyframes:p,preUpdate:g,update:y,preRender:x,render:_,postRender:E}=l,C=()=>{const D=Cc.useManualTiming?a.timestamp:performance.now();e=!1,Cc.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(D-a.timestamp,pO),1)),a.timestamp=D,a.isProcessing=!0,u.process(a),d.process(a),p.process(a),g.process(a),y.process(a),x.process(a),_.process(a),E.process(a),a.isProcessing=!1,e&&t&&(n=!1,i(C))},T=()=>{e=!0,n=!0,a.isProcessing||i(C)};return{schedule:Jv.reduce((D,L)=>{const P=l[L];return D[L]=(B,G=!1,V=!1)=>(e||T(),P.schedule(B,G,V)),D},{}),cancel:D=>{for(let L=0;L<Jv.length;L++)l[Jv[L]].cancel(D)},state:a,steps:l}}const{schedule:Ci,cancel:Iu,state:Za,steps:Z1}=iR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xr,!0);let Jy;function mO(){Jy=void 0}const ir={now:()=>(Jy===void 0&&ir.set(Za.isProcessing||Cc.useManualTiming?Za.timestamp:performance.now()),Jy),set:i=>{Jy=i,queueMicrotask(mO)}},aR=i=>t=>typeof t=="string"&&t.startsWith(i),sR=aR("--"),gO=aR("var(--"),TM=i=>gO(i)?vO.test(i.split("/*")[0].trim()):!1,vO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mp={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},A0={...Mp,transform:i=>wc(0,1,i)},$v={...Mp,default:1},u0=i=>Math.round(i*1e5)/1e5,AM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yO(i){return i==null}const xO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,wM=(i,t)=>e=>!!(typeof e=="string"&&xO.test(e)&&e.startsWith(i)||t&&!yO(e)&&Object.prototype.hasOwnProperty.call(e,t)),rR=(i,t,e)=>n=>{if(typeof n!="string")return n;const[a,r,l,u]=n.match(AM);return{[i]:parseFloat(a),[t]:parseFloat(r),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},_O=i=>wc(0,255,i),K1={...Mp,transform:i=>Math.round(_O(i))},Jf={test:wM("rgb","red"),parse:rR("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+K1.transform(i)+", "+K1.transform(t)+", "+K1.transform(e)+", "+u0(A0.transform(n))+")"};function SO(i){let t="",e="",n="",a="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),a=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),a=i.substring(4,5),t+=t,e+=e,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const vb={test:wM("#"),parse:SO,transform:Jf.transform},eg=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),Au=eg("deg"),Il=eg("%"),on=eg("px"),bO=eg("vh"),MO=eg("vw"),WT={...Il,parse:i=>Il.parse(i)/100,transform:i=>Il.transform(i*100)},kd={test:wM("hsl","hue"),parse:rR("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+Il.transform(u0(t))+", "+Il.transform(u0(e))+", "+u0(A0.transform(n))+")"},ma={test:i=>Jf.test(i)||vb.test(i)||kd.test(i),parse:i=>Jf.test(i)?Jf.parse(i):kd.test(i)?kd.parse(i):vb.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?Jf.transform(i):kd.transform(i),getAnimatableNone:i=>{const t=ma.parse(i);return t.alpha=0,ma.transform(t)}},EO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function TO(i){var t,e;return isNaN(i)&&typeof i=="string"&&(((t=i.match(AM))==null?void 0:t.length)||0)+(((e=i.match(EO))==null?void 0:e.length)||0)>0}const oR="number",lR="color",AO="var",wO="var(",ZT="${}",CO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function w0(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},a=[];let r=0;const u=t.replace(CO,d=>(ma.test(d)?(n.color.push(r),a.push(lR),e.push(ma.parse(d))):d.startsWith(wO)?(n.var.push(r),a.push(AO),e.push(d)):(n.number.push(r),a.push(oR),e.push(parseFloat(d))),++r,ZT)).split(ZT);return{values:e,split:u,indexes:n,types:a}}function cR(i){return w0(i).values}function uR(i){const{split:t,types:e}=w0(i),n=t.length;return a=>{let r="";for(let l=0;l<n;l++)if(r+=t[l],a[l]!==void 0){const u=e[l];u===oR?r+=u0(a[l]):u===lR?r+=ma.transform(a[l]):r+=a[l]}return r}}const RO=i=>typeof i=="number"?0:ma.test(i)?ma.getAnimatableNone(i):i;function DO(i){const t=cR(i);return uR(i)(t.map(RO))}const Bu={test:TO,parse:cR,createTransformer:uR,getAnimatableNone:DO};function Q1(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function NO({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let a=0,r=0,l=0;if(!t)a=r=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,d=2*e-u;a=Q1(d,u,i+1/3),r=Q1(d,u,i),l=Q1(d,u,i-1/3)}return{red:Math.round(a*255),green:Math.round(r*255),blue:Math.round(l*255),alpha:n}}function cx(i,t){return e=>e>0?t:i}const Vi=(i,t,e)=>i+(t-i)*e,J1=(i,t,e)=>{const n=i*i,a=e*(t*t-n)+n;return a<0?0:Math.sqrt(a)},UO=[vb,Jf,kd],OO=i=>UO.find(t=>t.test(i));function KT(i){const t=OO(i);if(!t)return!1;let e=t.parse(i);return t===kd&&(e=NO(e)),e}const QT=(i,t)=>{const e=KT(i),n=KT(t);if(!e||!n)return cx(i,t);const a={...e};return r=>(a.red=J1(e.red,n.red,r),a.green=J1(e.green,n.green,r),a.blue=J1(e.blue,n.blue,r),a.alpha=Vi(e.alpha,n.alpha,r),Jf.transform(a))},yb=new Set(["none","hidden"]);function LO(i,t){return yb.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function PO(i,t){return e=>Vi(i,t,e)}function CM(i){return typeof i=="number"?PO:typeof i=="string"?TM(i)?cx:ma.test(i)?QT:zO:Array.isArray(i)?fR:typeof i=="object"?ma.test(i)?QT:IO:cx}function fR(i,t){const e=[...i],n=e.length,a=i.map((r,l)=>CM(r)(r,t[l]));return r=>{for(let l=0;l<n;l++)e[l]=a[l](r);return e}}function IO(i,t){const e={...i,...t},n={};for(const a in e)i[a]!==void 0&&t[a]!==void 0&&(n[a]=CM(i[a])(i[a],t[a]));return a=>{for(const r in n)e[r]=n[r](a);return e}}function BO(i,t){const e=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const r=t.types[a],l=i.indexes[r][n[r]],u=i.values[l]??0;e[a]=u,n[r]++}return e}const zO=(i,t)=>{const e=Bu.createTransformer(t),n=w0(i),a=w0(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?yb.has(i)&&!a.values.length||yb.has(t)&&!n.values.length?LO(i,t):$0(fR(BO(n,a),a.values),e):cx(i,t)};function hR(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?Vi(i,t,e):CM(i)(i,t)}const FO=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>Ci.update(t,e),stop:()=>Iu(t),now:()=>Za.isProcessing?Za.timestamp:ir.now()}},dR=(i,t,e=10)=>{let n="";const a=Math.max(Math.round(t/e),2);for(let r=0;r<a;r++)n+=Math.round(i(r/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},ux=2e4;function RM(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<ux;)t+=e,n=i.next(t);return t>=ux?1/0:t}function VO(i,t=100,e){const n=e({...i,keyframes:[0,t]}),a=Math.min(RM(n),ux);return{type:"keyframes",ease:r=>n.next(a*r).value/t,duration:kr(a)}}const HO=5;function pR(i,t,e){const n=Math.max(t-HO,0);return YC(e-i(n),t-n)}const ea={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$1=.001;function GO({duration:i=ea.duration,bounce:t=ea.bounce,velocity:e=ea.velocity,mass:n=ea.mass}){let a,r,l=1-t;l=wc(ea.minDamping,ea.maxDamping,l),i=wc(ea.minDuration,ea.maxDuration,kr(i)),l<1?(a=p=>{const g=p*l,y=g*i,x=g-e,_=xb(p,l),E=Math.exp(-y);return $1-x/_*E},r=p=>{const y=p*l*i,x=y*e+e,_=Math.pow(l,2)*Math.pow(p,2)*i,E=Math.exp(-y),C=xb(Math.pow(p,2),l);return(-a(p)+$1>0?-1:1)*((x-_)*E)/C}):(a=p=>{const g=Math.exp(-p*i),y=(p-e)*i+1;return-$1+g*y},r=p=>{const g=Math.exp(-p*i),y=(e-p)*(i*i);return g*y});const u=5/i,d=kO(a,r,u);if(i=Pl(i),isNaN(d))return{stiffness:ea.stiffness,damping:ea.damping,duration:i};{const p=Math.pow(d,2)*n;return{stiffness:p,damping:l*2*Math.sqrt(n*p),duration:i}}}const jO=12;function kO(i,t,e){let n=e;for(let a=1;a<jO;a++)n=n-i(n)/t(n);return n}function xb(i,t){return i*Math.sqrt(1-t*t)}const XO=["duration","bounce"],YO=["stiffness","damping","mass"];function JT(i,t){return t.some(e=>i[e]!==void 0)}function qO(i){let t={velocity:ea.velocity,stiffness:ea.stiffness,damping:ea.damping,mass:ea.mass,isResolvedFromDuration:!1,...i};if(!JT(i,YO)&&JT(i,XO))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),a=n*n,r=2*wc(.05,1,1-(i.bounce||0))*Math.sqrt(a);t={...t,mass:ea.mass,stiffness:a,damping:r}}else{const e=GO(i);t={...t,...e,mass:ea.mass},t.isResolvedFromDuration=!0}return t}function fx(i=ea.visualDuration,t=ea.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:a}=e;const r=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:r},{stiffness:d,damping:p,mass:g,duration:y,velocity:x,isResolvedFromDuration:_}=qO({...e,velocity:-kr(e.velocity||0)}),E=x||0,C=p/(2*Math.sqrt(d*g)),T=l-r,M=kr(Math.sqrt(d/g)),R=Math.abs(T)<5;n||(n=R?ea.restSpeed.granular:ea.restSpeed.default),a||(a=R?ea.restDelta.granular:ea.restDelta.default);let D;if(C<1){const P=xb(M,C);D=B=>{const G=Math.exp(-C*M*B);return l-G*((E+C*M*T)/P*Math.sin(P*B)+T*Math.cos(P*B))}}else if(C===1)D=P=>l-Math.exp(-M*P)*(T+(E+M*T)*P);else{const P=M*Math.sqrt(C*C-1);D=B=>{const G=Math.exp(-C*M*B),V=Math.min(P*B,300);return l-G*((E+C*M*T)*Math.sinh(V)+P*T*Math.cosh(V))/P}}const L={calculatedDuration:_&&y||null,next:P=>{const B=D(P);if(_)u.done=P>=y;else{let G=P===0?E:0;C<1&&(G=P===0?Pl(E):pR(D,P,B));const V=Math.abs(G)<=n,N=Math.abs(l-B)<=a;u.done=V&&N}return u.value=u.done?l:B,u},toString:()=>{const P=Math.min(RM(L),ux),B=dR(G=>L.next(P*G).value,P,30);return P+"ms "+B},toTransition:()=>{}};return L}fx.applyToOptions=i=>{const t=VO(i,100,fx);return i.ease=t.ease,i.duration=Pl(t.duration),i.type="keyframes",i};function _b({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:r=500,modifyTarget:l,min:u,max:d,restDelta:p=.5,restSpeed:g}){const y=i[0],x={done:!1,value:y},_=V=>u!==void 0&&V<u||d!==void 0&&V>d,E=V=>u===void 0?d:d===void 0||Math.abs(u-V)<Math.abs(d-V)?u:d;let C=e*t;const T=y+C,M=l===void 0?T:l(T);M!==T&&(C=M-y);const R=V=>-C*Math.exp(-V/n),D=V=>M+R(V),L=V=>{const N=R(V),I=D(V);x.done=Math.abs(N)<=p,x.value=x.done?M:I};let P,B;const G=V=>{_(x.value)&&(P=V,B=fx({keyframes:[x.value,E(x.value)],velocity:pR(D,V,x.value),damping:a,stiffness:r,restDelta:p,restSpeed:g}))};return G(0),{calculatedDuration:null,next:V=>{let N=!1;return!B&&P===void 0&&(N=!0,L(V),G(V)),P!==void 0&&V>=P?B.next(V-P):(!N&&L(V),x)}}}function WO(i,t,e){const n=[],a=e||Cc.mix||hR,r=i.length-1;for(let l=0;l<r;l++){let u=a(i[l],i[l+1]);if(t){const d=Array.isArray(t)?t[l]||Xr:t;u=$0(d,u)}n.push(u)}return n}function ZO(i,t,{clamp:e=!0,ease:n,mixer:a}={}){const r=i.length;if(_M(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const l=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),t=[...t].reverse());const u=WO(t,n,a),d=u.length,p=g=>{if(l&&g<i[0])return t[0];let y=0;if(d>1)for(;y<i.length-2&&!(g<i[y+1]);y++);const x=T0(i[y],i[y+1],g);return u[y](x)};return e?g=>p(wc(i[0],i[r-1],g)):p}function KO(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const a=T0(0,t,n);i.push(Vi(e,1,a))}}function QO(i){const t=[0];return KO(t,i.length-1),t}function JO(i,t){return i.map(e=>e*t)}function $O(i,t){return i.map(()=>t||eR).splice(0,i.length-1)}function f0({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const a=uO(n)?n.map(qT):qT(n),r={done:!1,value:t[0]},l=JO(e&&e.length===t.length?e:QO(t),i),u=ZO(l,t,{ease:Array.isArray(a)?a:$O(t,a)});return{calculatedDuration:i,next:d=>(r.value=u(d),r.done=d>=i,r)}}const tL=i=>i!==null;function DM(i,{repeat:t,repeatType:e="loop"},n,a=1){const r=i.filter(tL),u=a<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!u||n===void 0?r[u]:n}const eL={decay:_b,inertia:_b,tween:f0,keyframes:f0,spring:fx};function mR(i){typeof i.type=="string"&&(i.type=eL[i.type])}class NM{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const nL=i=>i/100;class UM extends NM{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,a;const{motionValue:e}=this.options;e&&e.updatedAt!==ir.now()&&this.tick(ir.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(n=this.options).onStop)==null||a.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;mR(t);const{type:e=f0,repeat:n=0,repeatDelay:a=0,repeatType:r,velocity:l=0}=t;let{keyframes:u}=t;const d=e||f0;d!==f0&&typeof u[0]!="number"&&(this.mixKeyframes=$0(nL,hR(u[0],u[1])),u=[0,100]);const p=d({...t,keyframes:u});r==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...u].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=RM(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=p}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:a,mixKeyframes:r,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:p=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:_,type:E,onUpdate:C,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const M=this.currentTime-p*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?M<0:M>a;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let D=this.currentTime,L=n;if(y){const V=Math.min(this.currentTime,a)/u;let N=Math.floor(V),I=V%1;!I&&V>=1&&(I=1),I===1&&N--,N=Math.min(N,y+1),!!(N%2)&&(x==="reverse"?(I=1-I,_&&(I-=_/u)):x==="mirror"&&(L=l)),D=wc(0,1,I)*u}const P=R?{done:!1,value:g[0]}:L.next(D);r&&(P.value=r(P.value));let{done:B}=P;!R&&d!==null&&(B=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const G=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return G&&E!==_b&&(P.value=DM(g,this.options,T,this.speed)),C&&C(P.value),G&&this.finish(),P}then(t,e){return this.finished.then(t,e)}get duration(){return kr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+kr(t)}get time(){return kr(this.currentTime)}set time(t){var e;t=Pl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ir.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=kr(this.currentTime))}play(){var a,r;if(this.isStopped)return;const{driver:t=FO,startTime:e}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(r=(a=this.options).onPlay)==null||r.call(a);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ir.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function iL(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const $f=i=>i*180/Math.PI,Sb=i=>{const t=$f(Math.atan2(i[1],i[0]));return bb(t)},aL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:Sb,rotateZ:Sb,skewX:i=>$f(Math.atan(i[1])),skewY:i=>$f(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},bb=i=>(i=i%360,i<0&&(i+=360),i),$T=Sb,tA=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),eA=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),sL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tA,scaleY:eA,scale:i=>(tA(i)+eA(i))/2,rotateX:i=>bb($f(Math.atan2(i[6],i[5]))),rotateY:i=>bb($f(Math.atan2(-i[2],i[0]))),rotateZ:$T,rotate:$T,skewX:i=>$f(Math.atan(i[4])),skewY:i=>$f(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function Mb(i){return i.includes("scale")?1:0}function Eb(i,t){if(!i||i==="none")return Mb(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(e)n=sL,a=e;else{const u=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=aL,a=u}if(!a)return Mb(t);const r=n[t],l=a[1].split(",").map(oL);return typeof r=="function"?r(l):l[r]}const rL=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return Eb(e,t)};function oL(i){return parseFloat(i.trim())}const Ep=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tp=new Set(Ep),nA=i=>i===Mp||i===on,lL=new Set(["x","y","z"]),cL=Ep.filter(i=>!lL.has(i));function uL(i){const t=[];return cL.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const rh={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>Eb(t,"x"),y:(i,{transform:t})=>Eb(t,"y")};rh.translateX=rh.x;rh.translateY=rh.y;const oh=new Set;let Tb=!1,Ab=!1,wb=!1;function gR(){if(Ab){const i=Array.from(oh).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const a=uL(n);a.length&&(e.set(n,a),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=e.get(n);a&&a.forEach(([r,l])=>{var u;(u=n.getValue(r))==null||u.set(l)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ab=!1,Tb=!1,oh.forEach(i=>i.complete(wb)),oh.clear()}function vR(){oh.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(Ab=!0)})}function fL(){wb=!0,vR(),gR(),wb=!1}class OM{constructor(t,e,n,a,r,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=a,this.element=r,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(oh.add(this),Tb||(Tb=!0,Ci.read(vR),Ci.resolveKeyframes(gR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:a}=this;if(t[0]===null){const r=a==null?void 0:a.get(),l=t[t.length-1];if(r!==void 0)t[0]=r;else if(n&&e){const u=n.readValue(e,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),a&&r===void 0&&a.set(t[0])}iL(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),oh.delete(this)}cancel(){this.state==="scheduled"&&(oh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hL=i=>i.startsWith("--");function dL(i,t,e){hL(t)?i.style.setProperty(t,e):i.style[t]=e}const pL=SM(()=>window.ScrollTimeline!==void 0),mL={};function gL(i,t){const e=SM(i);return()=>mL[t]??e()}const yR=gL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),r0=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,iA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:r0([0,.65,.55,1]),circOut:r0([.55,0,1,.45]),backIn:r0([.31,.01,.66,-.59]),backOut:r0([.33,1.53,.69,.99])};function xR(i,t){if(i)return typeof i=="function"?yR()?dR(i,t):"ease-out":nR(i)?r0(i):Array.isArray(i)?i.map(e=>xR(e,t)||iA.easeOut):iA[i]}function vL(i,t,e,{delay:n=0,duration:a=300,repeat:r=0,repeatType:l="loop",ease:u="easeOut",times:d}={},p=void 0){const g={[t]:e};d&&(g.offset=d);const y=xR(u,a);Array.isArray(y)&&(g.easing=y);const x={delay:n,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:r+1,direction:l==="reverse"?"alternate":"normal"};return p&&(x.pseudoElement=p),i.animate(g,x)}function _R(i){return typeof i=="function"&&"applyToOptions"in i}function yL({type:i,...t}){return _R(i)&&yR()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class xL extends NM{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:a,pseudoElement:r,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=t;this.isPseudoElement=!!r,this.allowFlatten=l,this.options=t,_M(typeof t.type!="string");const p=yL(t);this.animation=vL(e,n,a,p,r),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const g=DM(a,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):dL(e,n,g),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,n;const t=((n=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:n.call(e).duration)||0;return kr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+kr(t)}get time(){return kr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Pl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&pL()?(this.animation.timeline=t,Xr):e(this)}}const SR={anticipate:JC,backInOut:QC,circInOut:tR};function _L(i){return i in SR}function SL(i){typeof i.ease=="string"&&_L(i.ease)&&(i.ease=SR[i.ease])}const aA=10;class bL extends xL{constructor(t){SL(t),mR(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:a,element:r,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new UM({...l,autoplay:!1}),d=Pl(this.finishedTime??this.time);e.setWithVelocity(u.sample(d-aA).value,u.sample(d).value,aA),u.stop()}}const sA=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Bu.test(i)||i==="0")&&!i.startsWith("url("));function ML(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function EL(i,t,e,n){const a=i[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const r=i[i.length-1],l=sA(a,t),u=sA(r,t);return!l||!u?!1:ML(i)||(e==="spring"||_R(e))&&n}function Cb(i){i.duration=0,i.type="keyframes"}const TL=new Set(["opacity","clipPath","filter","transform"]),AL=SM(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wL(i){var g;const{motionValue:t,name:e,repeatDelay:n,repeatType:a,damping:r,type:l}=i;if(!(((g=t==null?void 0:t.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=t.owner.getProps();return AL()&&e&&TL.has(e)&&(e!=="transform"||!p)&&!d&&!n&&a!=="mirror"&&r!==0&&l!=="inertia"}const CL=40;class RL extends NM{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:a=0,repeatDelay:r=0,repeatType:l="loop",keyframes:u,name:d,motionValue:p,element:g,...y}){var E;super(),this.stop=()=>{var C,T;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=ir.now();const x={autoplay:t,delay:e,type:n,repeat:a,repeatDelay:r,repeatType:l,name:d,motionValue:p,element:g,...y},_=(g==null?void 0:g.KeyframeResolver)||OM;this.keyframeResolver=new _(u,(C,T,M)=>this.onKeyframesResolved(C,T,x,!M),d,p,g),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(t,e,n,a){this.keyframeResolver=void 0;const{name:r,type:l,velocity:u,delay:d,isHandoff:p,onUpdate:g}=n;this.resolvedAt=ir.now(),EL(t,r,l,u)||((Cc.instantAnimations||!d)&&(g==null||g(DM(t,n,e))),t[0]=t[t.length-1],Cb(n),n.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>CL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},_=!p&&wL(x)?new bL({...x,element:x.motionValue.owner.current}):new UM(x);_.finished.then(()=>this.notifyFinished()).catch(Xr),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),fL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const DL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NL(i){const t=DL.exec(i);if(!t)return[,];const[,e,n,a]=t;return[`--${e??n}`,a]}function bR(i,t,e=1){const[n,a]=NL(i);if(!n)return;const r=window.getComputedStyle(t).getPropertyValue(n);if(r){const l=r.trim();return jC(l)?parseFloat(l):l}return TM(a)?bR(a,t,e+1):a}function LM(i,t){return(i==null?void 0:i[t])??(i==null?void 0:i.default)??i}const MR=new Set(["width","height","top","left","right","bottom",...Ep]),UL={test:i=>i==="auto",parse:i=>i},ER=i=>t=>t.test(i),TR=[Mp,on,Il,Au,MO,bO,UL],rA=i=>TR.find(ER(i));function OL(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||XC(i):!0}const LL=new Set(["brightness","contrast","saturate","opacity"]);function PL(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(AM)||[];if(!n)return i;const a=e.replace(n,"");let r=LL.has(t)?1:0;return n!==e&&(r*=100),t+"("+r+a+")"}const IL=/\b([a-z-]*)\(.*?\)/gu,Rb={...Bu,getAnimatableNone:i=>{const t=i.match(IL);return t?t.map(PL).join(" "):i}},oA={...Mp,transform:Math.round},BL={rotate:Au,rotateX:Au,rotateY:Au,rotateZ:Au,scale:$v,scaleX:$v,scaleY:$v,scaleZ:$v,skew:Au,skewX:Au,skewY:Au,distance:on,translateX:on,translateY:on,translateZ:on,x:on,y:on,z:on,perspective:on,transformPerspective:on,opacity:A0,originX:WT,originY:WT,originZ:on},PM={borderWidth:on,borderTopWidth:on,borderRightWidth:on,borderBottomWidth:on,borderLeftWidth:on,borderRadius:on,radius:on,borderTopLeftRadius:on,borderTopRightRadius:on,borderBottomRightRadius:on,borderBottomLeftRadius:on,width:on,maxWidth:on,height:on,maxHeight:on,top:on,right:on,bottom:on,left:on,padding:on,paddingTop:on,paddingRight:on,paddingBottom:on,paddingLeft:on,margin:on,marginTop:on,marginRight:on,marginBottom:on,marginLeft:on,backgroundPositionX:on,backgroundPositionY:on,...BL,zIndex:oA,fillOpacity:A0,strokeOpacity:A0,numOctaves:oA},zL={...PM,color:ma,backgroundColor:ma,outlineColor:ma,fill:ma,stroke:ma,borderColor:ma,borderTopColor:ma,borderRightColor:ma,borderBottomColor:ma,borderLeftColor:ma,filter:Rb,WebkitFilter:Rb},AR=i=>zL[i];function wR(i,t){let e=AR(i);return e!==Rb&&(e=Bu),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const FL=new Set(["auto","none","0"]);function VL(i,t,e){let n=0,a;for(;n<i.length&&!a;){const r=i[n];typeof r=="string"&&!FL.has(r)&&w0(r).values.length&&(a=i[n]),n++}if(a&&e)for(const r of t)i[r]=wR(e,a)}class HL extends OM{constructor(t,e,n,a,r){super(t,e,n,a,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let p=t[d];if(typeof p=="string"&&(p=p.trim(),TM(p))){const g=bR(p,e.current);g!==void 0&&(t[d]=g),d===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!MR.has(n)||t.length!==2)return;const[a,r]=t,l=rA(a),u=rA(r);if(l!==u)if(nA(l)&&nA(u))for(let d=0;d<t.length;d++){const p=t[d];typeof p=="string"&&(t[d]=parseFloat(p))}else rh[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||OL(t[a]))&&n.push(a);n.length&&VL(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rh[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var u;const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const r=n.length-1,l=n[r];n[r]=rh[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([d,p])=>{t.getValue(d).set(p)}),this.resolveNoneKeyframes()}}function GL(i,t,e){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const a=(e==null?void 0:e[i])??n.querySelectorAll(i);return a?Array.from(a):[]}return Array.from(i)}const CR=(i,t)=>t&&typeof i=="number"?t.transform(i):i;function RR(i){return kC(i)&&"offsetHeight"in i}const lA=30,jL=i=>!isNaN(parseFloat(i));class kL{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var r;const a=ir.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=ir.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=jL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new bM);const n=this.events[t].add(e);return t==="change"?()=>{n(),Ci.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ir.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lA)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,lA);return YC(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sp(i,t){return new kL(i,t)}const{schedule:IM}=iR(queueMicrotask,!1),Io={x:!1,y:!1};function DR(){return Io.x||Io.y}function XL(i){return i==="x"||i==="y"?Io[i]?null:(Io[i]=!0,()=>{Io[i]=!1}):Io.x||Io.y?null:(Io.x=Io.y=!0,()=>{Io.x=Io.y=!1})}function NR(i,t){const e=GL(i),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[e,a,()=>n.abort()]}function cA(i){return!(i.pointerType==="touch"||DR())}function YL(i,t,e={}){const[n,a,r]=NR(i,e),l=u=>{if(!cA(u))return;const{target:d}=u,p=t(d,u);if(typeof p!="function"||!d)return;const g=y=>{cA(y)&&(p(y),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,a)};return n.forEach(u=>{u.addEventListener("pointerenter",l,a)}),r}const UR=(i,t)=>t?i===t?!0:UR(i,t.parentElement):!1,BM=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,qL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WL(i){return qL.has(i.tagName)||i.tabIndex!==-1}const $y=new WeakSet;function uA(i){return t=>{t.key==="Enter"&&i(t)}}function tS(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ZL=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=uA(()=>{if($y.has(e))return;tS(e,"down");const a=uA(()=>{tS(e,"up")}),r=()=>tS(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function fA(i){return BM(i)&&!DR()}function KL(i,t,e={}){const[n,a,r]=NR(i,e),l=u=>{const d=u.currentTarget;if(!fA(u))return;$y.add(d);const p=t(d,u),g=(_,E)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),$y.has(d)&&$y.delete(d),fA(_)&&typeof p=="function"&&p(_,{success:E})},y=_=>{g(_,d===window||d===document||e.useGlobalTarget||UR(d,_.target))},x=_=>{g(_,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",x,a)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,a),RR(u)&&(u.addEventListener("focus",p=>ZL(p,a)),!WL(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),r}function OR(i){return kC(i)&&"ownerSVGElement"in i}function QL(i){return OR(i)&&i.tagName==="svg"}const ds=i=>!!(i&&i.getVelocity),JL=[...TR,ma,Bu],$L=i=>JL.find(ER(i)),zM=Z.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function hA(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function t4(...i){return t=>{let e=!1;const n=i.map(a=>{const r=hA(a,t);return!e&&typeof r=="function"&&(e=!0),r});if(e)return()=>{for(let a=0;a<n.length;a++){const r=n[a];typeof r=="function"?r():hA(i[a],null)}}}}function e4(...i){return Z.useCallback(t4(...i),i)}class n4 extends Z.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,a=RR(n)&&n.offsetWidth||0,r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft,r.right=a-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function i4({children:i,isPresent:t,anchorX:e,root:n}){const a=Z.useId(),r=Z.useRef(null),l=Z.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=Z.useContext(zM),d=e4(r,i==null?void 0:i.ref);return Z.useInsertionEffect(()=>{const{width:p,height:g,top:y,left:x,right:_}=l.current;if(t||!r.current||!p||!g)return;const E=e==="left"?`left: ${x}`:`right: ${_}`;r.current.dataset.motionPopId=a;const C=document.createElement("style");u&&(C.nonce=u);const T=n??document.head;return T.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            ${E}px !important;
            top: ${y}px !important;
          }
        `),()=>{T.contains(C)&&T.removeChild(C)}},[t]),O.jsx(n4,{isPresent:t,childRef:r,sizeRef:l,children:Z.cloneElement(i,{ref:d})})}const a4=({children:i,initial:t,isPresent:e,onExitComplete:n,custom:a,presenceAffectsLayout:r,mode:l,anchorX:u,root:d})=>{const p=gM(s4),g=Z.useId();let y=!0,x=Z.useMemo(()=>(y=!1,{id:g,initial:t,isPresent:e,custom:a,onExitComplete:_=>{p.set(_,!0);for(const E of p.values())if(!E)return;n&&n()},register:_=>(p.set(_,!1),()=>p.delete(_))}),[e,p,n]);return r&&y&&(x={...x}),Z.useMemo(()=>{p.forEach((_,E)=>p.set(E,!1))},[e]),Z.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),l==="popLayout"&&(i=O.jsx(i4,{isPresent:e,anchorX:u,root:d,children:i})),O.jsx(p_.Provider,{value:x,children:i})};function s4(){return new Map}function LR(i=!0){const t=Z.useContext(p_);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:a}=t,r=Z.useId();Z.useEffect(()=>{if(i)return a(r)},[i]);const l=Z.useCallback(()=>i&&n&&n(r),[r,n,i]);return!e&&n?[!1,l]:[!0]}const ty=i=>i.key||"";function dA(i){const t=[];return Z.Children.forEach(i,e=>{Z.isValidElement(e)&&t.push(e)}),t}const r4=({children:i,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:r="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[p,g]=LR(l),y=Z.useMemo(()=>dA(i),[i]),x=l&&!p?[]:y.map(ty),_=Z.useRef(!0),E=Z.useRef(y),C=gM(()=>new Map),[T,M]=Z.useState(y),[R,D]=Z.useState(y);GC(()=>{_.current=!1,E.current=y;for(let B=0;B<R.length;B++){const G=ty(R[B]);x.includes(G)?C.delete(G):C.get(G)!==!0&&C.set(G,!1)}},[R,x.length,x.join("-")]);const L=[];if(y!==T){let B=[...y];for(let G=0;G<R.length;G++){const V=R[G],N=ty(V);x.includes(N)||(B.splice(G,0,V),L.push(V))}return r==="wait"&&L.length&&(B=L),D(dA(B)),M(y),null}const{forceRender:P}=Z.useContext(mM);return O.jsx(O.Fragment,{children:R.map(B=>{const G=ty(B),V=l&&!p?!1:y===R||x.includes(G),N=()=>{if(C.has(G))C.set(G,!0);else return;let I=!0;C.forEach(W=>{W||(I=!1)}),I&&(P==null||P(),D(E.current),l&&(g==null||g()),n&&n())};return O.jsx(a4,{isPresent:V,initial:!_.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:r,root:d,onExitComplete:V?void 0:N,anchorX:u,children:B},G)})})},PR=Z.createContext({strict:!1}),pA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rp={};for(const i in pA)rp[i]={isEnabled:t=>pA[i].some(e=>!!t[e])};function o4(i){for(const t in i)rp[t]={...rp[t],...i[t]}}const l4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hx(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||l4.has(i)}let IR=i=>!hx(i);function c4(i){typeof i=="function"&&(IR=t=>t.startsWith("on")?!hx(t):i(t))}try{c4(require("@emotion/is-prop-valid").default)}catch{}function u4(i,t,e){const n={};for(const a in i)a==="values"&&typeof i.values=="object"||(IR(a)||e===!0&&hx(a)||!t&&!hx(a)||i.draggable&&a.startsWith("onDrag"))&&(n[a]=i[a]);return n}const m_=Z.createContext({});function g_(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function C0(i){return typeof i=="string"||Array.isArray(i)}const FM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],VM=["initial",...FM];function v_(i){return g_(i.animate)||VM.some(t=>C0(i[t]))}function BR(i){return!!(v_(i)||i.variants)}function f4(i,t){if(v_(i)){const{initial:e,animate:n}=i;return{initial:e===!1||C0(e)?e:void 0,animate:C0(n)?n:void 0}}return i.inherit!==!1?t:{}}function h4(i){const{initial:t,animate:e}=f4(i,Z.useContext(m_));return Z.useMemo(()=>({initial:t,animate:e}),[mA(t),mA(e)])}function mA(i){return Array.isArray(i)?i.join(" "):i}function gA(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const km={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(on.test(i))i=parseFloat(i);else return i;const e=gA(i,t.target.x),n=gA(i,t.target.y);return`${e}% ${n}%`}},d4={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,a=Bu.parse(i);if(a.length>5)return n;const r=Bu.createTransformer(i),l=typeof a[0]!="number"?1:0,u=e.x.scale*t.x,d=e.y.scale*t.y;a[0+l]/=u,a[1+l]/=d;const p=Vi(u,d,.5);return typeof a[2+l]=="number"&&(a[2+l]/=p),typeof a[3+l]=="number"&&(a[3+l]/=p),r(a)}},Db={borderRadius:{...km,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:km,borderTopRightRadius:km,borderBottomLeftRadius:km,borderBottomRightRadius:km,boxShadow:d4};function zR(i,{layout:t,layoutId:e}){return Tp.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!Db[i]||i==="opacity")}const p4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},m4=Ep.length;function g4(i,t,e){let n="",a=!0;for(let r=0;r<m4;r++){const l=Ep[r],u=i[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||e){const p=CR(u,PM[l]);if(!d){a=!1;const g=p4[l]||l;n+=`${g}(${p}) `}e&&(t[l]=p)}}return n=n.trim(),e?n=e(t,a?"":n):a&&(n="none"),n}function HM(i,t,e){const{style:n,vars:a,transformOrigin:r}=i;let l=!1,u=!1;for(const d in t){const p=t[d];if(Tp.has(d)){l=!0;continue}else if(sR(d)){a[d]=p;continue}else{const g=CR(p,PM[d]);d.startsWith("origin")?(u=!0,r[d]=g):n[d]=g}}if(t.transform||(l||e?n.transform=g4(t,i.transform,e):n.transform&&(n.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:g=0}=r;n.transformOrigin=`${d} ${p} ${g}`}}const GM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function FR(i,t,e){for(const n in t)!ds(t[n])&&!zR(n,e)&&(i[n]=t[n])}function v4({transformTemplate:i},t){return Z.useMemo(()=>{const e=GM();return HM(e,t,i),Object.assign({},e.vars,e.style)},[t])}function y4(i,t){const e=i.style||{},n={};return FR(n,e,i),Object.assign(n,v4(i,t)),n}function x4(i,t){const e={},n=y4(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const _4={offset:"stroke-dashoffset",array:"stroke-dasharray"},S4={offset:"strokeDashoffset",array:"strokeDasharray"};function b4(i,t,e=1,n=0,a=!0){i.pathLength=1;const r=a?_4:S4;i[r.offset]=on.transform(-n);const l=on.transform(t),u=on.transform(e);i[r.array]=`${l} ${u}`}function VR(i,{attrX:t,attrY:e,attrScale:n,pathLength:a,pathSpacing:r=1,pathOffset:l=0,...u},d,p,g){if(HM(i,u,p),d){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:y,style:x}=i;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),n!==void 0&&(y.scale=n),a!==void 0&&b4(y,a,r,l,!1)}const HR=()=>({...GM(),attrs:{}}),GR=i=>typeof i=="string"&&i.toLowerCase()==="svg";function M4(i,t,e,n){const a=Z.useMemo(()=>{const r=HR();return VR(r,t,GR(n),i.transformTemplate,i.style),{...r.attrs,style:{...r.style}}},[t]);if(i.style){const r={};FR(r,i.style,i),a.style={...r,...a.style}}return a}const E4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jM(i){return typeof i!="string"||i.includes("-")?!1:!!(E4.indexOf(i)>-1||/[A-Z]/u.test(i))}function T4(i,t,e,{latestValues:n},a,r=!1){const u=(jM(i)?M4:x4)(t,n,a,i),d=u4(t,typeof i=="string",r),p=i!==Z.Fragment?{...d,...u,ref:e}:{},{children:g}=t,y=Z.useMemo(()=>ds(g)?g.get():g,[g]);return Z.createElement(i,{...p,children:y})}function vA(i){const t=[{},{}];return i==null||i.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function kM(i,t,e,n){if(typeof t=="function"){const[a,r]=vA(n);t=t(e!==void 0?e:i.custom,a,r)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[a,r]=vA(n);t=t(e!==void 0?e:i.custom,a,r)}return t}function tx(i){return ds(i)?i.get():i}function A4({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,a){return{latestValues:w4(e,n,a,i),renderState:t()}}function w4(i,t,e,n){const a={},r=n(i,{});for(const x in r)a[x]=tx(r[x]);let{initial:l,animate:u}=i;const d=v_(i),p=BR(i);t&&p&&!d&&i.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let g=e?e.initial===!1:!1;g=g||l===!1;const y=g?u:l;if(y&&typeof y!="boolean"&&!g_(y)){const x=Array.isArray(y)?y:[y];for(let _=0;_<x.length;_++){const E=kM(i,x[_]);if(E){const{transitionEnd:C,transition:T,...M}=E;for(const R in M){let D=M[R];if(Array.isArray(D)){const L=g?D.length-1:0;D=D[L]}D!==null&&(a[R]=D)}for(const R in C)a[R]=C[R]}}}return a}const jR=i=>(t,e)=>{const n=Z.useContext(m_),a=Z.useContext(p_),r=()=>A4(i,t,n,a);return e?r():gM(r)};function XM(i,t,e){var r;const{style:n}=i,a={};for(const l in n)(ds(n[l])||t.style&&ds(t.style[l])||zR(l,i)||((r=e==null?void 0:e.getValue(l))==null?void 0:r.liveStyle)!==void 0)&&(a[l]=n[l]);return a}const C4=jR({scrapeMotionValuesFromProps:XM,createRenderState:GM});function kR(i,t,e){const n=XM(i,t,e);for(const a in i)if(ds(i[a])||ds(t[a])){const r=Ep.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[r]=i[a]}return n}const R4=jR({scrapeMotionValuesFromProps:kR,createRenderState:HR}),D4=Symbol.for("motionComponentSymbol");function Xd(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function N4(i,t,e){return Z.useCallback(n=>{n&&i.onMount&&i.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Xd(e)&&(e.current=n))},[t])}const YM=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),U4="framerAppearId",XR="data-"+YM(U4),YR=Z.createContext({});function O4(i,t,e,n,a){var C,T;const{visualElement:r}=Z.useContext(m_),l=Z.useContext(PR),u=Z.useContext(p_),d=Z.useContext(zM).reducedMotion,p=Z.useRef(null);n=n||l.renderer,!p.current&&n&&(p.current=n(i,{visualState:t,parent:r,props:e,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const g=p.current,y=Z.useContext(YR);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&L4(p.current,e,a,y);const x=Z.useRef(!1);Z.useInsertionEffect(()=>{g&&x.current&&g.update(e,u)});const _=e[XR],E=Z.useRef(!!_&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,_))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,_)));return GC(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),E.current&&g.animationState&&g.animationState.animateChanges())}),Z.useEffect(()=>{g&&(!E.current&&g.animationState&&g.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,_)}),E.current=!1),g.enteringChildren=void 0)}),g}function L4(i,t,e,n){const{layoutId:a,layout:r,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:p,layoutCrossfade:g}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:qR(i.parent)),i.projection.setOptions({layoutId:a,layout:r,alwaysMeasureLayout:!!l||u&&Xd(u),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:g,layoutScroll:d,layoutRoot:p})}function qR(i){if(i)return i.options.allowProjection!==!1?i.projection:qR(i.parent)}function eS(i,{forwardMotionProps:t=!1}={},e,n){e&&o4(e);const a=jM(i)?R4:C4;function r(u,d){let p;const g={...Z.useContext(zM),...u,layoutId:P4(u)},{isStatic:y}=g,x=h4(u),_=a(u,y);if(!y&&vM){I4();const E=B4(g);p=E.MeasureLayout,x.visualElement=O4(i,_,g,n,E.ProjectionNode)}return O.jsxs(m_.Provider,{value:x,children:[p&&x.visualElement?O.jsx(p,{visualElement:x.visualElement,...g}):null,T4(i,u,N4(_,x.visualElement,d),_,y,t)]})}r.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=Z.forwardRef(r);return l[D4]=i,l}function P4({layoutId:i}){const t=Z.useContext(mM).id;return t&&i!==void 0?t+"-"+i:i}function I4(i,t){Z.useContext(PR).strict}function B4(i){const{drag:t,layout:e}=rp;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(i)||e!=null&&e.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function z4(i,t){if(typeof Proxy>"u")return eS;const e=new Map,n=(r,l)=>eS(r,l,i,t),a=(r,l)=>n(r,l);return new Proxy(a,{get:(r,l)=>l==="create"?n:(e.has(l)||e.set(l,eS(l,void 0,i,t)),e.get(l))})}function WR({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function F4({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function V4(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function nS(i){return i===void 0||i===1}function Nb({scale:i,scaleX:t,scaleY:e}){return!nS(i)||!nS(t)||!nS(e)}function Zf(i){return Nb(i)||ZR(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function ZR(i){return yA(i.x)||yA(i.y)}function yA(i){return i&&i!=="0%"}function dx(i,t,e){const n=i-e,a=t*n;return e+a}function xA(i,t,e,n,a){return a!==void 0&&(i=dx(i,a,n)),dx(i,e,n)+t}function Ub(i,t=0,e=1,n,a){i.min=xA(i.min,t,e,n,a),i.max=xA(i.max,t,e,n,a)}function KR(i,{x:t,y:e}){Ub(i.x,t.translate,t.scale,t.originPoint),Ub(i.y,e.translate,e.scale,e.originPoint)}const _A=.999999999999,SA=1.0000000000001;function H4(i,t,e,n=!1){const a=e.length;if(!a)return;t.x=t.y=1;let r,l;for(let u=0;u<a;u++){r=e[u],l=r.projectionDelta;const{visualElement:d}=r.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&qd(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,KR(i,l)),n&&Zf(r.latestValues)&&qd(i,r.latestValues))}t.x<SA&&t.x>_A&&(t.x=1),t.y<SA&&t.y>_A&&(t.y=1)}function Yd(i,t){i.min=i.min+t,i.max=i.max+t}function bA(i,t,e,n,a=.5){const r=Vi(i.min,i.max,a);Ub(i,t,e,r,n)}function qd(i,t){bA(i.x,t.x,t.scaleX,t.scale,t.originX),bA(i.y,t.y,t.scaleY,t.scale,t.originY)}function QR(i,t){return WR(V4(i.getBoundingClientRect(),t))}function G4(i,t,e){const n=QR(i,e),{scroll:a}=t;return a&&(Yd(n.x,a.offset.x),Yd(n.y,a.offset.y)),n}const MA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wd=()=>({x:MA(),y:MA()}),EA=()=>({min:0,max:0}),Ma=()=>({x:EA(),y:EA()}),Ob={current:null},JR={current:!1};function j4(){if(JR.current=!0,!!vM)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ob.current=i.matches;i.addEventListener("change",t),t()}else Ob.current=!1}const k4=new WeakMap;function X4(i,t,e){for(const n in t){const a=t[n],r=e[n];if(ds(a))i.addValue(n,a);else if(ds(r))i.addValue(n,sp(a,{owner:i}));else if(r!==a)if(i.hasValue(n)){const l=i.getValue(n);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=i.getStaticValue(n);i.addValue(n,sp(l!==void 0?l:a,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const TA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Y4{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:r,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=OM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=ir.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Ci.render(this.render,!1,!0))};const{latestValues:d,renderState:p}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=u,this.blockInitialAnimation=!!r,this.isControllingVariants=v_(e),this.isVariantNode=BR(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(e,{},this);for(const x in y){const _=y[x];d[x]!==void 0&&ds(_)&&_.set(d[x])}}mount(t){var e;this.current=t,k4.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),JR.current||j4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ob.current,(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Iu(this.notifyUpdate),Iu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Tp.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Ci.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),r&&r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in rp){const e=rp[t];if(!e)continue;const{isEnabled:n,Feature:a}=e;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ma()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<TA.length;n++){const a=TA[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const r="on"+a,l=t[r];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=X4(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=sp(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(jC(n)||XC(n))?n=parseFloat(n):!$L(n)&&Bu.test(e)&&(n=wR(t,e)),this.setBaseTarget(t,ds(n)?n.get():n)),ds(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var r;const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const l=kM(this.props,e,(r=this.presenceContext)==null?void 0:r.custom);l&&(n=l[t])}if(e&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ds(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new bM),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){IM.render(this.render)}}class $R extends Y4{constructor(){super(...arguments),this.KeyframeResolver=HL}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ds(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function t3(i,{style:t,vars:e},n,a){const r=i.style;let l;for(l in t)r[l]=t[l];a==null||a.applyProjectionStyles(r,n);for(l in e)r.setProperty(l,e[l])}function q4(i){return window.getComputedStyle(i)}class W4 extends $R{constructor(){super(...arguments),this.type="html",this.renderInstance=t3}readValueFromInstance(t,e){var n;if(Tp.has(e))return(n=this.projection)!=null&&n.isProjecting?Mb(e):rL(t,e);{const a=q4(t),r=(sR(e)?a.getPropertyValue(e):a[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return QR(t,e)}build(t,e,n){HM(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return XM(t,e,n)}}const e3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Z4(i,t,e,n){t3(i,t,void 0,n);for(const a in t.attrs)i.setAttribute(e3.has(a)?a:YM(a),t.attrs[a])}class K4 extends $R{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ma}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Tp.has(e)){const n=AR(e);return n&&n.default||0}return e=e3.has(e)?e:YM(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return kR(t,e,n)}build(t,e,n){VR(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,a){Z4(t,e,n,a)}mount(t){this.isSVGTag=GR(t.tagName),super.mount(t)}}const Q4=(i,t)=>jM(i)?new K4(t):new W4(t,{allowProjection:i!==Z.Fragment});function $d(i,t,e){const n=i.getProps();return kM(n,t,e!==void 0?e:n.custom,i)}const Lb=i=>Array.isArray(i);function J4(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,sp(e))}function $4(i){return Lb(i)?i[i.length-1]||0:i}function tP(i,t){const e=$d(i,t);let{transitionEnd:n={},transition:a={},...r}=e||{};r={...r,...n};for(const l in r){const u=$4(r[l]);J4(i,l,u)}}function eP(i){return!!(ds(i)&&i.add)}function Pb(i,t){const e=i.getValue("willChange");if(eP(e))return e.add(t);if(!e&&Cc.WillChange){const n=new Cc.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function n3(i){return i.props[XR]}const nP=i=>i!==null;function iP(i,{repeat:t,repeatType:e="loop"},n){const a=i.filter(nP),r=t&&e!=="loop"&&t%2===1?0:a.length-1;return a[r]}const aP={type:"spring",stiffness:500,damping:25,restSpeed:10},sP=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),rP={type:"keyframes",duration:.8},oP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lP=(i,{keyframes:t})=>t.length>2?rP:Tp.has(i)?i.startsWith("scale")?sP(t[1]):aP:oP;function cP({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:a,repeat:r,repeatType:l,repeatDelay:u,from:d,elapsed:p,...g}){return!!Object.keys(g).length}const qM=(i,t,e,n={},a,r)=>l=>{const u=LM(n,i)||{},d=u.delay||n.delay||0;let{elapsed:p=0}=n;p=p-Pl(d);const g={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-p,onUpdate:x=>{t.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:i,motionValue:t,element:r?void 0:a};cP(u)||Object.assign(g,lP(i,g)),g.duration&&(g.duration=Pl(g.duration)),g.repeatDelay&&(g.repeatDelay=Pl(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(Cb(g),g.delay===0&&(y=!0)),(Cc.instantAnimations||Cc.skipAnimations)&&(y=!0,Cb(g),g.delay=0),g.allowFlatten=!u.type&&!u.ease,y&&!r&&t.get()!==void 0){const x=iP(g.keyframes,u);if(x!==void 0){Ci.update(()=>{g.onUpdate(x),g.onComplete()});return}}return u.isSync?new UM(g):new RL(g)};function uP({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function i3(i,t,{delay:e=0,transitionOverride:n,type:a}={}){let{transition:r=i.getDefaultTransition(),transitionEnd:l,...u}=t;n&&(r=n);const d=[],p=a&&i.animationState&&i.animationState.getState()[a];for(const g in u){const y=i.getValue(g,i.latestValues[g]??null),x=u[g];if(x===void 0||p&&uP(p,g))continue;const _={delay:e,...LM(r||{},g)},E=y.get();if(E!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===E&&!_.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const M=n3(i);if(M){const R=window.MotionHandoffAnimation(M,g,Ci);R!==null&&(_.startTime=R,C=!0)}}Pb(i,g),y.start(qM(g,y,x,i.shouldReduceMotion&&MR.has(g)?{type:!1}:_,i,C));const T=y.animation;T&&d.push(T)}return l&&Promise.all(d).then(()=>{Ci.update(()=>{l&&tP(i,l)})}),d}function a3(i,t,e,n=0,a=1){const r=Array.from(i).sort((p,g)=>p.sortNodePosition(g)).indexOf(t),l=i.size,u=(l-1)*n;return typeof e=="function"?e(r,l):a===1?r*n:u-r*n}function Ib(i,t,e={}){var d;const n=$d(i,t,e.type==="exit"?(d=i.presenceContext)==null?void 0:d.custom:void 0);let{transition:a=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(a=e.transitionOverride);const r=n?()=>Promise.all(i3(i,n,e)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:x}=a;return fP(i,t,p,g,y,x,e)}:()=>Promise.resolve(),{when:u}=a;if(u){const[p,g]=u==="beforeChildren"?[r,l]:[l,r];return p().then(()=>g())}else return Promise.all([r(),l(e.delay)])}function fP(i,t,e=0,n=0,a=0,r=1,l){const u=[];for(const d of i.variantChildren)d.notify("AnimationStart",t),u.push(Ib(d,t,{...l,delay:e+(typeof n=="function"?0:n)+a3(i.variantChildren,d,n,a,r)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(u)}function hP(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(r=>Ib(i,r,e));n=Promise.all(a)}else if(typeof t=="string")n=Ib(i,t,e);else{const a=typeof t=="function"?$d(i,t,e.custom):t;n=Promise.all(i3(i,a,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}function s3(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const dP=VM.length;function r3(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?r3(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<dP;e++){const n=VM[e],a=i.props[n];(C0(a)||a===!1)&&(t[n]=a)}return t}const pP=[...FM].reverse(),mP=FM.length;function gP(i){return t=>Promise.all(t.map(({animation:e,options:n})=>hP(i,e,n)))}function vP(i){let t=gP(i),e=AA(),n=!0;const a=d=>(p,g)=>{var x;const y=$d(i,g,d==="exit"?(x=i.presenceContext)==null?void 0:x.custom:void 0);if(y){const{transition:_,transitionEnd:E,...C}=y;p={...p,...C,...E}}return p};function r(d){t=d(i)}function l(d){const{props:p}=i,g=r3(i.parent)||{},y=[],x=new Set;let _={},E=1/0;for(let T=0;T<mP;T++){const M=pP[T],R=e[M],D=p[M]!==void 0?p[M]:g[M],L=C0(D),P=M===d?R.isActive:null;P===!1&&(E=T);let B=D===g[M]&&D!==p[M]&&L;if(B&&n&&i.manuallyAnimateOnMount&&(B=!1),R.protectedKeys={..._},!R.isActive&&P===null||!D&&!R.prevProp||g_(D)||typeof D=="boolean")continue;const G=yP(R.prevProp,D);let V=G||M===d&&R.isActive&&!B&&L||T>E&&L,N=!1;const I=Array.isArray(D)?D:[D];let W=I.reduce(a(M),{});P===!1&&(W={});const{prevResolvedValues:lt={}}=R,tt={...lt,...W},rt=et=>{V=!0,x.has(et)&&(N=!0,x.delete(et)),R.needsAnimating[et]=!0;const vt=i.getValue(et);vt&&(vt.liveStyle=!1)};for(const et in tt){const vt=W[et],ut=lt[et];if(_.hasOwnProperty(et))continue;let j=!1;Lb(vt)&&Lb(ut)?j=!s3(vt,ut):j=vt!==ut,j?vt!=null?rt(et):x.add(et):vt!==void 0&&x.has(et)?rt(et):R.protectedKeys[et]=!0}R.prevProp=D,R.prevResolvedValues=W,R.isActive&&(_={..._,...W}),n&&i.blockInitialAnimation&&(V=!1);const mt=B&&G;V&&(!mt||N)&&y.push(...I.map(et=>{const vt={type:M};if(typeof et=="string"&&n&&!mt&&i.manuallyAnimateOnMount&&i.parent){const{parent:ut}=i,j=$d(ut,et);if(ut.enteringChildren&&j){const{delayChildren:st}=j.transition||{};vt.delay=a3(ut.enteringChildren,i,st)}}return{animation:et,options:vt}}))}if(x.size){const T={};if(typeof p.initial!="boolean"){const M=$d(i,Array.isArray(p.initial)?p.initial[0]:p.initial);M&&M.transition&&(T.transition=M.transition)}x.forEach(M=>{const R=i.getBaseTarget(M),D=i.getValue(M);D&&(D.liveStyle=!0),T[M]=R??null}),y.push({animation:T})}let C=!!y.length;return n&&(p.initial===!1||p.initial===p.animate)&&!i.manuallyAnimateOnMount&&(C=!1),n=!1,C?t(y):Promise.resolve()}function u(d,p){var y;if(e[d].isActive===p)return Promise.resolve();(y=i.variantChildren)==null||y.forEach(x=>{var _;return(_=x.animationState)==null?void 0:_.setActive(d,p)}),e[d].isActive=p;const g=l(d);for(const x in e)e[x].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:r,getState:()=>e,reset:()=>{e=AA()}}}function yP(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!s3(t,i):!1}function Lf(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function AA(){return{animate:Lf(!0),whileInView:Lf(),whileHover:Lf(),whileTap:Lf(),whileDrag:Lf(),whileFocus:Lf(),exit:Lf()}}class Gu{constructor(t){this.isMounted=!1,this.node=t}update(){}}class xP extends Gu{constructor(t){super(t),t.animationState||(t.animationState=vP(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();g_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let _P=0;class SP extends Gu{constructor(){super(...arguments),this.id=_P++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const bP={animation:{Feature:xP},exit:{Feature:SP}};function R0(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}function ng(i){return{point:{x:i.pageX,y:i.pageY}}}const MP=i=>t=>BM(t)&&i(t,ng(t));function h0(i,t,e,n){return R0(i,t,MP(e),n)}const o3=1e-4,EP=1-o3,TP=1+o3,l3=.01,AP=0-l3,wP=0+l3;function Os(i){return i.max-i.min}function CP(i,t,e){return Math.abs(i-t)<=e}function wA(i,t,e,n=.5){i.origin=n,i.originPoint=Vi(t.min,t.max,i.origin),i.scale=Os(e)/Os(t),i.translate=Vi(e.min,e.max,i.origin)-i.originPoint,(i.scale>=EP&&i.scale<=TP||isNaN(i.scale))&&(i.scale=1),(i.translate>=AP&&i.translate<=wP||isNaN(i.translate))&&(i.translate=0)}function d0(i,t,e,n){wA(i.x,t.x,e.x,n?n.originX:void 0),wA(i.y,t.y,e.y,n?n.originY:void 0)}function CA(i,t,e){i.min=e.min+t.min,i.max=i.min+Os(t)}function RP(i,t,e){CA(i.x,t.x,e.x),CA(i.y,t.y,e.y)}function RA(i,t,e){i.min=t.min-e.min,i.max=i.min+Os(t)}function px(i,t,e){RA(i.x,t.x,e.x),RA(i.y,t.y,e.y)}function Gr(i){return[i("x"),i("y")]}const c3=({current:i})=>i?i.ownerDocument.defaultView:null,DA=(i,t)=>Math.abs(i-t);function DP(i,t){const e=DA(i.x,t.x),n=DA(i.y,t.y);return Math.sqrt(e**2+n**2)}class u3{constructor(t,e,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:r=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=aS(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=DP(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!E)return;const{point:C}=x,{timestamp:T}=Za;this.history.push({...C,timestamp:T});const{onStart:M,onMove:R}=this.handlers;_||(M&&M(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,x)},this.handlePointerMove=(x,_)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=iS(_,this.transformPagePoint),Ci.update(this.updatePoint,!0)},this.handlePointerUp=(x,_)=>{this.end();const{onEnd:E,onSessionEnd:C,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=aS(x.type==="pointercancel"?this.lastMoveEventInfo:iS(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(x,M),C&&C(x,M)},!BM(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=a||window;const u=ng(t),d=iS(u,this.transformPagePoint),{point:p}=d,{timestamp:g}=Za;this.history=[{...p,timestamp:g}];const{onSessionStart:y}=e;y&&y(t,aS(d,this.history)),this.removeListeners=$0(h0(this.contextWindow,"pointermove",this.handlePointerMove),h0(this.contextWindow,"pointerup",this.handlePointerUp),h0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Iu(this.updatePoint)}}function iS(i,t){return t?{point:t(i.point)}:i}function NA(i,t){return{x:i.x-t.x,y:i.y-t.y}}function aS({point:i},t){return{point:i,delta:NA(i,f3(t)),offset:NA(i,NP(t)),velocity:UP(t,.1)}}function NP(i){return i[0]}function f3(i){return i[i.length-1]}function UP(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const a=f3(i);for(;e>=0&&(n=i[e],!(a.timestamp-n.timestamp>Pl(t)));)e--;if(!n)return{x:0,y:0};const r=kr(a.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const l={x:(a.x-n.x)/r,y:(a.y-n.y)/r};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function OP(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?Vi(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?Vi(e,i,n.max):Math.min(i,e)),i}function UA(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function LP(i,{top:t,left:e,bottom:n,right:a}){return{x:UA(i.x,e,a),y:UA(i.y,t,n)}}function OA(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function PP(i,t){return{x:OA(i.x,t.x),y:OA(i.y,t.y)}}function IP(i,t){let e=.5;const n=Os(i),a=Os(t);return a>n?e=T0(t.min,t.max-n,i.min):n>a&&(e=T0(i.min,i.max-a,t.min)),wc(0,1,e)}function BP(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const Bb=.35;function zP(i=Bb){return i===!1?i=0:i===!0&&(i=Bb),{x:LA(i,"left","right"),y:LA(i,"top","bottom")}}function LA(i,t,e){return{min:PA(i,t),max:PA(i,e)}}function PA(i,t){return typeof i=="number"?i:i[t]||0}const FP=new WeakMap;class VP{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ma(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const r=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(ng(y).point)},l=(y,x)=>{const{drag:_,dragPropagation:E,onDragStart:C}=this.getProps();if(_&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XL(_),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gr(M=>{let R=this.getAxisMotionValue(M).get()||0;if(Il.test(R)){const{projection:D}=this.visualElement;if(D&&D.layout){const L=D.layout.layoutBox[M];L&&(R=Os(L)*(parseFloat(R)/100))}}this.originPoint[M]=R}),C&&Ci.postRender(()=>C(y,x)),Pb(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},u=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:C,onDrag:T}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:M}=x;if(E&&this.currentDirection===null){this.currentDirection=HP(M),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",x.point,M),this.updateAxis("y",x.point,M),this.visualElement.render(),T&&T(y,x)},d=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Gr(y=>{var x;return this.getAnimationState(y)==="paused"&&((x=this.getAxisMotionValue(y).animation)==null?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new u3(t,{onSessionStart:r,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:n,contextWindow:c3(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,a=e||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!a||!n)return;const{velocity:l}=a;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Ci.postRender(()=>u(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:a}=this.getProps();if(!n||!ey(t,a,this.currentDirection))return;const r=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=OP(l,this.constraints[t],this.elastic[t])),r.set(l)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,a=this.constraints;t&&Xd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=LP(n.layoutBox,t):this.constraints=!1,this.elastic=zP(e),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Gr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=BP(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Xd(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const r=G4(n,a.root,this.visualElement.getTransformPagePoint());let l=PP(a.layout.layoutBox,r);if(e){const u=e(F4(l));this.hasMutatedConstraints=!!u,u&&(l=WR(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:a,dragTransition:r,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},p=Gr(g=>{if(!ey(g,e,this.currentDirection))return;let y=d&&d[g]||{};l&&(y={min:0,max:0});const x=a?200:1e6,_=a?40:1e7,E={type:"inertia",velocity:n?t[g]:0,bounceStiffness:x,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...r,...y};return this.startAxisValueAnimation(g,E)});return Promise.all(p).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Pb(this.visualElement,t),n.start(qM(t,n,0,e,this.visualElement,!1))}stopAnimation(){Gr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Gr(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[e];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Gr(e=>{const{drag:n}=this.getProps();if(!ey(e,n,this.currentDirection))return;const{projection:a}=this.visualElement,r=this.getAxisMotionValue(e);if(a&&a.layout){const{min:l,max:u}=a.layout.layoutBox[e];r.set(t[e]-Vi(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Xd(e)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Gr(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();a[l]=IP({min:d,max:d},this.constraints[l])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Gr(l=>{if(!ey(l,t,null))return;const u=this.getAxisMotionValue(l),{min:d,max:p}=this.constraints[l];u.set(Vi(d,p,a[l]))})}addListeners(){if(!this.visualElement.current)return;FP.set(this.visualElement,this);const t=this.visualElement.current,e=h0(t,"pointerdown",d=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Xd(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,r=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ci.read(n);const l=R0(window,"resize",()=>this.scalePositionWithinConstraints()),u=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(Gr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=d[g].translate,y.set(y.get()+d[g].translate))}),this.visualElement.render())}));return()=>{l(),e(),r(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:r=!1,dragElastic:l=Bb,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:a,dragConstraints:r,dragElastic:l,dragMomentum:u}}}function ey(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function HP(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class GP extends Gu{constructor(t){super(t),this.removeGroupControls=Xr,this.removeListeners=Xr,this.controls=new VP(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xr}unmount(){this.removeGroupControls(),this.removeListeners()}}const IA=i=>(t,e)=>{i&&Ci.postRender(()=>i(t,e))};class jP extends Gu{constructor(){super(...arguments),this.removePointerDownListener=Xr}onPointerDown(t){this.session=new u3(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:c3(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:IA(t),onStart:IA(e),onMove:n,onEnd:(r,l)=>{delete this.session,a&&Ci.postRender(()=>a(r,l))}}}mount(){this.removePointerDownListener=h0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ex={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let sS=!1;class kP extends Z.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:a}=this.props,{projection:r}=t;r&&(e.group&&e.group.add(r),n&&n.register&&a&&n.register(r),sS&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),ex.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:a,isPresent:r}=this.props,{projection:l}=n;return l&&(l.isPresent=r,sS=!0,a||t.layoutDependency!==e||e===void 0||t.isPresent!==r?l.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?l.promote():l.relegate()||Ci.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),IM.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:a}=t;sS=!0,a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function h3(i){const[t,e]=LR(),n=Z.useContext(mM);return O.jsx(kP,{...i,layoutGroup:n,switchLayoutGroup:Z.useContext(YR),isPresent:t,safeToRemove:e})}function XP(i,t,e){const n=ds(i)?i:sp(i);return n.start(qM("",n,t,e)),n.animation}const YP=(i,t)=>i.depth-t.depth;class qP{constructor(){this.children=[],this.isDirty=!1}add(t){yM(this.children,t),this.isDirty=!0}remove(t){xM(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(YP),this.isDirty=!1,this.children.forEach(t)}}function WP(i,t){const e=ir.now(),n=({timestamp:a})=>{const r=a-e;r>=t&&(Iu(n),i(r-t))};return Ci.setup(n,!0),()=>Iu(n)}const d3=["TopLeft","TopRight","BottomLeft","BottomRight"],ZP=d3.length,BA=i=>typeof i=="string"?parseFloat(i):i,zA=i=>typeof i=="number"||on.test(i);function KP(i,t,e,n,a,r){a?(i.opacity=Vi(0,e.opacity??1,QP(n)),i.opacityExit=Vi(t.opacity??1,0,JP(n))):r&&(i.opacity=Vi(t.opacity??1,e.opacity??1,n));for(let l=0;l<ZP;l++){const u=`border${d3[l]}Radius`;let d=FA(t,u),p=FA(e,u);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||zA(d)===zA(p)?(i[u]=Math.max(Vi(BA(d),BA(p),n),0),(Il.test(p)||Il.test(d))&&(i[u]+="%")):i[u]=p}(t.rotate||e.rotate)&&(i.rotate=Vi(t.rotate||0,e.rotate||0,n))}function FA(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const QP=p3(0,.5,$C),JP=p3(.5,.95,Xr);function p3(i,t,e){return n=>n<i?0:n>t?1:e(T0(i,t,n))}function VA(i,t){i.min=t.min,i.max=t.max}function No(i,t){VA(i.x,t.x),VA(i.y,t.y)}function HA(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}function GA(i,t,e,n,a){return i-=t,i=dx(i,1/e,n),a!==void 0&&(i=dx(i,1/a,n)),i}function $P(i,t=0,e=1,n=.5,a,r=i,l=i){if(Il.test(t)&&(t=parseFloat(t),t=Vi(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=Vi(r.min,r.max,n);i===r&&(u-=t),i.min=GA(i.min,t,e,u,a),i.max=GA(i.max,t,e,u,a)}function jA(i,t,[e,n,a],r,l){$P(i,t[e],t[n],t[a],t.scale,r,l)}const t5=["x","scaleX","originX"],e5=["y","scaleY","originY"];function kA(i,t,e,n){jA(i.x,t,t5,e?e.x:void 0,n?n.x:void 0),jA(i.y,t,e5,e?e.y:void 0,n?n.y:void 0)}function XA(i){return i.translate===0&&i.scale===1}function m3(i){return XA(i.x)&&XA(i.y)}function YA(i,t){return i.min===t.min&&i.max===t.max}function n5(i,t){return YA(i.x,t.x)&&YA(i.y,t.y)}function qA(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function g3(i,t){return qA(i.x,t.x)&&qA(i.y,t.y)}function WA(i){return Os(i.x)/Os(i.y)}function ZA(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}class i5{constructor(){this.members=[]}add(t){yM(this.members,t),t.scheduleRender()}remove(t){if(xM(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let n;for(let a=e;a>=0;a--){const r=this.members[a];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function a5(i,t,e){let n="";const a=i.x.translate/t.x,r=i.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((a||r||l)&&(n=`translate3d(${a}px, ${r}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:p,rotate:g,rotateX:y,rotateY:x,skewX:_,skewY:E}=e;p&&(n=`perspective(${p}px) ${n}`),g&&(n+=`rotate(${g}deg) `),y&&(n+=`rotateX(${y}deg) `),x&&(n+=`rotateY(${x}deg) `),_&&(n+=`skewX(${_}deg) `),E&&(n+=`skewY(${E}deg) `)}const u=i.x.scale*t.x,d=i.y.scale*t.y;return(u!==1||d!==1)&&(n+=`scale(${u}, ${d})`),n||"none"}const rS=["","X","Y","Z"],s5=1e3;let r5=0;function oS(i,t,e,n){const{latestValues:a}=t;a[i]&&(e[i]=a[i],t.setStaticValue(i,0),n&&(n[i]=0))}function v3(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=n3(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",Ci,!(a||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&v3(n)}function y3({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(l={},u=t==null?void 0:t()){this.id=r5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(c5),this.nodes.forEach(d5),this.nodes.forEach(p5),this.nodes.forEach(u5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new qP)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new bM),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=OR(l)&&!QL(l),this.instance=l;const{layoutId:u,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),i){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;Ci.read(()=>{y=window.innerWidth}),i(l,()=>{const _=window.innerWidth;_!==y&&(y=_,this.root.updateBlockedByResize=!0,g&&g(),g=WP(x,250),ex.hasAnimatedSinceResize&&(ex.hasAnimatedSinceResize=!1,this.nodes.forEach(JA)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&p&&(u||d)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||x5,{onLayoutAnimationStart:C,onLayoutAnimationComplete:T}=p.getProps(),M=!this.targetLayout||!g3(this.targetLayout,_),R=!y&&x;if(this.options.layoutRoot||this.resumeFrom||R||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...LM(E,"layout"),onPlay:C,onComplete:T};(p.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(g,R)}else y||JA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Iu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(m5),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&v3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(QA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(h5),this.nodes.forEach(o5),this.nodes.forEach(l5)):this.nodes.forEach(QA),this.clearAllSnapshots();const u=ir.now();Za.delta=wc(0,1e3/60,u-Za.timestamp),Za.timestamp=u,Za.isProcessing=!0,Z1.update.process(Za),Z1.preRender.process(Za),Z1.render.process(Za),Za.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,IM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(f5),this.sharedNodes.forEach(g5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ci.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ci.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Os(this.snapshot.measuredBox.x)&&!Os(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ma(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!m3(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(u||Zf(this.latestValues)||g)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),_5(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:l}=this.options;if(!l)return Ma();const u=l.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(S5))){const{scroll:g}=this.root;g&&(Yd(u.x,g.offset.x),Yd(u.y,g.offset.y))}return u}removeElementScroll(l){var d;const u=Ma();if(No(u,l),(d=this.scroll)!=null&&d.wasRoot)return u;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:y,options:x}=g;g!==this.root&&y&&x.layoutScroll&&(y.wasRoot&&No(u,l),Yd(u.x,y.offset.x),Yd(u.y,y.offset.y))}return u}applyTransform(l,u=!1){const d=Ma();No(d,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&qd(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Zf(g.latestValues)&&qd(d,g.latestValues)}return Zf(this.latestValues)&&qd(d,this.latestValues),d}removeTransform(l){const u=Ma();No(u,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!Zf(p.latestValues))continue;Nb(p.latestValues)&&p.updateSnapshot();const g=Ma(),y=p.measurePageBox();No(g,y),kA(u,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Zf(this.latestValues)&&kA(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Za.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var _;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=Za.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ma(),this.targetWithTransforms=Ma()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):No(this.target,this.layout.layoutBox),KR(this.target,this.targetDelta)):No(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Nb(this.parent.latestValues)||ZR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ma(),this.relativeTargetOrigin=Ma(),px(this.relativeTargetOrigin,u,d),No(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var E;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Za.timestamp&&(d=!1),d)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;No(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;H4(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ma());const{target:_}=l;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HA(this.prevProjectionDelta.x,this.projectionDelta.x),HA(this.prevProjectionDelta.y,this.projectionDelta.y)),d0(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!ZA(this.projectionDelta.x,this.prevProjectionDelta.x)||!ZA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wd(),this.projectionDelta=Wd(),this.projectionDeltaWithTransform=Wd()}setAnimationOrigin(l,u=!1){const d=this.snapshot,p=d?d.latestValues:{},g={...this.latestValues},y=Wd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=Ma(),_=d?d.source:void 0,E=this.layout?this.layout.source:void 0,C=_!==E,T=this.getStack(),M=!T||T.members.length<=1,R=!!(C&&!M&&this.options.crossfade===!0&&!this.path.some(y5));this.animationProgress=0;let D;this.mixTargetDelta=L=>{const P=L/1e3;$A(y.x,l.x,P),$A(y.y,l.y,P),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(px(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),v5(this.relativeTarget,this.relativeTargetOrigin,x,P),D&&n5(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=Ma()),No(D,this.relativeTarget)),C&&(this.animationValues=g,KP(g,p,this.latestValues,P,R,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,d,p;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(p=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||p.stop(),this.pendingAnimation&&(Iu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ci.update(()=>{ex.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=sp(0)),this.currentAnimation=XP(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),l.onUpdate&&l.onUpdate(g)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(s5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:p,latestValues:g}=l;if(!(!u||!d||!p)){if(this!==l&&this.layout&&p&&x3(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Ma();const y=Os(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+y;const x=Os(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+x}No(u,d),qd(u,g),d0(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new i5),this.sharedNodes.get(l).add(u);const p=u.options.initialPromotionConfig;u.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const p={};d.z&&oS("z",l,p,this.animationValues);for(let g=0;g<rS.length;g++)oS(`rotate${rS[g]}`,l,p,this.animationValues),oS(`skew${rS[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=tx(u==null?void 0:u.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=tx(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Zf(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=a5(this.projectionDeltaWithTransform,this.treeScale,g);d&&(y=d(g,y)),l.transform=y;const{x,y:_}=this.projectionDelta;l.transformOrigin=`${x.origin*100}% ${_.origin*100}% 0`,p.animationValues?l.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const E in Db){if(g[E]===void 0)continue;const{correct:C,applyTo:T,isCSSVariable:M}=Db[E],R=y==="none"?g[E]:C(g[E],p);if(T){const D=T.length;for(let L=0;L<D;L++)l[T[L]]=R}else M?this.options.visualElement.renderState.vars[E]=R:l[E]=R}this.options.layoutId&&(l.pointerEvents=p===this?tx(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(KA),this.root.sharedNodes.clear()}}}function o5(i){i.updateLayout()}function l5(i){var e;const t=((e=i.resumeFrom)==null?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=i.layout,{animationType:r}=i.options,l=t.source!==i.layout.source;r==="size"?Gr(y=>{const x=l?t.measuredBox[y]:t.layoutBox[y],_=Os(x);x.min=n[y].min,x.max=x.min+_}):x3(r,t.layoutBox,n)&&Gr(y=>{const x=l?t.measuredBox[y]:t.layoutBox[y],_=Os(n[y]);x.max=x.min+_,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[y].max=i.relativeTarget[y].min+_)});const u=Wd();d0(u,n,t.layoutBox);const d=Wd();l?d0(d,i.applyTransform(a,!0),t.measuredBox):d0(d,n,t.layoutBox);const p=!m3(u);let g=!1;if(!i.resumeFrom){const y=i.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:_}=y;if(x&&_){const E=Ma();px(E,t.layoutBox,x.layoutBox);const C=Ma();px(C,n,_.layoutBox),g3(E,C)||(g=!0),y.options.layoutRoot&&(i.relativeTarget=C,i.relativeTargetOrigin=E,i.relativeParent=y)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:p,hasRelativeLayoutChanged:g})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function c5(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function u5(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function f5(i){i.clearSnapshot()}function KA(i){i.clearMeasurements()}function QA(i){i.isLayoutDirty=!1}function h5(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function JA(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function d5(i){i.resolveTargetDelta()}function p5(i){i.calcProjection()}function m5(i){i.resetSkewAndRotation()}function g5(i){i.removeLeadSnapshot()}function $A(i,t,e){i.translate=Vi(t.translate,0,e),i.scale=Vi(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function t2(i,t,e,n){i.min=Vi(t.min,e.min,n),i.max=Vi(t.max,e.max,n)}function v5(i,t,e,n){t2(i.x,t.x,e.x,n),t2(i.y,t.y,e.y,n)}function y5(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const x5={duration:.45,ease:[.4,0,.1,1]},e2=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),n2=e2("applewebkit/")&&!e2("chrome/")?Math.round:Xr;function i2(i){i.min=n2(i.min),i.max=n2(i.max)}function _5(i){i2(i.x),i2(i.y)}function x3(i,t,e){return i==="position"||i==="preserve-aspect"&&!CP(WA(t),WA(e),.2)}function S5(i){var t;return i!==i.root&&((t=i.scroll)==null?void 0:t.wasRoot)}const b5=y3({attachResizeListener:(i,t)=>R0(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lS={current:void 0},_3=y3({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!lS.current){const i=new b5({});i.mount(window),i.setOptions({layoutScroll:!0}),lS.current=i}return lS.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),M5={pan:{Feature:jP},drag:{Feature:GP,ProjectionNode:_3,MeasureLayout:h3}};function a2(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,r=n[a];r&&Ci.postRender(()=>r(t,ng(t)))}class E5 extends Gu{mount(){const{current:t}=this.node;t&&(this.unmount=YL(t,(e,n)=>(a2(this.node,n,"Start"),a=>a2(this.node,a,"End"))))}unmount(){}}class T5 extends Gu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$0(R0(this.node.current,"focus",()=>this.onFocus()),R0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function s2(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),r=n[a];r&&Ci.postRender(()=>r(t,ng(t)))}class A5 extends Gu{mount(){const{current:t}=this.node;t&&(this.unmount=KL(t,(e,n)=>(s2(this.node,n,"Start"),(a,{success:r})=>s2(this.node,a,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zb=new WeakMap,cS=new WeakMap,w5=i=>{const t=zb.get(i.target);t&&t(i)},C5=i=>{i.forEach(w5)};function R5({root:i,...t}){const e=i||document;cS.has(e)||cS.set(e,{});const n=cS.get(e),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(C5,{root:i,...t})),n[a]}function D5(i,t,e){const n=R5(t);return zb.set(i,e),n.observe(i),()=>{zb.delete(i),n.unobserve(i)}}const N5={some:0,all:1};class U5 extends Gu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:a="some",once:r}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:N5[a]},u=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,r&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=p?g:y;x&&x(d)};return D5(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(O5(t,e))&&this.startObserver()}unmount(){}}function O5({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const L5={inView:{Feature:U5},tap:{Feature:A5},focus:{Feature:T5},hover:{Feature:E5}},P5={layout:{ProjectionNode:_3,MeasureLayout:h3}},I5={...bP,...L5,...M5,...P5},Fb=z4(I5,Q4);HC();/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D0(){return D0=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},D0.apply(this,arguments)}var Ru;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Ru||(Ru={}));const r2="popstate";function B5(i){i===void 0&&(i={});function t(a,r){let{pathname:l="/",search:u="",hash:d=""}=xh(a.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Vb("",{pathname:l,search:u,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function e(a,r){let l=a.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=a.location.href,p=d.indexOf("#");u=p===-1?d:d.slice(0,p)}return u+"#"+(typeof r=="string"?r:mx(r))}function n(a,r){WM(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(r)+")")}return F5(t,e,n,i)}function ga(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function WM(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function z5(){return Math.random().toString(36).substr(2,8)}function o2(i,t){return{usr:i.state,key:i.key,idx:t}}function Vb(i,t,e,n){return e===void 0&&(e=null),D0({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof t=="string"?xh(t):t,{state:e,key:t&&t.key||n||z5()})}function mx(i){let{pathname:t="/",search:e="",hash:n=""}=i;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function xh(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substr(e),i=i.substr(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substr(n),i=i.substr(0,n)),i&&(t.pathname=i)}return t}function F5(i,t,e,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:r=!1}=n,l=a.history,u=Ru.Pop,d=null,p=g();p==null&&(p=0,l.replaceState(D0({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function y(){u=Ru.Pop;let T=g(),M=T==null?null:T-p;p=T,d&&d({action:u,location:C.location,delta:M})}function x(T,M){u=Ru.Push;let R=Vb(C.location,T,M);e&&e(R,T),p=g()+1;let D=o2(R,p),L=C.createHref(R);try{l.pushState(D,"",L)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(L)}r&&d&&d({action:u,location:C.location,delta:1})}function _(T,M){u=Ru.Replace;let R=Vb(C.location,T,M);e&&e(R,T),p=g();let D=o2(R,p),L=C.createHref(R);l.replaceState(D,"",L),r&&d&&d({action:u,location:C.location,delta:0})}function E(T){let M=a.location.origin!=="null"?a.location.origin:a.location.href,R=typeof T=="string"?T:mx(T);return R=R.replace(/ $/,"%20"),ga(M,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,M)}let C={get action(){return u},get location(){return i(a,l)},listen(T){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(r2,y),d=T,()=>{a.removeEventListener(r2,y),d=null}},createHref(T){return t(a,T)},createURL:E,encodeLocation(T){let M=E(T);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:_,go(T){return l.go(T)}};return C}var l2;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(l2||(l2={}));function V5(i,t,e){e===void 0&&(e="/");let n=typeof t=="string"?xh(t):t,a=ZM(n.pathname||"/",e);if(a==null)return null;let r=S3(i);H5(r);let l=null;for(let u=0;l==null&&u<r.length;++u){let d=$5(a);l=K5(r[u],d)}return l}function S3(i,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let a=(r,l,u)=>{let d={relativePath:u===void 0?r.path||"":u,caseSensitive:r.caseSensitive===!0,childrenIndex:l,route:r};d.relativePath.startsWith("/")&&(ga(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let p=Lu([n,d.relativePath]),g=e.concat(d);r.children&&r.children.length>0&&(ga(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),S3(r.children,t,g,p)),!(r.path==null&&!r.index)&&t.push({path:p,score:W5(p,r.index),routesMeta:g})};return i.forEach((r,l)=>{var u;if(r.path===""||!((u=r.path)!=null&&u.includes("?")))a(r,l);else for(let d of b3(r.path))a(r,l,d)}),t}function b3(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),r=e.replace(/\?$/,"");if(n.length===0)return a?[r,""]:[r];let l=b3(n.join("/")),u=[];return u.push(...l.map(d=>d===""?r:[r,d].join("/"))),a&&u.push(...l),u.map(d=>i.startsWith("/")&&d===""?"/":d)}function H5(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:Z5(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const G5=/^:[\w-]+$/,j5=3,k5=2,X5=1,Y5=10,q5=-2,c2=i=>i==="*";function W5(i,t){let e=i.split("/"),n=e.length;return e.some(c2)&&(n+=q5),t&&(n+=k5),e.filter(a=>!c2(a)).reduce((a,r)=>a+(G5.test(r)?j5:r===""?X5:Y5),n)}function Z5(i,t){return i.length===t.length&&i.slice(0,-1).every((n,a)=>n===t[a])?i[i.length-1]-t[t.length-1]:0}function K5(i,t){let{routesMeta:e}=i,n={},a="/",r=[];for(let l=0;l<e.length;++l){let u=e[l],d=l===e.length-1,p=a==="/"?t:t.slice(a.length)||"/",g=Q5({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p);if(!g)return null;Object.assign(n,g.params);let y=u.route;r.push({params:n,pathname:Lu([a,g.pathname]),pathnameBase:iI(Lu([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=Lu([a,g.pathnameBase]))}return r}function Q5(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=J5(i.path,i.caseSensitive,i.end),a=t.match(e);if(!a)return null;let r=a[0],l=r.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:n.reduce((p,g,y)=>{let{paramName:x,isOptional:_}=g;if(x==="*"){let C=u[y]||"";l=r.slice(0,r.length-C.length).replace(/(.)\/+$/,"$1")}const E=u[y];return _&&!E?p[x]=void 0:p[x]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:r,pathnameBase:l,pattern:i}}function J5(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),WM(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function $5(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return WM(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),i}}function ZM(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}function tI(i,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:a=""}=typeof i=="string"?xh(i):i;return{pathname:e?e.startsWith("/")?e:eI(e,t):t,search:aI(n),hash:sI(a)}}function eI(i,t){let e=t.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function uS(i,t,e,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nI(i){return i.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function M3(i,t){let e=nI(i);return t?e.map((n,a)=>a===i.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function E3(i,t,e,n){n===void 0&&(n=!1);let a;typeof i=="string"?a=xh(i):(a=D0({},i),ga(!a.pathname||!a.pathname.includes("?"),uS("?","pathname","search",a)),ga(!a.pathname||!a.pathname.includes("#"),uS("#","pathname","hash",a)),ga(!a.search||!a.search.includes("#"),uS("#","search","hash",a)));let r=i===""||a.pathname==="",l=r?"/":a.pathname,u;if(l==null)u=e;else{let y=t.length-1;if(!n&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),y-=1;a.pathname=x.join("/")}u=y>=0?t[y]:"/"}let d=tI(a,u),p=l&&l!=="/"&&l.endsWith("/"),g=(r||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}const Lu=i=>i.join("/").replace(/\/\/+/g,"/"),iI=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),aI=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,sI=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function rI(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const T3=["post","put","patch","delete"];new Set(T3);const oI=["get",...T3];new Set(oI);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N0(){return N0=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},N0.apply(this,arguments)}const KM=Z.createContext(null),lI=Z.createContext(null),_h=Z.createContext(null),y_=Z.createContext(null),Sh=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),A3=Z.createContext(null);function cI(i,t){let{relative:e}=t===void 0?{}:t;ig()||ga(!1);let{basename:n,navigator:a}=Z.useContext(_h),{hash:r,pathname:l,search:u}=C3(i,{relative:e}),d=l;return n!=="/"&&(d=l==="/"?n:Lu([n,l])),a.createHref({pathname:d,search:u,hash:r})}function ig(){return Z.useContext(y_)!=null}function bh(){return ig()||ga(!1),Z.useContext(y_).location}function w3(i){Z.useContext(_h).static||Z.useLayoutEffect(i)}function Ls(){let{isDataRoute:i}=Z.useContext(Sh);return i?bI():uI()}function uI(){ig()||ga(!1);let i=Z.useContext(KM),{basename:t,future:e,navigator:n}=Z.useContext(_h),{matches:a}=Z.useContext(Sh),{pathname:r}=bh(),l=JSON.stringify(M3(a,e.v7_relativeSplatPath)),u=Z.useRef(!1);return w3(()=>{u.current=!0}),Z.useCallback(function(p,g){if(g===void 0&&(g={}),!u.current)return;if(typeof p=="number"){n.go(p);return}let y=E3(p,JSON.parse(l),r,g.relative==="path");i==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Lu([t,y.pathname])),(g.replace?n.replace:n.push)(y,g.state,g)},[t,n,l,r,i])}function C3(i,t){let{relative:e}=t===void 0?{}:t,{future:n}=Z.useContext(_h),{matches:a}=Z.useContext(Sh),{pathname:r}=bh(),l=JSON.stringify(M3(a,n.v7_relativeSplatPath));return Z.useMemo(()=>E3(i,JSON.parse(l),r,e==="path"),[i,l,r,e])}function fI(i,t){return hI(i,t)}function hI(i,t,e,n){ig()||ga(!1);let{navigator:a}=Z.useContext(_h),{matches:r}=Z.useContext(Sh),l=r[r.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=bh(),g;if(t){var y;let T=typeof t=="string"?xh(t):t;d==="/"||(y=T.pathname)!=null&&y.startsWith(d)||ga(!1),g=T}else g=p;let x=g.pathname||"/",_=x;if(d!=="/"){let T=d.replace(/^\//,"").split("/");_="/"+x.replace(/^\//,"").split("/").slice(T.length).join("/")}let E=V5(i,{pathname:_}),C=vI(E&&E.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:Lu([d,a.encodeLocation?a.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?d:Lu([d,a.encodeLocation?a.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),r,e,n);return t&&C?Z.createElement(y_.Provider,{value:{location:N0({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Ru.Pop}},C):C}function dI(){let i=SI(),t=rI(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),e?Z.createElement("pre",{style:a},e):null,null)}const pI=Z.createElement(dI,null);class mI extends Z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?Z.createElement(Sh.Provider,{value:this.props.routeContext},Z.createElement(A3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gI(i){let{routeContext:t,match:e,children:n}=i,a=Z.useContext(KM);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(Sh.Provider,{value:t},n)}function vI(i,t,e,n){var a;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),i==null){var r;if((r=e)!=null&&r.errors)i=e.matches;else return null}let l=i,u=(a=e)==null?void 0:a.errors;if(u!=null){let g=l.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id]));g>=0||ga(!1),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(e&&n&&n.v7_partialHydration)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:x,errors:_}=e,E=y.route.loader&&x[y.route.id]===void 0&&(!_||_[y.route.id]===void 0);if(y.route.lazy||E){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,y,x)=>{let _,E=!1,C=null,T=null;e&&(_=u&&y.route.id?u[y.route.id]:void 0,C=y.route.errorElement||pI,d&&(p<0&&x===0?(MI("route-fallback"),E=!0,T=null):p===x&&(E=!0,T=y.route.hydrateFallbackElement||null)));let M=t.concat(l.slice(0,x+1)),R=()=>{let D;return _?D=C:E?D=T:y.route.Component?D=Z.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=g,Z.createElement(gI,{match:y,routeContext:{outlet:g,matches:M,isDataRoute:e!=null},children:D})};return e&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?Z.createElement(mI,{location:e.location,revalidation:e.revalidation,component:C,error:_,children:R(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):R()},null)}var R3=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(R3||{}),D3=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(D3||{});function yI(i){let t=Z.useContext(KM);return t||ga(!1),t}function xI(i){let t=Z.useContext(lI);return t||ga(!1),t}function _I(i){let t=Z.useContext(Sh);return t||ga(!1),t}function N3(i){let t=_I(),e=t.matches[t.matches.length-1];return e.route.id||ga(!1),e.route.id}function SI(){var i;let t=Z.useContext(A3),e=xI(),n=N3();return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function bI(){let{router:i}=yI(R3.UseNavigateStable),t=N3(D3.UseNavigateStable),e=Z.useRef(!1);return w3(()=>{e.current=!0}),Z.useCallback(function(a,r){r===void 0&&(r={}),e.current&&(typeof a=="number"?i.navigate(a):i.navigate(a,N0({fromRouteId:t},r)))},[i,t])}const u2={};function MI(i,t,e){u2[i]||(u2[i]=!0)}function tr(i){ga(!1)}function EI(i){let{basename:t="/",children:e=null,location:n,navigationType:a=Ru.Pop,navigator:r,static:l=!1,future:u}=i;ig()&&ga(!1);let d=t.replace(/^\/*/,"/"),p=Z.useMemo(()=>({basename:d,navigator:r,static:l,future:N0({v7_relativeSplatPath:!1},u)}),[d,u,r,l]);typeof n=="string"&&(n=xh(n));let{pathname:g="/",search:y="",hash:x="",state:_=null,key:E="default"}=n,C=Z.useMemo(()=>{let T=ZM(g,d);return T==null?null:{location:{pathname:T,search:y,hash:x,state:_,key:E},navigationType:a}},[d,g,y,x,_,E,a]);return C==null?null:Z.createElement(_h.Provider,{value:p},Z.createElement(y_.Provider,{children:e,value:C}))}function TI(i){let{children:t,location:e}=i;return fI(Hb(t),e)}new Promise(()=>{});function Hb(i,t){t===void 0&&(t=[]);let e=[];return Z.Children.forEach(i,(n,a)=>{if(!Z.isValidElement(n))return;let r=[...t,a];if(n.type===Z.Fragment){e.push.apply(e,Hb(n.props.children,r));return}n.type!==tr&&ga(!1),!n.props.index||!n.props.children||ga(!1);let l={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Hb(n.props.children,r)),e.push(l)}),e}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gb(){return Gb=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Gb.apply(this,arguments)}function AI(i,t){if(i==null)return{};var e={},n=Object.keys(i),a,r;for(r=0;r<n.length;r++)a=n[r],!(t.indexOf(a)>=0)&&(e[a]=i[a]);return e}function wI(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function CI(i,t){return i.button===0&&(!t||t==="_self")&&!wI(i)}function jb(i){return i===void 0&&(i=""),new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((t,e)=>{let n=i[e];return t.concat(Array.isArray(n)?n.map(a=>[e,a]):[[e,n]])},[]))}function RI(i,t){let e=jb(i);return t&&t.forEach((n,a)=>{e.has(a)||t.getAll(a).forEach(r=>{e.append(a,r)})}),e}const DI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],NI="6";try{window.__reactRouterVersion=NI}catch{}const UI="startTransition",f2=QU[UI];function OI(i){let{basename:t,children:e,future:n,window:a}=i,r=Z.useRef();r.current==null&&(r.current=B5({window:a,v5Compat:!0}));let l=r.current,[u,d]=Z.useState({action:l.action,location:l.location}),{v7_startTransition:p}=n||{},g=Z.useCallback(y=>{p&&f2?f2(()=>d(y)):d(y)},[d,p]);return Z.useLayoutEffect(()=>l.listen(g),[l,g]),Z.createElement(EI,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:l,future:n})}const LI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,II=Z.forwardRef(function(t,e){let{onClick:n,relative:a,reloadDocument:r,replace:l,state:u,target:d,to:p,preventScrollReset:g,unstable_viewTransition:y}=t,x=AI(t,DI),{basename:_}=Z.useContext(_h),E,C=!1;if(typeof p=="string"&&PI.test(p)&&(E=p,LI))try{let D=new URL(window.location.href),L=p.startsWith("//")?new URL(D.protocol+p):new URL(p),P=ZM(L.pathname,_);L.origin===D.origin&&P!=null?p=P+L.search+L.hash:C=!0}catch{}let T=cI(p,{relative:a}),M=BI(p,{replace:l,state:u,target:d,preventScrollReset:g,relative:a,unstable_viewTransition:y});function R(D){n&&n(D),D.defaultPrevented||M(D)}return Z.createElement("a",Gb({},x,{href:E||T,onClick:C||r?n:R,ref:e,target:d}))});var h2;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(h2||(h2={}));var d2;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(d2||(d2={}));function BI(i,t){let{target:e,replace:n,state:a,preventScrollReset:r,relative:l,unstable_viewTransition:u}=t===void 0?{}:t,d=Ls(),p=bh(),g=C3(i,{relative:l});return Z.useCallback(y=>{if(CI(y,e)){y.preventDefault();let x=n!==void 0?n:mx(p)===mx(g);d(i,{replace:x,state:a,preventScrollReset:r,relative:l,unstable_viewTransition:u})}},[p,d,g,n,a,e,i,r,l,u])}function zI(i){let t=Z.useRef(jb(i)),e=Z.useRef(!1),n=bh(),a=Z.useMemo(()=>RI(n.search,e.current?null:t.current),[n.search]),r=Ls(),l=Z.useCallback((u,d)=>{const p=jb(typeof u=="function"?u(a):u);e.current=!0,r("?"+p,d)},[r,a]);return[a,l]}const FI=({website:i})=>{const t={visual:"bg-[#e2eef4]",art:"bg-[#d9d9d9]",playground:"bg-[#ede5d8]"};return O.jsxs(II,{to:`/project/${i.id}`,onClick:()=>{sessionStorage.setItem("restoreScroll","true"),sessionStorage.setItem("scrollPos",window.scrollY.toString())},className:`flex flex-col h-full ${t[i.category]} rounded-none overflow-hidden shadow-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 group block border border-black/5`,children:[O.jsxs("div",{className:"relative aspect-[16/10] overflow-hidden m-5 rounded-none shrink-0",children:[O.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),O.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors duration-500"})]}),O.jsxs("div",{className:"px-9 pb-9 flex flex-col flex-grow",children:[O.jsx("h3",{className:"text-[22px] font-serif font-normal text-slate-700 mb-3 tracking-wide leading-relaxed line-clamp-2",children:i.title}),O.jsx("p",{className:"text-slate-800 text-[13px] font-normal leading-relaxed mb-8 opacity-70 line-clamp-3",children:i.description}),O.jsx("div",{className:"flex flex-wrap gap-2 mb-10",children:i.tags.map(e=>O.jsxs("span",{className:"px-3 py-1.5 bg-white/40 backdrop-blur-md border border-black/5 rounded-full text-slate-700 text-[10px] font-bold uppercase tracking-wider transition-colors hover:bg-white/80",children:["#",e]},e))}),O.jsx("div",{className:"mt-auto flex justify-end",children:O.jsxs("div",{className:"flex items-center gap-2 text-slate-900 text-[12px] font-bold uppercase tracking-widest group",children:[O.jsxs("span",{className:"relative",children:["view project",O.jsx("div",{className:"absolute -bottom-1 left-0 w-0 h-[1.5px] bg-slate-900 transition-all duration-300 group-hover:w-full"})]}),O.jsx("svg",{className:"w-4 h-4 transform transition-transform group-hover:translate-x-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})]})},Fl=()=>{const i=Ls();return O.jsx("button",{onClick:()=>i(-1),className:"fixed bottom-10 left-10 w-14 h-14 flex items-center justify-center rounded-full bg-white/80 backdrop-blur-md border border-slate-200 shadow-2xl z-[9999] text-slate-600 hover:text-black hover:scale-110 transition-all duration-300 cursor-pointer group","aria-label":"Back to home",children:O.jsx("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"group-hover:-translate-x-1 transition-transform duration-300",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})})},VI=()=>O.jsxs("svg",{viewBox:"0 0 400 350",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-auto bg-[#2e3033]",children:[O.jsxs("defs",{children:[O.jsxs("linearGradient",{id:"skyGradient",x1:"0.5",y1:"0",x2:"0.5",y2:"1",children:[O.jsx("stop",{offset:"0%",stopColor:"#2e3033"}),O.jsx("stop",{offset:"70%",stopColor:"#3c3c44"}),O.jsx("stop",{offset:"90%",stopColor:"#694f42"}),O.jsx("stop",{offset:"100%",stopColor:"#c58c63"})]}),O.jsxs("filter",{id:"grain",children:[O.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.65",numOctaves:"3",stitchTiles:"stitch"}),O.jsx("feColorMatrix",{type:"saturate",values:"0"}),O.jsx("feComposite",{in:"SourceGraphic",operator:"in"}),O.jsx("feBlend",{in:"SourceGraphic",in2:"SourceGraphic",mode:"multiply"})]})]}),O.jsx("rect",{width:"400",height:"350",fill:"url(#skyGradient)"}),O.jsx("rect",{width:"400",height:"350",fill:"black",opacity:"0.07",style:{filter:"url(#grain)"}}),O.jsx("path",{d:"M 150 200 L 150 180 L 160 180 L 160 170 L 170 170 L 170 180 L 250 180 L 250 170 L 260 170 L 260 180 L 270 180 L 270 200 Z",fill:"#222"}),O.jsx("rect",{x:"180",y:"150",width:"10",height:"30",fill:"#1a1a1a"}),O.jsx("rect",{x:"230",y:"150",width:"10",height:"30",fill:"#1a1a1a"}),O.jsx("path",{d:"M 182 150 Q 185 140 188 150 T 182 150",fill:"#e57e5b"}),O.jsx("path",{d:"M 232 150 Q 235 142 238 150 T 232 150",fill:"#f09061"}),O.jsx("path",{d:"M 185 150 C 180 130, 160 120, 150 90 C 140 60, 160 40, 180 30 C 200 20, 220 50, 200 80 C 180 110, 190 130, 185 150 Z",fill:"#4a4a4a",opacity:"0.7"}),O.jsx("path",{d:"M 235 150 C 240 135, 255 125, 265 100 C 275 75, 260 50, 240 40 C 220 30, 200 60, 220 90 C 240 120, 230 140, 235 150 Z",fill:"#404040",opacity:"0.6"}),O.jsx("path",{d:"M 50 150 C 55 130, 65 120, 70 90 C 75 60, 65 50, 50 60 C 35 70, 40 100, 45 120 C 50 140, 50 150, 50 150 Z",fill:"#d8d8d8",opacity:"0.4"}),O.jsx("rect",{x:"0",y:"200",width:"400",height:"50",fill:"#c0c0c0"}),O.jsx("path",{d:"M 0 200 L 400 200",stroke:"#a0a0a0",strokeWidth:"1"}),O.jsx("line",{x1:"100",y1:"200",x2:"100",y2:"250",stroke:"#a0a0a0",strokeWidth:"2"}),O.jsx("line",{x1:"150",y1:"200",x2:"150",y2:"250",stroke:"#a0a0a0",strokeWidth:"2"}),O.jsx("line",{x1:"200",y1:"200",x2:"200",y2:"250",stroke:"#a0a0a0",strokeWidth:"2"}),O.jsx("line",{x1:"250",y1:"200",x2:"250",y2:"250",stroke:"#a0a0a0",strokeWidth:"2"}),O.jsx("line",{x1:"300",y1:"200",x2:"300",y2:"250",stroke:"#a0a0a0",strokeWidth:"2"}),O.jsx("line",{x1:"0",y1:"195",x2:"400",y2:"195",stroke:"#777",strokeWidth:"0.5"}),O.jsx("line",{x1:"0",y1:"192",x2:"400",y2:"192",stroke:"#777",strokeWidth:"0.5"}),O.jsx("path",{d:"M 0 250 C 50 220, 150 220, 200 250 Z",fill:"#7a8972"}),O.jsx("path",{d:"M 200 250 C 250 220, 350 220, 400 250 Z",fill:"#6f7c69"}),O.jsx("rect",{x:"0",y:"250",width:"400",height:"100",fill:"#9db193"}),O.jsx("rect",{x:"0",y:"250",width:"400",height:"100",fill:"black",opacity:"0.09",style:{filter:"url(#grain)"}}),O.jsx("rect",{x:"170",y:"260",width:"80",height:"40",fill:"#8b9ea7",rx:"2"}),O.jsx("rect",{x:"165",y:"257",width:"90",height:"46",fill:"#c0c5c9",rx:"3",stroke:"#b0b5b9",strokeWidth:"1"}),O.jsx("rect",{x:"170",y:"260",width:"80",height:"40",fill:"#6a828e",opacity:"0.8",rx:"2"}),O.jsx("rect",{x:"205",y:"262",width:"5",height:"15",fill:"#4a4238"}),O.jsx("circle",{cx:"100",cy:"290",r:"15",fill:"#c7c7c7"}),O.jsx("circle",{cx:"115",cy:"300",r:"10",fill:"#d1d1d1"}),O.jsx("circle",{cx:"130",cy:"285",r:"12",fill:"#bcbcbc"}),O.jsx("circle",{cx:"90",cy:"305",r:"8",fill:"#d8d8d8"}),O.jsx("rect",{x:"-10",y:"150",width:"60",height:"150",fill:"#d1ccc2"}),O.jsx("path",{d:"M -10 150 L 50 150 L 20 120 Z",fill:"#b96a4a"}),O.jsx("rect",{x:"350",y:"170",width:"60",height:"150",fill:"#d1ccc2"}),O.jsx("rect",{x:"70",y:"220",width:"5",height:"40",fill:"#6b4f3a"}),O.jsx("circle",{cx:"72.5",cy:"210",r:"20",fill:"#4d614b"}),O.jsx("rect",{x:"290",y:"225",width:"5",height:"40",fill:"#6b4f3a"}),O.jsx("circle",{cx:"292.5",cy:"215",r:"20",fill:"#4d614b"}),O.jsxs("g",{transform:"translate(155, 265)",children:[O.jsx("ellipse",{cx:"0",cy:"53",rx:"20",ry:"5",fill:"#000",opacity:"0.2"}),O.jsx("path",{d:"M -8 0 L 8 0 L 10 35 L -10 35 Z",fill:"#f0ede5"}),O.jsx("path",{d:"M -10 35 L 10 35 L 12 60 L -12 60 Z",fill:"#2a2a2a"}),O.jsx("path",{d:"M -6 0 L -4 0 L -6 35 L -8 35 Z",fill:"#2a2a2a"}),O.jsx("path",{d:"M 6 0 L 4 0 L 6 35 L 8 35 Z",fill:"#2a2a2a"}),O.jsx("circle",{cx:"0",cy:"-5",r:"7",fill:"#e0c9b6"}),O.jsx("path",{d:"M -6 -10 Q 0 -15 6 -10 L 0 -5 Z",fill:"#4a3b2a"}),O.jsx("path",{d:"M -15 5 L -12 2 L -5 15 L -8 18 Z",fill:"#c58c63"}),O.jsx("circle",{cx:"-16",cy:"4",r:"3",fill:"#f09061"})]}),O.jsxs("g",{transform:"translate(110, 300)",children:[O.jsx("ellipse",{cx:"12",cy:"13",rx:"15",ry:"3",fill:"#000",opacity:"0.15"}),O.jsx("path",{d:"M 0 0 Q 15 -5 25 5 L 20 10 Q 10 15 0 5 Z",fill:"#252525"}),O.jsx("path",{d:"M 5 8 L 3 12 M 8 9 L 6 13 M 18 9 L 16 13 M 21 8 L 19 12",stroke:"#252525",strokeWidth:"2",strokeLinecap:"round"})]})]}),HI=()=>(Z.useEffect(()=>{window.scrollTo(0,0)},[]),O.jsxs("div",{className:"bg-[#e8e6d9] min-h-screen w-full flex items-center justify-center relative px-4 pt-24 font-gowun",children:[O.jsx("style",{children:`
                    @import url('https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap');
                    .font-gowun, .font-kor {
                        font-family: 'Gowun Batang', serif !important;
                    }
                `}),O.jsx(Fl,{}),O.jsxs("div",{className:"mx-auto max-w-sm w-full bg-[#f4f3ed] rounded-xl shadow-2xl shadow-stone-400/30 overflow-hidden transform hover:scale-[1.02] transition-transform duration-500 ease-in-out",children:[O.jsx("div",{className:"w-full h-auto",children:O.jsx(VI,{})}),O.jsxs("div",{className:"p-6 text-center text-[#5c5b57]",children:[O.jsx("h1",{className:"text-4xl font-semibold tracking-wider text-[#4a4a4a]",children:"THE ZONE OF INTEREST"}),O.jsx("h2",{className:"font-kor text-xl mt-2 mb-4 text-[#6b6a66]",children:"  "}),O.jsx("div",{className:"w-1/4 h-px bg-stone-300 mx-auto my-5"}),O.jsx("p",{className:"font-kor text-lg italic my-4 text-[#63615b]",children:'"  ,  "'}),O.jsx("div",{className:"w-1/4 h-px bg-stone-300 mx-auto my-5"}),O.jsx("p",{className:"font-kor text-xs my-4 text-[#63615b] text-left leading-relaxed px-2 break-keep",children:"    ,              ,     .     ,     ,      ."}),O.jsx("div",{className:"w-1/4 h-px bg-stone-300 mx-auto my-5"}),O.jsxs("div",{className:"text-sm space-y-2 mt-4 font-kor",children:[O.jsxs("p",{children:[O.jsx("span",{className:"font-bold",children:""}),"  "]}),O.jsxs("p",{children:[O.jsx("span",{className:"font-bold",children:""}),"  ,  "]})]})]})]})]})),GI=({size:i=24,className:t,...e})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,...e,children:[O.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),O.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),jI=({size:i=24,className:t,...e})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,...e,children:[O.jsx("path",{d:"M12 20h9"}),O.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]}),kI=({size:i=24,className:t,...e})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,...e,children:[O.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),O.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),O.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]}),XI=({size:i=24,className:t,...e})=>O.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...e,children:[O.jsx("defs",{children:O.jsx("pattern",{id:"bandage-dots",x:"0",y:"0",width:"1.5",height:"1.5",patternUnits:"userSpaceOnUse",children:O.jsx("circle",{cx:"0.5",cy:"0.5",r:"0.2",fill:"black",opacity:"0.1"})})}),O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:"currentColor"}),O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:"url(#bandage-dots)"}),O.jsx("rect",{x:"7",y:"7",width:"10",height:"6",rx:"1.5",fill:"white",fillOpacity:"0.6"}),O.jsx("rect",{x:"8",y:"8",width:"8",height:"4",rx:"1",fill:"black",fillOpacity:"0.07"})]}),YI=({className:i,children:t,...e})=>O.jsx("div",{className:`bg-white text-slate-950 rounded-lg border border-slate-200 shadow-sm ${i}`,...e,children:t}),qI=({className:i,children:t,...e})=>O.jsx("div",{className:`${i}`,...e,children:t}),p2=({children:i,className:t,variant:e="default",asChild:n=!1,...a})=>{const u=`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 ${{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900"}[e]} ${t||""}`;if(n&&Bl.isValidElement(i)){const d=i.props;return Bl.cloneElement(i,{...d,className:`${u} ${d.className||""}`})}return O.jsx("button",{className:u,...a,children:i})},WI={name:" (Hayeon Bang)",role:"",location:" ",shortBio:"   .",interests:["  /","","","","  ","<The Zone of Interest>","","    ","","","",""," ","",""," ","","  ",""],email:"hayeonwhale07@gmail.com",blog:"https://blog.naver.com/storyofthelostletter",instagram:"https://www.instagram.com/rhfoyhb/"},ZI=({profile:i=WI})=>(Ls(),O.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center relative px-4 pt-24 bg-slate-50 font-gowun",children:[O.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap');
          .font-gowun {
            font-family: 'Gowun Batang', serif;
          }
        `}),O.jsx(Fl,{}),O.jsx(Fb.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.45},className:"max-w-sm w-full",children:O.jsx(YI,{className:"rounded-2xl shadow-lg overflow-hidden",children:O.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 p-6",children:[O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"w-20 h-20 rounded-xl bg-slate-50 flex items-center justify-center p-1 border",children:O.jsx(XI,{className:"w-full h-full text-slate-200"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("h2",{className:"text-xl font-semibold leading-tight text-slate-800",children:i.name}),O.jsx("p",{className:"text-sm text-slate-600",children:i.role}),O.jsx("p",{className:"text-xs text-slate-500 mt-1",children:i.location})]})]}),O.jsxs(qI,{className:"px-0 pt-4",children:[O.jsx("p",{className:"text-sm text-slate-700 mt-2",children:i.shortBio}),O.jsxs("div",{className:"mt-4",children:[O.jsx("h3",{className:"text-xs text-slate-500 uppercase tracking-wide font-semibold",children:" "}),O.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.interests.map(t=>O.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-100 border border-slate-200 text-slate-700",children:t},t))})]}),O.jsxs("div",{className:"mt-5 flex gap-2",children:[O.jsx(p2,{asChild:!0,className:"flex-1",children:O.jsx("a",{href:`mailto:${i.email}`,"aria-label":" ",children:O.jsxs("div",{className:"flex items-center justify-center gap-2",children:[O.jsx(GI,{size:16}),O.jsx("span",{className:"text-sm",children:" "})]})})}),O.jsx(p2,{asChild:!0,variant:"outline",children:O.jsx("a",{href:i.blog,target:"_blank",rel:"noreferrer",children:O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(jI,{size:16}),O.jsx("span",{className:"text-sm",children:""})]})})})]}),O.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 flex items-center justify-between text-xs text-slate-500",children:[O.jsx("span",{children:" : 2025-09-27"}),O.jsxs("a",{href:i.instagram,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 hover:text-slate-800 transition-colors",children:[O.jsx(kI,{size:14}),O.jsx("span",{children:""})]})]})]})]})})})]}));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QI=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),m2=i=>{const t=QI(i);return t.charAt(0).toUpperCase()+t.slice(1)},U3=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),JI=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $I={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Z.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:r,iconNode:l,...u},d)=>Z.createElement("svg",{ref:d,...$I,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:U3("lucide",a),...!r&&!JI(u)&&{"aria-hidden":"true"},...u},[...l.map(([p,g])=>Z.createElement(p,g)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=(i,t)=>{const e=Z.forwardRef(({className:n,...a},r)=>Z.createElement(tB,{ref:r,iconNode:t,className:U3(`lucide-${KI(m2(i))}`,`lucide-${i}`,n),...a}));return e.displayName=m2(i),e};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],g2=Vl("camera",eB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],v2=Vl("circle-check",nB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],y2=Vl("cloud",iB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],sB=Vl("download",aB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],oB=Vl("heart",rB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],cB=Vl("image",lB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fB=Vl("plus",uB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],dB=Vl("quote",hB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],O3=Vl("trash-2",pB);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gB=Vl("x",mB),vB=({data:i,scale:t=1})=>{const{imageUrl:e,content:n}=i;return O.jsxs("div",{className:"bg-paper shadow-2xl relative overflow-hidden flex flex-col md:flex-row w-full max-w-5xl mx-auto transition-all duration-500 h-full font-gowun",style:{transform:`scale(${t})`,transformOrigin:"top center"},children:[O.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap');
          .font-gowun {
            font-family: 'Gowun Batang', serif;
          }
        `}),O.jsxs("div",{className:"w-full md:w-1/2 relative h-[400px] md:h-auto bg-stone-200",children:[O.jsx("img",{src:e,alt:n.title,className:"w-full h-full object-cover"}),O.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/60 to-transparent",children:[O.jsx("h1",{className:"text-white font-serif text-3xl tracking-wide leading-snug",children:n.title}),O.jsxs("p",{className:"text-white/90 font-sans text-sm mt-2 opacity-90",children:[n.artist,", ",n.year]})]})]}),O.jsxs("div",{className:"w-full md:w-1/2 p-8 md:pt-12 md:px-12 md:pb-6 flex flex-col justify-between bg-white relative",children:[O.jsxs("div",{children:[O.jsxs("div",{className:"mb-8",children:[O.jsx("h3",{className:"text-xs font-sans font-bold uppercase tracking-widest text-stone-400 mb-2",children:" "}),O.jsx("p",{className:"text-stone-600 font-serif leading-relaxed text-lg break-keep",children:n.intro})]}),O.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-8",children:[O.jsxs("div",{className:"bg-stone-50 p-5 rounded-sm",children:[O.jsx("h4",{className:"text-secondary font-serif font-bold text-xl mb-2",children:" "}),O.jsx("p",{className:"text-sm text-stone-600 font-sans leading-6 break-keep",children:n.pastTheme})]}),O.jsxs("div",{className:"bg-stone-50 p-5 rounded-sm border border-stone-100",children:[O.jsx("h4",{className:"text-accent font-serif font-bold text-xl mb-2",children:" "}),O.jsx("p",{className:"text-sm text-stone-600 font-sans leading-6 break-keep",children:n.modernTheme})]})]}),O.jsxs("div",{className:"mb-10",children:[O.jsx("h3",{className:"text-xs font-sans font-bold uppercase tracking-widest text-stone-400 mb-2",children:"  "}),O.jsx("p",{className:"text-stone-700 font-serif leading-relaxed break-keep",children:n.connection})]})]}),O.jsx("div",{className:"mt-auto pt-8 border-t border-stone-100",children:O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(dB,{className:"text-accent shrink-0",size:24}),O.jsx("p",{className:"text-lg md:text-xl font-serif text-ink leading-snug whitespace-nowrap",children:n.coreMessage})]})})]})]})},yB={imageUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Claude_Monet_037.jpg/1200px-Claude_Monet_037.jpg",content:{title:"   ",artist:" ",year:"1873",intro:"  -  ,         .           ,        .        .",pastTheme:"    ,     .",modernTheme:"   ,          .",connection:"    ,       .           , ,     .",coreMessage:"      .",tags:["","",""]}},xB=()=>{Ls();const[i]=Z.useState(yB);return O.jsxs("div",{className:"h-screen w-full flex justify-center relative px-4 pt-24 bg-stone-100 font-sans text-ink overflow-hidden",children:[O.jsx(Fl,{}),O.jsx("div",{className:"fixed inset-0 bg-[#e8e6e1] opacity-50 pointer-events-none"}),O.jsx("div",{className:"relative w-full max-w-5xl z-10 h-full",children:O.jsx(vB,{data:i})})]})};var fS={exports:{}},vc={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function _B(){return x2||(x2=1,vc.ConcurrentRoot=1,vc.ContinuousEventPriority=8,vc.DefaultEventPriority=32,vc.DiscreteEventPriority=2,vc.IdleEventPriority=268435456,vc.LegacyRoot=0,vc.NoEventPriority=0),vc}var _2;function SB(){return _2||(_2=1,fS.exports=_B()),fS.exports}var nx=SB();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ap="182",yr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},xr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},L3=0,kb=1,P3=2,bB=3,I3=0,tp=1,ep=2,th=3,Rc=0,ps=1,Ns=2,Yr=0,lh=1,Ul=2,Xb=3,Yb=4,B3=5,Cu=100,z3=101,F3=102,V3=103,H3=104,G3=200,j3=201,k3=202,X3=203,gx=204,vx=205,Y3=206,q3=207,W3=208,Z3=209,K3=210,Q3=211,J3=212,$3=213,tD=214,yx=0,xx=1,_x=2,fh=3,Sx=4,bx=5,Mx=6,Ex=7,ag=0,eD=1,nD=2,qr=0,QM=1,x_=2,JM=3,__=4,$M=5,tE=6,eE=7,qb="attached",iD="detached",zu=300,Vo=301,Fu=302,op=303,U0=304,wp=306,O0=1e3,na=1001,L0=1002,la=1003,nE=1004,MB=1004,Zd=1005,EB=1005,Nn=1006,p0=1007,TB=1007,Ol=1008,Wb=1008,za=1009,S_=1010,b_=1011,lp=1012,sg=1013,Mr=1014,Mi=1015,pi=1016,M_=1017,E_=1018,cp=1020,iE=35902,aE=35899,sE=1021,rE=1022,ca=1023,zl=1026,Du=1027,rg=1028,og=1029,hh=1030,T_=1031,AB=1032,A_=1033,m0=33776,g0=33777,v0=33778,y0=33779,Tx=35840,Ax=35841,wx=35842,Cx=35843,Rx=36196,Dx=37492,Nx=37496,Ux=37488,Ox=37489,Lx=37490,Px=37491,Ix=37808,Bx=37809,zx=37810,Fx=37811,Vx=37812,Hx=37813,Gx=37814,jx=37815,kx=37816,Xx=37817,Yx=37818,qx=37819,Wx=37820,Zx=37821,Kx=36492,Qx=36494,Jx=36495,$x=36283,t_=36284,e_=36285,n_=36286,aD=2200,sD=2201,rD=2202,P0=2300,i_=2301,ix=2302,eh=2400,nh=2401,I0=2402,w_=2500,oE=2501,wB=0,CB=1,RB=2,oD=3200,DB=3201,NB=3202,UB=3203,ju=0,lD=1,Ec="",Ka="srgb",Ho="srgb-linear",B0="linear",ti="srgb",OB="",LB="rg",PB="ga",IB=0,Kf=7680,BB=7681,zB=7682,FB=7683,VB=34055,HB=34056,GB=5386,jB=512,kB=513,XB=514,YB=515,qB=516,WB=517,ZB=518,Zb=519,cD=512,uD=513,fD=514,C_=515,hD=516,dD=517,R_=518,pD=519,z0=35044,KB=35048,QB=35040,JB=35045,$B=35049,tz=35041,ez=35046,nz=35050,iz=35042,az="100",Kb="300 es",_r=2e3,up=2001,sz={COMPUTE:"compute",RENDER:"render"},rz={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},oz={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function mD(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const lz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Kd(i,t){return new lz[i](t)}function gD(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function F0(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function vD(){const i=F0("canvas");return i.style.display="block",i}const S2={};let Vu=null;function cz(i){Vu=i}function uz(){return Vu}function V0(...i){const t="THREE."+i.shift();Vu?Vu("log",t,...i):console.log(t,...i)}function Re(...i){const t="THREE."+i.shift();Vu?Vu("warn",t,...i):console.warn(t,...i)}function Ke(...i){const t="THREE."+i.shift();Vu?Vu("error",t,...i):console.error(t,...i)}function fp(...i){const t=i.join(" ");t in S2||(S2[t]=!0,Re(...i))}function fz(i,t,e){return new Promise(function(n,a){function r(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:a();break;case i.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:n()}}setTimeout(r,e)})}let Hl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const a=n[t];if(a!==void 0){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const a=n.slice(0);for(let r=0,l=a.length;r<l;r++)a[r].call(this,t);t.target=null}}};const cs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let b2=1234567;const ch=Math.PI/180,hp=180/Math.PI;function Sr(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(cs[i&255]+cs[i>>8&255]+cs[i>>16&255]+cs[i>>24&255]+"-"+cs[t&255]+cs[t>>8&255]+"-"+cs[t>>16&15|64]+cs[t>>24&255]+"-"+cs[e&63|128]+cs[e>>8&255]+"-"+cs[e>>16&255]+cs[e>>24&255]+cs[n&255]+cs[n>>8&255]+cs[n>>16&255]+cs[n>>24&255]).toLowerCase()}function sn(i,t,e){return Math.max(t,Math.min(e,i))}function lE(i,t){return(i%t+t)%t}function hz(i,t,e,n,a){return n+(i-t)*(a-n)/(e-t)}function dz(i,t,e){return i!==t?(e-i)/(t-i):0}function x0(i,t,e){return(1-e)*i+e*t}function pz(i,t,e,n){return x0(i,t,1-Math.exp(-e*n))}function mz(i,t=1){return t-Math.abs(lE(i,t*2)-t)}function gz(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function vz(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function yz(i,t){return i+Math.floor(Math.random()*(t-i+1))}function xz(i,t){return i+Math.random()*(t-i)}function _z(i){return i*(.5-Math.random())}function Sz(i){i!==void 0&&(b2=i);let t=b2+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function bz(i){return i*ch}function Mz(i){return i*hp}function Ez(i){return(i&i-1)===0&&i!==0}function Tz(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Az(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function wz(i,t,e,n,a){const r=Math.cos,l=Math.sin,u=r(e/2),d=l(e/2),p=r((t+n)/2),g=l((t+n)/2),y=r((t-n)/2),x=l((t-n)/2),_=r((n-t)/2),E=l((n-t)/2);switch(a){case"XYX":i.set(u*g,d*y,d*x,u*p);break;case"YZY":i.set(d*x,u*g,d*y,u*p);break;case"ZXZ":i.set(d*y,d*x,u*g,u*p);break;case"XZX":i.set(u*g,d*E,d*_,u*p);break;case"YXY":i.set(d*_,u*g,d*E,u*p);break;case"ZYZ":i.set(d*E,d*_,u*g,u*p);break;default:Re("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Us(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function yn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const D_={DEG2RAD:ch,RAD2DEG:hp,generateUUID:Sr,clamp:sn,euclideanModulo:lE,mapLinear:hz,inverseLerp:dz,lerp:x0,damp:pz,pingpong:mz,smoothstep:gz,smootherstep:vz,randInt:yz,randFloat:xz,randFloatSpread:_z,seededRandom:Sz,degToRad:bz,radToDeg:Mz,isPowerOfTwo:Ez,ceilPowerOfTwo:Tz,floorPowerOfTwo:Az,setQuaternionFromProperEuler:wz,normalize:yn,denormalize:Us};class It{constructor(t=0,e=0){It.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,a=t.elements;return this.x=a[0]*e+a[3]*n+a[6],this.y=a[1]*e+a[4]*n+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=sn(this.x,t.x,e.x),this.y=sn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=sn(this.x,t,e),this.y=sn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(sn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(sn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),a=Math.sin(e),r=this.x-t.x,l=this.y-t.y;return this.x=r*n-l*a+t.x,this.y=r*a+l*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Fa{constructor(t=0,e=0,n=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=a}static slerpFlat(t,e,n,a,r,l,u){let d=n[a+0],p=n[a+1],g=n[a+2],y=n[a+3],x=r[l+0],_=r[l+1],E=r[l+2],C=r[l+3];if(u<=0){t[e+0]=d,t[e+1]=p,t[e+2]=g,t[e+3]=y;return}if(u>=1){t[e+0]=x,t[e+1]=_,t[e+2]=E,t[e+3]=C;return}if(y!==C||d!==x||p!==_||g!==E){let T=d*x+p*_+g*E+y*C;T<0&&(x=-x,_=-_,E=-E,C=-C,T=-T);let M=1-u;if(T<.9995){const R=Math.acos(T),D=Math.sin(R);M=Math.sin(M*R)/D,u=Math.sin(u*R)/D,d=d*M+x*u,p=p*M+_*u,g=g*M+E*u,y=y*M+C*u}else{d=d*M+x*u,p=p*M+_*u,g=g*M+E*u,y=y*M+C*u;const R=1/Math.sqrt(d*d+p*p+g*g+y*y);d*=R,p*=R,g*=R,y*=R}}t[e]=d,t[e+1]=p,t[e+2]=g,t[e+3]=y}static multiplyQuaternionsFlat(t,e,n,a,r,l){const u=n[a],d=n[a+1],p=n[a+2],g=n[a+3],y=r[l],x=r[l+1],_=r[l+2],E=r[l+3];return t[e]=u*E+g*y+d*_-p*x,t[e+1]=d*E+g*x+p*y-u*_,t[e+2]=p*E+g*_+u*x-d*y,t[e+3]=g*E-u*y-d*x-p*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,a){return this._x=t,this._y=e,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,a=t._y,r=t._z,l=t._order,u=Math.cos,d=Math.sin,p=u(n/2),g=u(a/2),y=u(r/2),x=d(n/2),_=d(a/2),E=d(r/2);switch(l){case"XYZ":this._x=x*g*y+p*_*E,this._y=p*_*y-x*g*E,this._z=p*g*E+x*_*y,this._w=p*g*y-x*_*E;break;case"YXZ":this._x=x*g*y+p*_*E,this._y=p*_*y-x*g*E,this._z=p*g*E-x*_*y,this._w=p*g*y+x*_*E;break;case"ZXY":this._x=x*g*y-p*_*E,this._y=p*_*y+x*g*E,this._z=p*g*E+x*_*y,this._w=p*g*y-x*_*E;break;case"ZYX":this._x=x*g*y-p*_*E,this._y=p*_*y+x*g*E,this._z=p*g*E-x*_*y,this._w=p*g*y+x*_*E;break;case"YZX":this._x=x*g*y+p*_*E,this._y=p*_*y+x*g*E,this._z=p*g*E-x*_*y,this._w=p*g*y-x*_*E;break;case"XZY":this._x=x*g*y-p*_*E,this._y=p*_*y-x*g*E,this._z=p*g*E+x*_*y,this._w=p*g*y+x*_*E;break;default:Re("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,a=Math.sin(n);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],a=e[4],r=e[8],l=e[1],u=e[5],d=e[9],p=e[2],g=e[6],y=e[10],x=n+u+y;if(x>0){const _=.5/Math.sqrt(x+1);this._w=.25/_,this._x=(g-d)*_,this._y=(r-p)*_,this._z=(l-a)*_}else if(n>u&&n>y){const _=2*Math.sqrt(1+n-u-y);this._w=(g-d)/_,this._x=.25*_,this._y=(a+l)/_,this._z=(r+p)/_}else if(u>y){const _=2*Math.sqrt(1+u-n-y);this._w=(r-p)/_,this._x=(a+l)/_,this._y=.25*_,this._z=(d+g)/_}else{const _=2*Math.sqrt(1+y-n-u);this._w=(l-a)/_,this._x=(r+p)/_,this._y=(d+g)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(sn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const a=Math.min(1,e/n);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,a=t._y,r=t._z,l=t._w,u=e._x,d=e._y,p=e._z,g=e._w;return this._x=n*g+l*u+a*p-r*d,this._y=a*g+l*d+r*u-n*p,this._z=r*g+l*p+n*d-a*u,this._w=l*g-n*u-a*d-r*p,this._onChangeCallback(),this}slerp(t,e){if(e<=0)return this;if(e>=1)return this.copy(t);let n=t._x,a=t._y,r=t._z,l=t._w,u=this.dot(t);u<0&&(n=-n,a=-a,r=-r,l=-l,u=-u);let d=1-e;if(u<.9995){const p=Math.acos(u),g=Math.sin(p);d=Math.sin(d*p)/g,e=Math.sin(e*p)/g,this._x=this._x*d+n*e,this._y=this._y*d+a*e,this._z=this._z*d+r*e,this._w=this._w*d+l*e,this._onChangeCallback()}else this._x=this._x*d+n*e,this._y=this._y*d+a*e,this._z=this._z*d+r*e,this._w=this._w*d+l*e,this.normalize();return this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(a*Math.sin(t),a*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(t=0,e=0,n=0){K.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(M2.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(M2.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,a=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*a,this.y=r[1]*e+r[4]*n+r[7]*a,this.z=r[2]*e+r[5]*n+r[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,r=t.elements,l=1/(r[3]*e+r[7]*n+r[11]*a+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*a+r[12])*l,this.y=(r[1]*e+r[5]*n+r[9]*a+r[13])*l,this.z=(r[2]*e+r[6]*n+r[10]*a+r[14])*l,this}applyQuaternion(t){const e=this.x,n=this.y,a=this.z,r=t.x,l=t.y,u=t.z,d=t.w,p=2*(l*a-u*n),g=2*(u*e-r*a),y=2*(r*n-l*e);return this.x=e+d*p+l*y-u*g,this.y=n+d*g+u*p-r*y,this.z=a+d*y+r*g-l*p,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,a=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*a,this.y=r[1]*e+r[5]*n+r[9]*a,this.z=r[2]*e+r[6]*n+r[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=sn(this.x,t.x,e.x),this.y=sn(this.y,t.y,e.y),this.z=sn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=sn(this.x,t,e),this.y=sn(this.y,t,e),this.z=sn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(sn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,a=t.y,r=t.z,l=e.x,u=e.y,d=e.z;return this.x=a*d-r*u,this.y=r*l-n*d,this.z=n*u-a*l,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return hS.copy(this).projectOnVector(t),this.sub(hS)}reflect(t){return this.sub(hS.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(sn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,a=this.z-t.z;return e*e+n*n+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const a=Math.sin(e)*t;return this.x=a*Math.sin(n),this.y=Math.cos(e)*t,this.z=a*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hS=new K,M2=new Fa;class vn{constructor(t,e,n,a,r,l,u,d,p){vn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,a,r,l,u,d,p)}set(t,e,n,a,r,l,u,d,p){const g=this.elements;return g[0]=t,g[1]=a,g[2]=u,g[3]=e,g[4]=r,g[5]=d,g[6]=n,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,r=this.elements,l=n[0],u=n[3],d=n[6],p=n[1],g=n[4],y=n[7],x=n[2],_=n[5],E=n[8],C=a[0],T=a[3],M=a[6],R=a[1],D=a[4],L=a[7],P=a[2],B=a[5],G=a[8];return r[0]=l*C+u*R+d*P,r[3]=l*T+u*D+d*B,r[6]=l*M+u*L+d*G,r[1]=p*C+g*R+y*P,r[4]=p*T+g*D+y*B,r[7]=p*M+g*L+y*G,r[2]=x*C+_*R+E*P,r[5]=x*T+_*D+E*B,r[8]=x*M+_*L+E*G,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],a=t[2],r=t[3],l=t[4],u=t[5],d=t[6],p=t[7],g=t[8];return e*l*g-e*u*p-n*r*g+n*u*d+a*r*p-a*l*d}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],r=t[3],l=t[4],u=t[5],d=t[6],p=t[7],g=t[8],y=g*l-u*p,x=u*d-g*r,_=p*r-l*d,E=e*y+n*x+a*_;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/E;return t[0]=y*C,t[1]=(a*p-g*n)*C,t[2]=(u*n-a*l)*C,t[3]=x*C,t[4]=(g*e-a*d)*C,t[5]=(a*r-u*e)*C,t[6]=_*C,t[7]=(n*d-p*e)*C,t[8]=(l*e-n*r)*C,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,a,r,l,u){const d=Math.cos(r),p=Math.sin(r);return this.set(n*d,n*p,-n*(d*l+p*u)+l+t,-a*p,a*d,-a*(-p*l+d*u)+u+e,0,0,1),this}scale(t,e){return this.premultiply(dS.makeScale(t,e)),this}rotate(t){return this.premultiply(dS.makeRotation(-t)),this}translate(t,e){return this.premultiply(dS.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<9;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const dS=new vn,E2=new vn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),T2=new vn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Cz(){const i={enabled:!0,workingColorSpace:Ho,spaces:{},convert:function(a,r,l){return this.enabled===!1||r===l||!r||!l||(this.spaces[r].transfer===ti&&(a.r=Ac(a.r),a.g=Ac(a.g),a.b=Ac(a.b)),this.spaces[r].primaries!==this.spaces[l].primaries&&(a.applyMatrix3(this.spaces[r].toXYZ),a.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===ti&&(a.r=np(a.r),a.g=np(a.g),a.b=np(a.b))),a},workingToColorSpace:function(a,r){return this.convert(a,this.workingColorSpace,r)},colorSpaceToWorking:function(a,r){return this.convert(a,r,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Ec?B0:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,r=this.workingColorSpace){return a.fromArray(this.spaces[r].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,r,l){return a.copy(this.spaces[r].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,r){return fp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(a,r)},toWorkingColorSpace:function(a,r){return fp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(a,r)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Ho]:{primaries:t,whitePoint:n,transfer:B0,toXYZ:E2,fromXYZ:T2,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Ka},outputColorSpaceConfig:{drawingBufferColorSpace:Ka}},[Ka]:{primaries:t,whitePoint:n,transfer:ti,toXYZ:E2,fromXYZ:T2,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Ka}}}),i}const Un=Cz();function Ac(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function np(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let xd;class yD{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{xd===void 0&&(xd=F0("canvas")),xd.width=t.width,xd.height=t.height;const a=xd.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),n=xd}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=F0("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const a=n.getImageData(0,0,t.width,t.height),r=a.data;for(let l=0;l<r.length;l++)r[l]=Ac(r[l]/255)*255;return n.putImageData(a,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Ac(e[n]/255)*255):e[n]=Ac(e[n]);return{data:e,width:t.width,height:t.height}}else return Re("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Rz=0;class Nu{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Rz++}),this.uuid=Sr(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):typeof VideoFrame<"u"&&e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let r;if(Array.isArray(a)){r=[];for(let l=0,u=a.length;l<u;l++)a[l].isDataTexture?r.push(pS(a[l].image)):r.push(pS(a[l]))}else r=pS(a);n.url=r}return e||(t.images[this.uuid]=n),n}}function pS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?yD.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(Re("Texture: Unable to serialize Texture."),{})}let Dz=0;const mS=new K;class ci extends Hl{constructor(t=ci.DEFAULT_IMAGE,e=ci.DEFAULT_MAPPING,n=na,a=na,r=Nn,l=Ol,u=ca,d=za,p=ci.DEFAULT_ANISOTROPY,g=Ec){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Dz++}),this.uuid=Sr(),this.name="",this.source=new Nu(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=r,this.minFilter=l,this.anisotropy=p,this.format=u,this.internalFormat=null,this.type=d,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(mS).x}get height(){return this.source.getSize(mS).y}get depth(){return this.source.getSize(mS).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(n===void 0){Re(`Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){Re(`Texture.setValues(): property '${e}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==zu)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case O0:t.x=t.x-Math.floor(t.x);break;case na:t.x=t.x<0?0:1;break;case L0:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case O0:t.y=t.y-Math.floor(t.y);break;case na:t.y=t.y<0?0:1;break;case L0:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}ci.DEFAULT_IMAGE=null;ci.DEFAULT_MAPPING=zu;ci.DEFAULT_ANISOTROPY=1;class di{constructor(t=0,e=0,n=0,a=1){di.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,a){return this.x=t,this.y=e,this.z=n,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,r=this.w,l=t.elements;return this.x=l[0]*e+l[4]*n+l[8]*a+l[12]*r,this.y=l[1]*e+l[5]*n+l[9]*a+l[13]*r,this.z=l[2]*e+l[6]*n+l[10]*a+l[14]*r,this.w=l[3]*e+l[7]*n+l[11]*a+l[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,a,r;const d=t.elements,p=d[0],g=d[4],y=d[8],x=d[1],_=d[5],E=d[9],C=d[2],T=d[6],M=d[10];if(Math.abs(g-x)<.01&&Math.abs(y-C)<.01&&Math.abs(E-T)<.01){if(Math.abs(g+x)<.1&&Math.abs(y+C)<.1&&Math.abs(E+T)<.1&&Math.abs(p+_+M-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const D=(p+1)/2,L=(_+1)/2,P=(M+1)/2,B=(g+x)/4,G=(y+C)/4,V=(E+T)/4;return D>L&&D>P?D<.01?(n=0,a=.707106781,r=.707106781):(n=Math.sqrt(D),a=B/n,r=G/n):L>P?L<.01?(n=.707106781,a=0,r=.707106781):(a=Math.sqrt(L),n=B/a,r=V/a):P<.01?(n=.707106781,a=.707106781,r=0):(r=Math.sqrt(P),n=G/r,a=V/r),this.set(n,a,r,e),this}let R=Math.sqrt((T-E)*(T-E)+(y-C)*(y-C)+(x-g)*(x-g));return Math.abs(R)<.001&&(R=1),this.x=(T-E)/R,this.y=(y-C)/R,this.z=(x-g)/R,this.w=Math.acos((p+_+M-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=sn(this.x,t.x,e.x),this.y=sn(this.y,t.y,e.y),this.z=sn(this.z,t.z,e.z),this.w=sn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=sn(this.x,t,e),this.y=sn(this.y,t,e),this.z=sn(this.z,t,e),this.w=sn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(sn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cE extends Hl{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Nn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new di(0,0,t,e),this.scissorTest=!1,this.viewport=new di(0,0,t,e);const a={width:t,height:e,depth:n.depth},r=new ci(a);this.textures=[];const l=n.count;for(let u=0;u<l;u++)this.textures[u]=r.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){const e={minFilter:Nn,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let a=0,r=this.textures.length;a<r;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=n,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const a=Object.assign({},t.textures[e].image);this.textures[e].source=new Nu(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ia extends cE{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class N_ extends ci{constructor(t=null,e=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=la,this.minFilter=la,this.wrapR=na,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Nz extends ia{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new N_(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class U_ extends ci{constructor(t=null,e=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=la,this.minFilter=la,this.wrapR=na,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Uz extends ia{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new U_(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class ms{constructor(t=new K(1/0,1/0,1/0),e=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Uo.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Uo.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Uo.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const r=n.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let l=0,u=r.count;l<u;l++)t.isMesh===!0?t.getVertexPosition(l,Uo):Uo.fromBufferAttribute(r,l),Uo.applyMatrix4(t.matrixWorld),this.expandByPoint(Uo);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),ny.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),ny.copy(n.boundingBox)),ny.applyMatrix4(t.matrixWorld),this.union(ny)}const a=t.children;for(let r=0,l=a.length;r<l;r++)this.expandByObject(a[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Uo),Uo.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Xm),iy.subVectors(this.max,Xm),_d.subVectors(t.a,Xm),Sd.subVectors(t.b,Xm),bd.subVectors(t.c,Xm),yu.subVectors(Sd,_d),xu.subVectors(bd,Sd),Pf.subVectors(_d,bd);let e=[0,-yu.z,yu.y,0,-xu.z,xu.y,0,-Pf.z,Pf.y,yu.z,0,-yu.x,xu.z,0,-xu.x,Pf.z,0,-Pf.x,-yu.y,yu.x,0,-xu.y,xu.x,0,-Pf.y,Pf.x,0];return!gS(e,_d,Sd,bd,iy)||(e=[1,0,0,0,1,0,0,0,1],!gS(e,_d,Sd,bd,iy))?!1:(ay.crossVectors(yu,xu),e=[ay.x,ay.y,ay.z],gS(e,_d,Sd,bd,iy))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Uo).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Uo).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(yc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),yc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),yc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),yc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),yc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),yc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),yc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),yc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(yc),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const yc=[new K,new K,new K,new K,new K,new K,new K,new K],Uo=new K,ny=new ms,_d=new K,Sd=new K,bd=new K,yu=new K,xu=new K,Pf=new K,Xm=new K,iy=new K,ay=new K,If=new K;function gS(i,t,e,n,a){for(let r=0,l=i.length-3;r<=l;r+=3){If.fromArray(i,r);const u=a.x*Math.abs(If.x)+a.y*Math.abs(If.y)+a.z*Math.abs(If.z),d=t.dot(If),p=e.dot(If),g=n.dot(If);if(Math.max(-Math.max(d,p,g),Math.min(d,p,g))>u)return!1}return!0}const Oz=new ms,Ym=new K,vS=new K;class Qa{constructor(t=new K,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):Oz.setFromPoints(t).getCenter(n);let a=0;for(let r=0,l=t.length;r<l;r++)a=Math.max(a,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ym.subVectors(t,this.center);const e=Ym.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),a=(n-this.radius)*.5;this.center.addScaledVector(Ym,a/n),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(vS.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ym.copy(t.center).add(vS)),this.expandByPoint(Ym.copy(t.center).sub(vS))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const xc=new K,yS=new K,sy=new K,_u=new K,xS=new K,ry=new K,_S=new K;class ku{constructor(t=new K,e=new K(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,xc)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=xc.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(xc.copy(this.origin).addScaledVector(this.direction,e),xc.distanceToSquared(t))}distanceSqToSegment(t,e,n,a){yS.copy(t).add(e).multiplyScalar(.5),sy.copy(e).sub(t).normalize(),_u.copy(this.origin).sub(yS);const r=t.distanceTo(e)*.5,l=-this.direction.dot(sy),u=_u.dot(this.direction),d=-_u.dot(sy),p=_u.lengthSq(),g=Math.abs(1-l*l);let y,x,_,E;if(g>0)if(y=l*d-u,x=l*u-d,E=r*g,y>=0)if(x>=-E)if(x<=E){const C=1/g;y*=C,x*=C,_=y*(y+l*x+2*u)+x*(l*y+x+2*d)+p}else x=r,y=Math.max(0,-(l*x+u)),_=-y*y+x*(x+2*d)+p;else x=-r,y=Math.max(0,-(l*x+u)),_=-y*y+x*(x+2*d)+p;else x<=-E?(y=Math.max(0,-(-l*r+u)),x=y>0?-r:Math.min(Math.max(-r,-d),r),_=-y*y+x*(x+2*d)+p):x<=E?(y=0,x=Math.min(Math.max(-r,-d),r),_=x*(x+2*d)+p):(y=Math.max(0,-(l*r+u)),x=y>0?r:Math.min(Math.max(-r,-d),r),_=-y*y+x*(x+2*d)+p);else x=l>0?-r:r,y=Math.max(0,-(l*x+u)),_=-y*y+x*(x+2*d)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,y),a&&a.copy(yS).addScaledVector(sy,x),_}intersectSphere(t,e){xc.subVectors(t.center,this.origin);const n=xc.dot(this.direction),a=xc.dot(xc)-n*n,r=t.radius*t.radius;if(a>r)return null;const l=Math.sqrt(r-a),u=n-l,d=n+l;return d<0?null:u<0?this.at(d,e):this.at(u,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,a,r,l,u,d;const p=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,x=this.origin;return p>=0?(n=(t.min.x-x.x)*p,a=(t.max.x-x.x)*p):(n=(t.max.x-x.x)*p,a=(t.min.x-x.x)*p),g>=0?(r=(t.min.y-x.y)*g,l=(t.max.y-x.y)*g):(r=(t.max.y-x.y)*g,l=(t.min.y-x.y)*g),n>l||r>a||((r>n||isNaN(n))&&(n=r),(l<a||isNaN(a))&&(a=l),y>=0?(u=(t.min.z-x.z)*y,d=(t.max.z-x.z)*y):(u=(t.max.z-x.z)*y,d=(t.min.z-x.z)*y),n>d||u>a)||((u>n||n!==n)&&(n=u),(d<a||a!==a)&&(a=d),a<0)?null:this.at(n>=0?n:a,e)}intersectsBox(t){return this.intersectBox(t,xc)!==null}intersectTriangle(t,e,n,a,r){xS.subVectors(e,t),ry.subVectors(n,t),_S.crossVectors(xS,ry);let l=this.direction.dot(_S),u;if(l>0){if(a)return null;u=1}else if(l<0)u=-1,l=-l;else return null;_u.subVectors(this.origin,t);const d=u*this.direction.dot(ry.crossVectors(_u,ry));if(d<0)return null;const p=u*this.direction.dot(xS.cross(_u));if(p<0||d+p>l)return null;const g=-u*_u.dot(_S);return g<0?null:this.at(g/l,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rn{constructor(t,e,n,a,r,l,u,d,p,g,y,x,_,E,C,T){rn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,a,r,l,u,d,p,g,y,x,_,E,C,T)}set(t,e,n,a,r,l,u,d,p,g,y,x,_,E,C,T){const M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=a,M[1]=r,M[5]=l,M[9]=u,M[13]=d,M[2]=p,M[6]=g,M[10]=y,M[14]=x,M[3]=_,M[7]=E,M[11]=C,M[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rn().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return this.determinant()===0?(t.set(1,0,0),e.set(0,1,0),n.set(0,0,1),this):(t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){if(t.determinant()===0)return this.identity();const e=this.elements,n=t.elements,a=1/Md.setFromMatrixColumn(t,0).length(),r=1/Md.setFromMatrixColumn(t,1).length(),l=1/Md.setFromMatrixColumn(t,2).length();return e[0]=n[0]*a,e[1]=n[1]*a,e[2]=n[2]*a,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,a=t.y,r=t.z,l=Math.cos(n),u=Math.sin(n),d=Math.cos(a),p=Math.sin(a),g=Math.cos(r),y=Math.sin(r);if(t.order==="XYZ"){const x=l*g,_=l*y,E=u*g,C=u*y;e[0]=d*g,e[4]=-d*y,e[8]=p,e[1]=_+E*p,e[5]=x-C*p,e[9]=-u*d,e[2]=C-x*p,e[6]=E+_*p,e[10]=l*d}else if(t.order==="YXZ"){const x=d*g,_=d*y,E=p*g,C=p*y;e[0]=x+C*u,e[4]=E*u-_,e[8]=l*p,e[1]=l*y,e[5]=l*g,e[9]=-u,e[2]=_*u-E,e[6]=C+x*u,e[10]=l*d}else if(t.order==="ZXY"){const x=d*g,_=d*y,E=p*g,C=p*y;e[0]=x-C*u,e[4]=-l*y,e[8]=E+_*u,e[1]=_+E*u,e[5]=l*g,e[9]=C-x*u,e[2]=-l*p,e[6]=u,e[10]=l*d}else if(t.order==="ZYX"){const x=l*g,_=l*y,E=u*g,C=u*y;e[0]=d*g,e[4]=E*p-_,e[8]=x*p+C,e[1]=d*y,e[5]=C*p+x,e[9]=_*p-E,e[2]=-p,e[6]=u*d,e[10]=l*d}else if(t.order==="YZX"){const x=l*d,_=l*p,E=u*d,C=u*p;e[0]=d*g,e[4]=C-x*y,e[8]=E*y+_,e[1]=y,e[5]=l*g,e[9]=-u*g,e[2]=-p*g,e[6]=_*y+E,e[10]=x-C*y}else if(t.order==="XZY"){const x=l*d,_=l*p,E=u*d,C=u*p;e[0]=d*g,e[4]=-y,e[8]=p*g,e[1]=x*y+C,e[5]=l*g,e[9]=_*y-E,e[2]=E*y-_,e[6]=u*g,e[10]=C*y+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Lz,t,Pz)}lookAt(t,e,n){const a=this.elements;return gr.subVectors(t,e),gr.lengthSq()===0&&(gr.z=1),gr.normalize(),Su.crossVectors(n,gr),Su.lengthSq()===0&&(Math.abs(n.z)===1?gr.x+=1e-4:gr.z+=1e-4,gr.normalize(),Su.crossVectors(n,gr)),Su.normalize(),oy.crossVectors(gr,Su),a[0]=Su.x,a[4]=oy.x,a[8]=gr.x,a[1]=Su.y,a[5]=oy.y,a[9]=gr.y,a[2]=Su.z,a[6]=oy.z,a[10]=gr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,r=this.elements,l=n[0],u=n[4],d=n[8],p=n[12],g=n[1],y=n[5],x=n[9],_=n[13],E=n[2],C=n[6],T=n[10],M=n[14],R=n[3],D=n[7],L=n[11],P=n[15],B=a[0],G=a[4],V=a[8],N=a[12],I=a[1],W=a[5],lt=a[9],tt=a[13],rt=a[2],mt=a[6],$=a[10],et=a[14],vt=a[3],ut=a[7],j=a[11],st=a[15];return r[0]=l*B+u*I+d*rt+p*vt,r[4]=l*G+u*W+d*mt+p*ut,r[8]=l*V+u*lt+d*$+p*j,r[12]=l*N+u*tt+d*et+p*st,r[1]=g*B+y*I+x*rt+_*vt,r[5]=g*G+y*W+x*mt+_*ut,r[9]=g*V+y*lt+x*$+_*j,r[13]=g*N+y*tt+x*et+_*st,r[2]=E*B+C*I+T*rt+M*vt,r[6]=E*G+C*W+T*mt+M*ut,r[10]=E*V+C*lt+T*$+M*j,r[14]=E*N+C*tt+T*et+M*st,r[3]=R*B+D*I+L*rt+P*vt,r[7]=R*G+D*W+L*mt+P*ut,r[11]=R*V+D*lt+L*$+P*j,r[15]=R*N+D*tt+L*et+P*st,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],a=t[8],r=t[12],l=t[1],u=t[5],d=t[9],p=t[13],g=t[2],y=t[6],x=t[10],_=t[14],E=t[3],C=t[7],T=t[11],M=t[15],R=d*_-p*x,D=u*_-p*y,L=u*x-d*y,P=l*_-p*g,B=l*x-d*g,G=l*y-u*g;return e*(C*R-T*D+M*L)-n*(E*R-T*P+M*B)+a*(E*D-C*P+M*G)-r*(E*L-C*B+T*G)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],r=t[3],l=t[4],u=t[5],d=t[6],p=t[7],g=t[8],y=t[9],x=t[10],_=t[11],E=t[12],C=t[13],T=t[14],M=t[15],R=y*T*p-C*x*p+C*d*_-u*T*_-y*d*M+u*x*M,D=E*x*p-g*T*p-E*d*_+l*T*_+g*d*M-l*x*M,L=g*C*p-E*y*p+E*u*_-l*C*_-g*u*M+l*y*M,P=E*y*d-g*C*d-E*u*x+l*C*x+g*u*T-l*y*T,B=e*R+n*D+a*L+r*P;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const G=1/B;return t[0]=R*G,t[1]=(C*x*r-y*T*r-C*a*_+n*T*_+y*a*M-n*x*M)*G,t[2]=(u*T*r-C*d*r+C*a*p-n*T*p-u*a*M+n*d*M)*G,t[3]=(y*d*r-u*x*r-y*a*p+n*x*p+u*a*_-n*d*_)*G,t[4]=D*G,t[5]=(g*T*r-E*x*r+E*a*_-e*T*_-g*a*M+e*x*M)*G,t[6]=(E*d*r-l*T*r-E*a*p+e*T*p+l*a*M-e*d*M)*G,t[7]=(l*x*r-g*d*r+g*a*p-e*x*p-l*a*_+e*d*_)*G,t[8]=L*G,t[9]=(E*y*r-g*C*r-E*n*_+e*C*_+g*n*M-e*y*M)*G,t[10]=(l*C*r-E*u*r+E*n*p-e*C*p-l*n*M+e*u*M)*G,t[11]=(g*u*r-l*y*r-g*n*p+e*y*p+l*n*_-e*u*_)*G,t[12]=P*G,t[13]=(g*C*a-E*y*a+E*n*x-e*C*x-g*n*T+e*y*T)*G,t[14]=(E*u*a-l*C*a-E*n*d+e*C*d+l*n*T-e*u*T)*G,t[15]=(l*y*a-g*u*a+g*n*d-e*y*d-l*n*x+e*u*x)*G,this}scale(t){const e=this.elements,n=t.x,a=t.y,r=t.z;return e[0]*=n,e[4]*=a,e[8]*=r,e[1]*=n,e[5]*=a,e[9]*=r,e[2]*=n,e[6]*=a,e[10]*=r,e[3]*=n,e[7]*=a,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,a))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),a=Math.sin(e),r=1-n,l=t.x,u=t.y,d=t.z,p=r*l,g=r*u;return this.set(p*l+n,p*u-a*d,p*d+a*u,0,p*u+a*d,g*u+n,g*d-a*l,0,p*d-a*u,g*d+a*l,r*d*d+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,a,r,l){return this.set(1,n,r,0,t,1,l,0,e,a,1,0,0,0,0,1),this}compose(t,e,n){const a=this.elements,r=e._x,l=e._y,u=e._z,d=e._w,p=r+r,g=l+l,y=u+u,x=r*p,_=r*g,E=r*y,C=l*g,T=l*y,M=u*y,R=d*p,D=d*g,L=d*y,P=n.x,B=n.y,G=n.z;return a[0]=(1-(C+M))*P,a[1]=(_+L)*P,a[2]=(E-D)*P,a[3]=0,a[4]=(_-L)*B,a[5]=(1-(x+M))*B,a[6]=(T+R)*B,a[7]=0,a[8]=(E+D)*G,a[9]=(T-R)*G,a[10]=(1-(x+C))*G,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,n){const a=this.elements;if(t.x=a[12],t.y=a[13],t.z=a[14],this.determinant()===0)return n.set(1,1,1),e.identity(),this;let r=Md.set(a[0],a[1],a[2]).length();const l=Md.set(a[4],a[5],a[6]).length(),u=Md.set(a[8],a[9],a[10]).length();this.determinant()<0&&(r=-r),Oo.copy(this);const p=1/r,g=1/l,y=1/u;return Oo.elements[0]*=p,Oo.elements[1]*=p,Oo.elements[2]*=p,Oo.elements[4]*=g,Oo.elements[5]*=g,Oo.elements[6]*=g,Oo.elements[8]*=y,Oo.elements[9]*=y,Oo.elements[10]*=y,e.setFromRotationMatrix(Oo),n.x=r,n.y=l,n.z=u,this}makePerspective(t,e,n,a,r,l,u=_r,d=!1){const p=this.elements,g=2*r/(e-t),y=2*r/(n-a),x=(e+t)/(e-t),_=(n+a)/(n-a);let E,C;if(d)E=r/(l-r),C=l*r/(l-r);else if(u===_r)E=-(l+r)/(l-r),C=-2*l*r/(l-r);else if(u===up)E=-l/(l-r),C=-l*r/(l-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=x,p[12]=0,p[1]=0,p[5]=y,p[9]=_,p[13]=0,p[2]=0,p[6]=0,p[10]=E,p[14]=C,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(t,e,n,a,r,l,u=_r,d=!1){const p=this.elements,g=2/(e-t),y=2/(n-a),x=-(e+t)/(e-t),_=-(n+a)/(n-a);let E,C;if(d)E=1/(l-r),C=l/(l-r);else if(u===_r)E=-2/(l-r),C=-(l+r)/(l-r);else if(u===up)E=-1/(l-r),C=-r/(l-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return p[0]=g,p[4]=0,p[8]=0,p[12]=x,p[1]=0,p[5]=y,p[9]=0,p[13]=_,p[2]=0,p[6]=0,p[10]=E,p[14]=C,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<16;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Md=new K,Oo=new rn,Lz=new K(0,0,0),Pz=new K(1,1,1),Su=new K,oy=new K,gr=new K,A2=new rn,w2=new Fa;class Er{constructor(t=0,e=0,n=0,a=Er.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,a=this._order){return this._x=t,this._y=e,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const a=t.elements,r=a[0],l=a[4],u=a[8],d=a[1],p=a[5],g=a[9],y=a[2],x=a[6],_=a[10];switch(e){case"XYZ":this._y=Math.asin(sn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-g,_),this._z=Math.atan2(-l,r)):(this._x=Math.atan2(x,p),this._z=0);break;case"YXZ":this._x=Math.asin(-sn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(u,_),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-y,r),this._z=0);break;case"ZXY":this._x=Math.asin(sn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-y,_),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-sn(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(x,_),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(sn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-y,r)):(this._x=0,this._y=Math.atan2(u,_));break;case"XZY":this._z=Math.asin(-sn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(x,p),this._y=Math.atan2(u,r)):(this._x=Math.atan2(-g,_),this._y=0);break;default:Re("Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return A2.makeRotationFromQuaternion(t),this.setFromRotationMatrix(A2,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return w2.setFromEuler(this),this.setFromQuaternion(w2,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Er.DEFAULT_ORDER="XYZ";class dp{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Iz=0;const C2=new K,Ed=new Fa,_c=new rn,ly=new K,qm=new K,Bz=new K,zz=new Fa,R2=new K(1,0,0),D2=new K(0,1,0),N2=new K(0,0,1),U2={type:"added"},Fz={type:"removed"},Td={type:"childadded",child:null},SS={type:"childremoved",child:null};class On extends Hl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Iz++}),this.uuid=Sr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=On.DEFAULT_UP.clone();const t=new K,e=new Er,n=new Fa,a=new K(1,1,1);function r(){n.setFromEuler(e,!1)}function l(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new rn},normalMatrix:{value:new vn}}),this.matrix=new rn,this.matrixWorld=new rn,this.matrixAutoUpdate=On.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new dp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ed.setFromAxisAngle(t,e),this.quaternion.multiply(Ed),this}rotateOnWorldAxis(t,e){return Ed.setFromAxisAngle(t,e),this.quaternion.premultiply(Ed),this}rotateX(t){return this.rotateOnAxis(R2,t)}rotateY(t){return this.rotateOnAxis(D2,t)}rotateZ(t){return this.rotateOnAxis(N2,t)}translateOnAxis(t,e){return C2.copy(t).applyQuaternion(this.quaternion),this.position.add(C2.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(R2,t)}translateY(t){return this.translateOnAxis(D2,t)}translateZ(t){return this.translateOnAxis(N2,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(_c.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?ly.copy(t):ly.set(t,e,n);const a=this.parent;this.updateWorldMatrix(!0,!1),qm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_c.lookAt(qm,ly,this.up):_c.lookAt(ly,qm,this.up),this.quaternion.setFromRotationMatrix(_c),a&&(_c.extractRotation(a.matrixWorld),Ed.setFromRotationMatrix(_c),this.quaternion.premultiply(Ed.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(Ke("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(U2),Td.child=t,this.dispatchEvent(Td),Td.child=null):Ke("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Fz),SS.child=t,this.dispatchEvent(SS),SS.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),_c.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),_c.multiply(t.parent.matrixWorld)),t.applyMatrix4(_c),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(U2),Td.child=t,this.dispatchEvent(Td),Td.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,a=this.children.length;n<a;n++){const l=this.children[n].getObjectByProperty(t,e);if(l!==void 0)return l}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const a=this.children;for(let r=0,l=a.length;r<l;r++)a[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qm,t,Bz),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qm,zz,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const a=this.children;for(let r=0,l=a.length;r<l;r++)a[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(u=>({...u})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(t),a.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function r(u,d){return u[d.uuid]===void 0&&(u[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=r(t.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const d=u.shapes;if(Array.isArray(d))for(let p=0,g=d.length;p<g;p++){const y=d[p];r(t.shapes,y)}else r(t.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let d=0,p=this.material.length;d<p;d++)u.push(r(t.materials,this.material[d]));a.material=u}else a.material=r(t.materials,this.material);if(this.children.length>0){a.children=[];for(let u=0;u<this.children.length;u++)a.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let u=0;u<this.animations.length;u++){const d=this.animations[u];a.animations.push(r(t.animations,d))}}if(e){const u=l(t.geometries),d=l(t.materials),p=l(t.textures),g=l(t.images),y=l(t.shapes),x=l(t.skeletons),_=l(t.animations),E=l(t.nodes);u.length>0&&(n.geometries=u),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y),x.length>0&&(n.skeletons=x),_.length>0&&(n.animations=_),E.length>0&&(n.nodes=E)}return n.object=a,n;function l(u){const d=[];for(const p in u){const g=u[p];delete g.metadata,d.push(g)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const a=t.children[n];this.add(a.clone())}return this}}On.DEFAULT_UP=new K(0,1,0);On.DEFAULT_MATRIX_AUTO_UPDATE=!0;On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Lo=new K,Sc=new K,bS=new K,bc=new K,Ad=new K,wd=new K,O2=new K,MS=new K,ES=new K,TS=new K,AS=new di,wS=new di,CS=new di;class nr{constructor(t=new K,e=new K,n=new K){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,a){a.subVectors(n,e),Lo.subVectors(t,e),a.cross(Lo);const r=a.lengthSq();return r>0?a.multiplyScalar(1/Math.sqrt(r)):a.set(0,0,0)}static getBarycoord(t,e,n,a,r){Lo.subVectors(a,e),Sc.subVectors(n,e),bS.subVectors(t,e);const l=Lo.dot(Lo),u=Lo.dot(Sc),d=Lo.dot(bS),p=Sc.dot(Sc),g=Sc.dot(bS),y=l*p-u*u;if(y===0)return r.set(0,0,0),null;const x=1/y,_=(p*d-u*g)*x,E=(l*g-u*d)*x;return r.set(1-_-E,E,_)}static containsPoint(t,e,n,a){return this.getBarycoord(t,e,n,a,bc)===null?!1:bc.x>=0&&bc.y>=0&&bc.x+bc.y<=1}static getInterpolation(t,e,n,a,r,l,u,d){return this.getBarycoord(t,e,n,a,bc)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,bc.x),d.addScaledVector(l,bc.y),d.addScaledVector(u,bc.z),d)}static getInterpolatedAttribute(t,e,n,a,r,l){return AS.setScalar(0),wS.setScalar(0),CS.setScalar(0),AS.fromBufferAttribute(t,e),wS.fromBufferAttribute(t,n),CS.fromBufferAttribute(t,a),l.setScalar(0),l.addScaledVector(AS,r.x),l.addScaledVector(wS,r.y),l.addScaledVector(CS,r.z),l}static isFrontFacing(t,e,n,a){return Lo.subVectors(n,e),Sc.subVectors(t,e),Lo.cross(Sc).dot(a)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,a){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,n,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Lo.subVectors(this.c,this.b),Sc.subVectors(this.a,this.b),Lo.cross(Sc).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return nr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return nr.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,a,r){return nr.getInterpolation(t,this.a,this.b,this.c,e,n,a,r)}containsPoint(t){return nr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return nr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,a=this.b,r=this.c;let l,u;Ad.subVectors(a,n),wd.subVectors(r,n),MS.subVectors(t,n);const d=Ad.dot(MS),p=wd.dot(MS);if(d<=0&&p<=0)return e.copy(n);ES.subVectors(t,a);const g=Ad.dot(ES),y=wd.dot(ES);if(g>=0&&y<=g)return e.copy(a);const x=d*y-g*p;if(x<=0&&d>=0&&g<=0)return l=d/(d-g),e.copy(n).addScaledVector(Ad,l);TS.subVectors(t,r);const _=Ad.dot(TS),E=wd.dot(TS);if(E>=0&&_<=E)return e.copy(r);const C=_*p-d*E;if(C<=0&&p>=0&&E<=0)return u=p/(p-E),e.copy(n).addScaledVector(wd,u);const T=g*E-_*y;if(T<=0&&y-g>=0&&_-E>=0)return O2.subVectors(r,a),u=(y-g)/(y-g+(_-E)),e.copy(a).addScaledVector(O2,u);const M=1/(T+C+x);return l=C*M,u=x*M,e.copy(n).addScaledVector(Ad,l).addScaledVector(wd,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const xD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bu={h:0,s:0,l:0},cy={h:0,s:0,l:0};function RS(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class Ae{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ka){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Un.colorSpaceToWorking(this,e),this}setRGB(t,e,n,a=Un.workingColorSpace){return this.r=t,this.g=e,this.b=n,Un.colorSpaceToWorking(this,a),this}setHSL(t,e,n,a=Un.workingColorSpace){if(t=lE(t,1),e=sn(e,0,1),n=sn(n,0,1),e===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,l=2*n-r;this.r=RS(l,r,t+1/3),this.g=RS(l,r,t),this.b=RS(l,r,t-1/3)}return Un.colorSpaceToWorking(this,a),this}setStyle(t,e=Ka){function n(r){r!==void 0&&parseFloat(r)<1&&Re("Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const l=a[1],u=a[2];switch(l){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:Re("Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=a[1],l=r.length;if(l===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(l===6)return this.setHex(parseInt(r,16),e);Re("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ka){const n=xD[t.toLowerCase()];return n!==void 0?this.setHex(n,e):Re("Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ac(t.r),this.g=Ac(t.g),this.b=Ac(t.b),this}copyLinearToSRGB(t){return this.r=np(t.r),this.g=np(t.g),this.b=np(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ka){return Un.workingToColorSpace(us.copy(this),t),Math.round(sn(us.r*255,0,255))*65536+Math.round(sn(us.g*255,0,255))*256+Math.round(sn(us.b*255,0,255))}getHexString(t=Ka){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Un.workingColorSpace){Un.workingToColorSpace(us.copy(this),e);const n=us.r,a=us.g,r=us.b,l=Math.max(n,a,r),u=Math.min(n,a,r);let d,p;const g=(u+l)/2;if(u===l)d=0,p=0;else{const y=l-u;switch(p=g<=.5?y/(l+u):y/(2-l-u),l){case n:d=(a-r)/y+(a<r?6:0);break;case a:d=(r-n)/y+2;break;case r:d=(n-a)/y+4;break}d/=6}return t.h=d,t.s=p,t.l=g,t}getRGB(t,e=Un.workingColorSpace){return Un.workingToColorSpace(us.copy(this),e),t.r=us.r,t.g=us.g,t.b=us.b,t}getStyle(t=Ka){Un.workingToColorSpace(us.copy(this),t);const e=us.r,n=us.g,a=us.b;return t!==Ka?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(t,e,n){return this.getHSL(bu),this.setHSL(bu.h+t,bu.s+e,bu.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(bu),t.getHSL(cy);const n=x0(bu.h,cy.h,e),a=x0(bu.s,cy.s,e),r=x0(bu.l,cy.l,e);return this.setHSL(n,a,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,a=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*a,this.g=r[1]*e+r[4]*n+r[7]*a,this.b=r[2]*e+r[5]*n+r[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const us=new Ae;Ae.NAMES=xD;let Vz=0;class gs extends Hl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Vz++}),this.uuid=Sr(),this.name="",this.type="Material",this.blending=lh,this.side=Rc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=gx,this.blendDst=vx,this.blendEquation=Cu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ae(0,0,0),this.blendAlpha=0,this.depthFunc=fh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Zb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Kf,this.stencilZFail=Kf,this.stencilZPass=Kf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){Re(`Material: parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){Re(`Material: '${e}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==lh&&(n.blending=this.blending),this.side!==Rc&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==gx&&(n.blendSrc=this.blendSrc),this.blendDst!==vx&&(n.blendDst=this.blendDst),this.blendEquation!==Cu&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==fh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Zb&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Kf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Kf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Kf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(r){const l=[];for(const u in r){const d=r[u];delete d.metadata,l.push(d)}return l}if(e){const r=a(t.textures),l=a(t.images);r.length>0&&(n.textures=r),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const a=e.length;n=new Array(a);for(let r=0;r!==a;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.allowOverride=t.allowOverride,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Go extends gs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=ag,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Tc=Hz();function Hz(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,a[d]=24,a[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,a[d]=-p-1,a[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,a[d]=13,a[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,a[d]=24,a[d|256]=24):(n[d]=31744,n[d|256]=64512,a[d]=13,a[d|256]=13)}const r=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,r[d]=p|g}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(u[d]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:a,mantissaTable:r,exponentTable:l,offsetTable:u}}function er(i){Math.abs(i)>65504&&Re("DataUtils.toHalfFloat(): Value out of range."),i=sn(i,-65504,65504),Tc.floatView[0]=i;const t=Tc.uint32View[0],e=t>>23&511;return Tc.baseTable[e]+((t&8388607)>>Tc.shiftTable[e])}function o0(i){const t=i>>10;return Tc.uint32View[0]=Tc.mantissaTable[Tc.offsetTable[t]+(i&1023)]+Tc.exponentTable[t],Tc.floatView[0]}class ih{static toHalfFloat(t){return er(t)}static fromHalfFloat(t){return o0(t)}}const pa=new K,uy=new It;let Gz=0;class ii{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Gz++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=z0,this.updateRanges=[],this.gpuType=Mi,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let a=0,r=this.itemSize;a<r;a++)this.array[t+a]=e.array[n+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)uy.fromBufferAttribute(this,e),uy.applyMatrix3(t),this.setXY(e,uy.x,uy.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)pa.fromBufferAttribute(this,e),pa.applyMatrix3(t),this.setXYZ(e,pa.x,pa.y,pa.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)pa.fromBufferAttribute(this,e),pa.applyMatrix4(t),this.setXYZ(e,pa.x,pa.y,pa.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)pa.fromBufferAttribute(this,e),pa.applyNormalMatrix(t),this.setXYZ(e,pa.x,pa.y,pa.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)pa.fromBufferAttribute(this,e),pa.transformDirection(t),this.setXYZ(e,pa.x,pa.y,pa.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Us(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=yn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Us(e,this.array)),e}setX(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Us(e,this.array)),e}setY(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Us(e,this.array)),e}setZ(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Us(e,this.array)),e}setW(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),a=yn(a,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this}setXYZW(t,e,n,a,r){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),a=yn(a,this.array),r=yn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==z0&&(t.usage=this.usage),t}}class jz extends ii{constructor(t,e,n){super(new Int8Array(t),e,n)}}class kz extends ii{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class Xz extends ii{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class Yz extends ii{constructor(t,e,n){super(new Int16Array(t),e,n)}}class uE extends ii{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class qz extends ii{constructor(t,e,n){super(new Int32Array(t),e,n)}}class fE extends ii{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Wz extends ii{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=o0(this.array[t*this.itemSize]);return this.normalized&&(e=Us(e,this.array)),e}setX(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize]=er(e),this}getY(t){let e=o0(this.array[t*this.itemSize+1]);return this.normalized&&(e=Us(e,this.array)),e}setY(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+1]=er(e),this}getZ(t){let e=o0(this.array[t*this.itemSize+2]);return this.normalized&&(e=Us(e,this.array)),e}setZ(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+2]=er(e),this}getW(t){let e=o0(this.array[t*this.itemSize+3]);return this.normalized&&(e=Us(e,this.array)),e}setW(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+3]=er(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array)),this.array[t+0]=er(e),this.array[t+1]=er(n),this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),a=yn(a,this.array)),this.array[t+0]=er(e),this.array[t+1]=er(n),this.array[t+2]=er(a),this}setXYZW(t,e,n,a,r){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),a=yn(a,this.array),r=yn(r,this.array)),this.array[t+0]=er(e),this.array[t+1]=er(n),this.array[t+2]=er(a),this.array[t+3]=er(r),this}}class Be extends ii{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Zz=0;const Hr=new rn,DS=new On,Cd=new K,vr=new ms,Wm=new ms,Ia=new K;class ln extends Hl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Zz++}),this.uuid=Sr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(mD(t)?fE:uE)(t,1):this.index=t,this}setIndirect(t,e=0){return this.indirect=t,this.indirectOffset=e,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new vn().getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Hr.makeRotationFromQuaternion(t),this.applyMatrix4(Hr),this}rotateX(t){return Hr.makeRotationX(t),this.applyMatrix4(Hr),this}rotateY(t){return Hr.makeRotationY(t),this.applyMatrix4(Hr),this}rotateZ(t){return Hr.makeRotationZ(t),this.applyMatrix4(Hr),this}translate(t,e,n){return Hr.makeTranslation(t,e,n),this.applyMatrix4(Hr),this}scale(t,e,n){return Hr.makeScale(t,e,n),this.applyMatrix4(Hr),this}lookAt(t){return DS.lookAt(t),DS.updateMatrix(),this.applyMatrix4(DS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cd).negate(),this.translate(Cd.x,Cd.y,Cd.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let a=0,r=t.length;a<r;a++){const l=t[a];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new Be(n,3))}else{const n=Math.min(t.length,e.count);for(let a=0;a<n;a++){const r=t[a];e.setXYZ(a,r.x,r.y,r.z||0)}t.length>e.count&&Re("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ms);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){Ke("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,a=e.length;n<a;n++){const r=e[n];vr.setFromBufferAttribute(r),this.morphTargetsRelative?(Ia.addVectors(this.boundingBox.min,vr.min),this.boundingBox.expandByPoint(Ia),Ia.addVectors(this.boundingBox.max,vr.max),this.boundingBox.expandByPoint(Ia)):(this.boundingBox.expandByPoint(vr.min),this.boundingBox.expandByPoint(vr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Ke('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qa);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){Ke("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(t){const n=this.boundingSphere.center;if(vr.setFromBufferAttribute(t),e)for(let r=0,l=e.length;r<l;r++){const u=e[r];Wm.setFromBufferAttribute(u),this.morphTargetsRelative?(Ia.addVectors(vr.min,Wm.min),vr.expandByPoint(Ia),Ia.addVectors(vr.max,Wm.max),vr.expandByPoint(Ia)):(vr.expandByPoint(Wm.min),vr.expandByPoint(Wm.max))}vr.getCenter(n);let a=0;for(let r=0,l=t.count;r<l;r++)Ia.fromBufferAttribute(t,r),a=Math.max(a,n.distanceToSquared(Ia));if(e)for(let r=0,l=e.length;r<l;r++){const u=e[r],d=this.morphTargetsRelative;for(let p=0,g=u.count;p<g;p++)Ia.fromBufferAttribute(u,p),d&&(Cd.fromBufferAttribute(t,p),Ia.add(Cd)),a=Math.max(a,n.distanceToSquared(Ia))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&Ke('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){Ke("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,a=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ii(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),u=[],d=[];for(let V=0;V<n.count;V++)u[V]=new K,d[V]=new K;const p=new K,g=new K,y=new K,x=new It,_=new It,E=new It,C=new K,T=new K;function M(V,N,I){p.fromBufferAttribute(n,V),g.fromBufferAttribute(n,N),y.fromBufferAttribute(n,I),x.fromBufferAttribute(r,V),_.fromBufferAttribute(r,N),E.fromBufferAttribute(r,I),g.sub(p),y.sub(p),_.sub(x),E.sub(x);const W=1/(_.x*E.y-E.x*_.y);isFinite(W)&&(C.copy(g).multiplyScalar(E.y).addScaledVector(y,-_.y).multiplyScalar(W),T.copy(y).multiplyScalar(_.x).addScaledVector(g,-E.x).multiplyScalar(W),u[V].add(C),u[N].add(C),u[I].add(C),d[V].add(T),d[N].add(T),d[I].add(T))}let R=this.groups;R.length===0&&(R=[{start:0,count:t.count}]);for(let V=0,N=R.length;V<N;++V){const I=R[V],W=I.start,lt=I.count;for(let tt=W,rt=W+lt;tt<rt;tt+=3)M(t.getX(tt+0),t.getX(tt+1),t.getX(tt+2))}const D=new K,L=new K,P=new K,B=new K;function G(V){P.fromBufferAttribute(a,V),B.copy(P);const N=u[V];D.copy(N),D.sub(P.multiplyScalar(P.dot(N))).normalize(),L.crossVectors(B,N);const W=L.dot(d[V])<0?-1:1;l.setXYZW(V,D.x,D.y,D.z,W)}for(let V=0,N=R.length;V<N;++V){const I=R[V],W=I.start,lt=I.count;for(let tt=W,rt=W+lt;tt<rt;tt+=3)G(t.getX(tt+0)),G(t.getX(tt+1)),G(t.getX(tt+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ii(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let x=0,_=n.count;x<_;x++)n.setXYZ(x,0,0,0);const a=new K,r=new K,l=new K,u=new K,d=new K,p=new K,g=new K,y=new K;if(t)for(let x=0,_=t.count;x<_;x+=3){const E=t.getX(x+0),C=t.getX(x+1),T=t.getX(x+2);a.fromBufferAttribute(e,E),r.fromBufferAttribute(e,C),l.fromBufferAttribute(e,T),g.subVectors(l,r),y.subVectors(a,r),g.cross(y),u.fromBufferAttribute(n,E),d.fromBufferAttribute(n,C),p.fromBufferAttribute(n,T),u.add(g),d.add(g),p.add(g),n.setXYZ(E,u.x,u.y,u.z),n.setXYZ(C,d.x,d.y,d.z),n.setXYZ(T,p.x,p.y,p.z)}else for(let x=0,_=e.count;x<_;x+=3)a.fromBufferAttribute(e,x+0),r.fromBufferAttribute(e,x+1),l.fromBufferAttribute(e,x+2),g.subVectors(l,r),y.subVectors(a,r),g.cross(y),n.setXYZ(x+0,g.x,g.y,g.z),n.setXYZ(x+1,g.x,g.y,g.z),n.setXYZ(x+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ia.fromBufferAttribute(t,e),Ia.normalize(),t.setXYZ(e,Ia.x,Ia.y,Ia.z)}toNonIndexed(){function t(u,d){const p=u.array,g=u.itemSize,y=u.normalized,x=new p.constructor(d.length*g);let _=0,E=0;for(let C=0,T=d.length;C<T;C++){u.isInterleavedBufferAttribute?_=d[C]*u.data.stride+u.offset:_=d[C]*g;for(let M=0;M<g;M++)x[E++]=p[_++]}return new ii(x,g,y)}if(this.index===null)return Re("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ln,n=this.index.array,a=this.attributes;for(const u in a){const d=a[u],p=t(d,n);e.setAttribute(u,p)}const r=this.morphAttributes;for(const u in r){const d=[],p=r[u];for(let g=0,y=p.length;g<y;g++){const x=p[g],_=t(x,n);d.push(_)}e.morphAttributes[u]=d}e.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,d=l.length;u<d;u++){const p=l[u];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(t[p]=d[p]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const d in n){const p=n[d];t.data.attributes[d]=p.toJSON(t.data)}const a={};let r=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],g=[];for(let y=0,x=p.length;y<x;y++){const _=p[y];g.push(_.toJSON(t.data))}g.length>0&&(a[d]=g,r=!0)}r&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(t.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(t.data.boundingSphere=u.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const a=t.attributes;for(const p in a){const g=a[p];this.setAttribute(p,g.clone(e))}const r=t.morphAttributes;for(const p in r){const g=[],y=r[p];for(let x=0,_=y.length;x<_;x++)g.push(y[x].clone(e));this.morphAttributes[p]=g}this.morphTargetsRelative=t.morphTargetsRelative;const l=t.groups;for(let p=0,g=l.length;p<g;p++){const y=l[p];this.addGroup(y.start,y.count,y.materialIndex)}const u=t.boundingBox;u!==null&&(this.boundingBox=u.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const L2=new rn,Bf=new ku,fy=new Qa,P2=new K,hy=new K,dy=new K,py=new K,NS=new K,my=new K,I2=new K,gy=new K;class Zn extends On{constructor(t=new ln,e=new Go){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=a.length;r<l;r++){const u=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}getVertexPosition(t,e){const n=this.geometry,a=n.attributes.position,r=n.morphAttributes.position,l=n.morphTargetsRelative;e.fromBufferAttribute(a,t);const u=this.morphTargetInfluences;if(r&&u){my.set(0,0,0);for(let d=0,p=r.length;d<p;d++){const g=u[d],y=r[d];g!==0&&(NS.fromBufferAttribute(y,t),l?my.addScaledVector(NS,g):my.addScaledVector(NS.sub(e),g))}e.add(my)}return e}raycast(t,e){const n=this.geometry,a=this.material,r=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),fy.copy(n.boundingSphere),fy.applyMatrix4(r),Bf.copy(t.ray).recast(t.near),!(fy.containsPoint(Bf.origin)===!1&&(Bf.intersectSphere(fy,P2)===null||Bf.origin.distanceToSquared(P2)>(t.far-t.near)**2))&&(L2.copy(r).invert(),Bf.copy(t.ray).applyMatrix4(L2),!(n.boundingBox!==null&&Bf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Bf)))}_computeIntersections(t,e,n){let a;const r=this.geometry,l=this.material,u=r.index,d=r.attributes.position,p=r.attributes.uv,g=r.attributes.uv1,y=r.attributes.normal,x=r.groups,_=r.drawRange;if(u!==null)if(Array.isArray(l))for(let E=0,C=x.length;E<C;E++){const T=x[E],M=l[T.materialIndex],R=Math.max(T.start,_.start),D=Math.min(u.count,Math.min(T.start+T.count,_.start+_.count));for(let L=R,P=D;L<P;L+=3){const B=u.getX(L),G=u.getX(L+1),V=u.getX(L+2);a=vy(this,M,t,n,p,g,y,B,G,V),a&&(a.faceIndex=Math.floor(L/3),a.face.materialIndex=T.materialIndex,e.push(a))}}else{const E=Math.max(0,_.start),C=Math.min(u.count,_.start+_.count);for(let T=E,M=C;T<M;T+=3){const R=u.getX(T),D=u.getX(T+1),L=u.getX(T+2);a=vy(this,l,t,n,p,g,y,R,D,L),a&&(a.faceIndex=Math.floor(T/3),e.push(a))}}else if(d!==void 0)if(Array.isArray(l))for(let E=0,C=x.length;E<C;E++){const T=x[E],M=l[T.materialIndex],R=Math.max(T.start,_.start),D=Math.min(d.count,Math.min(T.start+T.count,_.start+_.count));for(let L=R,P=D;L<P;L+=3){const B=L,G=L+1,V=L+2;a=vy(this,M,t,n,p,g,y,B,G,V),a&&(a.faceIndex=Math.floor(L/3),a.face.materialIndex=T.materialIndex,e.push(a))}}else{const E=Math.max(0,_.start),C=Math.min(d.count,_.start+_.count);for(let T=E,M=C;T<M;T+=3){const R=T,D=T+1,L=T+2;a=vy(this,l,t,n,p,g,y,R,D,L),a&&(a.faceIndex=Math.floor(T/3),e.push(a))}}}}function Kz(i,t,e,n,a,r,l,u){let d;if(t.side===ps?d=n.intersectTriangle(l,r,a,!0,u):d=n.intersectTriangle(a,r,l,t.side===Rc,u),d===null)return null;gy.copy(u),gy.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(gy);return p<e.near||p>e.far?null:{distance:p,point:gy.clone(),object:i}}function vy(i,t,e,n,a,r,l,u,d,p){i.getVertexPosition(u,hy),i.getVertexPosition(d,dy),i.getVertexPosition(p,py);const g=Kz(i,t,e,n,hy,dy,py,I2);if(g){const y=new K;nr.getBarycoord(I2,hy,dy,py,y),a&&(g.uv=nr.getInterpolatedAttribute(a,u,d,p,y,new It)),r&&(g.uv1=nr.getInterpolatedAttribute(r,u,d,p,y,new It)),l&&(g.normal=nr.getInterpolatedAttribute(l,u,d,p,y,new K),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const x={a:u,b:d,c:p,normal:new K,materialIndex:0};nr.getNormal(hy,dy,py,x.normal),g.face=x,g.barycoord=y}return g}class ar extends ln{constructor(t=1,e=1,n=1,a=1,r=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:a,heightSegments:r,depthSegments:l};const u=this;a=Math.floor(a),r=Math.floor(r),l=Math.floor(l);const d=[],p=[],g=[],y=[];let x=0,_=0;E("z","y","x",-1,-1,n,e,t,l,r,0),E("z","y","x",1,-1,n,e,-t,l,r,1),E("x","z","y",1,1,t,n,e,a,l,2),E("x","z","y",1,-1,t,n,-e,a,l,3),E("x","y","z",1,-1,t,e,n,a,r,4),E("x","y","z",-1,-1,t,e,-n,a,r,5),this.setIndex(d),this.setAttribute("position",new Be(p,3)),this.setAttribute("normal",new Be(g,3)),this.setAttribute("uv",new Be(y,2));function E(C,T,M,R,D,L,P,B,G,V,N){const I=L/G,W=P/V,lt=L/2,tt=P/2,rt=B/2,mt=G+1,$=V+1;let et=0,vt=0;const ut=new K;for(let j=0;j<$;j++){const st=j*W-tt;for(let wt=0;wt<mt;wt++){const Ct=wt*I-lt;ut[C]=Ct*R,ut[T]=st*D,ut[M]=rt,p.push(ut.x,ut.y,ut.z),ut[C]=0,ut[T]=0,ut[M]=B>0?1:-1,g.push(ut.x,ut.y,ut.z),y.push(wt/G),y.push(1-j/V),et+=1}}for(let j=0;j<V;j++)for(let st=0;st<G;st++){const wt=x+st+mt*j,Ct=x+st+mt*(j+1),Mt=x+(st+1)+mt*(j+1),Vt=x+(st+1)+mt*j;d.push(wt,Ct,Vt),d.push(Ct,Mt,Vt),vt+=6}u.addGroup(_,vt,N),_+=vt,x+=et}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ar(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function pp(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const a=i[e][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(Re("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=a.clone():Array.isArray(a)?t[e][n]=a.slice():t[e][n]=a}}return t}function Rs(i){const t={};for(let e=0;e<i.length;e++){const n=pp(i[e]);for(const a in n)t[a]=n[a]}return t}function Qz(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function _D(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Un.workingColorSpace}const H0={clone:pp,merge:Rs};var Jz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$z=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ri extends gs{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Jz,this.fragmentShader=$z,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=pp(t.uniforms),this.uniformsGroups=Qz(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this.defaultAttributeValues=Object.assign({},t.defaultAttributeValues),this.index0AttributeName=t.index0AttributeName,this.uniformsNeedUpdate=t.uniformsNeedUpdate,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const a in this.uniforms){const l=this.uniforms[a].value;l&&l.isTexture?e.uniforms[a]={type:"t",value:l.toJSON(t).uuid}:l&&l.isColor?e.uniforms[a]={type:"c",value:l.getHex()}:l&&l.isVector2?e.uniforms[a]={type:"v2",value:l.toArray()}:l&&l.isVector3?e.uniforms[a]={type:"v3",value:l.toArray()}:l&&l.isVector4?e.uniforms[a]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?e.uniforms[a]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?e.uniforms[a]={type:"m4",value:l.toArray()}:e.uniforms[a]={value:l}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class O_ extends On{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rn,this.projectionMatrix=new rn,this.projectionMatrixInverse=new rn,this.coordinateSystem=_r,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Mu=new K,B2=new It,z2=new It;let Fi=class extends O_{constructor(t=50,e=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=hp*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(ch*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return hp*2*Math.atan(Math.tan(ch*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Mu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Mu.x,Mu.y).multiplyScalar(-t/Mu.z),Mu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Mu.x,Mu.y).multiplyScalar(-t/Mu.z)}getViewSize(t,e){return this.getViewBounds(t,B2,z2),e.subVectors(z2,B2)}setViewOffset(t,e,n,a,r,l){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(ch*.5*this.fov)/this.zoom,n=2*e,a=this.aspect*n,r=-.5*a;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;r+=l.offsetX*a/d,e-=l.offsetY*n/p,a*=l.width/d,n*=l.height/p}const u=this.filmOffset;u!==0&&(r+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+a,e,e-n,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}};const Rd=-90,Dd=1;class SD extends On{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new Fi(Rd,Dd,t,e);a.layers=this.layers,this.add(a);const r=new Fi(Rd,Dd,t,e);r.layers=this.layers,this.add(r);const l=new Fi(Rd,Dd,t,e);l.layers=this.layers,this.add(l);const u=new Fi(Rd,Dd,t,e);u.layers=this.layers,this.add(u);const d=new Fi(Rd,Dd,t,e);d.layers=this.layers,this.add(d);const p=new Fi(Rd,Dd,t,e);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,a,r,l,u,d]=e;for(const p of e)this.remove(p);if(t===_r)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===up)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const p of e)this.add(p),p.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,l,u,d,p,g]=this.children,y=t.getRenderTarget(),x=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),E=t.xr.enabled;t.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,a),t.render(e,r),t.setRenderTarget(n,1,a),t.render(e,l),t.setRenderTarget(n,2,a),t.render(e,u),t.setRenderTarget(n,3,a),t.render(e,d),t.setRenderTarget(n,4,a),t.render(e,p),n.texture.generateMipmaps=C,t.setRenderTarget(n,5,a),t.render(e,g),t.setRenderTarget(y,x,_),t.xr.enabled=E,n.texture.needsPMREMUpdate=!0}}class lg extends ci{constructor(t=[],e=Vo,n,a,r,l,u,d,p,g){super(t,e,n,a,r,l,u,d,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class L_ extends ia{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},a=[n,n,n,n,n,n];this.texture=new lg(a),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new ar(5,5,5),r=new Ri({name:"CubemapFromEquirect",uniforms:pp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ps,blending:Yr});r.uniforms.tEquirect.value=e;const l=new Zn(a,r),u=e.minFilter;return e.minFilter===Ol&&(e.minFilter=Nn),new SD(1,10,this).update(t,l),e.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(t,e=!0,n=!0,a=!0){const r=t.getRenderTarget();for(let l=0;l<6;l++)t.setRenderTarget(this,l),t.clear(e,n,a);t.setRenderTarget(r)}}class Ba extends On{constructor(){super(),this.isGroup=!0,this.type="Group"}}const tF={type:"move"};class ax{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ba,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ba,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ba,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let a=null,r=null,l=null;const u=this._targetRay,d=this._grip,p=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(p&&t.hand){l=!0;for(const C of t.hand.values()){const T=e.getJointPose(C,n),M=this._getHandJoint(p,C);T!==null&&(M.matrix.fromArray(T.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=T.radius),M.visible=T!==null}const g=p.joints["index-finger-tip"],y=p.joints["thumb-tip"],x=g.position.distanceTo(y.position),_=.02,E=.005;p.inputState.pinching&&x>_+E?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&x<=_-E&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));u!==null&&(a=e.getPose(t.targetRaySpace,n),a===null&&r!==null&&(a=r),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(tF)))}return u!==null&&(u.visible=a!==null),d!==null&&(d.visible=r!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Ba;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class cg{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ae(t),this.density=e}clone(){return new cg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ug{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ae(t),this.near=e,this.far=n}clone(){return new ug(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Mh extends On{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Er,this.environmentIntensity=1,this.environmentRotation=new Er,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class P_{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=z0,this.updateRanges=[],this.version=0,this.uuid=Sr()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let a=0,r=this.stride;a<r;a++)this.array[t+a]=e.array[n+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Cs=new K;class dh{constructor(t,e,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Cs.fromBufferAttribute(this,e),Cs.applyMatrix4(t),this.setXYZ(e,Cs.x,Cs.y,Cs.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Cs.fromBufferAttribute(this,e),Cs.applyNormalMatrix(t),this.setXYZ(e,Cs.x,Cs.y,Cs.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Cs.fromBufferAttribute(this,e),Cs.transformDirection(t),this.setXYZ(e,Cs.x,Cs.y,Cs.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Us(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=yn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Us(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Us(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Us(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Us(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),a=yn(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this}setXYZW(t,e,n,a,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),a=yn(a,this.array),r=yn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this.data.array[t+3]=r,this}clone(t){if(t===void 0){V0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[a+r])}return new ii(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new dh(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){V0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[a+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class hE extends gs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Nd;const Zm=new K,Ud=new K,Od=new K,Ld=new It,Km=new It,bD=new rn,yy=new K,Qm=new K,xy=new K,F2=new It,US=new It,V2=new It;class MD extends On{constructor(t=new hE){if(super(),this.isSprite=!0,this.type="Sprite",Nd===void 0){Nd=new ln;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new P_(e,5);Nd.setIndex([0,1,2,0,2,3]),Nd.setAttribute("position",new dh(n,3,0,!1)),Nd.setAttribute("uv",new dh(n,2,3,!1))}this.geometry=Nd,this.material=t,this.center=new It(.5,.5),this.count=1}raycast(t,e){t.camera===null&&Ke('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ud.setFromMatrixScale(this.matrixWorld),bD.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Od.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ud.multiplyScalar(-Od.z);const n=this.material.rotation;let a,r;n!==0&&(r=Math.cos(n),a=Math.sin(n));const l=this.center;_y(yy.set(-.5,-.5,0),Od,l,Ud,a,r),_y(Qm.set(.5,-.5,0),Od,l,Ud,a,r),_y(xy.set(.5,.5,0),Od,l,Ud,a,r),F2.set(0,0),US.set(1,0),V2.set(1,1);let u=t.ray.intersectTriangle(yy,Qm,xy,!1,Zm);if(u===null&&(_y(Qm.set(-.5,.5,0),Od,l,Ud,a,r),US.set(0,1),u=t.ray.intersectTriangle(yy,xy,Qm,!1,Zm),u===null))return;const d=t.ray.origin.distanceTo(Zm);d<t.near||d>t.far||e.push({distance:d,point:Zm.clone(),uv:nr.getInterpolation(Zm,yy,Qm,xy,F2,US,V2,new It),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function _y(i,t,e,n,a,r){Ld.subVectors(i,e).addScalar(.5).multiply(n),a!==void 0?(Km.x=r*Ld.x-a*Ld.y,Km.y=a*Ld.x+r*Ld.y):Km.copy(Ld),i.copy(t),i.x+=Km.x,i.y+=Km.y,i.applyMatrix4(bD)}const Sy=new K,H2=new K;class ED extends On{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,a=e.length;n<a;n++){const r=e[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const a=this.levels;let r;for(r=0;r<a.length&&!(e<a[r].distance);r++);return a.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const a=e.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,a;for(n=1,a=e.length;n<a;n++){let r=e[n].distance;if(e[n].object.visible&&(r-=r*e[n].hysteresis),t<r)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){Sy.setFromMatrixPosition(this.matrixWorld);const a=t.ray.origin.distanceTo(Sy);this.getObjectForDistance(a).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Sy.setFromMatrixPosition(t.matrixWorld),H2.setFromMatrixPosition(this.matrixWorld);const n=Sy.distanceTo(H2)/t.zoom;e[0].object.visible=!0;let a,r;for(a=1,r=e.length;a<r;a++){let l=e[a].distance;if(e[a].object.visible&&(l-=l*e[a].hysteresis),n>=l)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<r;a++)e[a].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let a=0,r=n.length;a<r;a++){const l=n[a];e.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return e}}const G2=new K,j2=new di,k2=new di,eF=new K,X2=new rn,by=new K,OS=new Qa,Y2=new rn,LS=new ku;class TD extends Zn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=qb,this.bindMatrix=new rn,this.bindMatrixInverse=new rn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new ms),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,by),this.boundingBox.expandByPoint(by)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Qa),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,by),this.boundingSphere.expandByPoint(by)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),OS.copy(this.boundingSphere),OS.applyMatrix4(a),t.ray.intersectsSphere(OS)!==!1&&(Y2.copy(a).invert(),LS.copy(t.ray).applyMatrix4(Y2),!(this.boundingBox!==null&&LS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,LS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new di,e=this.geometry.attributes.skinWeight;for(let n=0,a=e.count;n<a;n++){t.fromBufferAttribute(e,n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===qb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===iD?this.bindMatrixInverse.copy(this.bindMatrix).invert():Re("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,a=this.geometry;j2.fromBufferAttribute(a.attributes.skinIndex,t),k2.fromBufferAttribute(a.attributes.skinWeight,t),G2.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const l=k2.getComponent(r);if(l!==0){const u=j2.getComponent(r);X2.multiplyMatrices(n.bones[u].matrixWorld,n.boneInverses[u]),e.addScaledVector(eF.copy(G2).applyMatrix4(X2),l)}}return e.applyMatrix4(this.bindMatrixInverse)}}class dE extends On{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Wr extends ci{constructor(t=null,e=1,n=1,a,r,l,u,d,p=la,g=la,y,x){super(null,l,u,d,p,g,a,r,y,x),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const q2=new rn,nF=new rn;class I_{constructor(t=[],e=[]){this.uuid=Sr(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){Re("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new rn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new rn;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let r=0,l=t.length;r<l;r++){const u=t[r]?t[r].matrixWorld:nF;q2.multiplyMatrices(u,e[r]),q2.toArray(n,r*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new I_(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Wr(e,t,t,ca,Mi);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,a=t.bones.length;n<a;n++){const r=t.bones[n];let l=e[r];l===void 0&&(Re("Skeleton: No bone found with UUID:",r),l=new dE),this.bones.push(l),this.boneInverses.push(new rn().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let a=0,r=e.length;a<r;a++){const l=e[a];t.bones.push(l.uuid);const u=n[a];t.boneInverses.push(u.toArray())}return t}}class mp extends ii{constructor(t,e,n,a=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Pd=new rn,W2=new rn,My=[],Z2=new ms,iF=new rn,Jm=new Zn,$m=new Qa;class B_ extends Zn{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new mp(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,iF)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new ms),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Pd),Z2.copy(t.boundingBox).applyMatrix4(Pd),this.boundingBox.union(Z2)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Qa),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Pd),$m.copy(t.boundingSphere).applyMatrix4(Pd),this.boundingSphere.union($m)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,a=this.morphTexture.source.data.data,r=n.length+1,l=t*r+1;for(let u=0;u<n.length;u++)n[u]=a[l+u]}raycast(t,e){const n=this.matrixWorld,a=this.count;if(Jm.geometry=this.geometry,Jm.material=this.material,Jm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$m.copy(this.boundingSphere),$m.applyMatrix4(n),t.ray.intersectsSphere($m)!==!1))for(let r=0;r<a;r++){this.getMatrixAt(r,Pd),W2.multiplyMatrices(n,Pd),Jm.matrixWorld=W2,Jm.raycast(t,My);for(let l=0,u=My.length;l<u;l++){const d=My[l];d.instanceId=r,d.object=this,e.push(d)}My.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new mp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new Wr(new Float32Array(a*this.count),a,this.count,rg,Mi));const r=this.morphTexture.source.data.data;let l=0;for(let p=0;p<n.length;p++)l+=n[p];const u=this.geometry.morphTargetsRelative?1:1-l,d=a*t;r[d]=u,r.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const PS=new K,aF=new K,sF=new vn;class Rl{constructor(t=new K(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,a){return this.normal.set(t,e,n),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const a=PS.subVectors(n,e).cross(aF.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(PS),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/a;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||sF.getNormalMatrix(t),a=this.coplanarPoint(PS).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const zf=new Qa,rF=new It(.5,.5),Ey=new K;class Cp{constructor(t=new Rl,e=new Rl,n=new Rl,a=new Rl,r=new Rl,l=new Rl){this.planes=[t,e,n,a,r,l]}set(t,e,n,a,r,l){const u=this.planes;return u[0].copy(t),u[1].copy(e),u[2].copy(n),u[3].copy(a),u[4].copy(r),u[5].copy(l),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=_r,n=!1){const a=this.planes,r=t.elements,l=r[0],u=r[1],d=r[2],p=r[3],g=r[4],y=r[5],x=r[6],_=r[7],E=r[8],C=r[9],T=r[10],M=r[11],R=r[12],D=r[13],L=r[14],P=r[15];if(a[0].setComponents(p-l,_-g,M-E,P-R).normalize(),a[1].setComponents(p+l,_+g,M+E,P+R).normalize(),a[2].setComponents(p+u,_+y,M+C,P+D).normalize(),a[3].setComponents(p-u,_-y,M-C,P-D).normalize(),n)a[4].setComponents(d,x,T,L).normalize(),a[5].setComponents(p-d,_-x,M-T,P-L).normalize();else if(a[4].setComponents(p-d,_-x,M-T,P-L).normalize(),e===_r)a[5].setComponents(p+d,_+x,M+T,P+L).normalize();else if(e===up)a[5].setComponents(d,x,T,L).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),zf.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),zf.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(zf)}intersectsSprite(t){zf.center.set(0,0,0);const e=rF.distanceTo(t.center);return zf.radius=.7071067811865476+e,zf.applyMatrix4(t.matrixWorld),this.intersectsSphere(zf)}intersectsSphere(t){const e=this.planes,n=t.center,a=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(n)<a)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const a=e[n];if(Ey.x=a.normal.x>0?t.max.x:t.min.x,Ey.y=a.normal.y>0?t.max.y:t.min.y,Ey.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(Ey)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Al=new rn,wl=new Cp;class z_{constructor(){this.coordinateSystem=_r}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Al.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),wl.setFromProjectionMatrix(Al,a.coordinateSystem,a.reversedDepth),wl.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Al.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),wl.setFromProjectionMatrix(Al,a.coordinateSystem,a.reversedDepth),wl.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Al.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),wl.setFromProjectionMatrix(Al,a.coordinateSystem,a.reversedDepth),wl.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Al.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),wl.setFromProjectionMatrix(Al,a.coordinateSystem,a.reversedDepth),wl.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Al.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),wl.setFromProjectionMatrix(Al,a.coordinateSystem,a.reversedDepth),wl.containsPoint(t))return!0}return!1}clone(){return new z_}}function IS(i,t){return i-t}function oF(i,t){return i.z-t.z}function lF(i,t){return t.z-i.z}class cF{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,a){const r=this.pool,l=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const u=r[this.index];l.push(u),this.index++,u.start=t,u.count=e,u.z=n,u.index=a}reset(){this.list.length=0,this.index=0}}const Js=new rn,uF=new Ae(1,1,1),K2=new Cp,fF=new z_,Ty=new ms,Ff=new Qa,t0=new K,Q2=new K,hF=new K,BS=new cF,fs=new Zn,Ay=[];function dF(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const a=i.count;for(let r=0;r<a;r++)for(let l=0;l<n;l++)t.setComponent(r+e,l,i.getComponent(r,l))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function Vf(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class AD extends Zn{constructor(t,e,n=e*2,a){super(new ln,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Wr(e,t,t,ca,Mi);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Wr(e,t,t,og,Mr);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Wr(e,t,t,ca,Mi);n.colorSpace=Un.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const l=t.getAttribute(r),{array:u,itemSize:d,normalized:p}=l,g=new u.constructor(n*d),y=new ii(g,d,p);e.setAttribute(r,y)}if(t.getIndex()!==null){const r=n>65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new ii(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=t.getAttribute(n),r=e.getAttribute(n);if(a.itemSize!==r.itemSize||a.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ms);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Js),this.getBoundingBoxAt(r,Ty).applyMatrix4(Js),t.union(Ty)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Qa);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const r=e[n].geometryIndex;this.getMatrixAt(n,Js),this.getBoundingSphereAt(r,Ff).applyMatrix4(Js),t.union(Ff)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(IS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Js.identity().toArray(r.image.data,a*16),r.needsUpdate=!0;const l=this._colorsTexture;return l&&(uF.toArray(l.image.data,a*4),l.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const l=t.getIndex();if(l!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?l.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(IS),d=this._availableGeometryIds.shift(),r[d]=a):(d=this._geometryCount,this._geometryCount++,r.push(a)),this.setGeometryAt(d,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,a=n.getIndex()!==null,r=n.getIndex(),l=e.getIndex(),u=this._geometryInfo[t];if(a&&l.count>u.reservedIndexCount||e.attributes.position.count>u.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=u.vertexStart,p=u.reservedVertexCount;u.vertexCount=e.getAttribute("position").count;for(const g in n.attributes){const y=e.getAttribute(g),x=n.getAttribute(g);dF(y,x,d);const _=y.itemSize;for(let E=y.count,C=p;E<C;E++){const T=d+E;for(let M=0;M<_;M++)x.setComponent(T,M,0)}x.needsUpdate=!0,x.addUpdateRange(d*_,p*_)}if(a){const g=u.indexStart,y=u.reservedIndexCount;u.indexCount=e.getIndex().count;for(let x=0;x<l.count;x++)r.setX(g+x,d+l.getX(x));for(let x=l.count,_=y;x<_;x++)r.setX(g+x,d);r.needsUpdate=!0,r.addUpdateRange(g,u.reservedIndexCount)}return u.start=a?u.indexStart:u.vertexStart,u.count=a?u.indexCount:u.vertexCount,u.boundingBox=null,e.boundingBox!==null&&(u.boundingBox=e.boundingBox.clone()),u.boundingSphere=null,e.boundingSphere!==null&&(u.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let a=0,r=n.length;a<r;a++)n[a].active&&n[a].geometryIndex===t&&this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,a=n.map((l,u)=>u).sort((l,u)=>n[l].vertexStart-n[u].vertexStart),r=this.geometry;for(let l=0,u=n.length;l<u;l++){const d=a[l],p=n[d];if(p.active!==!1){if(r.index!==null){if(p.indexStart!==e){const{indexStart:g,vertexStart:y,reservedIndexCount:x}=p,_=r.index,E=_.array,C=t-y;for(let T=g;T<g+x;T++)E[T]=E[T]+C;_.array.copyWithin(e,g,g+x),_.addUpdateRange(e,x),_.needsUpdate=!0,p.indexStart=e}e+=p.reservedIndexCount}if(p.vertexStart!==t){const{vertexStart:g,reservedVertexCount:y}=p,x=r.attributes;for(const _ in x){const E=x[_],{array:C,itemSize:T}=E;C.copyWithin(t*T,g*T,(g+y)*T),E.addUpdateRange(t*T,y*T),E.needsUpdate=!0}p.vertexStart=t}t+=p.reservedVertexCount,p.start=r.index?p.indexStart:p.vertexStart,this._nextIndexStart=r.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){const r=new ms,l=n.index,u=n.attributes.position;for(let d=a.start,p=a.start+a.count;d<p;d++){let g=d;l&&(g=l.getX(g)),r.expandByPoint(t0.fromBufferAttribute(u,g))}a.boundingBox=r}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){const r=new Qa;this.getBoundingBoxAt(t,Ty),Ty.getCenter(r.center);const l=n.index,u=n.attributes.position;let d=0;for(let p=a.start,g=a.start+a.count;p<g;p++){let y=p;l&&(y=l.getX(y)),t0.fromBufferAttribute(u,y),d=Math.max(d,r.center.distanceToSquared(t0))}r.radius=Math.sqrt(d),a.boundingSphere=r}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(IS);e[e.length-1]===n.length-1;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const a=new Int32Array(t),r=new Int32Array(t);Vf(this._multiDrawCounts,a),Vf(this._multiDrawStarts,r),this._multiDrawCounts=a,this._multiDrawStarts=r,this._maxInstanceCount=t;const l=this._indirectTexture,u=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),Vf(l.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),Vf(u.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Vf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(u=>u.active);if(Math.max(...n.map(u=>u.vertexStart+u.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new ln,this._initializeGeometry(r));const l=this.geometry;r.index&&Vf(r.index.array,l.index.array);for(const u in r.attributes)Vf(r.attributes[u].array,l.attributes[u].array)}raycast(t,e){const n=this._instanceInfo,a=this._geometryInfo,r=this.matrixWorld,l=this.geometry;fs.material=this.material,fs.geometry.index=l.index,fs.geometry.attributes=l.attributes,fs.geometry.boundingBox===null&&(fs.geometry.boundingBox=new ms),fs.geometry.boundingSphere===null&&(fs.geometry.boundingSphere=new Qa);for(let u=0,d=n.length;u<d;u++){if(!n[u].visible||!n[u].active)continue;const p=n[u].geometryIndex,g=a[p];fs.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(u,fs.matrixWorld).premultiply(r),this.getBoundingBoxAt(p,fs.geometry.boundingBox),this.getBoundingSphereAt(p,fs.geometry.boundingSphere),fs.raycast(t,Ay);for(let y=0,x=Ay.length;y<x;y++){const _=Ay[y];_.object=this,_.batchId=u,e.push(_)}Ay.length=0}fs.material=null,fs.geometry.index=null,fs.geometry.attributes={},fs.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,a,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=a.getIndex(),u=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,y=this._geometryInfo,x=this.perObjectFrustumCulled,_=this._indirectTexture,E=_.image.data,C=n.isArrayCamera?fF:K2;x&&!n.isArrayCamera&&(Js.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),K2.setFromProjectionMatrix(Js,n.coordinateSystem,n.reversedDepth));let T=0;if(this.sortObjects){Js.copy(this.matrixWorld).invert(),t0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Js),Q2.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Js);for(let D=0,L=d.length;D<L;D++)if(d[D].visible&&d[D].active){const P=d[D].geometryIndex;this.getMatrixAt(D,Js),this.getBoundingSphereAt(P,Ff).applyMatrix4(Js);let B=!1;if(x&&(B=!C.intersectsSphere(Ff,n)),!B){const G=y[P],V=hF.subVectors(Ff.center,t0).dot(Q2);BS.push(G.start,G.count,V,D)}}const M=BS.list,R=this.customSort;R===null?M.sort(r.transparent?lF:oF):R.call(this,M,n);for(let D=0,L=M.length;D<L;D++){const P=M[D];p[T]=P.start*u,g[T]=P.count,E[T]=P.index,T++}BS.reset()}else for(let M=0,R=d.length;M<R;M++)if(d[M].visible&&d[M].active){const D=d[M].geometryIndex;let L=!1;if(x&&(this.getMatrixAt(M,Js),this.getBoundingSphereAt(D,Ff).applyMatrix4(Js),L=!C.intersectsSphere(Ff,n)),!L){const P=y[D];p[T]=P.start*u,g[T]=P.count,E[T]=M,T++}}_.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(t,e,n,a,r,l){this.onBeforeRender(t,null,a,r,l)}}class Ps extends gs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ae(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const a_=new K,s_=new K,J2=new rn,e0=new ku,wy=new Qa,zS=new K,$2=new K;class Hu extends On{constructor(t=new ln,e=new Ps){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let a=1,r=e.count;a<r;a++)a_.fromBufferAttribute(e,a-1),s_.fromBufferAttribute(e,a),n[a]=n[a-1],n[a]+=a_.distanceTo(s_);t.setAttribute("lineDistance",new Be(n,1))}else Re("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,r=t.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),wy.copy(n.boundingSphere),wy.applyMatrix4(a),wy.radius+=r,t.ray.intersectsSphere(wy)===!1)return;J2.copy(a).invert(),e0.copy(t.ray).applyMatrix4(J2);const u=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=this.isLineSegments?2:1,g=n.index,x=n.attributes.position;if(g!==null){const _=Math.max(0,l.start),E=Math.min(g.count,l.start+l.count);for(let C=_,T=E-1;C<T;C+=p){const M=g.getX(C),R=g.getX(C+1),D=Cy(this,t,e0,d,M,R,C);D&&e.push(D)}if(this.isLineLoop){const C=g.getX(E-1),T=g.getX(_),M=Cy(this,t,e0,d,C,T,E-1);M&&e.push(M)}}else{const _=Math.max(0,l.start),E=Math.min(x.count,l.start+l.count);for(let C=_,T=E-1;C<T;C+=p){const M=Cy(this,t,e0,d,C,C+1,C);M&&e.push(M)}if(this.isLineLoop){const C=Cy(this,t,e0,d,E-1,_,E-1);C&&e.push(C)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=a.length;r<l;r++){const u=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}}function Cy(i,t,e,n,a,r,l){const u=i.geometry.attributes.position;if(a_.fromBufferAttribute(u,a),s_.fromBufferAttribute(u,r),e.distanceSqToSegment(a_,s_,zS,$2)>n)return;zS.applyMatrix4(i.matrixWorld);const p=t.ray.origin.distanceTo(zS);if(!(p<t.near||p>t.far))return{distance:p,point:$2.clone().applyMatrix4(i.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:i}}const tw=new K,ew=new K;class Gl extends Hu{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let a=0,r=e.count;a<r;a+=2)tw.fromBufferAttribute(e,a),ew.fromBufferAttribute(e,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+tw.distanceTo(ew);t.setAttribute("lineDistance",new Be(n,1))}else Re("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wD extends Hu{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class F_ extends gs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const nw=new rn,Qb=new ku,Ry=new Qa,Dy=new K;class pE extends On{constructor(t=new ln,e=new F_){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,r=t.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ry.copy(n.boundingSphere),Ry.applyMatrix4(a),Ry.radius+=r,t.ray.intersectsSphere(Ry)===!1)return;nw.copy(a).invert(),Qb.copy(t.ray).applyMatrix4(nw);const u=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=u*u,p=n.index,y=n.attributes.position;if(p!==null){const x=Math.max(0,l.start),_=Math.min(p.count,l.start+l.count);for(let E=x,C=_;E<C;E++){const T=p.getX(E);Dy.fromBufferAttribute(y,T),iw(Dy,T,d,a,t,e,this)}}else{const x=Math.max(0,l.start),_=Math.min(y.count,l.start+l.count);for(let E=x,C=_;E<C;E++)Dy.fromBufferAttribute(y,E),iw(Dy,E,d,a,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=a.length;r<l;r++){const u=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=r}}}}}function iw(i,t,e,n,a,r,l){const u=Qb.distanceSqToPoint(i);if(u<e){const d=new K;Qb.closestPointToPoint(i,d),d.applyMatrix4(n);const p=a.ray.origin.distanceTo(d);if(p<a.near||p>a.far)return;r.push({distance:p,distanceToRay:Math.sqrt(u),point:d,index:t,face:null,faceIndex:null,barycoord:null,object:l})}}class CD extends ci{constructor(t,e,n,a,r=Nn,l=Nn,u,d,p){super(t,e,n,a,r,l,u,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function y(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=t.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in t&&(this._requestVideoFrameCallbackId=t.requestVideoFrameCallback(y))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class pF extends CD{constructor(t,e,n,a,r,l,u,d){super({},t,e,n,a,r,l,u,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class mF extends ci{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=la,this.minFilter=la,this.generateMipmaps=!1,this.needsUpdate=!0}}class V_ extends ci{constructor(t,e,n,a,r,l,u,d,p,g,y,x){super(null,l,u,d,p,g,a,r,y,x),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class gF extends V_{constructor(t,e,n,a,r,l){super(t,e,n,r,l),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=na,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class vF extends V_{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,Vo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class yF extends ci{constructor(t,e,n,a,r,l,u,d,p){super(t,e,n,a,r,l,u,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ph extends ci{constructor(t,e,n=Mr,a,r,l,u=la,d=la,p,g=zl,y=1){if(g!==zl&&g!==Du)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:t,height:e,depth:y};super(x,a,r,l,u,d,g,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Nu(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class RD extends ph{constructor(t,e=Mr,n=Vo,a,r,l=la,u=la,d,p=zl){const g={width:t,height:t,depth:1},y=[g,g,g,g,g,g];super(t,t,e,n,a,r,l,u,d,p),this.image=y,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(t){this.image=t}}class mE extends ci{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}copy(t){return super.copy(t),this.sourceTexture=t.sourceTexture,this}}class H_ extends ln{constructor(t=1,e=1,n=4,a=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:a,heightSegments:r},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),r=Math.max(1,Math.floor(r));const l=[],u=[],d=[],p=[],g=e/2,y=Math.PI/2*t,x=e,_=2*y+x,E=n*2+r,C=a+1,T=new K,M=new K;for(let R=0;R<=E;R++){let D=0,L=0,P=0,B=0;if(R<=n){const N=R/n,I=N*Math.PI/2;L=-g-t*Math.cos(I),P=t*Math.sin(I),B=-t*Math.cos(I),D=N*y}else if(R<=n+r){const N=(R-n)/r;L=-g+N*e,P=t,B=0,D=y+N*x}else{const N=(R-n-r)/n,I=N*Math.PI/2;L=g+t*Math.sin(I),P=t*Math.cos(I),B=t*Math.sin(I),D=y+x+N*y}const G=Math.max(0,Math.min(1,D/_));let V=0;R===0?V=.5/a:R===E&&(V=-.5/a);for(let N=0;N<=a;N++){const I=N/a,W=I*Math.PI*2,lt=Math.sin(W),tt=Math.cos(W);M.x=-P*tt,M.y=L,M.z=P*lt,u.push(M.x,M.y,M.z),T.set(-P*tt,B,P*lt),T.normalize(),d.push(T.x,T.y,T.z),p.push(I+V,G)}if(R>0){const N=(R-1)*C;for(let I=0;I<a;I++){const W=N+I,lt=N+I+1,tt=R*C+I,rt=R*C+I+1;l.push(W,lt,tt),l.push(lt,rt,tt)}}}this.setIndex(l),this.setAttribute("position",new Be(u,3)),this.setAttribute("normal",new Be(d,3)),this.setAttribute("uv",new Be(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new H_(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class G_ extends ln{constructor(t=1,e=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},e=Math.max(3,e);const r=[],l=[],u=[],d=[],p=new K,g=new It;l.push(0,0,0),u.push(0,0,1),d.push(.5,.5);for(let y=0,x=3;y<=e;y++,x+=3){const _=n+y/e*a;p.x=t*Math.cos(_),p.y=t*Math.sin(_),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(l[x]/t+1)/2,g.y=(l[x+1]/t+1)/2,d.push(g.x,g.y)}for(let y=1;y<=e;y++)r.push(y,y+1,0);this.setIndex(r),this.setAttribute("position",new Be(l,3)),this.setAttribute("normal",new Be(u,3)),this.setAttribute("uv",new Be(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new G_(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class fg extends ln{constructor(t=1,e=1,n=1,a=32,r=1,l=!1,u=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:r,openEnded:l,thetaStart:u,thetaLength:d};const p=this;a=Math.floor(a),r=Math.floor(r);const g=[],y=[],x=[],_=[];let E=0;const C=[],T=n/2;let M=0;R(),l===!1&&(t>0&&D(!0),e>0&&D(!1)),this.setIndex(g),this.setAttribute("position",new Be(y,3)),this.setAttribute("normal",new Be(x,3)),this.setAttribute("uv",new Be(_,2));function R(){const L=new K,P=new K;let B=0;const G=(e-t)/n;for(let V=0;V<=r;V++){const N=[],I=V/r,W=I*(e-t)+t;for(let lt=0;lt<=a;lt++){const tt=lt/a,rt=tt*d+u,mt=Math.sin(rt),$=Math.cos(rt);P.x=W*mt,P.y=-I*n+T,P.z=W*$,y.push(P.x,P.y,P.z),L.set(mt,G,$).normalize(),x.push(L.x,L.y,L.z),_.push(tt,1-I),N.push(E++)}C.push(N)}for(let V=0;V<a;V++)for(let N=0;N<r;N++){const I=C[N][V],W=C[N+1][V],lt=C[N+1][V+1],tt=C[N][V+1];(t>0||N!==0)&&(g.push(I,W,tt),B+=3),(e>0||N!==r-1)&&(g.push(W,lt,tt),B+=3)}p.addGroup(M,B,0),M+=B}function D(L){const P=E,B=new It,G=new K;let V=0;const N=L===!0?t:e,I=L===!0?1:-1;for(let lt=1;lt<=a;lt++)y.push(0,T*I,0),x.push(0,I,0),_.push(.5,.5),E++;const W=E;for(let lt=0;lt<=a;lt++){const rt=lt/a*d+u,mt=Math.cos(rt),$=Math.sin(rt);G.x=N*$,G.y=T*I,G.z=N*mt,y.push(G.x,G.y,G.z),x.push(0,I,0),B.x=mt*.5+.5,B.y=$*.5*I+.5,_.push(B.x,B.y),E++}for(let lt=0;lt<a;lt++){const tt=P+lt,rt=W+lt;L===!0?g.push(rt,rt+1,tt):g.push(rt+1,rt,tt),V+=3}p.addGroup(M,V,L===!0?1:2),M+=V}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new fg(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class hg extends fg{constructor(t=1,e=1,n=32,a=1,r=!1,l=0,u=Math.PI*2){super(0,t,e,n,a,r,l,u),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:a,openEnded:r,thetaStart:l,thetaLength:u}}static fromJSON(t){return new hg(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Xu extends ln{constructor(t=[],e=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a};const r=[],l=[];u(a),p(n),g(),this.setAttribute("position",new Be(r,3)),this.setAttribute("normal",new Be(r.slice(),3)),this.setAttribute("uv",new Be(l,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function u(R){const D=new K,L=new K,P=new K;for(let B=0;B<e.length;B+=3)_(e[B+0],D),_(e[B+1],L),_(e[B+2],P),d(D,L,P,R)}function d(R,D,L,P){const B=P+1,G=[];for(let V=0;V<=B;V++){G[V]=[];const N=R.clone().lerp(L,V/B),I=D.clone().lerp(L,V/B),W=B-V;for(let lt=0;lt<=W;lt++)lt===0&&V===B?G[V][lt]=N:G[V][lt]=N.clone().lerp(I,lt/W)}for(let V=0;V<B;V++)for(let N=0;N<2*(B-V)-1;N++){const I=Math.floor(N/2);N%2===0?(x(G[V][I+1]),x(G[V+1][I]),x(G[V][I])):(x(G[V][I+1]),x(G[V+1][I+1]),x(G[V+1][I]))}}function p(R){const D=new K;for(let L=0;L<r.length;L+=3)D.x=r[L+0],D.y=r[L+1],D.z=r[L+2],D.normalize().multiplyScalar(R),r[L+0]=D.x,r[L+1]=D.y,r[L+2]=D.z}function g(){const R=new K;for(let D=0;D<r.length;D+=3){R.x=r[D+0],R.y=r[D+1],R.z=r[D+2];const L=T(R)/2/Math.PI+.5,P=M(R)/Math.PI+.5;l.push(L,1-P)}E(),y()}function y(){for(let R=0;R<l.length;R+=6){const D=l[R+0],L=l[R+2],P=l[R+4],B=Math.max(D,L,P),G=Math.min(D,L,P);B>.9&&G<.1&&(D<.2&&(l[R+0]+=1),L<.2&&(l[R+2]+=1),P<.2&&(l[R+4]+=1))}}function x(R){r.push(R.x,R.y,R.z)}function _(R,D){const L=R*3;D.x=t[L+0],D.y=t[L+1],D.z=t[L+2]}function E(){const R=new K,D=new K,L=new K,P=new K,B=new It,G=new It,V=new It;for(let N=0,I=0;N<r.length;N+=9,I+=6){R.set(r[N+0],r[N+1],r[N+2]),D.set(r[N+3],r[N+4],r[N+5]),L.set(r[N+6],r[N+7],r[N+8]),B.set(l[I+0],l[I+1]),G.set(l[I+2],l[I+3]),V.set(l[I+4],l[I+5]),P.copy(R).add(D).add(L).divideScalar(3);const W=T(P);C(B,I+0,R,W),C(G,I+2,D,W),C(V,I+4,L,W)}}function C(R,D,L,P){P<0&&R.x===1&&(l[D]=R.x-1),L.x===0&&L.z===0&&(l[D]=P/2/Math.PI+.5)}function T(R){return Math.atan2(R.z,-R.x)}function M(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Xu(t.vertices,t.indices,t.radius,t.detail)}}class j_ extends Xu{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,l,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new j_(t.radius,t.detail)}}const Ny=new K,Uy=new K,FS=new K,Oy=new nr;class DD extends ln{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const a=Math.pow(10,4),r=Math.cos(ch*e),l=t.getIndex(),u=t.getAttribute("position"),d=l?l.count:u.count,p=[0,0,0],g=["a","b","c"],y=new Array(3),x={},_=[];for(let E=0;E<d;E+=3){l?(p[0]=l.getX(E),p[1]=l.getX(E+1),p[2]=l.getX(E+2)):(p[0]=E,p[1]=E+1,p[2]=E+2);const{a:C,b:T,c:M}=Oy;if(C.fromBufferAttribute(u,p[0]),T.fromBufferAttribute(u,p[1]),M.fromBufferAttribute(u,p[2]),Oy.getNormal(FS),y[0]=`${Math.round(C.x*a)},${Math.round(C.y*a)},${Math.round(C.z*a)}`,y[1]=`${Math.round(T.x*a)},${Math.round(T.y*a)},${Math.round(T.z*a)}`,y[2]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let R=0;R<3;R++){const D=(R+1)%3,L=y[R],P=y[D],B=Oy[g[R]],G=Oy[g[D]],V=`${L}_${P}`,N=`${P}_${L}`;N in x&&x[N]?(FS.dot(x[N].normal)<=r&&(_.push(B.x,B.y,B.z),_.push(G.x,G.y,G.z)),x[N]=null):V in x||(x[V]={index0:p[R],index1:p[D],normal:FS.clone()})}}for(const E in x)if(x[E]){const{index0:C,index1:T}=x[E];Ny.fromBufferAttribute(u,C),Uy.fromBufferAttribute(u,T),_.push(Ny.x,Ny.y,Ny.z),_.push(Uy.x,Uy.y,Uy.z)}this.setAttribute("position",new Be(_,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class jo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Re("Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,a=this.getPoint(0),r=0;e.push(0);for(let l=1;l<=t;l++)n=this.getPoint(l/t),r+=n.distanceTo(a),e.push(r),a=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let a=0;const r=n.length;let l;e?l=e:l=t*n[r-1];let u=0,d=r-1,p;for(;u<=d;)if(a=Math.floor(u+(d-u)/2),p=n[a]-l,p<0)u=a+1;else if(p>0)d=a-1;else{d=a;break}if(a=d,n[a]===l)return a/(r-1);const g=n[a],x=n[a+1]-g,_=(l-g)/x;return(a+_)/(r-1)}getTangent(t,e){let a=t-1e-4,r=t+1e-4;a<0&&(a=0),r>1&&(r=1);const l=this.getPoint(a),u=this.getPoint(r),d=e||(l.isVector2?new It:new K);return d.copy(u).sub(l).normalize(),d}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new K,a=[],r=[],l=[],u=new K,d=new rn;for(let _=0;_<=t;_++){const E=_/t;a[_]=this.getTangentAt(E,new K)}r[0]=new K,l[0]=new K;let p=Number.MAX_VALUE;const g=Math.abs(a[0].x),y=Math.abs(a[0].y),x=Math.abs(a[0].z);g<=p&&(p=g,n.set(1,0,0)),y<=p&&(p=y,n.set(0,1,0)),x<=p&&n.set(0,0,1),u.crossVectors(a[0],n).normalize(),r[0].crossVectors(a[0],u),l[0].crossVectors(a[0],r[0]);for(let _=1;_<=t;_++){if(r[_]=r[_-1].clone(),l[_]=l[_-1].clone(),u.crossVectors(a[_-1],a[_]),u.length()>Number.EPSILON){u.normalize();const E=Math.acos(sn(a[_-1].dot(a[_]),-1,1));r[_].applyMatrix4(d.makeRotationAxis(u,E))}l[_].crossVectors(a[_],r[_])}if(e===!0){let _=Math.acos(sn(r[0].dot(r[t]),-1,1));_/=t,a[0].dot(u.crossVectors(r[0],r[t]))>0&&(_=-_);for(let E=1;E<=t;E++)r[E].applyMatrix4(d.makeRotationAxis(a[E],_*E)),l[E].crossVectors(a[E],r[E])}return{tangents:a,normals:r,binormals:l}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class k_ extends jo{constructor(t=0,e=0,n=1,a=1,r=0,l=Math.PI*2,u=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=a,this.aStartAngle=r,this.aEndAngle=l,this.aClockwise=u,this.aRotation=d}getPoint(t,e=new It){const n=e,a=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const l=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=a;for(;r>a;)r-=a;r<Number.EPSILON&&(l?r=0:r=a),this.aClockwise===!0&&!l&&(r===a?r=-a:r=r-a);const u=this.aStartAngle+t*r;let d=this.aX+this.xRadius*Math.cos(u),p=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),x=d-this.aX,_=p-this.aY;d=x*g-_*y+this.aX,p=x*y+_*g+this.aY}return n.set(d,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class ND extends k_{constructor(t,e,n,a,r,l){super(t,e,n,n,a,r,l),this.isArcCurve=!0,this.type="ArcCurve"}}function gE(){let i=0,t=0,e=0,n=0;function a(r,l,u,d){i=r,t=u,e=-3*r+3*l-2*u-d,n=2*r-2*l+u+d}return{initCatmullRom:function(r,l,u,d,p){a(l,u,p*(u-r),p*(d-l))},initNonuniformCatmullRom:function(r,l,u,d,p,g,y){let x=(l-r)/p-(u-r)/(p+g)+(u-l)/g,_=(u-l)/g-(d-l)/(g+y)+(d-u)/y;x*=g,_*=g,a(l,u,x,_)},calc:function(r){const l=r*r,u=l*r;return i+t*r+e*l+n*u}}}const Ly=new K,VS=new gE,HS=new gE,GS=new gE;class UD extends jo{constructor(t=[],e=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=a}getPoint(t,e=new K){const n=e,a=this.points,r=a.length,l=(r-(this.closed?0:1))*t;let u=Math.floor(l),d=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/r)+1)*r:d===0&&u===r-1&&(u=r-2,d=1);let p,g;this.closed||u>0?p=a[(u-1)%r]:(Ly.subVectors(a[0],a[1]).add(a[0]),p=Ly);const y=a[u%r],x=a[(u+1)%r];if(this.closed||u+2<r?g=a[(u+2)%r]:(Ly.subVectors(a[r-1],a[r-2]).add(a[r-1]),g=Ly),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let E=Math.pow(p.distanceToSquared(y),_),C=Math.pow(y.distanceToSquared(x),_),T=Math.pow(x.distanceToSquared(g),_);C<1e-4&&(C=1),E<1e-4&&(E=C),T<1e-4&&(T=C),VS.initNonuniformCatmullRom(p.x,y.x,x.x,g.x,E,C,T),HS.initNonuniformCatmullRom(p.y,y.y,x.y,g.y,E,C,T),GS.initNonuniformCatmullRom(p.z,y.z,x.z,g.z,E,C,T)}else this.curveType==="catmullrom"&&(VS.initCatmullRom(p.x,y.x,x.x,g.x,this.tension),HS.initCatmullRom(p.y,y.y,x.y,g.y,this.tension),GS.initCatmullRom(p.z,y.z,x.z,g.z,this.tension));return n.set(VS.calc(d),HS.calc(d),GS.calc(d)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new K().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function aw(i,t,e,n,a){const r=(n-t)*.5,l=(a-e)*.5,u=i*i,d=i*u;return(2*e-2*n+r+l)*d+(-3*e+3*n-2*r-l)*u+r*i+e}function xF(i,t){const e=1-i;return e*e*t}function _F(i,t){return 2*(1-i)*i*t}function SF(i,t){return i*i*t}function _0(i,t,e,n){return xF(i,t)+_F(i,e)+SF(i,n)}function bF(i,t){const e=1-i;return e*e*e*t}function MF(i,t){const e=1-i;return 3*e*e*i*t}function EF(i,t){return 3*(1-i)*i*i*t}function TF(i,t){return i*i*i*t}function S0(i,t,e,n,a){return bF(i,t)+MF(i,e)+EF(i,n)+TF(i,a)}class vE extends jo{constructor(t=new It,e=new It,n=new It,a=new It){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new It){const n=e,a=this.v0,r=this.v1,l=this.v2,u=this.v3;return n.set(S0(t,a.x,r.x,l.x,u.x),S0(t,a.y,r.y,l.y,u.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class OD extends jo{constructor(t=new K,e=new K,n=new K,a=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new K){const n=e,a=this.v0,r=this.v1,l=this.v2,u=this.v3;return n.set(S0(t,a.x,r.x,l.x,u.x),S0(t,a.y,r.y,l.y,u.y),S0(t,a.z,r.z,l.z,u.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class yE extends jo{constructor(t=new It,e=new It){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new It){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new It){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class LD extends jo{constructor(t=new K,e=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new K){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new K){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class xE extends jo{constructor(t=new It,e=new It,n=new It){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new It){const n=e,a=this.v0,r=this.v1,l=this.v2;return n.set(_0(t,a.x,r.x,l.x),_0(t,a.y,r.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class _E extends jo{constructor(t=new K,e=new K,n=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new K){const n=e,a=this.v0,r=this.v1,l=this.v2;return n.set(_0(t,a.x,r.x,l.x),_0(t,a.y,r.y,l.y),_0(t,a.z,r.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class SE extends jo{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new It){const n=e,a=this.points,r=(a.length-1)*t,l=Math.floor(r),u=r-l,d=a[l===0?l:l-1],p=a[l],g=a[l>a.length-2?a.length-1:l+1],y=a[l>a.length-3?a.length-1:l+2];return n.set(aw(u,d.x,p.x,g.x,y.x),aw(u,d.y,p.y,g.y,y.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new It().fromArray(a))}return this}}var r_=Object.freeze({__proto__:null,ArcCurve:ND,CatmullRomCurve3:UD,CubicBezierCurve:vE,CubicBezierCurve3:OD,EllipseCurve:k_,LineCurve:yE,LineCurve3:LD,QuadraticBezierCurve:xE,QuadraticBezierCurve3:_E,SplineCurve:SE});class PD extends jo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new r_[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),a=this.getCurveLengths();let r=0;for(;r<a.length;){if(a[r]>=n){const l=a[r]-n,u=this.curves[r],d=u.getLength(),p=d===0?0:1-l/d;return u.getPointAt(p,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,a=this.curves.length;n<a;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let a=0,r=this.curves;a<r.length;a++){const l=r[a],u=l.isEllipseCurve?t*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?t*l.points.length:t,d=l.getPoints(u);for(let p=0;p<d.length;p++){const g=d[p];n&&n.equals(g)||(e.push(g),n=g)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(new r_[a.type]().fromJSON(a))}return this}}class o_ extends PD{constructor(t){super(),this.type="Path",this.currentPoint=new It,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new yE(this.currentPoint.clone(),new It(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,a){const r=new xE(this.currentPoint.clone(),new It(t,e),new It(n,a));return this.curves.push(r),this.currentPoint.set(n,a),this}bezierCurveTo(t,e,n,a,r,l){const u=new vE(this.currentPoint.clone(),new It(t,e),new It(n,a),new It(r,l));return this.curves.push(u),this.currentPoint.set(r,l),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new SE(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,a,r,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(t+u,e+d,n,a,r,l),this}absarc(t,e,n,a,r,l){return this.absellipse(t,e,n,n,a,r,l),this}ellipse(t,e,n,a,r,l,u,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(t+p,e+g,n,a,r,l,u,d),this}absellipse(t,e,n,a,r,l,u,d){const p=new k_(t,e,n,a,r,l,u,d);if(this.curves.length>0){const y=p.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class uh extends o_{constructor(t){super(t),this.uuid=Sr(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,a=this.holes.length;n<a;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(new o_().fromJSON(a))}return this}}function AF(i,t,e=2){const n=t&&t.length,a=n?t[0]*e:i.length;let r=ID(i,0,a,e,!0);const l=[];if(!r||r.next===r.prev)return l;let u,d,p;if(n&&(r=NF(i,t,r,e)),i.length>80*e){u=i[0],d=i[1];let g=u,y=d;for(let x=e;x<a;x+=e){const _=i[x],E=i[x+1];_<u&&(u=_),E<d&&(d=E),_>g&&(g=_),E>y&&(y=E)}p=Math.max(g-u,y-d),p=p!==0?32767/p:0}return G0(r,l,e,u,d,p,0),l}function ID(i,t,e,n,a){let r;if(a===GF(i,t,e,n)>0)for(let l=t;l<e;l+=n)r=sw(l/n|0,i[l],i[l+1],r);else for(let l=e-n;l>=t;l-=n)r=sw(l/n|0,i[l],i[l+1],r);return r&&gp(r,r.next)&&(k0(r),r=r.next),r}function mh(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(gp(e,e.next)||Hi(e.prev,e,e.next)===0)){if(k0(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function G0(i,t,e,n,a,r,l){if(!i)return;!l&&r&&IF(i,n,a,r);let u=i;for(;i.prev!==i.next;){const d=i.prev,p=i.next;if(r?CF(i,n,a,r):wF(i)){t.push(d.i,i.i,p.i),k0(i),i=p.next,u=p.next;continue}if(i=p,i===u){l?l===1?(i=RF(mh(i),t),G0(i,t,e,n,a,r,2)):l===2&&DF(i,t,e,n,a,r):G0(mh(i),t,e,n,a,r,1);break}}}function wF(i){const t=i.prev,e=i,n=i.next;if(Hi(t,e,n)>=0)return!1;const a=t.x,r=e.x,l=n.x,u=t.y,d=e.y,p=n.y,g=Math.min(a,r,l),y=Math.min(u,d,p),x=Math.max(a,r,l),_=Math.max(u,d,p);let E=n.next;for(;E!==t;){if(E.x>=g&&E.x<=x&&E.y>=y&&E.y<=_&&l0(a,u,r,d,l,p,E.x,E.y)&&Hi(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function CF(i,t,e,n){const a=i.prev,r=i,l=i.next;if(Hi(a,r,l)>=0)return!1;const u=a.x,d=r.x,p=l.x,g=a.y,y=r.y,x=l.y,_=Math.min(u,d,p),E=Math.min(g,y,x),C=Math.max(u,d,p),T=Math.max(g,y,x),M=Jb(_,E,t,e,n),R=Jb(C,T,t,e,n);let D=i.prevZ,L=i.nextZ;for(;D&&D.z>=M&&L&&L.z<=R;){if(D.x>=_&&D.x<=C&&D.y>=E&&D.y<=T&&D!==a&&D!==l&&l0(u,g,d,y,p,x,D.x,D.y)&&Hi(D.prev,D,D.next)>=0||(D=D.prevZ,L.x>=_&&L.x<=C&&L.y>=E&&L.y<=T&&L!==a&&L!==l&&l0(u,g,d,y,p,x,L.x,L.y)&&Hi(L.prev,L,L.next)>=0))return!1;L=L.nextZ}for(;D&&D.z>=M;){if(D.x>=_&&D.x<=C&&D.y>=E&&D.y<=T&&D!==a&&D!==l&&l0(u,g,d,y,p,x,D.x,D.y)&&Hi(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;L&&L.z<=R;){if(L.x>=_&&L.x<=C&&L.y>=E&&L.y<=T&&L!==a&&L!==l&&l0(u,g,d,y,p,x,L.x,L.y)&&Hi(L.prev,L,L.next)>=0)return!1;L=L.nextZ}return!0}function RF(i,t){let e=i;do{const n=e.prev,a=e.next.next;!gp(n,a)&&zD(n,e,e.next,a)&&j0(n,a)&&j0(a,n)&&(t.push(n.i,e.i,a.i),k0(e),k0(e.next),e=i=a),e=e.next}while(e!==i);return mh(e)}function DF(i,t,e,n,a,r){let l=i;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&FF(l,u)){let d=FD(l,u);l=mh(l,l.next),d=mh(d,d.next),G0(l,t,e,n,a,r,0),G0(d,t,e,n,a,r,0);return}u=u.next}l=l.next}while(l!==i)}function NF(i,t,e,n){const a=[];for(let r=0,l=t.length;r<l;r++){const u=t[r]*n,d=r<l-1?t[r+1]*n:i.length,p=ID(i,u,d,n,!1);p===p.next&&(p.steiner=!0),a.push(zF(p))}a.sort(UF);for(let r=0;r<a.length;r++)e=OF(a[r],e);return e}function UF(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=n-a}return e}function OF(i,t){const e=LF(i,t);if(!e)return t;const n=FD(e,i);return mh(n,n.next),mh(e,e.next)}function LF(i,t){let e=t;const n=i.x,a=i.y;let r=-1/0,l;if(gp(i,e))return e;do{if(gp(i,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const y=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=n&&y>r&&(r=y,l=e.x<e.next.x?e:e.next,y===n))return l}e=e.next}while(e!==t);if(!l)return null;const u=l,d=l.x,p=l.y;let g=1/0;e=l;do{if(n>=e.x&&e.x>=d&&n!==e.x&&BD(a<p?n:r,a,d,p,a<p?r:n,a,e.x,e.y)){const y=Math.abs(a-e.y)/(n-e.x);j0(e,i)&&(y<g||y===g&&(e.x>l.x||e.x===l.x&&PF(l,e)))&&(l=e,g=y)}e=e.next}while(e!==u);return l}function PF(i,t){return Hi(i.prev,i,t.prev)<0&&Hi(t.next,i,i.next)<0}function IF(i,t,e,n){let a=i;do a.z===0&&(a.z=Jb(a.x,a.y,t,e,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,BF(a)}function BF(i){let t,e=1;do{let n=i,a;i=null;let r=null;for(t=0;n;){t++;let l=n,u=0;for(let p=0;p<e&&(u++,l=l.nextZ,!!l);p++);let d=e;for(;u>0||d>0&&l;)u!==0&&(d===0||!l||n.z<=l.z)?(a=n,n=n.nextZ,u--):(a=l,l=l.nextZ,d--),r?r.nextZ=a:i=a,a.prevZ=r,r=a;n=l}r.nextZ=null,e*=2}while(t>1);return i}function Jb(i,t,e,n,a){return i=(i-e)*a|0,t=(t-n)*a|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function zF(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function BD(i,t,e,n,a,r,l,u){return(a-l)*(t-u)>=(i-l)*(r-u)&&(i-l)*(n-u)>=(e-l)*(t-u)&&(e-l)*(r-u)>=(a-l)*(n-u)}function l0(i,t,e,n,a,r,l,u){return!(i===l&&t===u)&&BD(i,t,e,n,a,r,l,u)}function FF(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!VF(i,t)&&(j0(i,t)&&j0(t,i)&&HF(i,t)&&(Hi(i.prev,i,t.prev)||Hi(i,t.prev,t))||gp(i,t)&&Hi(i.prev,i,i.next)>0&&Hi(t.prev,t,t.next)>0)}function Hi(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function gp(i,t){return i.x===t.x&&i.y===t.y}function zD(i,t,e,n){const a=Iy(Hi(i,t,e)),r=Iy(Hi(i,t,n)),l=Iy(Hi(e,n,i)),u=Iy(Hi(e,n,t));return!!(a!==r&&l!==u||a===0&&Py(i,e,t)||r===0&&Py(i,n,t)||l===0&&Py(e,i,n)||u===0&&Py(e,t,n))}function Py(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Iy(i){return i>0?1:i<0?-1:0}function VF(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&zD(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function j0(i,t){return Hi(i.prev,i,i.next)<0?Hi(i,t,i.next)>=0&&Hi(i,i.prev,t)>=0:Hi(i,t,i.prev)<0||Hi(i,i.next,t)<0}function HF(i,t){let e=i,n=!1;const a=(i.x+t.x)/2,r=(i.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&a<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function FD(i,t){const e=$b(i.i,i.x,i.y),n=$b(t.i,t.x,t.y),a=i.next,r=t.prev;return i.next=t,t.prev=i,e.next=a,a.prev=e,n.next=e,e.prev=n,r.next=n,n.prev=r,n}function sw(i,t,e,n){const a=$b(i,t,e);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function k0(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function $b(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function GF(i,t,e,n){let a=0;for(let r=t,l=e-n;r<e;r+=n)a+=(i[l]-i[r])*(i[r+1]+i[l+1]),l=r;return a}class jF{static triangulate(t,e,n=2){return AF(t,e,n)}}class zo{static area(t){const e=t.length;let n=0;for(let a=e-1,r=0;r<e;a=r++)n+=t[a].x*t[r].y-t[r].x*t[a].y;return n*.5}static isClockWise(t){return zo.area(t)<0}static triangulateShape(t,e){const n=[],a=[],r=[];rw(t),ow(n,t);let l=t.length;e.forEach(rw);for(let d=0;d<e.length;d++)a.push(l),l+=e[d].length,ow(n,e[d]);const u=jF.triangulate(n,a);for(let d=0;d<u.length;d+=3)r.push(u.slice(d,d+3));return r}}function rw(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function ow(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class X_ extends ln{constructor(t=new uh([new It(.5,.5),new It(-.5,.5),new It(-.5,-.5),new It(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,a=[],r=[];for(let u=0,d=t.length;u<d;u++){const p=t[u];l(p)}this.setAttribute("position",new Be(a,3)),this.setAttribute("uv",new Be(r,2)),this.computeVertexNormals();function l(u){const d=[],p=e.curveSegments!==void 0?e.curveSegments:12,g=e.steps!==void 0?e.steps:1,y=e.depth!==void 0?e.depth:1;let x=e.bevelEnabled!==void 0?e.bevelEnabled:!0,_=e.bevelThickness!==void 0?e.bevelThickness:.2,E=e.bevelSize!==void 0?e.bevelSize:_-.1,C=e.bevelOffset!==void 0?e.bevelOffset:0,T=e.bevelSegments!==void 0?e.bevelSegments:3;const M=e.extrudePath,R=e.UVGenerator!==void 0?e.UVGenerator:kF;let D,L=!1,P,B,G,V;if(M){D=M.getSpacedPoints(g),L=!0,x=!1;const Gt=M.isCatmullRomCurve3?M.closed:!1;P=M.computeFrenetFrames(g,Gt),B=new K,G=new K,V=new K}x||(T=0,_=0,E=0,C=0);const N=u.extractPoints(p);let I=N.shape;const W=N.holes;if(!zo.isClockWise(I)){I=I.reverse();for(let Gt=0,se=W.length;Gt<se;Gt++){const Wt=W[Gt];zo.isClockWise(Wt)&&(W[Gt]=Wt.reverse())}}function tt(Gt){const Wt=10000000000000001e-36;let ve=Gt[0];for(let J=1;J<=Gt.length;J++){const Fe=J%Gt.length,be=Gt[Fe],He=be.x-ve.x,ye=be.y-ve.y,Q=He*He+ye*ye,F=Math.max(Math.abs(be.x),Math.abs(be.y),Math.abs(ve.x),Math.abs(ve.y)),gt=Wt*F*F;if(Q<=gt){Gt.splice(Fe,1),J--;continue}ve=be}}tt(I),W.forEach(tt);const rt=W.length,mt=I;for(let Gt=0;Gt<rt;Gt++){const se=W[Gt];I=I.concat(se)}function $(Gt,se,Wt){return se||Ke("ExtrudeGeometry: vec does not exist"),Gt.clone().addScaledVector(se,Wt)}const et=I.length;function vt(Gt,se,Wt){let ve,J,Fe;const be=Gt.x-se.x,He=Gt.y-se.y,ye=Wt.x-Gt.x,Q=Wt.y-Gt.y,F=be*be+He*He,gt=be*Q-He*ye;if(Math.abs(gt)>Number.EPSILON){const Bt=Math.sqrt(F),qt=Math.sqrt(ye*ye+Q*Q),Pt=se.x-He/Bt,Le=se.y+be/Bt,Me=Wt.x-Q/qt,Pe=Wt.y+ye/qt,Ye=((Me-Pt)*Q-(Pe-Le)*ye)/(be*Q-He*ye);ve=Pt+be*Ye-Gt.x,J=Le+He*Ye-Gt.y;const Zt=ve*ve+J*J;if(Zt<=2)return new It(ve,J);Fe=Math.sqrt(Zt/2)}else{let Bt=!1;be>Number.EPSILON?ye>Number.EPSILON&&(Bt=!0):be<-Number.EPSILON?ye<-Number.EPSILON&&(Bt=!0):Math.sign(He)===Math.sign(Q)&&(Bt=!0),Bt?(ve=-He,J=be,Fe=Math.sqrt(F)):(ve=be,J=He,Fe=Math.sqrt(F/2))}return new It(ve/Fe,J/Fe)}const ut=[];for(let Gt=0,se=mt.length,Wt=se-1,ve=Gt+1;Gt<se;Gt++,Wt++,ve++)Wt===se&&(Wt=0),ve===se&&(ve=0),ut[Gt]=vt(mt[Gt],mt[Wt],mt[ve]);const j=[];let st,wt=ut.concat();for(let Gt=0,se=rt;Gt<se;Gt++){const Wt=W[Gt];st=[];for(let ve=0,J=Wt.length,Fe=J-1,be=ve+1;ve<J;ve++,Fe++,be++)Fe===J&&(Fe=0),be===J&&(be=0),st[ve]=vt(Wt[ve],Wt[Fe],Wt[be]);j.push(st),wt=wt.concat(st)}let Ct;if(T===0)Ct=zo.triangulateShape(mt,W);else{const Gt=[],se=[];for(let Wt=0;Wt<T;Wt++){const ve=Wt/T,J=_*Math.cos(ve*Math.PI/2),Fe=E*Math.sin(ve*Math.PI/2)+C;for(let be=0,He=mt.length;be<He;be++){const ye=$(mt[be],ut[be],Fe);Se(ye.x,ye.y,-J),ve===0&&Gt.push(ye)}for(let be=0,He=rt;be<He;be++){const ye=W[be];st=j[be];const Q=[];for(let F=0,gt=ye.length;F<gt;F++){const Bt=$(ye[F],st[F],Fe);Se(Bt.x,Bt.y,-J),ve===0&&Q.push(Bt)}ve===0&&se.push(Q)}}Ct=zo.triangulateShape(Gt,se)}const Mt=Ct.length,Vt=E+C;for(let Gt=0;Gt<et;Gt++){const se=x?$(I[Gt],wt[Gt],Vt):I[Gt];L?(G.copy(P.normals[0]).multiplyScalar(se.x),B.copy(P.binormals[0]).multiplyScalar(se.y),V.copy(D[0]).add(G).add(B),Se(V.x,V.y,V.z)):Se(se.x,se.y,0)}for(let Gt=1;Gt<=g;Gt++)for(let se=0;se<et;se++){const Wt=x?$(I[se],wt[se],Vt):I[se];L?(G.copy(P.normals[Gt]).multiplyScalar(Wt.x),B.copy(P.binormals[Gt]).multiplyScalar(Wt.y),V.copy(D[Gt]).add(G).add(B),Se(V.x,V.y,V.z)):Se(Wt.x,Wt.y,y/g*Gt)}for(let Gt=T-1;Gt>=0;Gt--){const se=Gt/T,Wt=_*Math.cos(se*Math.PI/2),ve=E*Math.sin(se*Math.PI/2)+C;for(let J=0,Fe=mt.length;J<Fe;J++){const be=$(mt[J],ut[J],ve);Se(be.x,be.y,y+Wt)}for(let J=0,Fe=W.length;J<Fe;J++){const be=W[J];st=j[J];for(let He=0,ye=be.length;He<ye;He++){const Q=$(be[He],st[He],ve);L?Se(Q.x,Q.y+D[g-1].y,D[g-1].x+Wt):Se(Q.x,Q.y,y+Wt)}}}ft(),Rt();function ft(){const Gt=a.length/3;if(x){let se=0,Wt=et*se;for(let ve=0;ve<Mt;ve++){const J=Ct[ve];$t(J[2]+Wt,J[1]+Wt,J[0]+Wt)}se=g+T*2,Wt=et*se;for(let ve=0;ve<Mt;ve++){const J=Ct[ve];$t(J[0]+Wt,J[1]+Wt,J[2]+Wt)}}else{for(let se=0;se<Mt;se++){const Wt=Ct[se];$t(Wt[2],Wt[1],Wt[0])}for(let se=0;se<Mt;se++){const Wt=Ct[se];$t(Wt[0]+et*g,Wt[1]+et*g,Wt[2]+et*g)}}n.addGroup(Gt,a.length/3-Gt,0)}function Rt(){const Gt=a.length/3;let se=0;Ft(mt,se),se+=mt.length;for(let Wt=0,ve=W.length;Wt<ve;Wt++){const J=W[Wt];Ft(J,se),se+=J.length}n.addGroup(Gt,a.length/3-Gt,1)}function Ft(Gt,se){let Wt=Gt.length;for(;--Wt>=0;){const ve=Wt;let J=Wt-1;J<0&&(J=Gt.length-1);for(let Fe=0,be=g+T*2;Fe<be;Fe++){const He=et*Fe,ye=et*(Fe+1),Q=se+ve+He,F=se+J+He,gt=se+J+ye,Bt=se+ve+ye;ze(Q,F,gt,Bt)}}}function Se(Gt,se,Wt){d.push(Gt),d.push(se),d.push(Wt)}function $t(Gt,se,Wt){Qe(Gt),Qe(se),Qe(Wt);const ve=a.length/3,J=R.generateTopUV(n,a,ve-3,ve-2,ve-1);Oe(J[0]),Oe(J[1]),Oe(J[2])}function ze(Gt,se,Wt,ve){Qe(Gt),Qe(se),Qe(ve),Qe(se),Qe(Wt),Qe(ve);const J=a.length/3,Fe=R.generateSideWallUV(n,a,J-6,J-3,J-2,J-1);Oe(Fe[0]),Oe(Fe[1]),Oe(Fe[3]),Oe(Fe[1]),Oe(Fe[2]),Oe(Fe[3])}function Qe(Gt){a.push(d[Gt*3+0]),a.push(d[Gt*3+1]),a.push(d[Gt*3+2])}function Oe(Gt){r.push(Gt.x),r.push(Gt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return XF(e,n,t)}static fromJSON(t,e){const n=[];for(let r=0,l=t.shapes.length;r<l;r++){const u=e[t.shapes[r]];n.push(u)}const a=t.options.extrudePath;return a!==void 0&&(t.options.extrudePath=new r_[a.type]().fromJSON(a)),new X_(n,t.options)}}const kF={generateTopUV:function(i,t,e,n,a){const r=t[e*3],l=t[e*3+1],u=t[n*3],d=t[n*3+1],p=t[a*3],g=t[a*3+1];return[new It(r,l),new It(u,d),new It(p,g)]},generateSideWallUV:function(i,t,e,n,a,r){const l=t[e*3],u=t[e*3+1],d=t[e*3+2],p=t[n*3],g=t[n*3+1],y=t[n*3+2],x=t[a*3],_=t[a*3+1],E=t[a*3+2],C=t[r*3],T=t[r*3+1],M=t[r*3+2];return Math.abs(u-g)<Math.abs(l-p)?[new It(l,1-d),new It(p,1-y),new It(x,1-E),new It(C,1-M)]:[new It(u,1-d),new It(g,1-y),new It(_,1-E),new It(T,1-M)]}};function XF(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,a=i.length;n<a;n++){const r=i[n];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class dg extends Xu{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new dg(t.radius,t.detail)}}class Y_ extends ln{constructor(t=[new It(0,-.5),new It(.5,0),new It(0,.5)],e=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e),a=sn(a,0,Math.PI*2);const r=[],l=[],u=[],d=[],p=[],g=1/e,y=new K,x=new It,_=new K,E=new K,C=new K;let T=0,M=0;for(let R=0;R<=t.length-1;R++)switch(R){case 0:T=t[R+1].x-t[R].x,M=t[R+1].y-t[R].y,_.x=M*1,_.y=-T,_.z=M*0,C.copy(_),_.normalize(),d.push(_.x,_.y,_.z);break;case t.length-1:d.push(C.x,C.y,C.z);break;default:T=t[R+1].x-t[R].x,M=t[R+1].y-t[R].y,_.x=M*1,_.y=-T,_.z=M*0,E.copy(_),_.x+=C.x,_.y+=C.y,_.z+=C.z,_.normalize(),d.push(_.x,_.y,_.z),C.copy(E)}for(let R=0;R<=e;R++){const D=n+R*g*a,L=Math.sin(D),P=Math.cos(D);for(let B=0;B<=t.length-1;B++){y.x=t[B].x*L,y.y=t[B].y,y.z=t[B].x*P,l.push(y.x,y.y,y.z),x.x=R/e,x.y=B/(t.length-1),u.push(x.x,x.y);const G=d[3*B+0]*L,V=d[3*B+1],N=d[3*B+0]*P;p.push(G,V,N)}}for(let R=0;R<e;R++)for(let D=0;D<t.length-1;D++){const L=D+R*t.length,P=L,B=L+t.length,G=L+t.length+1,V=L+1;r.push(P,B,V),r.push(G,V,B)}this.setIndex(r),this.setAttribute("position",new Be(l,3)),this.setAttribute("uv",new Be(u,2)),this.setAttribute("normal",new Be(p,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Y_(t.points,t.segments,t.phiStart,t.phiLength)}}class pg extends Xu{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new pg(t.radius,t.detail)}}class Dc extends ln{constructor(t=1,e=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:a};const r=t/2,l=e/2,u=Math.floor(n),d=Math.floor(a),p=u+1,g=d+1,y=t/u,x=e/d,_=[],E=[],C=[],T=[];for(let M=0;M<g;M++){const R=M*x-l;for(let D=0;D<p;D++){const L=D*y-r;E.push(L,-R,0),C.push(0,0,1),T.push(D/u),T.push(1-M/d)}}for(let M=0;M<d;M++)for(let R=0;R<u;R++){const D=R+p*M,L=R+p*(M+1),P=R+1+p*(M+1),B=R+1+p*M;_.push(D,L,B),_.push(L,P,B)}this.setIndex(_),this.setAttribute("position",new Be(E,3)),this.setAttribute("normal",new Be(C,3)),this.setAttribute("uv",new Be(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Dc(t.width,t.height,t.widthSegments,t.heightSegments)}}class q_ extends ln{constructor(t=.5,e=1,n=32,a=1,r=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:r,thetaLength:l},n=Math.max(3,n),a=Math.max(1,a);const u=[],d=[],p=[],g=[];let y=t;const x=(e-t)/a,_=new K,E=new It;for(let C=0;C<=a;C++){for(let T=0;T<=n;T++){const M=r+T/n*l;_.x=y*Math.cos(M),_.y=y*Math.sin(M),d.push(_.x,_.y,_.z),p.push(0,0,1),E.x=(_.x/e+1)/2,E.y=(_.y/e+1)/2,g.push(E.x,E.y)}y+=x}for(let C=0;C<a;C++){const T=C*(n+1);for(let M=0;M<n;M++){const R=M+T,D=R,L=R+n+1,P=R+n+2,B=R+1;u.push(D,L,B),u.push(L,P,B)}}this.setIndex(u),this.setAttribute("position",new Be(d,3)),this.setAttribute("normal",new Be(p,3)),this.setAttribute("uv",new Be(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new q_(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class W_ extends ln{constructor(t=new uh([new It(0,.5),new It(-.5,-.5),new It(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],a=[],r=[],l=[];let u=0,d=0;if(Array.isArray(t)===!1)p(t);else for(let g=0;g<t.length;g++)p(t[g]),this.addGroup(u,d,g),u+=d,d=0;this.setIndex(n),this.setAttribute("position",new Be(a,3)),this.setAttribute("normal",new Be(r,3)),this.setAttribute("uv",new Be(l,2));function p(g){const y=a.length/3,x=g.extractPoints(e);let _=x.shape;const E=x.holes;zo.isClockWise(_)===!1&&(_=_.reverse());for(let T=0,M=E.length;T<M;T++){const R=E[T];zo.isClockWise(R)===!0&&(E[T]=R.reverse())}const C=zo.triangulateShape(_,E);for(let T=0,M=E.length;T<M;T++){const R=E[T];_=_.concat(R)}for(let T=0,M=_.length;T<M;T++){const R=_[T];a.push(R.x,R.y,0),r.push(0,0,1),l.push(R.x,R.y)}for(let T=0,M=C.length;T<M;T++){const R=C[T],D=R[0]+y,L=R[1]+y,P=R[2]+y;n.push(D,L,P),d+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return YF(e,t)}static fromJSON(t,e){const n=[];for(let a=0,r=t.shapes.length;a<r;a++){const l=e[t.shapes[a]];n.push(l)}return new W_(n,t.curveSegments)}}function YF(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const a=i[e];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t}class mg extends ln{constructor(t=1,e=32,n=16,a=0,r=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:a,phiLength:r,thetaStart:l,thetaLength:u},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const d=Math.min(l+u,Math.PI);let p=0;const g=[],y=new K,x=new K,_=[],E=[],C=[],T=[];for(let M=0;M<=n;M++){const R=[],D=M/n;let L=0;M===0&&l===0?L=.5/e:M===n&&d===Math.PI&&(L=-.5/e);for(let P=0;P<=e;P++){const B=P/e;y.x=-t*Math.cos(a+B*r)*Math.sin(l+D*u),y.y=t*Math.cos(l+D*u),y.z=t*Math.sin(a+B*r)*Math.sin(l+D*u),E.push(y.x,y.y,y.z),x.copy(y).normalize(),C.push(x.x,x.y,x.z),T.push(B+L,1-D),R.push(p++)}g.push(R)}for(let M=0;M<n;M++)for(let R=0;R<e;R++){const D=g[M][R+1],L=g[M][R],P=g[M+1][R],B=g[M+1][R+1];(M!==0||l>0)&&_.push(D,L,B),(M!==n-1||d<Math.PI)&&_.push(L,P,B)}this.setIndex(_),this.setAttribute("position",new Be(E,3)),this.setAttribute("normal",new Be(C,3)),this.setAttribute("uv",new Be(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new mg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Z_ extends Xu{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Z_(t.radius,t.detail)}}class K_ extends ln{constructor(t=1,e=.4,n=12,a=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:a,arc:r},n=Math.floor(n),a=Math.floor(a);const l=[],u=[],d=[],p=[],g=new K,y=new K,x=new K;for(let _=0;_<=n;_++)for(let E=0;E<=a;E++){const C=E/a*r,T=_/n*Math.PI*2;y.x=(t+e*Math.cos(T))*Math.cos(C),y.y=(t+e*Math.cos(T))*Math.sin(C),y.z=e*Math.sin(T),u.push(y.x,y.y,y.z),g.x=t*Math.cos(C),g.y=t*Math.sin(C),x.subVectors(y,g).normalize(),d.push(x.x,x.y,x.z),p.push(E/a),p.push(_/n)}for(let _=1;_<=n;_++)for(let E=1;E<=a;E++){const C=(a+1)*_+E-1,T=(a+1)*(_-1)+E-1,M=(a+1)*(_-1)+E,R=(a+1)*_+E;l.push(C,T,R),l.push(T,M,R)}this.setIndex(l),this.setAttribute("position",new Be(u,3)),this.setAttribute("normal",new Be(d,3)),this.setAttribute("uv",new Be(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new K_(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Q_ extends ln{constructor(t=1,e=.4,n=64,a=8,r=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:a,p:r,q:l},n=Math.floor(n),a=Math.floor(a);const u=[],d=[],p=[],g=[],y=new K,x=new K,_=new K,E=new K,C=new K,T=new K,M=new K;for(let D=0;D<=n;++D){const L=D/n*r*Math.PI*2;R(L,r,l,t,_),R(L+.01,r,l,t,E),T.subVectors(E,_),M.addVectors(E,_),C.crossVectors(T,M),M.crossVectors(C,T),C.normalize(),M.normalize();for(let P=0;P<=a;++P){const B=P/a*Math.PI*2,G=-e*Math.cos(B),V=e*Math.sin(B);y.x=_.x+(G*M.x+V*C.x),y.y=_.y+(G*M.y+V*C.y),y.z=_.z+(G*M.z+V*C.z),d.push(y.x,y.y,y.z),x.subVectors(y,_).normalize(),p.push(x.x,x.y,x.z),g.push(D/n),g.push(P/a)}}for(let D=1;D<=n;D++)for(let L=1;L<=a;L++){const P=(a+1)*(D-1)+(L-1),B=(a+1)*D+(L-1),G=(a+1)*D+L,V=(a+1)*(D-1)+L;u.push(P,B,V),u.push(B,G,V)}this.setIndex(u),this.setAttribute("position",new Be(d,3)),this.setAttribute("normal",new Be(p,3)),this.setAttribute("uv",new Be(g,2));function R(D,L,P,B,G){const V=Math.cos(D),N=Math.sin(D),I=P/L*D,W=Math.cos(I);G.x=B*(2+W)*.5*V,G.y=B*(2+W)*N*.5,G.z=B*Math.sin(I)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Q_(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class J_ extends ln{constructor(t=new _E(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),e=64,n=1,a=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:r};const l=t.computeFrenetFrames(e,r);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new K,d=new K,p=new It;let g=new K;const y=[],x=[],_=[],E=[];C(),this.setIndex(E),this.setAttribute("position",new Be(y,3)),this.setAttribute("normal",new Be(x,3)),this.setAttribute("uv",new Be(_,2));function C(){for(let D=0;D<e;D++)T(D);T(r===!1?e:0),R(),M()}function T(D){g=t.getPointAt(D/e,g);const L=l.normals[D],P=l.binormals[D];for(let B=0;B<=a;B++){const G=B/a*Math.PI*2,V=Math.sin(G),N=-Math.cos(G);d.x=N*L.x+V*P.x,d.y=N*L.y+V*P.y,d.z=N*L.z+V*P.z,d.normalize(),x.push(d.x,d.y,d.z),u.x=g.x+n*d.x,u.y=g.y+n*d.y,u.z=g.z+n*d.z,y.push(u.x,u.y,u.z)}}function M(){for(let D=1;D<=e;D++)for(let L=1;L<=a;L++){const P=(a+1)*(D-1)+(L-1),B=(a+1)*D+(L-1),G=(a+1)*D+L,V=(a+1)*(D-1)+L;E.push(P,B,V),E.push(B,G,V)}}function R(){for(let D=0;D<=e;D++)for(let L=0;L<=a;L++)p.x=D/e,p.y=L/a,_.push(p.x,p.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new J_(new r_[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class VD extends ln{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,a=new K,r=new K;if(t.index!==null){const l=t.attributes.position,u=t.index;let d=t.groups;d.length===0&&(d=[{start:0,count:u.count,materialIndex:0}]);for(let p=0,g=d.length;p<g;++p){const y=d[p],x=y.start,_=y.count;for(let E=x,C=x+_;E<C;E+=3)for(let T=0;T<3;T++){const M=u.getX(E+T),R=u.getX(E+(T+1)%3);a.fromBufferAttribute(l,M),r.fromBufferAttribute(l,R),lw(a,r,n)===!0&&(e.push(a.x,a.y,a.z),e.push(r.x,r.y,r.z))}}}else{const l=t.attributes.position;for(let u=0,d=l.count/3;u<d;u++)for(let p=0;p<3;p++){const g=3*u+p,y=3*u+(p+1)%3;a.fromBufferAttribute(l,g),r.fromBufferAttribute(l,y),lw(a,r,n)===!0&&(e.push(a.x,a.y,a.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Be(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function lw(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(a)===!0?!1:(e.add(n),e.add(a),!0)}var cw=Object.freeze({__proto__:null,BoxGeometry:ar,CapsuleGeometry:H_,CircleGeometry:G_,ConeGeometry:hg,CylinderGeometry:fg,DodecahedronGeometry:j_,EdgesGeometry:DD,ExtrudeGeometry:X_,IcosahedronGeometry:dg,LatheGeometry:Y_,OctahedronGeometry:pg,PlaneGeometry:Dc,PolyhedronGeometry:Xu,RingGeometry:q_,ShapeGeometry:W_,SphereGeometry:mg,TetrahedronGeometry:Z_,TorusGeometry:K_,TorusKnotGeometry:Q_,TubeGeometry:J_,WireframeGeometry:VD});class HD extends gs{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ae(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class bE extends Ri{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class vp extends gs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class $_ extends vp{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new It(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return sn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ae(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class GD extends gs{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ae(16777215),this.specular=new Ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=ag,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class jD extends gs{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class kD extends gs{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class ME extends gs{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=ag,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class t1 extends gs{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=oD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class EE extends gs{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class XD extends gs{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this.fog=t.fog,this}}class YD extends Ps{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function ah(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function qD(i){function t(a,r){return i[a]-i[r]}const e=i.length,n=new Array(e);for(let a=0;a!==e;++a)n[a]=a;return n.sort(t),n}function tM(i,t,e){const n=i.length,a=new i.constructor(n);for(let r=0,l=0;l!==n;++r){const u=e[r]*t;for(let d=0;d!==t;++d)a[l++]=i[u+d]}return a}function TE(i,t,e,n){let a=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[a++];if(r===void 0)return;let l=r[n];if(l!==void 0)if(Array.isArray(l))do l=r[n],l!==void 0&&(t.push(r.time),e.push(...l)),r=i[a++];while(r!==void 0);else if(l.toArray!==void 0)do l=r[n],l!==void 0&&(t.push(r.time),l.toArray(e,e.length)),r=i[a++];while(r!==void 0);else do l=r[n],l!==void 0&&(t.push(r.time),e.push(l)),r=i[a++];while(r!==void 0)}function qF(i,t,e,n,a=30){const r=i.clone();r.name=t;const l=[];for(let d=0;d<r.tracks.length;++d){const p=r.tracks[d],g=p.getValueSize(),y=[],x=[];for(let _=0;_<p.times.length;++_){const E=p.times[_]*a;if(!(E<e||E>=n)){y.push(p.times[_]);for(let C=0;C<g;++C)x.push(p.values[_*g+C])}}y.length!==0&&(p.times=ah(y,p.times.constructor),p.values=ah(x,p.values.constructor),l.push(p))}r.tracks=l;let u=1/0;for(let d=0;d<r.tracks.length;++d)u>r.tracks[d].times[0]&&(u=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*u);return r.resetDuration(),r}function WF(i,t=0,e=i,n=30){n<=0&&(n=30);const a=e.tracks.length,r=t/n;for(let l=0;l<a;++l){const u=e.tracks[l],d=u.ValueTypeName;if(d==="bool"||d==="string")continue;const p=i.tracks.find(function(M){return M.name===u.name&&M.ValueTypeName===d});if(p===void 0)continue;let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let x=0;const _=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=_/3);const E=u.times.length-1;let C;if(r<=u.times[0]){const M=g,R=y-g;C=u.values.slice(M,R)}else if(r>=u.times[E]){const M=E*y+g,R=M+y-g;C=u.values.slice(M,R)}else{const M=u.createInterpolant(),R=g,D=y-g;M.evaluate(r),C=M.resultBuffer.slice(R,D)}d==="quaternion"&&new Fa().fromArray(C).normalize().conjugate().toArray(C);const T=p.times.length;for(let M=0;M<T;++M){const R=M*_+x;if(d==="quaternion")Fa.multiplyQuaternionsFlat(p.values,R,C,0,p.values,R);else{const D=_-x*2;for(let L=0;L<D;++L)p.values[R+L]-=C[L]}}}return i.blendMode=oE,i}class ZF{static convertArray(t,e){return ah(t,e)}static isTypedArray(t){return gD(t)}static getKeyframeOrder(t){return qD(t)}static sortedArray(t,e,n){return tM(t,e,n)}static flattenJSON(t,e,n,a){TE(t,e,n,a)}static subclip(t,e,n,a,r=30){return qF(t,e,n,a,r)}static makeClipAdditive(t,e=0,n=t,a=30){return WF(t,e,n,a)}}class gg{constructor(t,e,n,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,a=e[n],r=e[n-1];t:{e:{let l;n:{i:if(!(t<a)){for(let u=n+2;;){if(a===void 0){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===u)break;if(r=a,a=e[++n],t<a)break e}l=e.length;break n}if(!(t>=r)){const u=e[1];t<u&&(n=2,r=u);for(let d=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(a=r,r=e[--n-1],t>=r)break e}l=n,n=0;break n}break t}for(;n<l;){const u=n+l>>>1;t<e[u]?l=u:n=u+1}if(a=e[n],r=e[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,a)}return this.interpolate_(n,r,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,a=this.valueSize,r=t*a;for(let l=0;l!==a;++l)e[l]=n[r+l];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WD extends gg{constructor(t,e,n,a){super(t,e,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:eh,endingEnd:eh}}intervalChanged_(t,e,n){const a=this.parameterPositions;let r=t-2,l=t+1,u=a[r],d=a[l];if(u===void 0)switch(this.getSettings_().endingStart){case nh:r=t,u=2*e-n;break;case I0:r=a.length-2,u=e+a[r]-a[r+1];break;default:r=t,u=n}if(d===void 0)switch(this.getSettings_().endingEnd){case nh:l=t,d=2*n-e;break;case I0:l=1,d=n+a[1]-a[0];break;default:l=t-1,d=e}const p=(n-e)*.5,g=this.valueSize;this._weightPrev=p/(e-u),this._weightNext=p/(d-n),this._offsetPrev=r*g,this._offsetNext=l*g}interpolate_(t,e,n,a){const r=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=t*u,p=d-u,g=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,_=this._weightNext,E=(n-e)/(a-e),C=E*E,T=C*E,M=-x*T+2*x*C-x*E,R=(1+x)*T+(-1.5-2*x)*C+(-.5+x)*E+1,D=(-1-_)*T+(1.5+_)*C+.5*E,L=_*T-_*C;for(let P=0;P!==u;++P)r[P]=M*l[g+P]+R*l[p+P]+D*l[d+P]+L*l[y+P];return r}}class AE extends gg{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const r=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=t*u,p=d-u,g=(n-e)/(a-e),y=1-g;for(let x=0;x!==u;++x)r[x]=l[p+x]*y+l[d+x]*g;return r}}class ZD extends gg{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class Zr{constructor(t,e,n,a){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ah(e,this.TimeBufferType),this.values=ah(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:ah(t.times,Array),values:ah(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(n.interpolation=a)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new ZD(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new AE(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new WD(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case P0:e=this.InterpolantFactoryMethodDiscrete;break;case i_:e=this.InterpolantFactoryMethodLinear;break;case ix:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return Re("KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return P0;case this.InterpolantFactoryMethodLinear:return i_;case this.InterpolantFactoryMethodSmooth:return ix}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]*=t}return this}trim(t,e){const n=this.times,a=n.length;let r=0,l=a-1;for(;r!==a&&n[r]<t;)++r;for(;l!==-1&&n[l]>e;)--l;if(++l,r!==0||l!==a){r>=l&&(l=Math.max(l,1),r=l-1);const u=this.getValueSize();this.times=n.slice(r,l),this.values=this.values.slice(r*u,l*u)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(Ke("KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,a=this.values,r=n.length;r===0&&(Ke("KeyframeTrack: Track is empty.",this),t=!1);let l=null;for(let u=0;u!==r;u++){const d=n[u];if(typeof d=="number"&&isNaN(d)){Ke("KeyframeTrack: Time is not a valid number.",this,u,d),t=!1;break}if(l!==null&&l>d){Ke("KeyframeTrack: Out of order keys.",this,u,d,l),t=!1;break}l=d}if(a!==void 0&&gD(a))for(let u=0,d=a.length;u!==d;++u){const p=a[u];if(isNaN(p)){Ke("KeyframeTrack: Value is not a valid number.",this,u,p),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===ix,r=t.length-1;let l=1;for(let u=1;u<r;++u){let d=!1;const p=t[u],g=t[u+1];if(p!==g&&(u!==1||p!==t[0]))if(a)d=!0;else{const y=u*n,x=y-n,_=y+n;for(let E=0;E!==n;++E){const C=e[y+E];if(C!==e[x+E]||C!==e[_+E]){d=!0;break}}}if(d){if(u!==l){t[l]=t[u];const y=u*n,x=l*n;for(let _=0;_!==n;++_)e[x+_]=e[y+_]}++l}}if(r>0){t[l]=t[r];for(let u=r*n,d=l*n,p=0;p!==n;++p)e[d+p]=e[u+p];++l}return l!==t.length?(this.times=t.slice(0,l),this.values=e.slice(0,l*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,a=new n(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}}Zr.prototype.ValueTypeName="";Zr.prototype.TimeBufferType=Float32Array;Zr.prototype.ValueBufferType=Float32Array;Zr.prototype.DefaultInterpolation=i_;class Eh extends Zr{constructor(t,e,n){super(t,e,n)}}Eh.prototype.ValueTypeName="bool";Eh.prototype.ValueBufferType=Array;Eh.prototype.DefaultInterpolation=P0;Eh.prototype.InterpolantFactoryMethodLinear=void 0;Eh.prototype.InterpolantFactoryMethodSmooth=void 0;class wE extends Zr{constructor(t,e,n,a){super(t,e,n,a)}}wE.prototype.ValueTypeName="color";class X0 extends Zr{constructor(t,e,n,a){super(t,e,n,a)}}X0.prototype.ValueTypeName="number";class KD extends gg{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const r=this.resultBuffer,l=this.sampleValues,u=this.valueSize,d=(n-e)/(a-e);let p=t*u;for(let g=p+u;p!==g;p+=4)Fa.slerpFlat(r,0,l,p-u,l,p,d);return r}}class vg extends Zr{constructor(t,e,n,a){super(t,e,n,a)}InterpolantFactoryMethodLinear(t){return new KD(this.times,this.values,this.getValueSize(),t)}}vg.prototype.ValueTypeName="quaternion";vg.prototype.InterpolantFactoryMethodSmooth=void 0;class Th extends Zr{constructor(t,e,n){super(t,e,n)}}Th.prototype.ValueTypeName="string";Th.prototype.ValueBufferType=Array;Th.prototype.DefaultInterpolation=P0;Th.prototype.InterpolantFactoryMethodLinear=void 0;Th.prototype.InterpolantFactoryMethodSmooth=void 0;class Y0 extends Zr{constructor(t,e,n,a){super(t,e,n,a)}}Y0.prototype.ValueTypeName="vector";class q0{constructor(t="",e=-1,n=[],a=w_){this.name=t,this.tracks=n,this.duration=e,this.blendMode=a,this.uuid=Sr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,a=1/(t.fps||1);for(let l=0,u=n.length;l!==u;++l)e.push(QF(n[l]).scale(a));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r.userData=JSON.parse(t.userData||"{}"),r}static toJSON(t){const e=[],n=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode,userData:JSON.stringify(t.userData)};for(let r=0,l=n.length;r!==l;++r)e.push(Zr.toJSON(n[r]));return a}static CreateFromMorphTargetSequence(t,e,n,a){const r=e.length,l=[];for(let u=0;u<r;u++){let d=[],p=[];d.push((u+r-1)%r,u,(u+1)%r),p.push(0,1,0);const g=qD(d);d=tM(d,1,g),p=tM(p,1,g),!a&&d[0]===0&&(d.push(r),p.push(p[0])),l.push(new X0(".morphTargetInfluences["+e[u].name+"]",d,p).scale(1/n))}return new this(t,-1,l)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const a=t;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===e)return n[a];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const a={},r=/^([\w-]*?)([\d]+)$/;for(let u=0,d=t.length;u<d;u++){const p=t[u],g=p.name.match(r);if(g&&g.length>1){const y=g[1];let x=a[y];x||(a[y]=x=[]),x.push(p)}}const l=[];for(const u in a)l.push(this.CreateFromMorphTargetSequence(u,a[u],e,n));return l}static parseAnimation(t,e){if(Re("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return Ke("AnimationClip: No animation in JSONLoader data."),null;const n=function(y,x,_,E,C){if(_.length!==0){const T=[],M=[];TE(_,T,M,E),T.length!==0&&C.push(new y(x,T,M))}},a=[],r=t.name||"default",l=t.fps||30,u=t.blendMode;let d=t.length||-1;const p=t.hierarchy||[];for(let y=0;y<p.length;y++){const x=p[y].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const _={};let E;for(E=0;E<x.length;E++)if(x[E].morphTargets)for(let C=0;C<x[E].morphTargets.length;C++)_[x[E].morphTargets[C]]=-1;for(const C in _){const T=[],M=[];for(let R=0;R!==x[E].morphTargets.length;++R){const D=x[E];T.push(D.time),M.push(D.morphTarget===C?1:0)}a.push(new X0(".morphTargetInfluence["+C+"]",T,M))}d=_.length*l}else{const _=".bones["+e[y].name+"]";n(Y0,_+".position",x,"pos",a),n(vg,_+".quaternion",x,"rot",a),n(Y0,_+".scale",x,"scl",a)}}return a.length===0?null:new this(r,d,a,u)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,a=t.length;n!==a;++n){const r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());const e=new this.constructor(this.name,this.duration,t,this.blendMode);return e.userData=JSON.parse(JSON.stringify(this.userData)),e}toJSON(){return this.constructor.toJSON(this)}}function KF(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return X0;case"vector":case"vector2":case"vector3":case"vector4":return Y0;case"color":return wE;case"quaternion":return vg;case"bool":case"boolean":return Eh;case"string":return Th}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function QF(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=KF(i.type);if(i.times===void 0){const e=[],n=[];TE(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Ll={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class e1{constructor(t,e,n){const a=this;let r=!1,l=0,u=0,d;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this._abortController=null,this.itemStart=function(g){u++,r===!1&&a.onStart!==void 0&&a.onStart(g,l,u),r=!0},this.itemEnd=function(g){l++,a.onProgress!==void 0&&a.onProgress(g,l,u),l===u&&(r=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(g){a.onError!==void 0&&a.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,y){return p.push(g,y),this},this.removeHandler=function(g){const y=p.indexOf(g);return y!==-1&&p.splice(y,2),this},this.getHandler=function(g){for(let y=0,x=p.length;y<x;y+=2){const _=p[y],E=p[y+1];if(_.global&&(_.lastIndex=0),_.test(g))return E}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const QD=new e1;class Is{constructor(t){this.manager=t!==void 0?t:QD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(a,r){n.load(t,a,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}Is.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mc={};class JF extends Error{constructor(t,e){super(t),this.response=e}}class br extends Is{constructor(t){super(t),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Ll.get(`file:${t}`);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(Mc[t]!==void 0){Mc[t].push({onLoad:e,onProgress:n,onError:a});return}Mc[t]=[],Mc[t].push({onLoad:e,onProgress:n,onError:a});const l=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&Re("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=Mc[t],y=p.body.getReader(),x=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),_=x?parseInt(x):0,E=_!==0;let C=0;const T=new ReadableStream({start(M){R();function R(){y.read().then(({done:D,value:L})=>{if(D)M.close();else{C+=L.byteLength;const P=new ProgressEvent("progress",{lengthComputable:E,loaded:C,total:_});for(let B=0,G=g.length;B<G;B++){const V=g[B];V.onProgress&&V.onProgress(P)}M.enqueue(L),R()}},D=>{M.error(D)})}}});return new Response(T)}else throw new JF(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,u));case"json":return p.json();default:if(u==="")return p.text();{const y=/charset="?([^;"\s]*)"?/i.exec(u),x=y&&y[1]?y[1].toLowerCase():void 0,_=new TextDecoder(x);return p.arrayBuffer().then(E=>_.decode(E))}}}).then(p=>{Ll.add(`file:${t}`,p);const g=Mc[t];delete Mc[t];for(let y=0,x=g.length;y<x;y++){const _=g[y];_.onLoad&&_.onLoad(p)}}).catch(p=>{const g=Mc[t];if(g===void 0)throw this.manager.itemError(t),p;delete Mc[t];for(let y=0,x=g.length;y<x;y++){const _=g[y];_.onError&&_.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class $F extends Is{constructor(t){super(t)}load(t,e,n,a){const r=this,l=new br(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{e(r.parse(JSON.parse(u)))}catch(d){a?a(d):Ke(d),r.manager.itemError(t)}},n,a)}parse(t){const e=[];for(let n=0;n<t.length;n++){const a=q0.parse(t[n]);e.push(a)}return e}}class t6 extends Is{constructor(t){super(t)}load(t,e,n,a){const r=this,l=[],u=new V_,d=new br(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let p=0;function g(y){d.load(t[y],function(x){const _=r.parse(x,!0);l[y]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},p+=1,p===6&&(_.mipmapCount===1&&(u.minFilter=Nn),u.image=l,u.format=_.format,u.needsUpdate=!0,e&&e(u))},n,a)}if(Array.isArray(t))for(let y=0,x=t.length;y<x;++y)g(y);else d.load(t,function(y){const x=r.parse(y,!0);if(x.isCubemap){const _=x.mipmaps.length/x.mipmapCount;for(let E=0;E<_;E++){l[E]={mipmaps:[]};for(let C=0;C<x.mipmapCount;C++)l[E].mipmaps.push(x.mipmaps[E*x.mipmapCount+C]),l[E].format=x.format,l[E].width=x.width,l[E].height=x.height}u.image=l}else u.image.width=x.width,u.image.height=x.height,u.mipmaps=x.mipmaps;x.mipmapCount===1&&(u.minFilter=Nn),u.format=x.format,u.needsUpdate=!0,e&&e(u)},n,a);return u}}const Id=new WeakMap;class W0 extends Is{constructor(t){super(t)}load(t,e,n,a){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,l=Ll.get(`image:${t}`);if(l!==void 0){if(l.complete===!0)r.manager.itemStart(t),setTimeout(function(){e&&e(l),r.manager.itemEnd(t)},0);else{let y=Id.get(l);y===void 0&&(y=[],Id.set(l,y)),y.push({onLoad:e,onError:a})}return l}const u=F0("img");function d(){g(),e&&e(this);const y=Id.get(this)||[];for(let x=0;x<y.length;x++){const _=y[x];_.onLoad&&_.onLoad(this)}Id.delete(this),r.manager.itemEnd(t)}function p(y){g(),a&&a(y),Ll.remove(`image:${t}`);const x=Id.get(this)||[];for(let _=0;_<x.length;_++){const E=x[_];E.onError&&E.onError(y)}Id.delete(this),r.manager.itemError(t),r.manager.itemEnd(t)}function g(){u.removeEventListener("load",d,!1),u.removeEventListener("error",p,!1)}return u.addEventListener("load",d,!1),u.addEventListener("error",p,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),Ll.add(`image:${t}`,u),r.manager.itemStart(t),u.src=t,u}}class JD extends Is{constructor(t){super(t)}load(t,e,n,a){const r=new lg;r.colorSpace=Ka;const l=new W0(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function d(p){l.load(t[p],function(g){r.images[p]=g,u++,u===6&&(r.needsUpdate=!0,e&&e(r))},void 0,a)}for(let p=0;p<t.length;++p)d(p);return r}}class CE extends Is{constructor(t){super(t)}load(t,e,n,a){const r=this,l=new Wr,u=new br(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(r.withCredentials),u.load(t,function(d){let p;try{p=r.parse(d)}catch(g){if(a!==void 0)a(g);else{g(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:na,l.wrapT=p.wrapT!==void 0?p.wrapT:na,l.magFilter=p.magFilter!==void 0?p.magFilter:Nn,l.minFilter=p.minFilter!==void 0?p.minFilter:Nn,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=Ol),p.mipmapCount===1&&(l.minFilter=Nn),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,e&&e(l,p)},n,a),l}}class e6 extends Is{constructor(t){super(t)}load(t,e,n,a){const r=new ci,l=new W0(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(t,function(u){r.image=u,r.needsUpdate=!0,e!==void 0&&e(r)},n,a),r}}class Yu extends On{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ae(t),this.intensity=e}dispose(){this.dispatchEvent({type:"dispose"})}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,e}}class $D extends Yu{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ae(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}toJSON(t){const e=super.toJSON(t);return e.object.groundColor=this.groundColor.getHex(),e}}const jS=new rn,uw=new K,fw=new K;class RE{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new It(512,512),this.mapType=za,this.map=null,this.mapPass=null,this.matrix=new rn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cp,this._frameExtents=new It(1,1),this._viewportCount=1,this._viewports=[new di(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;uw.setFromMatrixPosition(t.matrixWorld),e.position.copy(uw),fw.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(fw),e.updateMatrixWorld(),jS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jS,e.coordinateSystem,e.reversedDepth),e.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(jS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class n6 extends RE{constructor(){super(new Fi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,n=hp*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,r=t.distance||e.far;(n!==e.fov||a!==e.aspect||r!==e.far)&&(e.fov=n,e.aspect=a,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class tN extends Yu{constructor(t,e,n=0,a=Math.PI/3,r=0,l=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.distance=n,this.angle=a,this.penumbra=r,this.decay=l,this.map=null,this.shadow=new n6}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.map=t.map,this.shadow=t.shadow.clone(),this}toJSON(t){const e=super.toJSON(t);return e.object.distance=this.distance,e.object.angle=this.angle,e.object.decay=this.decay,e.object.penumbra=this.penumbra,e.object.target=this.target.uuid,this.map&&this.map.isTexture&&(e.object.map=this.map.toJSON(t).uuid),e.object.shadow=this.shadow.toJSON(),e}}class i6 extends RE{constructor(){super(new Fi(90,1,.5,500)),this.isPointLightShadow=!0}}class DE extends Yu{constructor(t,e,n=0,a=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new i6}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}toJSON(t){const e=super.toJSON(t);return e.object.distance=this.distance,e.object.decay=this.decay,e.object.shadow=this.shadow.toJSON(),e}}class Fo extends O_{constructor(t=-1,e=1,n=1,a=-1,r=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=a,this.near=r,this.far=l,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,a,r,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let r=n-t,l=n+t,u=a+e,d=a-e;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=p*this.view.offsetX,l=r+p*this.view.width,u-=g*this.view.offsetY,d=u-g*this.view.height}this.projectionMatrix.makeOrthographic(r,l,u,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class a6 extends RE{constructor(){super(new Fo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class NE extends Yu{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.shadow=new a6}dispose(){super.dispose(),this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}toJSON(t){const e=super.toJSON(t);return e.object.shadow=this.shadow.toJSON(),e.object.target=this.target.uuid,e}}class n1 extends Yu{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class eN extends Yu{constructor(t,e,n=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class UE{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new K)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,a=t.y,r=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.282095),e.addScaledVector(l[1],.488603*a),e.addScaledVector(l[2],.488603*r),e.addScaledVector(l[3],.488603*n),e.addScaledVector(l[4],1.092548*(n*a)),e.addScaledVector(l[5],1.092548*(a*r)),e.addScaledVector(l[6],.315392*(3*r*r-1)),e.addScaledVector(l[7],1.092548*(n*r)),e.addScaledVector(l[8],.546274*(n*n-a*a)),e}getIrradianceAt(t,e){const n=t.x,a=t.y,r=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.886227),e.addScaledVector(l[1],2*.511664*a),e.addScaledVector(l[2],2*.511664*r),e.addScaledVector(l[3],2*.511664*n),e.addScaledVector(l[4],2*.429043*n*a),e.addScaledVector(l[5],2*.429043*a*r),e.addScaledVector(l[6],.743125*r*r-.247708),e.addScaledVector(l[7],2*.429043*n*r),e.addScaledVector(l[8],.429043*(n*n-a*a)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){const n=t.x,a=t.y,r=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*a,e[5]=1.092548*a*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-a*a)}}class nN extends Yu{constructor(t=new UE,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class i1 extends Is{constructor(t){super(t),this.textures={}}load(t,e,n,a){const r=this,l=new br(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(t,function(u){try{e(r.parse(JSON.parse(u)))}catch(d){a?a(d):Ke(d),r.manager.itemError(t)}},n,a)}parse(t){const e=this.textures;function n(r){return e[r]===void 0&&Re("MaterialLoader: Undefined texture",r),e[r]}const a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(a.uuid=t.uuid),t.name!==void 0&&(a.name=t.name),t.color!==void 0&&a.color!==void 0&&a.color.setHex(t.color),t.roughness!==void 0&&(a.roughness=t.roughness),t.metalness!==void 0&&(a.metalness=t.metalness),t.sheen!==void 0&&(a.sheen=t.sheen),t.sheenColor!==void 0&&(a.sheenColor=new Ae().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(t.emissive),t.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(t.specular),t.specularIntensity!==void 0&&(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(a.shininess=t.shininess),t.clearcoat!==void 0&&(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(a.dispersion=t.dispersion),t.iridescence!==void 0&&(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(a.transmission=t.transmission),t.thickness!==void 0&&(a.thickness=t.thickness),t.attenuationDistance!==void 0&&(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(a.fog=t.fog),t.flatShading!==void 0&&(a.flatShading=t.flatShading),t.blending!==void 0&&(a.blending=t.blending),t.combine!==void 0&&(a.combine=t.combine),t.side!==void 0&&(a.side=t.side),t.shadowSide!==void 0&&(a.shadowSide=t.shadowSide),t.opacity!==void 0&&(a.opacity=t.opacity),t.transparent!==void 0&&(a.transparent=t.transparent),t.alphaTest!==void 0&&(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(a.depthFunc=t.depthFunc),t.depthTest!==void 0&&(a.depthTest=t.depthTest),t.depthWrite!==void 0&&(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(a.blendSrc=t.blendSrc),t.blendDst!==void 0&&(a.blendDst=t.blendDst),t.blendEquation!==void 0&&(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(a.rotation=t.rotation),t.linewidth!==void 0&&(a.linewidth=t.linewidth),t.dashSize!==void 0&&(a.dashSize=t.dashSize),t.gapSize!==void 0&&(a.gapSize=t.gapSize),t.scale!==void 0&&(a.scale=t.scale),t.polygonOffset!==void 0&&(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(a.dithering=t.dithering),t.alphaToCoverage!==void 0&&(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(a.forceSinglePass=t.forceSinglePass),t.allowOverride!==void 0&&(a.allowOverride=t.allowOverride),t.visible!==void 0&&(a.visible=t.visible),t.toneMapped!==void 0&&(a.toneMapped=t.toneMapped),t.userData!==void 0&&(a.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?a.vertexColors=t.vertexColors>0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const l=t.uniforms[r];switch(a.uniforms[r]={},l.type){case"t":a.uniforms[r].value=n(l.value);break;case"c":a.uniforms[r].value=new Ae().setHex(l.value);break;case"v2":a.uniforms[r].value=new It().fromArray(l.value);break;case"v3":a.uniforms[r].value=new K().fromArray(l.value);break;case"v4":a.uniforms[r].value=new di().fromArray(l.value);break;case"m3":a.uniforms[r].value=new vn().fromArray(l.value);break;case"m4":a.uniforms[r].value=new rn().fromArray(l.value);break;default:a.uniforms[r].value=l.value}}if(t.defines!==void 0&&(a.defines=t.defines),t.vertexShader!==void 0&&(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)a.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(a.lights=t.lights),t.clipping!==void 0&&(a.clipping=t.clipping),t.size!==void 0&&(a.size=t.size),t.sizeAttenuation!==void 0&&(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(a.map=n(t.map)),t.matcap!==void 0&&(a.matcap=n(t.matcap)),t.alphaMap!==void 0&&(a.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(a.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(a.bumpScale=t.bumpScale),t.normalMap!==void 0&&(a.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),a.normalScale=new It().fromArray(r)}return t.displacementMap!==void 0&&(a.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(a.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(a.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(a.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(a.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(a.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(a.envMap=n(t.envMap)),t.envMapRotation!==void 0&&a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(a.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(a.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(a.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(a.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new It().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(a.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(a.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(a.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(a.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(a.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return i1.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:HD,SpriteMaterial:hE,RawShaderMaterial:bE,ShaderMaterial:Ri,PointsMaterial:F_,MeshPhysicalMaterial:$_,MeshStandardMaterial:vp,MeshPhongMaterial:GD,MeshToonMaterial:jD,MeshNormalMaterial:kD,MeshLambertMaterial:ME,MeshDepthMaterial:t1,MeshDistanceMaterial:EE,MeshBasicMaterial:Go,MeshMatcapMaterial:XD,LineDashedMaterial:YD,LineBasicMaterial:Ps,Material:gs};return new e[t]}}class eM{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class iN extends ln{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class aN extends Is{constructor(t){super(t)}load(t,e,n,a){const r=this,l=new br(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(t,function(u){try{e(r.parse(JSON.parse(u)))}catch(d){a?a(d):Ke(d),r.manager.itemError(t)}},n,a)}parse(t){const e={},n={};function a(_,E){if(e[E]!==void 0)return e[E];const T=_.interleavedBuffers[E],M=r(_,T.buffer),R=Kd(T.type,M),D=new P_(R,T.stride);return D.uuid=T.uuid,e[E]=D,D}function r(_,E){if(n[E]!==void 0)return n[E];const T=_.arrayBuffers[E],M=new Uint32Array(T).buffer;return n[E]=M,M}const l=t.isInstancedBufferGeometry?new iN:new ln,u=t.data.index;if(u!==void 0){const _=Kd(u.type,u.array);l.setIndex(new ii(_,1))}const d=t.data.attributes;for(const _ in d){const E=d[_];let C;if(E.isInterleavedBufferAttribute){const T=a(t.data,E.data);C=new dh(T,E.itemSize,E.offset,E.normalized)}else{const T=Kd(E.type,E.array),M=E.isInstancedBufferAttribute?mp:ii;C=new M(T,E.itemSize,E.normalized)}E.name!==void 0&&(C.name=E.name),E.usage!==void 0&&C.setUsage(E.usage),l.setAttribute(_,C)}const p=t.data.morphAttributes;if(p)for(const _ in p){const E=p[_],C=[];for(let T=0,M=E.length;T<M;T++){const R=E[T];let D;if(R.isInterleavedBufferAttribute){const L=a(t.data,R.data);D=new dh(L,R.itemSize,R.offset,R.normalized)}else{const L=Kd(R.type,R.array);D=new ii(L,R.itemSize,R.normalized)}R.name!==void 0&&(D.name=R.name),C.push(D)}l.morphAttributes[_]=C}t.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const y=t.data.groups||t.data.drawcalls||t.data.offsets;if(y!==void 0)for(let _=0,E=y.length;_!==E;++_){const C=y[_];l.addGroup(C.start,C.count,C.materialIndex)}const x=t.data.boundingSphere;return x!==void 0&&(l.boundingSphere=new Qa().fromJSON(x)),t.name&&(l.name=t.name),t.userData&&(l.userData=t.userData),l}}class s6 extends Is{constructor(t){super(t)}load(t,e,n,a){const r=this,l=this.path===""?eM.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||l;const u=new br(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(d){let p=null;try{p=JSON.parse(d)}catch(y){a!==void 0&&a(y),y("ObjectLoader: Can't parse "+t+".",y.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+t)),Ke("ObjectLoader: Can't load "+t);return}r.parse(p,e)},n,a)}async loadAsync(t,e){const n=this,a=this.path===""?eM.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const r=new br(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const l=await r.loadAsync(t,e),u=JSON.parse(l),d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(u)}parse(t,e){const n=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,a),l=this.parseImages(t.images,function(){e!==void 0&&e(p)}),u=this.parseTextures(t.textures,l),d=this.parseMaterials(t.materials,u),p=this.parseObject(t.object,r,d,u,n),g=this.parseSkeletons(t.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),e!==void 0){let y=!1;for(const x in l)if(l[x].data instanceof HTMLImageElement){y=!0;break}y===!1&&e(p)}return p}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),l=this.parseTextures(t.textures,r),u=this.parseMaterials(t.materials,l),d=this.parseObject(t.object,a,u,l,e),p=this.parseSkeletons(t.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(t){const e={};if(t!==void 0)for(let n=0,a=t.length;n<a;n++){const r=new uh().fromJSON(t[n]);e[r.uuid]=r}return e}parseSkeletons(t,e){const n={},a={};if(e.traverse(function(r){r.isBone&&(a[r.uuid]=r)}),t!==void 0)for(let r=0,l=t.length;r<l;r++){const u=new I_().fromJSON(t[r],a);n[u.uuid]=u}return n}parseGeometries(t,e){const n={};if(t!==void 0){const a=new aN;for(let r=0,l=t.length;r<l;r++){let u;const d=t[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":u=a.parse(d);break;default:d.type in cw?u=cw[d.type].fromJSON(d,e):Re(`ObjectLoader: Unsupported geometry type "${d.type}"`)}u.uuid=d.uuid,d.name!==void 0&&(u.name=d.name),d.userData!==void 0&&(u.userData=d.userData),n[d.uuid]=u}}return n}parseMaterials(t,e){const n={},a={};if(t!==void 0){const r=new i1;r.setTextures(e);for(let l=0,u=t.length;l<u;l++){const d=t[l];n[d.uuid]===void 0&&(n[d.uuid]=r.parse(d)),a[d.uuid]=n[d.uuid]}}return a}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const a=t[n],r=q0.parse(a);e[r.uuid]=r}return e}parseImages(t,e){const n=this,a={};let r;function l(d){return n.manager.itemStart(d),r.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function u(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return l(g)}else return d.data?{data:Kd(d.type,d.data),width:d.width,height:d.height}:null}if(t!==void 0&&t.length>0){const d=new e1(e);r=new W0(d),r.setCrossOrigin(this.crossOrigin);for(let p=0,g=t.length;p<g;p++){const y=t[p],x=y.url;if(Array.isArray(x)){const _=[];for(let E=0,C=x.length;E<C;E++){const T=x[E],M=u(T);M!==null&&(M instanceof HTMLImageElement?_.push(M):_.push(new Wr(M.data,M.width,M.height)))}a[y.uuid]=new Nu(_)}else{const _=u(y.url);a[y.uuid]=new Nu(_)}}}return a}async parseImagesAsync(t){const e=this,n={};let a;async function r(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:e.resourcePath+u;return await a.loadAsync(d)}else return l.data?{data:Kd(l.type,l.data),width:l.width,height:l.height}:null}if(t!==void 0&&t.length>0){a=new W0(this.manager),a.setCrossOrigin(this.crossOrigin);for(let l=0,u=t.length;l<u;l++){const d=t[l],p=d.url;if(Array.isArray(p)){const g=[];for(let y=0,x=p.length;y<x;y++){const _=p[y],E=await r(_);E!==null&&(E instanceof HTMLImageElement?g.push(E):g.push(new Wr(E.data,E.width,E.height)))}n[d.uuid]=new Nu(g)}else{const g=await r(d.url);n[d.uuid]=new Nu(g)}}}return n}parseTextures(t,e){function n(r,l){return typeof r=="number"?r:(Re("ObjectLoader.parseTexture: Constant should be in numeric form.",r),l[r])}const a={};if(t!==void 0)for(let r=0,l=t.length;r<l;r++){const u=t[r];u.image===void 0&&Re('ObjectLoader: No "image" specified for',u.uuid),e[u.image]===void 0&&Re("ObjectLoader: Undefined image",u.image);const d=e[u.image],p=d.data;let g;Array.isArray(p)?(g=new lg,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new Wr:g=new ci,p&&(g.needsUpdate=!0)),g.source=d,g.uuid=u.uuid,u.name!==void 0&&(g.name=u.name),u.mapping!==void 0&&(g.mapping=n(u.mapping,r6)),u.channel!==void 0&&(g.channel=u.channel),u.offset!==void 0&&g.offset.fromArray(u.offset),u.repeat!==void 0&&g.repeat.fromArray(u.repeat),u.center!==void 0&&g.center.fromArray(u.center),u.rotation!==void 0&&(g.rotation=u.rotation),u.wrap!==void 0&&(g.wrapS=n(u.wrap[0],hw),g.wrapT=n(u.wrap[1],hw)),u.format!==void 0&&(g.format=u.format),u.internalFormat!==void 0&&(g.internalFormat=u.internalFormat),u.type!==void 0&&(g.type=u.type),u.colorSpace!==void 0&&(g.colorSpace=u.colorSpace),u.minFilter!==void 0&&(g.minFilter=n(u.minFilter,dw)),u.magFilter!==void 0&&(g.magFilter=n(u.magFilter,dw)),u.anisotropy!==void 0&&(g.anisotropy=u.anisotropy),u.flipY!==void 0&&(g.flipY=u.flipY),u.generateMipmaps!==void 0&&(g.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(g.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(g.compareFunction=u.compareFunction),u.userData!==void 0&&(g.userData=u.userData),a[u.uuid]=g}return a}parseObject(t,e,n,a,r){let l;function u(x){return e[x]===void 0&&Re("ObjectLoader: Undefined geometry",x),e[x]}function d(x){if(x!==void 0){if(Array.isArray(x)){const _=[];for(let E=0,C=x.length;E<C;E++){const T=x[E];n[T]===void 0&&Re("ObjectLoader: Undefined material",T),_.push(n[T])}return _}return n[x]===void 0&&Re("ObjectLoader: Undefined material",x),n[x]}}function p(x){return a[x]===void 0&&Re("ObjectLoader: Undefined texture",x),a[x]}let g,y;switch(t.type){case"Scene":l=new Mh,t.background!==void 0&&(Number.isInteger(t.background)?l.background=new Ae(t.background):l.background=p(t.background)),t.environment!==void 0&&(l.environment=p(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?l.fog=new ug(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(l.fog=new cg(t.fog.color,t.fog.density)),t.fog.name!==""&&(l.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(l.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(l.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&l.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":l=new Fi(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(l.focus=t.focus),t.zoom!==void 0&&(l.zoom=t.zoom),t.filmGauge!==void 0&&(l.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(l.filmOffset=t.filmOffset),t.view!==void 0&&(l.view=Object.assign({},t.view));break;case"OrthographicCamera":l=new Fo(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(l.zoom=t.zoom),t.view!==void 0&&(l.view=Object.assign({},t.view));break;case"AmbientLight":l=new n1(t.color,t.intensity);break;case"DirectionalLight":l=new NE(t.color,t.intensity),l.target=t.target||"";break;case"PointLight":l=new DE(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":l=new eN(t.color,t.intensity,t.width,t.height);break;case"SpotLight":l=new tN(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),l.target=t.target||"";break;case"HemisphereLight":l=new $D(t.color,t.groundColor,t.intensity);break;case"LightProbe":const x=new UE().fromArray(t.sh);l=new nN(x,t.intensity);break;case"SkinnedMesh":g=u(t.geometry),y=d(t.material),l=new TD(g,y),t.bindMode!==void 0&&(l.bindMode=t.bindMode),t.bindMatrix!==void 0&&l.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(l.skeleton=t.skeleton);break;case"Mesh":g=u(t.geometry),y=d(t.material),l=new Zn(g,y);break;case"InstancedMesh":g=u(t.geometry),y=d(t.material);const _=t.count,E=t.instanceMatrix,C=t.instanceColor;l=new B_(g,y,_),l.instanceMatrix=new mp(new Float32Array(E.array),16),C!==void 0&&(l.instanceColor=new mp(new Float32Array(C.array),C.itemSize));break;case"BatchedMesh":g=u(t.geometry),y=d(t.material),l=new AD(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,y),l.geometry=g,l.perObjectFrustumCulled=t.perObjectFrustumCulled,l.sortObjects=t.sortObjects,l._drawRanges=t.drawRanges,l._reservedRanges=t.reservedRanges,l._geometryInfo=t.geometryInfo.map(T=>{let M=null,R=null;return T.boundingBox!==void 0&&(M=new ms().fromJSON(T.boundingBox)),T.boundingSphere!==void 0&&(R=new Qa().fromJSON(T.boundingSphere)),{...T,boundingBox:M,boundingSphere:R}}),l._instanceInfo=t.instanceInfo,l._availableInstanceIds=t._availableInstanceIds,l._availableGeometryIds=t._availableGeometryIds,l._nextIndexStart=t.nextIndexStart,l._nextVertexStart=t.nextVertexStart,l._geometryCount=t.geometryCount,l._maxInstanceCount=t.maxInstanceCount,l._maxVertexCount=t.maxVertexCount,l._maxIndexCount=t.maxIndexCount,l._geometryInitialized=t.geometryInitialized,l._matricesTexture=p(t.matricesTexture.uuid),l._indirectTexture=p(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(l._colorsTexture=p(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(l.boundingSphere=new Qa().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&&(l.boundingBox=new ms().fromJSON(t.boundingBox));break;case"LOD":l=new ED;break;case"Line":l=new Hu(u(t.geometry),d(t.material));break;case"LineLoop":l=new wD(u(t.geometry),d(t.material));break;case"LineSegments":l=new Gl(u(t.geometry),d(t.material));break;case"PointCloud":case"Points":l=new pE(u(t.geometry),d(t.material));break;case"Sprite":l=new MD(d(t.material));break;case"Group":l=new Ba;break;case"Bone":l=new dE;break;default:l=new On}if(l.uuid=t.uuid,t.name!==void 0&&(l.name=t.name),t.matrix!==void 0?(l.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=t.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(t.position!==void 0&&l.position.fromArray(t.position),t.rotation!==void 0&&l.rotation.fromArray(t.rotation),t.quaternion!==void 0&&l.quaternion.fromArray(t.quaternion),t.scale!==void 0&&l.scale.fromArray(t.scale)),t.up!==void 0&&l.up.fromArray(t.up),t.castShadow!==void 0&&(l.castShadow=t.castShadow),t.receiveShadow!==void 0&&(l.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(l.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(l.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(l.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(l.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(l.visible=t.visible),t.frustumCulled!==void 0&&(l.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(l.renderOrder=t.renderOrder),t.userData!==void 0&&(l.userData=t.userData),t.layers!==void 0&&(l.layers.mask=t.layers),t.children!==void 0){const x=t.children;for(let _=0;_<x.length;_++)l.add(this.parseObject(x[_],e,n,a,r))}if(t.animations!==void 0){const x=t.animations;for(let _=0;_<x.length;_++){const E=x[_];l.animations.push(r[E])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(l.autoUpdate=t.autoUpdate);const x=t.levels;for(let _=0;_<x.length;_++){const E=x[_],C=l.getObjectByProperty("uuid",E.object);C!==void 0&&l.addLevel(C,E.distance,E.hysteresis)}}return l}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=e[n.skeleton];a===void 0?Re("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,a=t.getObjectByProperty("uuid",n);a!==void 0?e.target=a:e.target=new On}})}}const r6={UVMapping:zu,CubeReflectionMapping:Vo,CubeRefractionMapping:Fu,EquirectangularReflectionMapping:op,EquirectangularRefractionMapping:U0,CubeUVReflectionMapping:wp},hw={RepeatWrapping:O0,ClampToEdgeWrapping:na,MirroredRepeatWrapping:L0},dw={NearestFilter:la,NearestMipmapNearestFilter:nE,NearestMipmapLinearFilter:Zd,LinearFilter:Nn,LinearMipmapNearestFilter:p0,LinearMipmapLinearFilter:Ol},kS=new WeakMap;class o6 extends Is{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Re("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Re("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(t){return this.options=t,this}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,l=Ll.get(`image-bitmap:${t}`);if(l!==void 0){if(r.manager.itemStart(t),l.then){l.then(p=>{if(kS.has(l)===!0)a&&a(kS.get(l)),r.manager.itemError(t),r.manager.itemEnd(t);else return e&&e(p),r.manager.itemEnd(t),p});return}return setTimeout(function(){e&&e(l),r.manager.itemEnd(t)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,u.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(t,u).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(p){return Ll.add(`image-bitmap:${t}`,p),e&&e(p),r.manager.itemEnd(t),p}).catch(function(p){a&&a(p),kS.set(d,p),Ll.remove(`image-bitmap:${t}`),r.manager.itemError(t),r.manager.itemEnd(t)});Ll.add(`image-bitmap:${t}`,d),r.manager.itemStart(t)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let By;class OE{static getContext(){return By===void 0&&(By=new(window.AudioContext||window.webkitAudioContext)),By}static setContext(t){By=t}}class l6 extends Is{constructor(t){super(t)}load(t,e,n,a){const r=this,l=new br(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(d){try{const p=d.slice(0);OE.getContext().decodeAudioData(p,function(y){e(y)}).catch(u)}catch(p){u(p)}},n,a);function u(d){a?a(d):Ke(d),r.manager.itemError(t)}}}const pw=new rn,mw=new rn,Hf=new rn;class c6{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Fi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Fi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Hf.copy(t.projectionMatrix);const a=e.eyeSep/2,r=a*e.near/e.focus,l=e.near*Math.tan(ch*e.fov*.5)/e.zoom;let u,d;mw.elements[12]=-a,pw.elements[12]=a,u=-l*e.aspect+r,d=l*e.aspect+r,Hf.elements[0]=2*e.near/(d-u),Hf.elements[8]=(d+u)/(d-u),this.cameraL.projectionMatrix.copy(Hf),u=-l*e.aspect-r,d=l*e.aspect-r,Hf.elements[0]=2*e.near/(d-u),Hf.elements[8]=(d+u)/(d-u),this.cameraR.projectionMatrix.copy(Hf)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(mw),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(pw)}}class sN extends Fi{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class Rp{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const Gf=new K,XS=new Fa,u6=new K,jf=new K,kf=new K;class f6 extends On{constructor(){super(),this.type="AudioListener",this.context=OE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Rp}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Gf,XS,u6),jf.set(0,0,-1).applyQuaternion(XS),kf.set(0,1,0).applyQuaternion(XS),e.positionX){const n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Gf.x,n),e.positionY.linearRampToValueAtTime(Gf.y,n),e.positionZ.linearRampToValueAtTime(Gf.z,n),e.forwardX.linearRampToValueAtTime(jf.x,n),e.forwardY.linearRampToValueAtTime(jf.y,n),e.forwardZ.linearRampToValueAtTime(jf.z,n),e.upX.linearRampToValueAtTime(kf.x,n),e.upY.linearRampToValueAtTime(kf.y,n),e.upZ.linearRampToValueAtTime(kf.z,n)}else e.setPosition(Gf.x,Gf.y,Gf.z),e.setOrientation(jf.x,jf.y,jf.z,kf.x,kf.y,kf.z)}}class rN extends On{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){Re("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Re("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Re("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){Re("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){Re("Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Re("Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){Re("Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(Re("Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const Xf=new K,gw=new Fa,h6=new K,Yf=new K;class d6 extends rN{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Xf,gw,h6),Yf.set(0,0,1).applyQuaternion(gw);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Xf.x,n),e.positionY.linearRampToValueAtTime(Xf.y,n),e.positionZ.linearRampToValueAtTime(Xf.z,n),e.orientationX.linearRampToValueAtTime(Yf.x,n),e.orientationY.linearRampToValueAtTime(Yf.y,n),e.orientationZ.linearRampToValueAtTime(Yf.z,n)}else e.setPosition(Xf.x,Xf.y,Xf.z),e.setOrientation(Yf.x,Yf.y,Yf.z)}}class p6{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class oN{constructor(t,e,n){this.binding=t,this.valueSize=n;let a,r,l;switch(e){case"quaternion":a=this._slerp,r=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,r=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,r=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=r,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,a=this.valueSize,r=t*a+a;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==a;++u)n[r+u]=n[u];l=e}else{l+=e;const u=e/l;this._mixBufferRegion(n,r,0,u,a)}this.cumulativeWeight=l}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,a=t*e+e,r=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=e*this._origIndex;this._mixBufferRegion(n,a,d,1-r,e)}l>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*e,1,e);for(let d=e,p=e+e;d!==p;++d)if(n[d]!==n[d+e]){u.setValue(n,a);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,a=n*this._origIndex;t.getValue(e,a);for(let r=n,l=a;r!==l;++r)e[r]=e[a+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,a,r){if(a>=.5)for(let l=0;l!==r;++l)t[e+l]=t[n+l]}_slerp(t,e,n,a){Fa.slerpFlat(t,e,t,e,t,n,a)}_slerpAdditive(t,e,n,a,r){const l=this._workIndex*r;Fa.multiplyQuaternionsFlat(t,l,t,e,t,n),Fa.slerpFlat(t,e,t,e,t,l,a)}_lerp(t,e,n,a,r){const l=1-a;for(let u=0;u!==r;++u){const d=e+u;t[d]=t[d]*l+t[n+u]*a}}_lerpAdditive(t,e,n,a,r){for(let l=0;l!==r;++l){const u=e+l;t[u]=t[u]+t[n+l]*a}}}const LE="\\[\\]\\.:\\/",m6=new RegExp("["+LE+"]","g"),PE="[^"+LE+"]",g6="[^"+LE.replace("\\.","")+"]",v6=/((?:WC+[\/:])*)/.source.replace("WC",PE),y6=/(WCOD+)?/.source.replace("WCOD",g6),x6=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PE),_6=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PE),S6=new RegExp("^"+v6+y6+x6+_6+"$"),b6=["material","materials","bones","map"];class M6{constructor(t,e,n){const a=n||Gn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,r=n.length;a!==r;++a)n[a].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Gn{constructor(t,e,n){this.path=e,this.parsedPath=n||Gn.parseTrackName(e),this.node=Gn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Gn.Composite(t,e,n):new Gn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(m6,"")}static parseTrackName(t){const e=S6.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const r=n.nodeName.substring(a+1);b6.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(r){for(let l=0;l<r.length;l++){const u=r[l];if(u.name===e||u.uuid===e)return u;const d=n(u.children);if(d)return d}return null},a=n(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)t[e++]=n[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)n[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)n[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,r=n.length;a!==r;++a)n[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,a=e.propertyName;let r=e.propertyIndex;if(t||(t=Gn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){Re("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=e.objectIndex;switch(n){case"materials":if(!t.material){Ke("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){Ke("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){Ke("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let g=0;g<t.length;g++)if(t[g].name===p){p=g;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){Ke("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){Ke("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){Ke("PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(p!==void 0){if(t[p]===void 0){Ke("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[p]}}const l=t[a];if(l===void 0){const p=e.nodeName;Ke("PropertyBinding: Trying to update property for track: "+p+"."+a+" but it wasn't found.",t);return}let u=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?u=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){Ke("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){Ke("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=r}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gn.Composite=M6;Gn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gn.prototype.GetterByBindingType=[Gn.prototype._getValue_direct,Gn.prototype._getValue_array,Gn.prototype._getValue_arrayElement,Gn.prototype._getValue_toArray];Gn.prototype.SetterByBindingTypeAndVersioning=[[Gn.prototype._setValue_direct,Gn.prototype._setValue_direct_setNeedsUpdate,Gn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_array,Gn.prototype._setValue_array_setNeedsUpdate,Gn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_arrayElement,Gn.prototype._setValue_arrayElement_setNeedsUpdate,Gn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_fromArray,Gn.prototype._setValue_fromArray_setNeedsUpdate,Gn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class E6{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Sr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,a=arguments.length;n!==a;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,a=this._parsedPaths,r=this._bindings,l=r.length;let u,d=t.length,p=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const x=arguments[g],_=x.uuid;let E=e[_];if(E===void 0){E=d++,e[_]=E,t.push(x);for(let C=0,T=l;C!==T;++C)r[C].push(new Gn(x,n[C],a[C]))}else if(E<p){u=t[E];const C=--p,T=t[C];e[T.uuid]=E,t[E]=T,e[_]=C,t[C]=x;for(let M=0,R=l;M!==R;++M){const D=r[M],L=D[C];let P=D[E];D[E]=L,P===void 0&&(P=new Gn(x,n[M],a[M])),D[C]=P}}else t[E]!==u&&Ke("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let r=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const d=arguments[l],p=d.uuid,g=e[p];if(g!==void 0&&g>=r){const y=r++,x=t[y];e[x.uuid]=g,t[g]=x,e[p]=y,t[y]=d;for(let _=0,E=a;_!==E;++_){const C=n[_],T=C[y],M=C[g];C[g]=T,C[y]=M}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let r=this.nCachedObjects_,l=t.length;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],g=p.uuid,y=e[g];if(y!==void 0)if(delete e[g],y<r){const x=--r,_=t[x],E=--l,C=t[E];e[_.uuid]=y,t[y]=_,e[C.uuid]=x,t[x]=C,t.pop();for(let T=0,M=a;T!==M;++T){const R=n[T],D=R[x],L=R[E];R[y]=D,R[x]=L,R.pop()}}else{const x=--l,_=t[x];x>0&&(e[_.uuid]=y),t[y]=_,t.pop();for(let E=0,C=a;E!==C;++E){const T=n[E];T[y]=T[x],T.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let a=n[t];const r=this._bindings;if(a!==void 0)return r[a];const l=this._paths,u=this._parsedPaths,d=this._objects,p=d.length,g=this.nCachedObjects_,y=new Array(p);a=r.length,n[t]=a,l.push(t),u.push(e),r.push(y);for(let x=g,_=d.length;x!==_;++x){const E=d[x];y[x]=new Gn(E,t,e)}return y}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const a=this._paths,r=this._parsedPaths,l=this._bindings,u=l.length-1,d=l[u],p=t[u];e[p]=n,l[n]=d,l.pop(),r[n]=r[u],r.pop(),a[n]=a[u],a.pop()}}}class lN{constructor(t,e,n=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=a;const r=e.tracks,l=r.length,u=new Array(l),d={endingStart:eh,endingEnd:eh};for(let p=0;p!==l;++p){const g=r[p].createInterpolant(null);u[p]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=sD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const a=this._clip.duration,r=t._clip.duration,l=r/a,u=a/r;t.warp(1,l,e),this.warp(u,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const a=this._mixer,r=a.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=a._lendControlInterpolant(),this._timeScaleInterpolant=u);const d=u.parameterPositions,p=u.sampleValues;return d[0]=r,d[1]=r+n,p[0]=t/l,p[1]=e/l,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,a){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const d=(t-r)*n;d<0||n===0?e=0:(this._startTime=null,e=n*d)}e*=this._updateTimeScale(t);const l=this._updateTime(e),u=this._updateWeight(t);if(u>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case oE:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulateAdditive(u);break;case w_:default:for(let g=0,y=d.length;g!==y;++g)d[g].evaluate(l),p[g].accumulate(a,u)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let a=this.time+t,r=this._loopCount;const l=n===rD;if(t===0)return r===-1?a:l&&(r&1)===1?e-a:a;if(n===aD){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a>=e)a=e;else if(a<0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),a>=e||a<0){const u=Math.floor(a/e);a-=e*u,r+=Math.abs(u);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?e:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===1){const p=t<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=r,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=a;if(l&&(r&1)===1)return e-a}return a}_setEndings(t,e,n){const a=this._interpolantSettings;n?(a.endingStart=nh,a.endingEnd=nh):(t?a.endingStart=this.zeroSlopeAtStart?nh:eh:a.endingStart=I0,e?a.endingEnd=this.zeroSlopeAtEnd?nh:eh:a.endingEnd=I0)}_scheduleFading(t,e,n){const a=this._mixer,r=a.time;let l=this._weightInterpolant;l===null&&(l=a._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,d=l.sampleValues;return u[0]=r,d[0]=e,u[1]=r+t,d[1]=n,this}}const T6=new Float32Array(1);class A6 extends Hl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,a=t._clip.tracks,r=a.length,l=t._propertyBindings,u=t._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let g=p[d];g===void 0&&(g={},p[d]=g);for(let y=0;y!==r;++y){const x=a[y],_=x.name;let E=g[_];if(E!==void 0)++E.referenceCount,l[y]=E;else{if(E=l[y],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,d,_));continue}const C=e&&e._propertyBindings[y].binding.parsedPath;E=new oN(Gn.create(n,_,C),x.ValueTypeName,x.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,d,_),l[y]=E}u[y].resultBuffer=E.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,a=t._clip.uuid,r=this._actionsByClip[a];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,a,n)}const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const r=e[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const r=e[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const a=this._actions,r=this._actionsByClip;let l=r[e];if(l===void 0)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=l;else{const u=l.knownActions;t._byClipCacheIndex=u.length,u.push(t)}t._cacheIndex=a.length,a.push(t),l.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],a=t._cacheIndex;n._cacheIndex=a,e[a]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,l=this._actionsByClip,u=l[r],d=u.knownActions,p=d[d.length-1],g=t._byClipCacheIndex;p._byClipCacheIndex=g,d[g]=p,d.pop(),t._byClipCacheIndex=null;const y=u.actionByRoot,x=(t._localRoot||this._root).uuid;delete y[x],d.length===0&&delete l[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const r=e[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,a=this._nActiveActions++,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,a=--this._nActiveActions,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const a=this._bindingsByRootAndName,r=this._bindings;let l=a[e];l===void 0&&(l={},a[e]=l),l[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,a=n.rootNode.uuid,r=n.path,l=this._bindingsByRootAndName,u=l[a],d=e[e.length-1],p=t._cacheIndex;d._cacheIndex=p,e[p]=d,e.pop(),delete u[r],Object.keys(u).length===0&&delete l[a]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,a=this._nActiveBindings++,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,a=--this._nActiveBindings,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new AE(new Float32Array(2),new Float32Array(2),1,T6),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,a=--this._nActiveControlInterpolants,r=e[a];t.__cacheIndex=a,e[a]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const a=e||this._root,r=a.uuid;let l=typeof t=="string"?q0.findByName(a,t):t;const u=l!==null?l.uuid:t,d=this._actionsByClip[u];let p=null;if(n===void 0&&(l!==null?n=l.blendMode:n=w_),d!==void 0){const y=d.actionByRoot[r];if(y!==void 0&&y.blendMode===n)return y;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new lN(this,l,e,n);return this._bindAction(g,p),this._addInactiveAction(g,u,r),g}existingAction(t,e){const n=e||this._root,a=n.uuid,r=typeof t=="string"?q0.findByName(n,t):t,l=r?r.uuid:t,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[a]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,a=this.time+=t,r=Math.sign(t),l=this._accuIndex^=1;for(let p=0;p!==n;++p)e[p]._update(a,t,r,l);const u=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)u[p].apply(l);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,a=this._actionsByClip,r=a[n];if(r!==void 0){const l=r.knownActions;for(let u=0,d=l.length;u!==d;++u){const p=l[u];this._deactivateAction(p);const g=p._cacheIndex,y=e[e.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,y._cacheIndex=g,e[g]=y,e.pop(),this._removeInactiveBindingsForAction(p)}delete a[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const l in n){const u=n[l].actionByRoot,d=u[e];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,r=a[e];if(r!==void 0)for(const l in r){const u=r[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class w6 extends cE{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new U_(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class IE{constructor(t){this.value=t}clone(){return new IE(this.value.clone===void 0?this.value:this.value.clone())}}let C6=0;class R6 extends Hl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:C6++}),this.name="",this.usage=z0,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,a=e.length;n<a;n++){const r=Array.isArray(e[n])?e[n]:[e[n]];for(let l=0;l<r.length;l++)this.uniforms.push(r[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class D6 extends P_{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class N6{constructor(t,e,n,a,r,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=a,this.count=r,this.normalized=l,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const vw=new rn;class BE{constructor(t,e,n=0,a=1/0){this.ray=new ku(t,e),this.near=n,this.far=a,this.camera=null,this.layers=new dp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):Ke("Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return vw.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(vw),this}intersectObject(t,e=!0,n=[]){return nM(t,this,n,e),n.sort(yw),n}intersectObjects(t,e=!0,n=[]){for(let a=0,r=t.length;a<r;a++)nM(t[a],this,n,e);return n.sort(yw),n}}function yw(i,t){return i.distance-t.distance}function nM(i,t,e,n){let a=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(a=!1),a===!0&&n===!0){const r=i.children;for(let l=0,u=r.length;l<u;l++)nM(r[l],t,e,!0)}}class U6{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(t){this._document=t,t.hidden!==void 0&&(this._pageVisibilityHandler=O6.bind(this),t.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(t){return this._timescale=t,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(t){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(t!==void 0?t:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function O6(){this._document.hidden===!1&&this.reset()}class yp{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=sn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(sn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class L6{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class zE{constructor(t,e,n,a){zE.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,a){const r=this.elements;return r[0]=t,r[2]=e,r[1]=n,r[3]=a,this}}const xw=new It;class P6{constructor(t=new It(1/0,1/0),e=new It(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=xw.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,xw).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const _w=new K,zy=new K,Bd=new K,zd=new K,YS=new K,I6=new K,B6=new K;class z6{constructor(t=new K,e=new K){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){_w.subVectors(t,this.start),zy.subVectors(this.end,this.start);const n=zy.dot(zy);let r=zy.dot(_w)/n;return e&&(r=sn(r,0,1)),r}closestPointToPoint(t,e,n){const a=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(a).add(this.start)}distanceSqToLine3(t,e=I6,n=B6){const a=10000000000000001e-32;let r,l;const u=this.start,d=t.start,p=this.end,g=t.end;Bd.subVectors(p,u),zd.subVectors(g,d),YS.subVectors(u,d);const y=Bd.dot(Bd),x=zd.dot(zd),_=zd.dot(YS);if(y<=a&&x<=a)return e.copy(u),n.copy(d),e.sub(n),e.dot(e);if(y<=a)r=0,l=_/x,l=sn(l,0,1);else{const E=Bd.dot(YS);if(x<=a)l=0,r=sn(-E/y,0,1);else{const C=Bd.dot(zd),T=y*x-C*C;T!==0?r=sn((C*_-E*x)/T,0,1):r=0,l=(C*r+_)/x,l<0?(l=0,r=sn(-E/y,0,1)):l>1&&(l=1,r=sn((C-E)/y,0,1))}}return e.copy(u).add(Bd.multiplyScalar(r)),n.copy(d).add(zd.multiplyScalar(l)),e.sub(n),e.dot(e)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Sw=new K;class F6 extends On{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new ln,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,d=32;l<d;l++,u++){const p=l/d*Math.PI*2,g=u/d*Math.PI*2;a.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new Be(a,3));const r=new Ps({fog:!1,toneMapped:!1});this.cone=new Gl(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Sw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Sw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Eu=new K,Fy=new rn,qS=new rn;class V6 extends Gl{constructor(t){const e=cN(t),n=new ln,a=[],r=[];for(let p=0;p<e.length;p++){const g=e[p];g.parent&&g.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new Be(a,3)),n.setAttribute("color",new Be(r,3));const l=new Ps({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;const u=new Ae(255),d=new Ae(65280);this.setColors(u,d)}updateMatrixWorld(t){const e=this.bones,n=this.geometry,a=n.getAttribute("position");qS.copy(this.root.matrixWorld).invert();for(let r=0,l=0;r<e.length;r++){const u=e[r];u.parent&&u.parent.isBone&&(Fy.multiplyMatrices(qS,u.matrixWorld),Eu.setFromMatrixPosition(Fy),a.setXYZ(l,Eu.x,Eu.y,Eu.z),Fy.multiplyMatrices(qS,u.parent.matrixWorld),Eu.setFromMatrixPosition(Fy),a.setXYZ(l+1,Eu.x,Eu.y,Eu.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}setColors(t,e){const a=this.geometry.getAttribute("color");for(let r=0;r<a.count;r+=2)a.setXYZ(r,t.r,t.g,t.b),a.setXYZ(r+1,e.r,e.g,e.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function cN(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...cN(i.children[e]));return t}class H6 extends Zn{constructor(t,e,n){const a=new mg(e,4,2),r=new Go({wireframe:!0,fog:!1,toneMapped:!1});super(a,r),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const G6=new K,bw=new Ae,Mw=new Ae;class j6 extends On{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new pg(e);a.rotateY(Math.PI*.5),this.material=new Go({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=a.getAttribute("position"),l=new Float32Array(r.count*3);a.setAttribute("color",new ii(l,3)),this.add(new Zn(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");bw.copy(this.light.color),Mw.copy(this.light.groundColor);for(let n=0,a=e.count;n<a;n++){const r=n<a/2?bw:Mw;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(G6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class k6 extends Gl{constructor(t=10,e=10,n=4473924,a=8947848){n=new Ae(n),a=new Ae(a);const r=e/2,l=t/e,u=t/2,d=[],p=[];for(let x=0,_=0,E=-u;x<=e;x++,E+=l){d.push(-u,0,E,u,0,E),d.push(E,0,-u,E,0,u);const C=x===r?n:a;C.toArray(p,_),_+=3,C.toArray(p,_),_+=3,C.toArray(p,_),_+=3,C.toArray(p,_),_+=3}const g=new ln;g.setAttribute("position",new Be(d,3)),g.setAttribute("color",new Be(p,3));const y=new Ps({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class X6 extends Gl{constructor(t=10,e=16,n=8,a=64,r=4473924,l=8947848){r=new Ae(r),l=new Ae(l);const u=[],d=[];if(e>1)for(let y=0;y<e;y++){const x=y/e*(Math.PI*2),_=Math.sin(x)*t,E=Math.cos(x)*t;u.push(0,0,0),u.push(_,0,E);const C=y&1?r:l;d.push(C.r,C.g,C.b),d.push(C.r,C.g,C.b)}for(let y=0;y<n;y++){const x=y&1?r:l,_=t-t/n*y;for(let E=0;E<a;E++){let C=E/a*(Math.PI*2),T=Math.sin(C)*_,M=Math.cos(C)*_;u.push(T,0,M),d.push(x.r,x.g,x.b),C=(E+1)/a*(Math.PI*2),T=Math.sin(C)*_,M=Math.cos(C)*_,u.push(T,0,M),d.push(x.r,x.g,x.b)}}const p=new ln;p.setAttribute("position",new Be(u,3)),p.setAttribute("color",new Be(d,3));const g=new Ps({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Ew=new K,Vy=new K,Tw=new K;class Y6 extends On{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let a=new ln;a.setAttribute("position",new Be([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new Ps({fog:!1,toneMapped:!1});this.lightPlane=new Hu(a,r),this.add(this.lightPlane),a=new ln,a.setAttribute("position",new Be([0,0,0,0,0,1],3)),this.targetLine=new Hu(a,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Ew.setFromMatrixPosition(this.light.matrixWorld),Vy.setFromMatrixPosition(this.light.target.matrixWorld),Tw.subVectors(Vy,Ew),this.lightPlane.lookAt(Vy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Vy),this.targetLine.scale.z=Tw.length()}}const Hy=new K,ta=new O_;class q6 extends Gl{constructor(t){const e=new ln,n=new Ps({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],r=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(E,C){d(E),d(C)}function d(E){a.push(0,0,0),r.push(0,0,0),l[E]===void 0&&(l[E]=[]),l[E].push(a.length/3-1)}e.setAttribute("position",new Be(a,3)),e.setAttribute("color",new Be(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new Ae(16755200),g=new Ae(16711680),y=new Ae(43775),x=new Ae(16777215),_=new Ae(3355443);this.setColors(p,g,y,x,_)}setColors(t,e,n,a,r){const u=this.geometry.getAttribute("color");return u.setXYZ(0,t.r,t.g,t.b),u.setXYZ(1,t.r,t.g,t.b),u.setXYZ(2,t.r,t.g,t.b),u.setXYZ(3,t.r,t.g,t.b),u.setXYZ(4,t.r,t.g,t.b),u.setXYZ(5,t.r,t.g,t.b),u.setXYZ(6,t.r,t.g,t.b),u.setXYZ(7,t.r,t.g,t.b),u.setXYZ(8,t.r,t.g,t.b),u.setXYZ(9,t.r,t.g,t.b),u.setXYZ(10,t.r,t.g,t.b),u.setXYZ(11,t.r,t.g,t.b),u.setXYZ(12,t.r,t.g,t.b),u.setXYZ(13,t.r,t.g,t.b),u.setXYZ(14,t.r,t.g,t.b),u.setXYZ(15,t.r,t.g,t.b),u.setXYZ(16,t.r,t.g,t.b),u.setXYZ(17,t.r,t.g,t.b),u.setXYZ(18,t.r,t.g,t.b),u.setXYZ(19,t.r,t.g,t.b),u.setXYZ(20,t.r,t.g,t.b),u.setXYZ(21,t.r,t.g,t.b),u.setXYZ(22,t.r,t.g,t.b),u.setXYZ(23,t.r,t.g,t.b),u.setXYZ(24,e.r,e.g,e.b),u.setXYZ(25,e.r,e.g,e.b),u.setXYZ(26,e.r,e.g,e.b),u.setXYZ(27,e.r,e.g,e.b),u.setXYZ(28,e.r,e.g,e.b),u.setXYZ(29,e.r,e.g,e.b),u.setXYZ(30,e.r,e.g,e.b),u.setXYZ(31,e.r,e.g,e.b),u.setXYZ(32,n.r,n.g,n.b),u.setXYZ(33,n.r,n.g,n.b),u.setXYZ(34,n.r,n.g,n.b),u.setXYZ(35,n.r,n.g,n.b),u.setXYZ(36,n.r,n.g,n.b),u.setXYZ(37,n.r,n.g,n.b),u.setXYZ(38,a.r,a.g,a.b),u.setXYZ(39,a.r,a.g,a.b),u.setXYZ(40,r.r,r.g,r.b),u.setXYZ(41,r.r,r.g,r.b),u.setXYZ(42,r.r,r.g,r.b),u.setXYZ(43,r.r,r.g,r.b),u.setXYZ(44,r.r,r.g,r.b),u.setXYZ(45,r.r,r.g,r.b),u.setXYZ(46,r.r,r.g,r.b),u.setXYZ(47,r.r,r.g,r.b),u.setXYZ(48,r.r,r.g,r.b),u.setXYZ(49,r.r,r.g,r.b),u.needsUpdate=!0,this}update(){const t=this.geometry,e=this.pointMap,n=1,a=1;let r,l;if(ta.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,l=0;else if(this.camera.coordinateSystem===_r)r=-1,l=1;else if(this.camera.coordinateSystem===up)r=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ra("c",e,t,ta,0,0,r),ra("t",e,t,ta,0,0,l),ra("n1",e,t,ta,-n,-a,r),ra("n2",e,t,ta,n,-a,r),ra("n3",e,t,ta,-n,a,r),ra("n4",e,t,ta,n,a,r),ra("f1",e,t,ta,-n,-a,l),ra("f2",e,t,ta,n,-a,l),ra("f3",e,t,ta,-n,a,l),ra("f4",e,t,ta,n,a,l),ra("u1",e,t,ta,n*.7,a*1.1,r),ra("u2",e,t,ta,-n*.7,a*1.1,r),ra("u3",e,t,ta,0,a*2,r),ra("cf1",e,t,ta,-n,0,l),ra("cf2",e,t,ta,n,0,l),ra("cf3",e,t,ta,0,-a,l),ra("cf4",e,t,ta,0,a,l),ra("cn1",e,t,ta,-n,0,r),ra("cn2",e,t,ta,n,0,r),ra("cn3",e,t,ta,0,-a,r),ra("cn4",e,t,ta,0,a,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ra(i,t,e,n,a,r,l){Hy.set(a,r,l).unproject(n);const u=t[i];if(u!==void 0){const d=e.getAttribute("position");for(let p=0,g=u.length;p<g;p++)d.setXYZ(u[p],Hy.x,Hy.y,Hy.z)}}const Gy=new ms;class W6 extends Gl{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),r=new ln;r.setIndex(new ii(n,1)),r.setAttribute("position",new ii(a,3)),super(r,new Ps({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Gy.setFromObject(this.object),Gy.isEmpty())return;const t=Gy.min,e=Gy.max,n=this.geometry.attributes.position,a=n.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z6 extends Gl{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new ln;r.setIndex(new ii(n,1)),r.setAttribute("position",new Be(a,3)),super(r,new Ps({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class K6 extends Hu{constructor(t,e=1,n=16776960){const a=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new ln;l.setAttribute("position",new Be(r,3)),l.computeBoundingSphere(),super(l,new Ps({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new ln;d.setAttribute("position",new Be(u,3)),d.computeBoundingSphere(),this.add(new Zn(d,new Go({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Aw=new K;let jy,WS;class Q6 extends On{constructor(t=new K(0,0,1),e=new K(0,0,0),n=1,a=16776960,r=n*.2,l=r*.2){super(),this.type="ArrowHelper",jy===void 0&&(jy=new ln,jy.setAttribute("position",new Be([0,0,0,0,1,0],3)),WS=new hg(.5,1,5,1),WS.translate(0,-.5,0)),this.position.copy(e),this.line=new Hu(jy,new Ps({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Zn(WS,new Go({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,l)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Aw.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Aw,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class J6 extends Gl{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new ln;a.setAttribute("position",new Be(e,3)),a.setAttribute("color",new Be(n,3));const r=new Ps({vertexColors:!0,toneMapped:!1});super(a,r),this.type="AxesHelper"}setColors(t,e,n){const a=new Ae,r=this.geometry.attributes.color.array;return a.set(t),a.toArray(r,0),a.toArray(r,3),a.set(e),a.toArray(r,6),a.toArray(r,9),a.set(n),a.toArray(r,12),a.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $6{constructor(){this.type="ShapePath",this.color=new Ae,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new o_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,a){return this.currentPath.quadraticCurveTo(t,e,n,a),this}bezierCurveTo(t,e,n,a,r,l){return this.currentPath.bezierCurveTo(t,e,n,a,r,l),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(M){const R=[];for(let D=0,L=M.length;D<L;D++){const P=M[D],B=new uh;B.curves=P.curves,R.push(B)}return R}function n(M,R){const D=R.length;let L=!1;for(let P=D-1,B=0;B<D;P=B++){let G=R[P],V=R[B],N=V.x-G.x,I=V.y-G.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(G=R[B],N=-N,V=R[P],I=-I),M.y<G.y||M.y>V.y)continue;if(M.y===G.y){if(M.x===G.x)return!0}else{const W=I*(M.x-G.x)-N*(M.y-G.y);if(W===0)return!0;if(W<0)continue;L=!L}}else{if(M.y!==G.y)continue;if(V.x<=M.x&&M.x<=G.x||G.x<=M.x&&M.x<=V.x)return!0}}return L}const a=zo.isClockWise,r=this.subPaths;if(r.length===0)return[];let l,u,d;const p=[];if(r.length===1)return u=r[0],d=new uh,d.curves=u.curves,p.push(d),p;let g=!a(r[0].getPoints());g=t?!g:g;const y=[],x=[];let _=[],E=0,C;x[E]=void 0,_[E]=[];for(let M=0,R=r.length;M<R;M++)u=r[M],C=u.getPoints(),l=a(C),l=t?!l:l,l?(!g&&x[E]&&E++,x[E]={s:new uh,p:C},x[E].s.curves=u.curves,g&&E++,_[E]=[]):_[E].push({h:u,p:C[0]});if(!x[0])return e(r);if(x.length>1){let M=!1,R=0;for(let D=0,L=x.length;D<L;D++)y[D]=[];for(let D=0,L=x.length;D<L;D++){const P=_[D];for(let B=0;B<P.length;B++){const G=P[B];let V=!0;for(let N=0;N<x.length;N++)n(G.p,x[N].p)&&(D!==N&&R++,V?(V=!1,y[N].push(G)):M=!0);V&&y[D].push(G)}}R>0&&M===!1&&(_=y)}let T;for(let M=0,R=x.length;M<R;M++){d=x[M].s,p.push(d),T=_[M];for(let D=0,L=T.length;D<L;D++)d.holes.push(T[D].h)}return p}}class uN extends Hl{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){Re("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function tV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function eV(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function nV(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function iM(i,t,e,n){const a=iV(n);switch(e){case sE:return i*t;case rg:return i*t/a.components*a.byteLength;case og:return i*t/a.components*a.byteLength;case hh:return i*t*2/a.components*a.byteLength;case T_:return i*t*2/a.components*a.byteLength;case rE:return i*t*3/a.components*a.byteLength;case ca:return i*t*4/a.components*a.byteLength;case A_:return i*t*4/a.components*a.byteLength;case m0:case g0:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case v0:case y0:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case Ax:case Cx:return Math.max(i,16)*Math.max(t,8)/4;case Tx:case wx:return Math.max(i,8)*Math.max(t,8)/2;case Rx:case Dx:case Ux:case Ox:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case Nx:case Lx:case Px:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case Ix:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case Bx:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case zx:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case Fx:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case Vx:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case Hx:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case Gx:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case jx:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case kx:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case Xx:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case Yx:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case qx:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case Wx:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case Zx:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case Kx:case Qx:case Jx:return Math.ceil(i/4)*Math.ceil(t/4)*16;case $x:case t_:return Math.ceil(i/4)*Math.ceil(t/4)*8;case e_:case n_:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function iV(i){switch(i){case za:case S_:return{byteLength:1,components:1};case lp:case b_:case pi:return{byteLength:2,components:1};case M_:case E_:return{byteLength:2,components:4};case Mr:case sg:case Mi:return{byteLength:4,components:1};case iE:case aE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class aV{static contain(t,e){return tV(t,e)}static cover(t,e){return eV(t,e)}static fill(t){return nV(t)}static getByteLength(t,e,n,a){return iM(t,e,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ap}}));typeof window<"u"&&(window.__THREE__?Re("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ap);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function fN(){let i=null,t=!1,e=null,n=null;function a(r,l){e(r,l),n=i.requestAnimationFrame(a)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(a),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){i=r}}}function sV(i){const t=new WeakMap;function e(u,d){const p=u.array,g=u.usage,y=p.byteLength,x=i.createBuffer();i.bindBuffer(d,x),i.bufferData(d,p,g),u.onUploadCallback();let _;if(p instanceof Float32Array)_=i.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)_=i.HALF_FLOAT;else if(p instanceof Uint16Array)u.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(p instanceof Int16Array)_=i.SHORT;else if(p instanceof Uint32Array)_=i.UNSIGNED_INT;else if(p instanceof Int32Array)_=i.INT;else if(p instanceof Int8Array)_=i.BYTE;else if(p instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:_,bytesPerElement:p.BYTES_PER_ELEMENT,version:u.version,size:y}}function n(u,d,p){const g=d.array,y=d.updateRanges;if(i.bindBuffer(p,u),y.length===0)i.bufferSubData(p,0,g);else{y.sort((_,E)=>_.start-E.start);let x=0;for(let _=1;_<y.length;_++){const E=y[x],C=y[_];C.start<=E.start+E.count+1?E.count=Math.max(E.count,C.start+C.count-E.start):(++x,y[x]=C)}y.length=x+1;for(let _=0,E=y.length;_<E;_++){const C=y[_];i.bufferSubData(p,C.start*g.BYTES_PER_ELEMENT,g,C.start,C.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),t.get(u)}function r(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=t.get(u);d&&(i.deleteBuffer(d.buffer),t.delete(u))}function l(u,d){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const g=t.get(u);(!g||g.version<u.version)&&t.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const p=t.get(u);if(p===void 0)t.set(u,e(u,d));else if(p.version<u.version){if(p.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,u,d),p.version=u.version}}return{get:a,remove:r,update:l}}var rV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,oV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,lV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,cV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,fV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,hV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,dV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,pV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,mV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,gV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,yV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,_V=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,SV=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,bV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,MV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,EV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,TV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,AV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,CV=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,RV=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,DV=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NV=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,UV=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,OV=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,LV=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,PV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,IV="gl_FragColor = linearToOutputTexel( gl_FragColor );",BV=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,zV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,FV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,VV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,HV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,GV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,kV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,YV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,qV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,WV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ZV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,KV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,QV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,JV=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,$V=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,t8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,e8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,n8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,i8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,a8=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,s8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,r8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,o8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,l8=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,c8=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,u8=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,f8=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,h8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,d8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,p8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,m8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,g8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,v8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,y8=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,x8=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,_8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,S8=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,b8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,M8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,E8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,T8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,A8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,w8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,C8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,R8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,D8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,N8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,U8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,O8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,L8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,P8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,I8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,B8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,z8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,F8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,V8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,H8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,G8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,j8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,k8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,X8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Y8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,q8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,W8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Z8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,K8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Q8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,J8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,tH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,eH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const sH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,rH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,hH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,dH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,pH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,mH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,gH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,_H=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,EH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,AH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,DH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,LH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mn={alphahash_fragment:rV,alphahash_pars_fragment:oV,alphamap_fragment:lV,alphamap_pars_fragment:cV,alphatest_fragment:uV,alphatest_pars_fragment:fV,aomap_fragment:hV,aomap_pars_fragment:dV,batching_pars_vertex:pV,batching_vertex:mV,begin_vertex:gV,beginnormal_vertex:vV,bsdfs:yV,iridescence_fragment:xV,bumpmap_pars_fragment:_V,clipping_planes_fragment:SV,clipping_planes_pars_fragment:bV,clipping_planes_pars_vertex:MV,clipping_planes_vertex:EV,color_fragment:TV,color_pars_fragment:AV,color_pars_vertex:wV,color_vertex:CV,common:RV,cube_uv_reflection_fragment:DV,defaultnormal_vertex:NV,displacementmap_pars_vertex:UV,displacementmap_vertex:OV,emissivemap_fragment:LV,emissivemap_pars_fragment:PV,colorspace_fragment:IV,colorspace_pars_fragment:BV,envmap_fragment:zV,envmap_common_pars_fragment:FV,envmap_pars_fragment:VV,envmap_pars_vertex:HV,envmap_physical_pars_fragment:JV,envmap_vertex:GV,fog_vertex:jV,fog_pars_vertex:kV,fog_fragment:XV,fog_pars_fragment:YV,gradientmap_pars_fragment:qV,lightmap_pars_fragment:WV,lights_lambert_fragment:ZV,lights_lambert_pars_fragment:KV,lights_pars_begin:QV,lights_toon_fragment:$V,lights_toon_pars_fragment:t8,lights_phong_fragment:e8,lights_phong_pars_fragment:n8,lights_physical_fragment:i8,lights_physical_pars_fragment:a8,lights_fragment_begin:s8,lights_fragment_maps:r8,lights_fragment_end:o8,logdepthbuf_fragment:l8,logdepthbuf_pars_fragment:c8,logdepthbuf_pars_vertex:u8,logdepthbuf_vertex:f8,map_fragment:h8,map_pars_fragment:d8,map_particle_fragment:p8,map_particle_pars_fragment:m8,metalnessmap_fragment:g8,metalnessmap_pars_fragment:v8,morphinstance_vertex:y8,morphcolor_vertex:x8,morphnormal_vertex:_8,morphtarget_pars_vertex:S8,morphtarget_vertex:b8,normal_fragment_begin:M8,normal_fragment_maps:E8,normal_pars_fragment:T8,normal_pars_vertex:A8,normal_vertex:w8,normalmap_pars_fragment:C8,clearcoat_normal_fragment_begin:R8,clearcoat_normal_fragment_maps:D8,clearcoat_pars_fragment:N8,iridescence_pars_fragment:U8,opaque_fragment:O8,packing:L8,premultiplied_alpha_fragment:P8,project_vertex:I8,dithering_fragment:B8,dithering_pars_fragment:z8,roughnessmap_fragment:F8,roughnessmap_pars_fragment:V8,shadowmap_pars_fragment:H8,shadowmap_pars_vertex:G8,shadowmap_vertex:j8,shadowmask_pars_fragment:k8,skinbase_vertex:X8,skinning_pars_vertex:Y8,skinning_vertex:q8,skinnormal_vertex:W8,specularmap_fragment:Z8,specularmap_pars_fragment:K8,tonemapping_fragment:Q8,tonemapping_pars_fragment:J8,transmission_fragment:$8,transmission_pars_fragment:tH,uv_pars_fragment:eH,uv_pars_vertex:nH,uv_vertex:iH,worldpos_vertex:aH,background_vert:sH,background_frag:rH,backgroundCube_vert:oH,backgroundCube_frag:lH,cube_vert:cH,cube_frag:uH,depth_vert:fH,depth_frag:hH,distance_vert:dH,distance_frag:pH,equirect_vert:mH,equirect_frag:gH,linedashed_vert:vH,linedashed_frag:yH,meshbasic_vert:xH,meshbasic_frag:_H,meshlambert_vert:SH,meshlambert_frag:bH,meshmatcap_vert:MH,meshmatcap_frag:EH,meshnormal_vert:TH,meshnormal_frag:AH,meshphong_vert:wH,meshphong_frag:CH,meshphysical_vert:RH,meshphysical_frag:DH,meshtoon_vert:NH,meshtoon_frag:UH,points_vert:OH,points_frag:LH,shadow_vert:PH,shadow_frag:IH,sprite_vert:BH,sprite_frag:zH},Ue={common:{diffuse:{value:new Ae(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vn}},envmap:{envMap:{value:null},envMapRotation:{value:new vn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vn},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0},uvTransform:{value:new vn}},sprite:{diffuse:{value:new Ae(16777215)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}}},Bo={basic:{uniforms:Rs([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:Rs([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Ae(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:Rs([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Ae(0)},specular:{value:new Ae(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:Rs([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new Ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:Rs([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new Ae(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:Rs([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:Rs([Ue.points,Ue.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:Rs([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:Rs([Ue.common,Ue.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:Rs([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:Rs([Ue.sprite,Ue.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new vn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new vn}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distance:{uniforms:Rs([Ue.common,Ue.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distance_vert,fragmentShader:Mn.distance_frag},shadow:{uniforms:Rs([Ue.lights,Ue.fog,{color:{value:new Ae(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};Bo.physical={uniforms:Rs([Bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vn},clearcoatNormalScale:{value:new It(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vn},sheen:{value:0},sheenColor:{value:new Ae(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vn},transmissionSamplerSize:{value:new It},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vn},attenuationDistance:{value:0},attenuationColor:{value:new Ae(0)},specularColor:{value:new Ae(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vn},anisotropyVector:{value:new It},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vn}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const ky={r:0,b:0,g:0},qf=new Er,FH=new rn;function VH(i,t,e,n,a,r,l){const u=new Ae(0);let d=r===!0?0:1,p,g,y=null,x=0,_=null;function E(D){let L=D.isScene===!0?D.background:null;return L&&L.isTexture&&(L=(D.backgroundBlurriness>0?e:t).get(L)),L}function C(D){let L=!1;const P=E(D);P===null?M(u,d):P&&P.isColor&&(M(P,1),L=!0);const B=i.xr.getEnvironmentBlendMode();B==="additive"?n.buffers.color.setClear(0,0,0,1,l):B==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(i.autoClear||L)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function T(D,L){const P=E(L);P&&(P.isCubeTexture||P.mapping===wp)?(g===void 0&&(g=new Zn(new ar(1,1,1),new Ri({name:"BackgroundCubeMaterial",uniforms:pp(Bo.backgroundCube.uniforms),vertexShader:Bo.backgroundCube.vertexShader,fragmentShader:Bo.backgroundCube.fragmentShader,side:ps,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(B,G,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(g)),qf.copy(L.backgroundRotation),qf.x*=-1,qf.y*=-1,qf.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(qf.y*=-1,qf.z*=-1),g.material.uniforms.envMap.value=P,g.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=L.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(FH.makeRotationFromEuler(qf)),g.material.toneMapped=Un.getTransfer(P.colorSpace)!==ti,(y!==P||x!==P.version||_!==i.toneMapping)&&(g.material.needsUpdate=!0,y=P,x=P.version,_=i.toneMapping),g.layers.enableAll(),D.unshift(g,g.geometry,g.material,0,0,null)):P&&P.isTexture&&(p===void 0&&(p=new Zn(new Dc(2,2),new Ri({name:"BackgroundMaterial",uniforms:pp(Bo.background.uniforms),vertexShader:Bo.background.vertexShader,fragmentShader:Bo.background.fragmentShader,side:Rc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(p)),p.material.uniforms.t2D.value=P,p.material.uniforms.backgroundIntensity.value=L.backgroundIntensity,p.material.toneMapped=Un.getTransfer(P.colorSpace)!==ti,P.matrixAutoUpdate===!0&&P.updateMatrix(),p.material.uniforms.uvTransform.value.copy(P.matrix),(y!==P||x!==P.version||_!==i.toneMapping)&&(p.material.needsUpdate=!0,y=P,x=P.version,_=i.toneMapping),p.layers.enableAll(),D.unshift(p,p.geometry,p.material,0,0,null))}function M(D,L){D.getRGB(ky,_D(i)),n.buffers.color.setClear(ky.r,ky.g,ky.b,L,l)}function R(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return u},setClearColor:function(D,L=1){u.set(D),d=L,M(u,d)},getClearAlpha:function(){return d},setClearAlpha:function(D){d=D,M(u,d)},render:C,addToRenderList:T,dispose:R}}function HH(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},a=x(null);let r=a,l=!1;function u(I,W,lt,tt,rt){let mt=!1;const $=y(tt,lt,W);r!==$&&(r=$,p(r.object)),mt=_(I,tt,lt,rt),mt&&E(I,tt,lt,rt),rt!==null&&t.update(rt,i.ELEMENT_ARRAY_BUFFER),(mt||l)&&(l=!1,L(I,W,lt,tt),rt!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(rt).buffer))}function d(){return i.createVertexArray()}function p(I){return i.bindVertexArray(I)}function g(I){return i.deleteVertexArray(I)}function y(I,W,lt){const tt=lt.wireframe===!0;let rt=n[I.id];rt===void 0&&(rt={},n[I.id]=rt);let mt=rt[W.id];mt===void 0&&(mt={},rt[W.id]=mt);let $=mt[tt];return $===void 0&&($=x(d()),mt[tt]=$),$}function x(I){const W=[],lt=[],tt=[];for(let rt=0;rt<e;rt++)W[rt]=0,lt[rt]=0,tt[rt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:lt,attributeDivisors:tt,object:I,attributes:{},index:null}}function _(I,W,lt,tt){const rt=r.attributes,mt=W.attributes;let $=0;const et=lt.getAttributes();for(const vt in et)if(et[vt].location>=0){const j=rt[vt];let st=mt[vt];if(st===void 0&&(vt==="instanceMatrix"&&I.instanceMatrix&&(st=I.instanceMatrix),vt==="instanceColor"&&I.instanceColor&&(st=I.instanceColor)),j===void 0||j.attribute!==st||st&&j.data!==st.data)return!0;$++}return r.attributesNum!==$||r.index!==tt}function E(I,W,lt,tt){const rt={},mt=W.attributes;let $=0;const et=lt.getAttributes();for(const vt in et)if(et[vt].location>=0){let j=mt[vt];j===void 0&&(vt==="instanceMatrix"&&I.instanceMatrix&&(j=I.instanceMatrix),vt==="instanceColor"&&I.instanceColor&&(j=I.instanceColor));const st={};st.attribute=j,j&&j.data&&(st.data=j.data),rt[vt]=st,$++}r.attributes=rt,r.attributesNum=$,r.index=tt}function C(){const I=r.newAttributes;for(let W=0,lt=I.length;W<lt;W++)I[W]=0}function T(I){M(I,0)}function M(I,W){const lt=r.newAttributes,tt=r.enabledAttributes,rt=r.attributeDivisors;lt[I]=1,tt[I]===0&&(i.enableVertexAttribArray(I),tt[I]=1),rt[I]!==W&&(i.vertexAttribDivisor(I,W),rt[I]=W)}function R(){const I=r.newAttributes,W=r.enabledAttributes;for(let lt=0,tt=W.length;lt<tt;lt++)W[lt]!==I[lt]&&(i.disableVertexAttribArray(lt),W[lt]=0)}function D(I,W,lt,tt,rt,mt,$){$===!0?i.vertexAttribIPointer(I,W,lt,rt,mt):i.vertexAttribPointer(I,W,lt,tt,rt,mt)}function L(I,W,lt,tt){C();const rt=tt.attributes,mt=lt.getAttributes(),$=W.defaultAttributeValues;for(const et in mt){const vt=mt[et];if(vt.location>=0){let ut=rt[et];if(ut===void 0&&(et==="instanceMatrix"&&I.instanceMatrix&&(ut=I.instanceMatrix),et==="instanceColor"&&I.instanceColor&&(ut=I.instanceColor)),ut!==void 0){const j=ut.normalized,st=ut.itemSize,wt=t.get(ut);if(wt===void 0)continue;const Ct=wt.buffer,Mt=wt.type,Vt=wt.bytesPerElement,ft=Mt===i.INT||Mt===i.UNSIGNED_INT||ut.gpuType===sg;if(ut.isInterleavedBufferAttribute){const Rt=ut.data,Ft=Rt.stride,Se=ut.offset;if(Rt.isInstancedInterleavedBuffer){for(let $t=0;$t<vt.locationSize;$t++)M(vt.location+$t,Rt.meshPerAttribute);I.isInstancedMesh!==!0&&tt._maxInstanceCount===void 0&&(tt._maxInstanceCount=Rt.meshPerAttribute*Rt.count)}else for(let $t=0;$t<vt.locationSize;$t++)T(vt.location+$t);i.bindBuffer(i.ARRAY_BUFFER,Ct);for(let $t=0;$t<vt.locationSize;$t++)D(vt.location+$t,st/vt.locationSize,Mt,j,Ft*Vt,(Se+st/vt.locationSize*$t)*Vt,ft)}else{if(ut.isInstancedBufferAttribute){for(let Rt=0;Rt<vt.locationSize;Rt++)M(vt.location+Rt,ut.meshPerAttribute);I.isInstancedMesh!==!0&&tt._maxInstanceCount===void 0&&(tt._maxInstanceCount=ut.meshPerAttribute*ut.count)}else for(let Rt=0;Rt<vt.locationSize;Rt++)T(vt.location+Rt);i.bindBuffer(i.ARRAY_BUFFER,Ct);for(let Rt=0;Rt<vt.locationSize;Rt++)D(vt.location+Rt,st/vt.locationSize,Mt,j,st*Vt,st/vt.locationSize*Rt*Vt,ft)}}else if($!==void 0){const j=$[et];if(j!==void 0)switch(j.length){case 2:i.vertexAttrib2fv(vt.location,j);break;case 3:i.vertexAttrib3fv(vt.location,j);break;case 4:i.vertexAttrib4fv(vt.location,j);break;default:i.vertexAttrib1fv(vt.location,j)}}}}R()}function P(){V();for(const I in n){const W=n[I];for(const lt in W){const tt=W[lt];for(const rt in tt)g(tt[rt].object),delete tt[rt];delete W[lt]}delete n[I]}}function B(I){if(n[I.id]===void 0)return;const W=n[I.id];for(const lt in W){const tt=W[lt];for(const rt in tt)g(tt[rt].object),delete tt[rt];delete W[lt]}delete n[I.id]}function G(I){for(const W in n){const lt=n[W];if(lt[I.id]===void 0)continue;const tt=lt[I.id];for(const rt in tt)g(tt[rt].object),delete tt[rt];delete lt[I.id]}}function V(){N(),l=!0,r!==a&&(r=a,p(r.object))}function N(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:u,reset:V,resetDefaultState:N,dispose:P,releaseStatesOfGeometry:B,releaseStatesOfProgram:G,initAttributes:C,enableAttribute:T,disableUnusedAttributes:R}}function GH(i,t,e){let n;function a(p){n=p}function r(p,g){i.drawArrays(n,p,g),e.update(g,n,1)}function l(p,g,y){y!==0&&(i.drawArraysInstanced(n,p,g,y),e.update(g,n,y))}function u(p,g,y){if(y===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,g,0,y);let _=0;for(let E=0;E<y;E++)_+=g[E];e.update(_,n,1)}function d(p,g,y,x){if(y===0)return;const _=t.get("WEBGL_multi_draw");if(_===null)for(let E=0;E<p.length;E++)l(p[E],g[E],x[E]);else{_.multiDrawArraysInstancedWEBGL(n,p,0,g,0,x,0,y);let E=0;for(let C=0;C<y;C++)E+=g[C]*x[C];e.update(E,n,1)}}this.setMode=a,this.render=r,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function jH(i,t,e,n){let a;function r(){if(a!==void 0)return a;if(t.has("EXT_texture_filter_anisotropic")===!0){const G=t.get("EXT_texture_filter_anisotropic");a=i.getParameter(G.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function l(G){return!(G!==ca&&n.convert(G)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(G){const V=G===pi&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(G!==za&&n.convert(G)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&G!==Mi&&!V)}function d(G){if(G==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";G="mediump"}return G==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=e.precision!==void 0?e.precision:"highp";const g=d(p);g!==p&&(Re("WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const y=e.logarithmicDepthBuffer===!0,x=e.reversedDepthBuffer===!0&&t.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),E=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),T=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),R=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),D=i.getParameter(i.MAX_VARYING_VECTORS),L=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),P=i.getParameter(i.MAX_SAMPLES),B=i.getParameter(i.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:u,precision:p,logarithmicDepthBuffer:y,reversedDepthBuffer:x,maxTextures:_,maxVertexTextures:E,maxTextureSize:C,maxCubemapSize:T,maxAttributes:M,maxVertexUniforms:R,maxVaryings:D,maxFragmentUniforms:L,maxSamples:P,samples:B}}function kH(i){const t=this;let e=null,n=0,a=!1,r=!1;const l=new Rl,u=new vn,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,x){const _=y.length!==0||x||n!==0||a;return a=x,n=y.length,_},this.beginShadows=function(){r=!0,g(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(y,x){e=g(y,x,0)},this.setState=function(y,x,_){const E=y.clippingPlanes,C=y.clipIntersection,T=y.clipShadows,M=i.get(y);if(!a||E===null||E.length===0||r&&!T)r?g(null):p();else{const R=r?0:n,D=R*4;let L=M.clippingState||null;d.value=L,L=g(E,x,D,_);for(let P=0;P!==D;++P)L[P]=e[P];M.clippingState=L,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=R}};function p(){d.value!==e&&(d.value=e,d.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function g(y,x,_,E){const C=y!==null?y.length:0;let T=null;if(C!==0){if(T=d.value,E!==!0||T===null){const M=_+C*4,R=x.matrixWorldInverse;u.getNormalMatrix(R),(T===null||T.length<M)&&(T=new Float32Array(M));for(let D=0,L=_;D!==C;++D,L+=4)l.copy(y[D]).applyMatrix4(R,u),l.normal.toArray(T,L),T[L+3]=l.constant}d.value=T,d.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,T}}function XH(i){let t=new WeakMap;function e(l,u){return u===op?l.mapping=Vo:u===U0&&(l.mapping=Fu),l}function n(l){if(l&&l.isTexture){const u=l.mapping;if(u===op||u===U0)if(t.has(l)){const d=t.get(l).texture;return e(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new L_(d.height);return p.fromEquirectangularTexture(i,l),t.set(l,p),l.addEventListener("dispose",a),e(p.texture,l.mapping)}else return null}}return l}function a(l){const u=l.target;u.removeEventListener("dispose",a);const d=t.get(u);d!==void 0&&(t.delete(u),d.dispose())}function r(){t=new WeakMap}return{get:n,dispose:r}}const Uu=4,ww=[.125,.215,.35,.446,.526,.582],Qf=20,YH=256,n0=new Fo,Cw=new Ae;let ZS=null,KS=0,QS=0,JS=!1;const qH=new K;class aM{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(t,e=0,n=.1,a=100,r={}){const{size:l=256,position:u=qH}=r;ZS=this._renderer.getRenderTarget(),KS=this._renderer.getActiveCubeFace(),QS=this._renderer.getActiveMipmapLevel(),JS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,n,a,d,u),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Nw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Dw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodMeshes.length;t++)this._lodMeshes[t].geometry.dispose()}_cleanup(t){this._renderer.setRenderTarget(ZS,KS,QS),this._renderer.xr.enabled=JS,t.scissorTest=!1,Fd(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Vo||t.mapping===Fu?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),ZS=this._renderer.getRenderTarget(),KS=this._renderer.getActiveCubeFace(),QS=this._renderer.getActiveMipmapLevel(),JS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Nn,minFilter:Nn,generateMipmaps:!1,type:pi,format:ca,colorSpace:Ho,depthBuffer:!1},a=Rw(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Rw(t,e,n);const{_lodMax:r}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=WH(r)),this._blurMaterial=KH(r,t,e),this._ggxMaterial=ZH(r,t,e)}return a}_compileMaterial(t){const e=new Zn(new ln,t);this._renderer.compile(e,n0)}_sceneToCubeUV(t,e,n,a,r){const d=new Fi(90,1,e,n),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,x=y.autoClear,_=y.toneMapping;y.getClearColor(Cw),y.toneMapping=qr,y.autoClear=!1,y.state.buffers.depth.getReversed()&&(y.setRenderTarget(a),y.clearDepth(),y.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Zn(new ar,new Go({name:"PMREM.Background",side:ps,depthWrite:!1,depthTest:!1})));const C=this._backgroundBox,T=C.material;let M=!1;const R=t.background;R?R.isColor&&(T.color.copy(R),t.background=null,M=!0):(T.color.copy(Cw),M=!0);for(let D=0;D<6;D++){const L=D%3;L===0?(d.up.set(0,p[D],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x+g[D],r.y,r.z)):L===1?(d.up.set(0,0,p[D]),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y+g[D],r.z)):(d.up.set(0,p[D],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y,r.z+g[D]));const P=this._cubeSize;Fd(a,L*P,D>2?P:0,P,P),y.setRenderTarget(a),M&&y.render(C,d),y.render(t,d)}y.toneMapping=_,y.autoClear=x,t.background=R}_textureToCubeUV(t,e){const n=this._renderer,a=t.mapping===Vo||t.mapping===Fu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=Nw()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Dw());const r=a?this._cubemapMaterial:this._equirectMaterial,l=this._lodMeshes[0];l.material=r;const u=r.uniforms;u.envMap.value=t;const d=this._cubeSize;Fd(e,0,0,3*d,2*d),n.setRenderTarget(e),n.render(l,n0)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const a=this._lodMeshes.length;for(let r=1;r<a;r++)this._applyGGXFilter(t,r-1,r);e.autoClear=n}_applyGGXFilter(t,e,n){const a=this._renderer,r=this._pingPongRenderTarget,l=this._ggxMaterial,u=this._lodMeshes[n];u.material=l;const d=l.uniforms,p=n/(this._lodMeshes.length-1),g=e/(this._lodMeshes.length-1),y=Math.sqrt(p*p-g*g),x=0+p*1.25,_=y*x,{_lodMax:E}=this,C=this._sizeLods[n],T=3*C*(n>E-Uu?n-E+Uu:0),M=4*(this._cubeSize-C);d.envMap.value=t.texture,d.roughness.value=_,d.mipInt.value=E-e,Fd(r,T,M,3*C,2*C),a.setRenderTarget(r),a.render(u,n0),d.envMap.value=r.texture,d.roughness.value=0,d.mipInt.value=E-n,Fd(t,T,M,3*C,2*C),a.setRenderTarget(t),a.render(u,n0)}_blur(t,e,n,a,r){const l=this._pingPongRenderTarget;this._halfBlur(t,l,e,n,a,"latitudinal",r),this._halfBlur(l,t,n,n,a,"longitudinal",r)}_halfBlur(t,e,n,a,r,l,u){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&Ke("blur direction must be either latitudinal or longitudinal!");const g=3,y=this._lodMeshes[a];y.material=p;const x=p.uniforms,_=this._sizeLods[n]-1,E=isFinite(r)?Math.PI/(2*_):2*Math.PI/(2*Qf-1),C=r/E,T=isFinite(r)?1+Math.floor(g*C):Qf;T>Qf&&Re(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Qf}`);const M=[];let R=0;for(let G=0;G<Qf;++G){const V=G/C,N=Math.exp(-V*V/2);M.push(N),G===0?R+=N:G<T&&(R+=2*N)}for(let G=0;G<M.length;G++)M[G]=M[G]/R;x.envMap.value=t.texture,x.samples.value=T,x.weights.value=M,x.latitudinal.value=l==="latitudinal",u&&(x.poleAxis.value=u);const{_lodMax:D}=this;x.dTheta.value=E,x.mipInt.value=D-n;const L=this._sizeLods[a],P=3*L*(a>D-Uu?a-D+Uu:0),B=4*(this._cubeSize-L);Fd(e,P,B,3*L,2*L),d.setRenderTarget(e),d.render(y,n0)}}function WH(i){const t=[],e=[],n=[];let a=i;const r=i-Uu+1+ww.length;for(let l=0;l<r;l++){const u=Math.pow(2,a);t.push(u);let d=1/u;l>i-Uu?d=ww[l-i+Uu-1]:l===0&&(d=0),e.push(d);const p=1/(u-2),g=-p,y=1+p,x=[g,g,y,g,y,y,g,g,y,y,g,y],_=6,E=6,C=3,T=2,M=1,R=new Float32Array(C*E*_),D=new Float32Array(T*E*_),L=new Float32Array(M*E*_);for(let B=0;B<_;B++){const G=B%3*2/3-1,V=B>2?0:-1,N=[G,V,0,G+2/3,V,0,G+2/3,V+1,0,G,V,0,G+2/3,V+1,0,G,V+1,0];R.set(N,C*E*B),D.set(x,T*E*B);const I=[B,B,B,B,B,B];L.set(I,M*E*B)}const P=new ln;P.setAttribute("position",new ii(R,C)),P.setAttribute("uv",new ii(D,T)),P.setAttribute("faceIndex",new ii(L,M)),n.push(new Zn(P,null)),a>Uu&&a--}return{lodMeshes:n,sizeLods:t,sigmas:e}}function Rw(i,t,e){const n=new ia(i,t,e);return n.texture.mapping=wp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Fd(i,t,e,n,a){i.viewport.set(t,e,n,a),i.scissor.set(t,e,n,a)}function ZH(i,t,e){return new Ri({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:YH,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:a1(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Yr,depthTest:!1,depthWrite:!1})}function KH(i,t,e){const n=new Float32Array(Qf),a=new K(0,1,0);return new Ri({name:"SphericalGaussianBlur",defines:{n:Qf,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:a1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yr,depthTest:!1,depthWrite:!1})}function Dw(){return new Ri({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:a1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yr,depthTest:!1,depthWrite:!1})}function Nw(){return new Ri({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:a1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yr,depthTest:!1,depthWrite:!1})}function a1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function QH(i){let t=new WeakMap,e=null;function n(u){if(u&&u.isTexture){const d=u.mapping,p=d===op||d===U0,g=d===Vo||d===Fu;if(p||g){let y=t.get(u);const x=y!==void 0?y.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==x)return e===null&&(e=new aM(i)),y=p?e.fromEquirectangular(u,y):e.fromCubemap(u,y),y.texture.pmremVersion=u.pmremVersion,t.set(u,y),y.texture;if(y!==void 0)return y.texture;{const _=u.image;return p&&_&&_.height>0||g&&_&&a(_)?(e===null&&(e=new aM(i)),y=p?e.fromEquirectangular(u):e.fromCubemap(u),y.texture.pmremVersion=u.pmremVersion,t.set(u,y),u.addEventListener("dispose",r),y.texture):null}}}return u}function a(u){let d=0;const p=6;for(let g=0;g<p;g++)u[g]!==void 0&&d++;return d===p}function r(u){const d=u.target;d.removeEventListener("dispose",r);const p=t.get(d);p!==void 0&&(t.delete(d),p.dispose())}function l(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:l}}function JH(i){const t={};function e(n){if(t[n]!==void 0)return t[n];const a=i.getExtension(n);return t[n]=a,a}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const a=e(n);return a===null&&fp("WebGLRenderer: "+n+" extension not supported."),a}}}function $H(i,t,e,n){const a={},r=new WeakMap;function l(y){const x=y.target;x.index!==null&&t.remove(x.index);for(const E in x.attributes)t.remove(x.attributes[E]);x.removeEventListener("dispose",l),delete a[x.id];const _=r.get(x);_&&(t.remove(_),r.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,e.memory.geometries--}function u(y,x){return a[x.id]===!0||(x.addEventListener("dispose",l),a[x.id]=!0,e.memory.geometries++),x}function d(y){const x=y.attributes;for(const _ in x)t.update(x[_],i.ARRAY_BUFFER)}function p(y){const x=[],_=y.index,E=y.attributes.position;let C=0;if(_!==null){const R=_.array;C=_.version;for(let D=0,L=R.length;D<L;D+=3){const P=R[D+0],B=R[D+1],G=R[D+2];x.push(P,B,B,G,G,P)}}else if(E!==void 0){const R=E.array;C=E.version;for(let D=0,L=R.length/3-1;D<L;D+=3){const P=D+0,B=D+1,G=D+2;x.push(P,B,B,G,G,P)}}else return;const T=new(mD(x)?fE:uE)(x,1);T.version=C;const M=r.get(y);M&&t.remove(M),r.set(y,T)}function g(y){const x=r.get(y);if(x){const _=y.index;_!==null&&x.version<_.version&&p(y)}else p(y);return r.get(y)}return{get:u,update:d,getWireframeAttribute:g}}function tG(i,t,e){let n;function a(x){n=x}let r,l;function u(x){r=x.type,l=x.bytesPerElement}function d(x,_){i.drawElements(n,_,r,x*l),e.update(_,n,1)}function p(x,_,E){E!==0&&(i.drawElementsInstanced(n,_,r,x*l,E),e.update(_,n,E))}function g(x,_,E){if(E===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,r,x,0,E);let T=0;for(let M=0;M<E;M++)T+=_[M];e.update(T,n,1)}function y(x,_,E,C){if(E===0)return;const T=t.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<x.length;M++)p(x[M]/l,_[M],C[M]);else{T.multiDrawElementsInstancedWEBGL(n,_,0,r,x,0,C,0,E);let M=0;for(let R=0;R<E;R++)M+=_[R]*C[R];e.update(M,n,1)}}this.setMode=a,this.setIndex=u,this.render=d,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=y}function eG(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,l,u){switch(e.calls++,l){case i.TRIANGLES:e.triangles+=u*(r/3);break;case i.LINES:e.lines+=u*(r/2);break;case i.LINE_STRIP:e.lines+=u*(r-1);break;case i.LINE_LOOP:e.lines+=u*r;break;case i.POINTS:e.points+=u*r;break;default:Ke("WebGLInfo: Unknown draw mode:",l);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:n}}function nG(i,t,e){const n=new WeakMap,a=new di;function r(l,u,d){const p=l.morphTargetInfluences,g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,y=g!==void 0?g.length:0;let x=n.get(u);if(x===void 0||x.count!==y){let I=function(){V.dispose(),n.delete(u),u.removeEventListener("dispose",I)};var _=I;x!==void 0&&x.texture.dispose();const E=u.morphAttributes.position!==void 0,C=u.morphAttributes.normal!==void 0,T=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],R=u.morphAttributes.normal||[],D=u.morphAttributes.color||[];let L=0;E===!0&&(L=1),C===!0&&(L=2),T===!0&&(L=3);let P=u.attributes.position.count*L,B=1;P>t.maxTextureSize&&(B=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);const G=new Float32Array(P*B*4*y),V=new N_(G,P,B,y);V.type=Mi,V.needsUpdate=!0;const N=L*4;for(let W=0;W<y;W++){const lt=M[W],tt=R[W],rt=D[W],mt=P*B*4*W;for(let $=0;$<lt.count;$++){const et=$*N;E===!0&&(a.fromBufferAttribute(lt,$),G[mt+et+0]=a.x,G[mt+et+1]=a.y,G[mt+et+2]=a.z,G[mt+et+3]=0),C===!0&&(a.fromBufferAttribute(tt,$),G[mt+et+4]=a.x,G[mt+et+5]=a.y,G[mt+et+6]=a.z,G[mt+et+7]=0),T===!0&&(a.fromBufferAttribute(rt,$),G[mt+et+8]=a.x,G[mt+et+9]=a.y,G[mt+et+10]=a.z,G[mt+et+11]=rt.itemSize===4?a.w:1)}}x={count:y,texture:V,size:new It(P,B)},n.set(u,x),u.addEventListener("dispose",I)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",l.morphTexture,e);else{let E=0;for(let T=0;T<p.length;T++)E+=p[T];const C=u.morphTargetsRelative?1:1-E;d.getUniforms().setValue(i,"morphTargetBaseInfluence",C),d.getUniforms().setValue(i,"morphTargetInfluences",p)}d.getUniforms().setValue(i,"morphTargetsTexture",x.texture,e),d.getUniforms().setValue(i,"morphTargetsTextureSize",x.size)}return{update:r}}function iG(i,t,e,n){let a=new WeakMap;function r(d){const p=n.render.frame,g=d.geometry,y=t.get(d,g);if(a.get(y)!==p&&(t.update(y),a.set(y,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",u)===!1&&d.addEventListener("dispose",u),a.get(d)!==p&&(e.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,i.ARRAY_BUFFER),a.set(d,p))),d.isSkinnedMesh){const x=d.skeleton;a.get(x)!==p&&(x.update(),a.set(x,p))}return y}function l(){a=new WeakMap}function u(d){const p=d.target;p.removeEventListener("dispose",u),e.remove(p.instanceMatrix),p.instanceColor!==null&&e.remove(p.instanceColor)}return{update:r,dispose:l}}const aG={[QM]:"LINEAR_TONE_MAPPING",[x_]:"REINHARD_TONE_MAPPING",[JM]:"CINEON_TONE_MAPPING",[__]:"ACES_FILMIC_TONE_MAPPING",[tE]:"AGX_TONE_MAPPING",[eE]:"NEUTRAL_TONE_MAPPING",[$M]:"CUSTOM_TONE_MAPPING"};function sG(i,t,e,n,a){const r=new ia(t,e,{type:i,depthBuffer:n,stencilBuffer:a}),l=new ia(t,e,{type:pi,depthBuffer:!1,stencilBuffer:!1}),u=new ln;u.setAttribute("position",new Be([-1,3,0,-1,-1,0,3,-1,0],3)),u.setAttribute("uv",new Be([0,2,0,0,2,0],2));const d=new bE({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new Zn(u,d),g=new Fo(-1,1,1,-1,0,1);let y=null,x=null,_=!1,E,C=null,T=[],M=!1;this.setSize=function(R,D){r.setSize(R,D),l.setSize(R,D);for(let L=0;L<T.length;L++){const P=T[L];P.setSize&&P.setSize(R,D)}},this.setEffects=function(R){T=R,M=T.length>0&&T[0].isRenderPass===!0;const D=r.width,L=r.height;for(let P=0;P<T.length;P++){const B=T[P];B.setSize&&B.setSize(D,L)}},this.begin=function(R,D){if(_||R.toneMapping===qr&&T.length===0)return!1;if(C=D,D!==null){const L=D.width,P=D.height;(r.width!==L||r.height!==P)&&this.setSize(L,P)}return M===!1&&R.setRenderTarget(r),E=R.toneMapping,R.toneMapping=qr,!0},this.hasRenderPass=function(){return M},this.end=function(R,D){R.toneMapping=E,_=!0;let L=r,P=l;for(let B=0;B<T.length;B++){const G=T[B];if(G.enabled!==!1&&(G.render(R,P,L,D),G.needsSwap!==!1)){const V=L;L=P,P=V}}if(y!==R.outputColorSpace||x!==R.toneMapping){y=R.outputColorSpace,x=R.toneMapping,d.defines={},Un.getTransfer(y)===ti&&(d.defines.SRGB_TRANSFER="");const B=aG[x];B&&(d.defines[B]=""),d.needsUpdate=!0}d.uniforms.tDiffuse.value=L.texture,R.setRenderTarget(C),R.render(p,g),C=null,_=!1},this.isCompositing=function(){return _},this.dispose=function(){r.dispose(),l.dispose(),u.dispose(),d.dispose()}}const hN=new ci,sM=new ph(1,1),dN=new N_,pN=new U_,mN=new lg,Uw=[],Ow=[],Lw=new Float32Array(16),Pw=new Float32Array(9),Iw=new Float32Array(4);function Dp(i,t,e){const n=i[0];if(n<=0||n>0)return i;const a=t*e;let r=Uw[a];if(r===void 0&&(r=new Float32Array(a),Uw[a]=r),t!==0){n.toArray(r,0);for(let l=1,u=0;l!==t;++l)u+=e,i[l].toArray(r,u)}return r}function Ta(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Aa(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function s1(i,t){let e=Ow[t];e===void 0&&(e=new Int32Array(t),Ow[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function rG(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function oG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ta(e,t))return;i.uniform2fv(this.addr,t),Aa(e,t)}}function lG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ta(e,t))return;i.uniform3fv(this.addr,t),Aa(e,t)}}function cG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ta(e,t))return;i.uniform4fv(this.addr,t),Aa(e,t)}}function uG(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Ta(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Aa(e,t)}else{if(Ta(e,n))return;Iw.set(n),i.uniformMatrix2fv(this.addr,!1,Iw),Aa(e,n)}}function fG(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Ta(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Aa(e,t)}else{if(Ta(e,n))return;Pw.set(n),i.uniformMatrix3fv(this.addr,!1,Pw),Aa(e,n)}}function hG(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Ta(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Aa(e,t)}else{if(Ta(e,n))return;Lw.set(n),i.uniformMatrix4fv(this.addr,!1,Lw),Aa(e,n)}}function dG(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function pG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ta(e,t))return;i.uniform2iv(this.addr,t),Aa(e,t)}}function mG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ta(e,t))return;i.uniform3iv(this.addr,t),Aa(e,t)}}function gG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ta(e,t))return;i.uniform4iv(this.addr,t),Aa(e,t)}}function vG(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function yG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ta(e,t))return;i.uniform2uiv(this.addr,t),Aa(e,t)}}function xG(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ta(e,t))return;i.uniform3uiv(this.addr,t),Aa(e,t)}}function _G(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ta(e,t))return;i.uniform4uiv(this.addr,t),Aa(e,t)}}function SG(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a);let r;this.type===i.SAMPLER_2D_SHADOW?(sM.compareFunction=e.isReversedDepthBuffer()?R_:C_,r=sM):r=hN,e.setTexture2D(t||r,a)}function bG(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTexture3D(t||pN,a)}function MG(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTextureCube(t||mN,a)}function EG(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTexture2DArray(t||dN,a)}function TG(i){switch(i){case 5126:return rG;case 35664:return oG;case 35665:return lG;case 35666:return cG;case 35674:return uG;case 35675:return fG;case 35676:return hG;case 5124:case 35670:return dG;case 35667:case 35671:return pG;case 35668:case 35672:return mG;case 35669:case 35673:return gG;case 5125:return vG;case 36294:return yG;case 36295:return xG;case 36296:return _G;case 35678:case 36198:case 36298:case 36306:case 35682:return SG;case 35679:case 36299:case 36307:return bG;case 35680:case 36300:case 36308:case 36293:return MG;case 36289:case 36303:case 36311:case 36292:return EG}}function AG(i,t){i.uniform1fv(this.addr,t)}function wG(i,t){const e=Dp(t,this.size,2);i.uniform2fv(this.addr,e)}function CG(i,t){const e=Dp(t,this.size,3);i.uniform3fv(this.addr,e)}function RG(i,t){const e=Dp(t,this.size,4);i.uniform4fv(this.addr,e)}function DG(i,t){const e=Dp(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function NG(i,t){const e=Dp(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function UG(i,t){const e=Dp(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function OG(i,t){i.uniform1iv(this.addr,t)}function LG(i,t){i.uniform2iv(this.addr,t)}function PG(i,t){i.uniform3iv(this.addr,t)}function IG(i,t){i.uniform4iv(this.addr,t)}function BG(i,t){i.uniform1uiv(this.addr,t)}function zG(i,t){i.uniform2uiv(this.addr,t)}function FG(i,t){i.uniform3uiv(this.addr,t)}function VG(i,t){i.uniform4uiv(this.addr,t)}function HG(i,t,e){const n=this.cache,a=t.length,r=s1(e,a);Ta(n,r)||(i.uniform1iv(this.addr,r),Aa(n,r));let l;this.type===i.SAMPLER_2D_SHADOW?l=sM:l=hN;for(let u=0;u!==a;++u)e.setTexture2D(t[u]||l,r[u])}function GG(i,t,e){const n=this.cache,a=t.length,r=s1(e,a);Ta(n,r)||(i.uniform1iv(this.addr,r),Aa(n,r));for(let l=0;l!==a;++l)e.setTexture3D(t[l]||pN,r[l])}function jG(i,t,e){const n=this.cache,a=t.length,r=s1(e,a);Ta(n,r)||(i.uniform1iv(this.addr,r),Aa(n,r));for(let l=0;l!==a;++l)e.setTextureCube(t[l]||mN,r[l])}function kG(i,t,e){const n=this.cache,a=t.length,r=s1(e,a);Ta(n,r)||(i.uniform1iv(this.addr,r),Aa(n,r));for(let l=0;l!==a;++l)e.setTexture2DArray(t[l]||dN,r[l])}function XG(i){switch(i){case 5126:return AG;case 35664:return wG;case 35665:return CG;case 35666:return RG;case 35674:return DG;case 35675:return NG;case 35676:return UG;case 5124:case 35670:return OG;case 35667:case 35671:return LG;case 35668:case 35672:return PG;case 35669:case 35673:return IG;case 5125:return BG;case 36294:return zG;case 36295:return FG;case 36296:return VG;case 35678:case 36198:case 36298:case 36306:case 35682:return HG;case 35679:case 36299:case 36307:return GG;case 35680:case 36300:case 36308:case 36293:return jG;case 36289:case 36303:case 36311:case 36292:return kG}}class YG{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=TG(e.type)}}class qG{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=XG(e.type)}}class WG{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const a=this.seq;for(let r=0,l=a.length;r!==l;++r){const u=a[r];u.setValue(t,e[u.id],n)}}}const $S=/(\w+)(\])?(\[|\.)?/g;function Bw(i,t){i.seq.push(t),i.map[t.id]=t}function ZG(i,t,e){const n=i.name,a=n.length;for($S.lastIndex=0;;){const r=$S.exec(n),l=$S.lastIndex;let u=r[1];const d=r[2]==="]",p=r[3];if(d&&(u=u|0),p===void 0||p==="["&&l+2===a){Bw(e,p===void 0?new YG(u,i,t):new qG(u,i,t));break}else{let y=e.map[u];y===void 0&&(y=new WG(u),Bw(e,y)),e=y}}}class sx{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let l=0;l<n;++l){const u=t.getActiveUniform(e,l),d=t.getUniformLocation(e,u.name);ZG(u,d,this)}const a=[],r=[];for(const l of this.seq)l.type===t.SAMPLER_2D_SHADOW||l.type===t.SAMPLER_CUBE_SHADOW||l.type===t.SAMPLER_2D_ARRAY_SHADOW?a.push(l):r.push(l);a.length>0&&(this.seq=a.concat(r))}setValue(t,e,n,a){const r=this.map[e];r!==void 0&&r.setValue(t,n,a)}setOptional(t,e,n){const a=e[n];a!==void 0&&this.setValue(t,n,a)}static upload(t,e,n,a){for(let r=0,l=e.length;r!==l;++r){const u=e[r],d=n[u.id];d.needsUpdate!==!1&&u.setValue(t,d.value,a)}}static seqWithValue(t,e){const n=[];for(let a=0,r=t.length;a!==r;++a){const l=t[a];l.id in e&&n.push(l)}return n}}function zw(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const KG=37297;let QG=0;function JG(i,t){const e=i.split(`
`),n=[],a=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let l=a;l<r;l++){const u=l+1;n.push(`${u===t?">":" "} ${u}: ${e[l]}`)}return n.join(`
`)}const Fw=new vn;function $G(i){Un._getMatrix(Fw,Un.workingColorSpace,i);const t=`mat3( ${Fw.elements.map(e=>e.toFixed(4))} )`;switch(Un.getTransfer(i)){case B0:return[t,"LinearTransferOETF"];case ti:return[t,"sRGBTransferOETF"];default:return Re("WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function Vw(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=(i.getShaderInfoLog(t)||"").trim();if(n&&r==="")return"";const l=/ERROR: 0:(\d+)/.exec(r);if(l){const u=parseInt(l[1]);return e.toUpperCase()+`

`+r+`

`+JG(i.getShaderSource(t),u)}else return r}function t7(i,t){const e=$G(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}const e7={[QM]:"Linear",[x_]:"Reinhard",[JM]:"Cineon",[__]:"ACESFilmic",[tE]:"AgX",[eE]:"Neutral",[$M]:"Custom"};function n7(i,t){const e=e7[t];return e===void 0?(Re("WebGLProgram: Unsupported toneMapping:",t),"vec3 "+i+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const Xy=new K;function i7(){Un.getLuminanceCoefficients(Xy);const i=Xy.x.toFixed(4),t=Xy.y.toFixed(4),e=Xy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function a7(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(c0).join(`
`)}function s7(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function r7(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const r=i.getActiveAttrib(t,a),l=r.name;let u=1;r.type===i.FLOAT_MAT2&&(u=2),r.type===i.FLOAT_MAT3&&(u=3),r.type===i.FLOAT_MAT4&&(u=4),e[l]={type:r.type,location:i.getAttribLocation(t,l),locationSize:u}}return e}function c0(i){return i!==""}function Hw(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Gw(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const o7=/^[ \t]*#include +<([\w\d./]+)>/gm;function rM(i){return i.replace(o7,c7)}const l7=new Map;function c7(i,t){let e=Mn[t];if(e===void 0){const n=l7.get(t);if(n!==void 0)e=Mn[n],Re('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return rM(e)}const u7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jw(i){return i.replace(u7,f7)}function f7(i,t,e,n){let a="";for(let r=parseInt(t);r<parseInt(e);r++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return a}function kw(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}const h7={[tp]:"SHADOWMAP_TYPE_PCF",[th]:"SHADOWMAP_TYPE_VSM"};function d7(i){return h7[i.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const p7={[Vo]:"ENVMAP_TYPE_CUBE",[Fu]:"ENVMAP_TYPE_CUBE",[wp]:"ENVMAP_TYPE_CUBE_UV"};function m7(i){return i.envMap===!1?"ENVMAP_TYPE_CUBE":p7[i.envMapMode]||"ENVMAP_TYPE_CUBE"}const g7={[Fu]:"ENVMAP_MODE_REFRACTION"};function v7(i){return i.envMap===!1?"ENVMAP_MODE_REFLECTION":g7[i.envMapMode]||"ENVMAP_MODE_REFLECTION"}const y7={[ag]:"ENVMAP_BLENDING_MULTIPLY",[eD]:"ENVMAP_BLENDING_MIX",[nD]:"ENVMAP_BLENDING_ADD"};function x7(i){return i.envMap===!1?"ENVMAP_BLENDING_NONE":y7[i.combine]||"ENVMAP_BLENDING_NONE"}function _7(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}function S7(i,t,e,n){const a=i.getContext(),r=e.defines;let l=e.vertexShader,u=e.fragmentShader;const d=d7(e),p=m7(e),g=v7(e),y=x7(e),x=_7(e),_=a7(e),E=s7(r),C=a.createProgram();let T,M,R=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(T=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(c0).join(`
`),T.length>0&&(T+=`
`),M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(c0).join(`
`),M.length>0&&(M+=`
`)):(T=[kw(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+g:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(c0).join(`
`),M=[kw(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+g:"",e.envMap?"#define "+y:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==qr?"#define TONE_MAPPING":"",e.toneMapping!==qr?Mn.tonemapping_pars_fragment:"",e.toneMapping!==qr?n7("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Mn.colorspace_pars_fragment,t7("linearToOutputTexel",e.outputColorSpace),i7(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(c0).join(`
`)),l=rM(l),l=Hw(l,e),l=Gw(l,e),u=rM(u),u=Hw(u,e),u=Gw(u,e),l=jw(l),u=jw(u),e.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,T=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,M=["#define varying in",e.glslVersion===Kb?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===Kb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const D=R+T+l,L=R+M+u,P=zw(a,a.VERTEX_SHADER,D),B=zw(a,a.FRAGMENT_SHADER,L);a.attachShader(C,P),a.attachShader(C,B),e.index0AttributeName!==void 0?a.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&a.bindAttribLocation(C,0,"position"),a.linkProgram(C);function G(W){if(i.debug.checkShaderErrors){const lt=a.getProgramInfoLog(C)||"",tt=a.getShaderInfoLog(P)||"",rt=a.getShaderInfoLog(B)||"",mt=lt.trim(),$=tt.trim(),et=rt.trim();let vt=!0,ut=!0;if(a.getProgramParameter(C,a.LINK_STATUS)===!1)if(vt=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(a,C,P,B);else{const j=Vw(a,P,"vertex"),st=Vw(a,B,"fragment");Ke("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(C,a.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+mt+`
`+j+`
`+st)}else mt!==""?Re("WebGLProgram: Program Info Log:",mt):($===""||et==="")&&(ut=!1);ut&&(W.diagnostics={runnable:vt,programLog:mt,vertexShader:{log:$,prefix:T},fragmentShader:{log:et,prefix:M}})}a.deleteShader(P),a.deleteShader(B),V=new sx(a,C),N=r7(a,C)}let V;this.getUniforms=function(){return V===void 0&&G(this),V};let N;this.getAttributes=function(){return N===void 0&&G(this),N};let I=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=a.getProgramParameter(C,KG)),I},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=QG++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=P,this.fragmentShader=B,this}let b7=0;class M7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,a=this._getShaderStage(e),r=this._getShaderStage(n),l=this._getShaderCacheForMaterial(t);return l.has(a)===!1&&(l.add(a),a.usedTimes++),l.has(r)===!1&&(l.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new E7(t),e.set(t,n)),n}}class E7{constructor(t){this.id=b7++,this.code=t,this.usedTimes=0}}function T7(i,t,e,n,a,r,l){const u=new dp,d=new M7,p=new Set,g=[],y=new Map,x=a.logarithmicDepthBuffer;let _=a.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(N){return p.add(N),N===0?"uv":`uv${N}`}function T(N,I,W,lt,tt){const rt=lt.fog,mt=tt.geometry,$=N.isMeshStandardMaterial?lt.environment:null,et=(N.isMeshStandardMaterial?e:t).get(N.envMap||$),vt=et&&et.mapping===wp?et.image.height:null,ut=E[N.type];N.precision!==null&&(_=a.getMaxPrecision(N.precision),_!==N.precision&&Re("WebGLProgram.getParameters:",N.precision,"not supported, using",_,"instead."));const j=mt.morphAttributes.position||mt.morphAttributes.normal||mt.morphAttributes.color,st=j!==void 0?j.length:0;let wt=0;mt.morphAttributes.position!==void 0&&(wt=1),mt.morphAttributes.normal!==void 0&&(wt=2),mt.morphAttributes.color!==void 0&&(wt=3);let Ct,Mt,Vt,ft;if(ut){const hn=Bo[ut];Ct=hn.vertexShader,Mt=hn.fragmentShader}else Ct=N.vertexShader,Mt=N.fragmentShader,d.update(N),Vt=d.getVertexShaderID(N),ft=d.getFragmentShaderID(N);const Rt=i.getRenderTarget(),Ft=i.state.buffers.depth.getReversed(),Se=tt.isInstancedMesh===!0,$t=tt.isBatchedMesh===!0,ze=!!N.map,Qe=!!N.matcap,Oe=!!et,Gt=!!N.aoMap,se=!!N.lightMap,Wt=!!N.bumpMap,ve=!!N.normalMap,J=!!N.displacementMap,Fe=!!N.emissiveMap,be=!!N.metalnessMap,He=!!N.roughnessMap,ye=N.anisotropy>0,Q=N.clearcoat>0,F=N.dispersion>0,gt=N.iridescence>0,Bt=N.sheen>0,qt=N.transmission>0,Pt=ye&&!!N.anisotropyMap,Le=Q&&!!N.clearcoatMap,Me=Q&&!!N.clearcoatNormalMap,Pe=Q&&!!N.clearcoatRoughnessMap,Ye=gt&&!!N.iridescenceMap,Zt=gt&&!!N.iridescenceThicknessMap,Kt=Bt&&!!N.sheenColorMap,De=Bt&&!!N.sheenRoughnessMap,nt=!!N.specularMap,_t=!!N.specularColorMap,te=!!N.specularIntensityMap,ot=qt&&!!N.transmissionMap,At=qt&&!!N.thicknessMap,Qt=!!N.gradientMap,Ee=!!N.alphaMap,ne=N.alphaTest>0,Yt=!!N.alphaHash,ce=!!N.extensions;let je=qr;N.toneMapped&&(Rt===null||Rt.isXRRenderTarget===!0)&&(je=i.toneMapping);const pn={shaderID:ut,shaderType:N.type,shaderName:N.name,vertexShader:Ct,fragmentShader:Mt,defines:N.defines,customVertexShaderID:Vt,customFragmentShaderID:ft,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:_,batching:$t,batchingColor:$t&&tt._colorsTexture!==null,instancing:Se,instancingColor:Se&&tt.instanceColor!==null,instancingMorph:Se&&tt.morphTexture!==null,outputColorSpace:Rt===null?i.outputColorSpace:Rt.isXRRenderTarget===!0?Rt.texture.colorSpace:Ho,alphaToCoverage:!!N.alphaToCoverage,map:ze,matcap:Qe,envMap:Oe,envMapMode:Oe&&et.mapping,envMapCubeUVHeight:vt,aoMap:Gt,lightMap:se,bumpMap:Wt,normalMap:ve,displacementMap:J,emissiveMap:Fe,normalMapObjectSpace:ve&&N.normalMapType===lD,normalMapTangentSpace:ve&&N.normalMapType===ju,metalnessMap:be,roughnessMap:He,anisotropy:ye,anisotropyMap:Pt,clearcoat:Q,clearcoatMap:Le,clearcoatNormalMap:Me,clearcoatRoughnessMap:Pe,dispersion:F,iridescence:gt,iridescenceMap:Ye,iridescenceThicknessMap:Zt,sheen:Bt,sheenColorMap:Kt,sheenRoughnessMap:De,specularMap:nt,specularColorMap:_t,specularIntensityMap:te,transmission:qt,transmissionMap:ot,thicknessMap:At,gradientMap:Qt,opaque:N.transparent===!1&&N.blending===lh&&N.alphaToCoverage===!1,alphaMap:Ee,alphaTest:ne,alphaHash:Yt,combine:N.combine,mapUv:ze&&C(N.map.channel),aoMapUv:Gt&&C(N.aoMap.channel),lightMapUv:se&&C(N.lightMap.channel),bumpMapUv:Wt&&C(N.bumpMap.channel),normalMapUv:ve&&C(N.normalMap.channel),displacementMapUv:J&&C(N.displacementMap.channel),emissiveMapUv:Fe&&C(N.emissiveMap.channel),metalnessMapUv:be&&C(N.metalnessMap.channel),roughnessMapUv:He&&C(N.roughnessMap.channel),anisotropyMapUv:Pt&&C(N.anisotropyMap.channel),clearcoatMapUv:Le&&C(N.clearcoatMap.channel),clearcoatNormalMapUv:Me&&C(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Pe&&C(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Ye&&C(N.iridescenceMap.channel),iridescenceThicknessMapUv:Zt&&C(N.iridescenceThicknessMap.channel),sheenColorMapUv:Kt&&C(N.sheenColorMap.channel),sheenRoughnessMapUv:De&&C(N.sheenRoughnessMap.channel),specularMapUv:nt&&C(N.specularMap.channel),specularColorMapUv:_t&&C(N.specularColorMap.channel),specularIntensityMapUv:te&&C(N.specularIntensityMap.channel),transmissionMapUv:ot&&C(N.transmissionMap.channel),thicknessMapUv:At&&C(N.thicknessMap.channel),alphaMapUv:Ee&&C(N.alphaMap.channel),vertexTangents:!!mt.attributes.tangent&&(ve||ye),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!mt.attributes.color&&mt.attributes.color.itemSize===4,pointsUvs:tt.isPoints===!0&&!!mt.attributes.uv&&(ze||Ee),fog:!!rt,useFog:N.fog===!0,fogExp2:!!rt&&rt.isFogExp2,flatShading:N.flatShading===!0&&N.wireframe===!1,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:x,reversedDepthBuffer:Ft,skinning:tt.isSkinnedMesh===!0,morphTargets:mt.morphAttributes.position!==void 0,morphNormals:mt.morphAttributes.normal!==void 0,morphColors:mt.morphAttributes.color!==void 0,morphTargetsCount:st,morphTextureStride:wt,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&W.length>0,shadowMapType:i.shadowMap.type,toneMapping:je,decodeVideoTexture:ze&&N.map.isVideoTexture===!0&&Un.getTransfer(N.map.colorSpace)===ti,decodeVideoTextureEmissive:Fe&&N.emissiveMap.isVideoTexture===!0&&Un.getTransfer(N.emissiveMap.colorSpace)===ti,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Ns,flipSided:N.side===ps,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:ce&&N.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ce&&N.extensions.multiDraw===!0||$t)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return pn.vertexUv1s=p.has(1),pn.vertexUv2s=p.has(2),pn.vertexUv3s=p.has(3),p.clear(),pn}function M(N){const I=[];if(N.shaderID?I.push(N.shaderID):(I.push(N.customVertexShaderID),I.push(N.customFragmentShaderID)),N.defines!==void 0)for(const W in N.defines)I.push(W),I.push(N.defines[W]);return N.isRawShaderMaterial===!1&&(R(I,N),D(I,N),I.push(i.outputColorSpace)),I.push(N.customProgramCacheKey),I.join()}function R(N,I){N.push(I.precision),N.push(I.outputColorSpace),N.push(I.envMapMode),N.push(I.envMapCubeUVHeight),N.push(I.mapUv),N.push(I.alphaMapUv),N.push(I.lightMapUv),N.push(I.aoMapUv),N.push(I.bumpMapUv),N.push(I.normalMapUv),N.push(I.displacementMapUv),N.push(I.emissiveMapUv),N.push(I.metalnessMapUv),N.push(I.roughnessMapUv),N.push(I.anisotropyMapUv),N.push(I.clearcoatMapUv),N.push(I.clearcoatNormalMapUv),N.push(I.clearcoatRoughnessMapUv),N.push(I.iridescenceMapUv),N.push(I.iridescenceThicknessMapUv),N.push(I.sheenColorMapUv),N.push(I.sheenRoughnessMapUv),N.push(I.specularMapUv),N.push(I.specularColorMapUv),N.push(I.specularIntensityMapUv),N.push(I.transmissionMapUv),N.push(I.thicknessMapUv),N.push(I.combine),N.push(I.fogExp2),N.push(I.sizeAttenuation),N.push(I.morphTargetsCount),N.push(I.morphAttributeCount),N.push(I.numDirLights),N.push(I.numPointLights),N.push(I.numSpotLights),N.push(I.numSpotLightMaps),N.push(I.numHemiLights),N.push(I.numRectAreaLights),N.push(I.numDirLightShadows),N.push(I.numPointLightShadows),N.push(I.numSpotLightShadows),N.push(I.numSpotLightShadowsWithMaps),N.push(I.numLightProbes),N.push(I.shadowMapType),N.push(I.toneMapping),N.push(I.numClippingPlanes),N.push(I.numClipIntersection),N.push(I.depthPacking)}function D(N,I){u.disableAll(),I.instancing&&u.enable(0),I.instancingColor&&u.enable(1),I.instancingMorph&&u.enable(2),I.matcap&&u.enable(3),I.envMap&&u.enable(4),I.normalMapObjectSpace&&u.enable(5),I.normalMapTangentSpace&&u.enable(6),I.clearcoat&&u.enable(7),I.iridescence&&u.enable(8),I.alphaTest&&u.enable(9),I.vertexColors&&u.enable(10),I.vertexAlphas&&u.enable(11),I.vertexUv1s&&u.enable(12),I.vertexUv2s&&u.enable(13),I.vertexUv3s&&u.enable(14),I.vertexTangents&&u.enable(15),I.anisotropy&&u.enable(16),I.alphaHash&&u.enable(17),I.batching&&u.enable(18),I.dispersion&&u.enable(19),I.batchingColor&&u.enable(20),I.gradientMap&&u.enable(21),N.push(u.mask),u.disableAll(),I.fog&&u.enable(0),I.useFog&&u.enable(1),I.flatShading&&u.enable(2),I.logarithmicDepthBuffer&&u.enable(3),I.reversedDepthBuffer&&u.enable(4),I.skinning&&u.enable(5),I.morphTargets&&u.enable(6),I.morphNormals&&u.enable(7),I.morphColors&&u.enable(8),I.premultipliedAlpha&&u.enable(9),I.shadowMapEnabled&&u.enable(10),I.doubleSided&&u.enable(11),I.flipSided&&u.enable(12),I.useDepthPacking&&u.enable(13),I.dithering&&u.enable(14),I.transmission&&u.enable(15),I.sheen&&u.enable(16),I.opaque&&u.enable(17),I.pointsUvs&&u.enable(18),I.decodeVideoTexture&&u.enable(19),I.decodeVideoTextureEmissive&&u.enable(20),I.alphaToCoverage&&u.enable(21),N.push(u.mask)}function L(N){const I=E[N.type];let W;if(I){const lt=Bo[I];W=H0.clone(lt.uniforms)}else W=N.uniforms;return W}function P(N,I){let W=y.get(I);return W!==void 0?++W.usedTimes:(W=new S7(i,I,N,r),g.push(W),y.set(I,W)),W}function B(N){if(--N.usedTimes===0){const I=g.indexOf(N);g[I]=g[g.length-1],g.pop(),y.delete(N.cacheKey),N.destroy()}}function G(N){d.remove(N)}function V(){d.dispose()}return{getParameters:T,getProgramCacheKey:M,getUniforms:L,acquireProgram:P,releaseProgram:B,releaseShaderCache:G,programs:g,dispose:V}}function A7(){let i=new WeakMap;function t(l){return i.has(l)}function e(l){let u=i.get(l);return u===void 0&&(u={},i.set(l,u)),u}function n(l){i.delete(l)}function a(l,u,d){i.get(l)[u]=d}function r(){i=new WeakMap}return{has:t,get:e,remove:n,update:a,dispose:r}}function w7(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function Xw(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function Yw(){const i=[];let t=0;const e=[],n=[],a=[];function r(){t=0,e.length=0,n.length=0,a.length=0}function l(y,x,_,E,C,T){let M=i[t];return M===void 0?(M={id:y.id,object:y,geometry:x,material:_,groupOrder:E,renderOrder:y.renderOrder,z:C,group:T},i[t]=M):(M.id=y.id,M.object=y,M.geometry=x,M.material=_,M.groupOrder=E,M.renderOrder=y.renderOrder,M.z=C,M.group=T),t++,M}function u(y,x,_,E,C,T){const M=l(y,x,_,E,C,T);_.transmission>0?n.push(M):_.transparent===!0?a.push(M):e.push(M)}function d(y,x,_,E,C,T){const M=l(y,x,_,E,C,T);_.transmission>0?n.unshift(M):_.transparent===!0?a.unshift(M):e.unshift(M)}function p(y,x){e.length>1&&e.sort(y||w7),n.length>1&&n.sort(x||Xw),a.length>1&&a.sort(x||Xw)}function g(){for(let y=t,x=i.length;y<x;y++){const _=i[y];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:n,transparent:a,init:r,push:u,unshift:d,finish:g,sort:p}}function C7(){let i=new WeakMap;function t(n,a){const r=i.get(n);let l;return r===void 0?(l=new Yw,i.set(n,[l])):a>=r.length?(l=new Yw,r.push(l)):l=r[a],l}function e(){i=new WeakMap}return{get:t,dispose:e}}function R7(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new K,color:new Ae};break;case"SpotLight":e={position:new K,direction:new K,color:new Ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new K,color:new Ae,distance:0,decay:0};break;case"HemisphereLight":e={direction:new K,skyColor:new Ae,groundColor:new Ae};break;case"RectAreaLight":e={color:new Ae,position:new K,halfWidth:new K,halfHeight:new K};break}return i[t.id]=e,e}}}function D7(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let N7=0;function U7(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function O7(i){const t=new R7,e=D7(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new K);const a=new K,r=new rn,l=new rn;function u(p){let g=0,y=0,x=0;for(let N=0;N<9;N++)n.probe[N].set(0,0,0);let _=0,E=0,C=0,T=0,M=0,R=0,D=0,L=0,P=0,B=0,G=0;p.sort(U7);for(let N=0,I=p.length;N<I;N++){const W=p[N],lt=W.color,tt=W.intensity,rt=W.distance;let mt=null;if(W.shadow&&W.shadow.map&&(W.shadow.map.texture.format===hh?mt=W.shadow.map.texture:mt=W.shadow.map.depthTexture||W.shadow.map.texture),W.isAmbientLight)g+=lt.r*tt,y+=lt.g*tt,x+=lt.b*tt;else if(W.isLightProbe){for(let $=0;$<9;$++)n.probe[$].addScaledVector(W.sh.coefficients[$],tt);G++}else if(W.isDirectionalLight){const $=t.get(W);if($.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const et=W.shadow,vt=e.get(W);vt.shadowIntensity=et.intensity,vt.shadowBias=et.bias,vt.shadowNormalBias=et.normalBias,vt.shadowRadius=et.radius,vt.shadowMapSize=et.mapSize,n.directionalShadow[_]=vt,n.directionalShadowMap[_]=mt,n.directionalShadowMatrix[_]=W.shadow.matrix,R++}n.directional[_]=$,_++}else if(W.isSpotLight){const $=t.get(W);$.position.setFromMatrixPosition(W.matrixWorld),$.color.copy(lt).multiplyScalar(tt),$.distance=rt,$.coneCos=Math.cos(W.angle),$.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),$.decay=W.decay,n.spot[C]=$;const et=W.shadow;if(W.map&&(n.spotLightMap[P]=W.map,P++,et.updateMatrices(W),W.castShadow&&B++),n.spotLightMatrix[C]=et.matrix,W.castShadow){const vt=e.get(W);vt.shadowIntensity=et.intensity,vt.shadowBias=et.bias,vt.shadowNormalBias=et.normalBias,vt.shadowRadius=et.radius,vt.shadowMapSize=et.mapSize,n.spotShadow[C]=vt,n.spotShadowMap[C]=mt,L++}C++}else if(W.isRectAreaLight){const $=t.get(W);$.color.copy(lt).multiplyScalar(tt),$.halfWidth.set(W.width*.5,0,0),$.halfHeight.set(0,W.height*.5,0),n.rectArea[T]=$,T++}else if(W.isPointLight){const $=t.get(W);if($.color.copy(W.color).multiplyScalar(W.intensity),$.distance=W.distance,$.decay=W.decay,W.castShadow){const et=W.shadow,vt=e.get(W);vt.shadowIntensity=et.intensity,vt.shadowBias=et.bias,vt.shadowNormalBias=et.normalBias,vt.shadowRadius=et.radius,vt.shadowMapSize=et.mapSize,vt.shadowCameraNear=et.camera.near,vt.shadowCameraFar=et.camera.far,n.pointShadow[E]=vt,n.pointShadowMap[E]=mt,n.pointShadowMatrix[E]=W.shadow.matrix,D++}n.point[E]=$,E++}else if(W.isHemisphereLight){const $=t.get(W);$.skyColor.copy(W.color).multiplyScalar(tt),$.groundColor.copy(W.groundColor).multiplyScalar(tt),n.hemi[M]=$,M++}}T>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ue.LTC_FLOAT_1,n.rectAreaLTC2=Ue.LTC_FLOAT_2):(n.rectAreaLTC1=Ue.LTC_HALF_1,n.rectAreaLTC2=Ue.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=y,n.ambient[2]=x;const V=n.hash;(V.directionalLength!==_||V.pointLength!==E||V.spotLength!==C||V.rectAreaLength!==T||V.hemiLength!==M||V.numDirectionalShadows!==R||V.numPointShadows!==D||V.numSpotShadows!==L||V.numSpotMaps!==P||V.numLightProbes!==G)&&(n.directional.length=_,n.spot.length=C,n.rectArea.length=T,n.point.length=E,n.hemi.length=M,n.directionalShadow.length=R,n.directionalShadowMap.length=R,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=L,n.spotShadowMap.length=L,n.directionalShadowMatrix.length=R,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=L+P-B,n.spotLightMap.length=P,n.numSpotLightShadowsWithMaps=B,n.numLightProbes=G,V.directionalLength=_,V.pointLength=E,V.spotLength=C,V.rectAreaLength=T,V.hemiLength=M,V.numDirectionalShadows=R,V.numPointShadows=D,V.numSpotShadows=L,V.numSpotMaps=P,V.numLightProbes=G,n.version=N7++)}function d(p,g){let y=0,x=0,_=0,E=0,C=0;const T=g.matrixWorldInverse;for(let M=0,R=p.length;M<R;M++){const D=p[M];if(D.isDirectionalLight){const L=n.directional[y];L.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),L.direction.sub(a),L.direction.transformDirection(T),y++}else if(D.isSpotLight){const L=n.spot[_];L.position.setFromMatrixPosition(D.matrixWorld),L.position.applyMatrix4(T),L.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),L.direction.sub(a),L.direction.transformDirection(T),_++}else if(D.isRectAreaLight){const L=n.rectArea[E];L.position.setFromMatrixPosition(D.matrixWorld),L.position.applyMatrix4(T),l.identity(),r.copy(D.matrixWorld),r.premultiply(T),l.extractRotation(r),L.halfWidth.set(D.width*.5,0,0),L.halfHeight.set(0,D.height*.5,0),L.halfWidth.applyMatrix4(l),L.halfHeight.applyMatrix4(l),E++}else if(D.isPointLight){const L=n.point[x];L.position.setFromMatrixPosition(D.matrixWorld),L.position.applyMatrix4(T),x++}else if(D.isHemisphereLight){const L=n.hemi[C];L.direction.setFromMatrixPosition(D.matrixWorld),L.direction.transformDirection(T),C++}}}return{setup:u,setupView:d,state:n}}function qw(i){const t=new O7(i),e=[],n=[];function a(g){p.camera=g,e.length=0,n.length=0}function r(g){e.push(g)}function l(g){n.push(g)}function u(){t.setup(e)}function d(g){t.setupView(e,g)}const p={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:p,setupLights:u,setupLightsView:d,pushLight:r,pushShadow:l}}function L7(i){let t=new WeakMap;function e(a,r=0){const l=t.get(a);let u;return l===void 0?(u=new qw(i),t.set(a,[u])):r>=l.length?(u=new qw(i),l.push(u)):u=l[r],u}function n(){t=new WeakMap}return{get:e,dispose:n}}const P7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,I7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,B7=[new K(1,0,0),new K(-1,0,0),new K(0,1,0),new K(0,-1,0),new K(0,0,1),new K(0,0,-1)],z7=[new K(0,-1,0),new K(0,-1,0),new K(0,0,1),new K(0,0,-1),new K(0,-1,0),new K(0,-1,0)],Ww=new rn,i0=new K,tb=new K;function F7(i,t,e){let n=new Cp;const a=new It,r=new It,l=new di,u=new t1,d=new EE,p={},g=e.maxTextureSize,y={[Rc]:ps,[ps]:Rc,[Ns]:Ns},x=new Ri({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:P7,fragmentShader:I7}),_=x.clone();_.defines.HORIZONTAL_PASS=1;const E=new ln;E.setAttribute("position",new ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Zn(E,x),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tp;let M=this.type;this.render=function(B,G,V){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||B.length===0)return;B.type===ep&&(Re("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),B.type=tp);const N=i.getRenderTarget(),I=i.getActiveCubeFace(),W=i.getActiveMipmapLevel(),lt=i.state;lt.setBlending(Yr),lt.buffers.depth.getReversed()===!0?lt.buffers.color.setClear(0,0,0,0):lt.buffers.color.setClear(1,1,1,1),lt.buffers.depth.setTest(!0),lt.setScissorTest(!1);const tt=M!==this.type;tt&&G.traverse(function(rt){rt.material&&(Array.isArray(rt.material)?rt.material.forEach(mt=>mt.needsUpdate=!0):rt.material.needsUpdate=!0)});for(let rt=0,mt=B.length;rt<mt;rt++){const $=B[rt],et=$.shadow;if(et===void 0){Re("WebGLShadowMap:",$,"has no shadow.");continue}if(et.autoUpdate===!1&&et.needsUpdate===!1)continue;a.copy(et.mapSize);const vt=et.getFrameExtents();if(a.multiply(vt),r.copy(et.mapSize),(a.x>g||a.y>g)&&(a.x>g&&(r.x=Math.floor(g/vt.x),a.x=r.x*vt.x,et.mapSize.x=r.x),a.y>g&&(r.y=Math.floor(g/vt.y),a.y=r.y*vt.y,et.mapSize.y=r.y)),et.map===null||tt===!0){if(et.map!==null&&(et.map.depthTexture!==null&&(et.map.depthTexture.dispose(),et.map.depthTexture=null),et.map.dispose()),this.type===th){if($.isPointLight){Re("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}et.map=new ia(a.x,a.y,{format:hh,type:pi,minFilter:Nn,magFilter:Nn,generateMipmaps:!1}),et.map.texture.name=$.name+".shadowMap",et.map.depthTexture=new ph(a.x,a.y,Mi),et.map.depthTexture.name=$.name+".shadowMapDepth",et.map.depthTexture.format=zl,et.map.depthTexture.compareFunction=null,et.map.depthTexture.minFilter=la,et.map.depthTexture.magFilter=la}else{$.isPointLight?(et.map=new L_(a.x),et.map.depthTexture=new RD(a.x,Mr)):(et.map=new ia(a.x,a.y),et.map.depthTexture=new ph(a.x,a.y,Mr)),et.map.depthTexture.name=$.name+".shadowMap",et.map.depthTexture.format=zl;const j=i.state.buffers.depth.getReversed();this.type===tp?(et.map.depthTexture.compareFunction=j?R_:C_,et.map.depthTexture.minFilter=Nn,et.map.depthTexture.magFilter=Nn):(et.map.depthTexture.compareFunction=null,et.map.depthTexture.minFilter=la,et.map.depthTexture.magFilter=la)}et.camera.updateProjectionMatrix()}const ut=et.map.isWebGLCubeRenderTarget?6:1;for(let j=0;j<ut;j++){if(et.map.isWebGLCubeRenderTarget)i.setRenderTarget(et.map,j),i.clear();else{j===0&&(i.setRenderTarget(et.map),i.clear());const st=et.getViewport(j);l.set(r.x*st.x,r.y*st.y,r.x*st.z,r.y*st.w),lt.viewport(l)}if($.isPointLight){const st=et.camera,wt=et.matrix,Ct=$.distance||st.far;Ct!==st.far&&(st.far=Ct,st.updateProjectionMatrix()),i0.setFromMatrixPosition($.matrixWorld),st.position.copy(i0),tb.copy(st.position),tb.add(B7[j]),st.up.copy(z7[j]),st.lookAt(tb),st.updateMatrixWorld(),wt.makeTranslation(-i0.x,-i0.y,-i0.z),Ww.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),et._frustum.setFromProjectionMatrix(Ww,st.coordinateSystem,st.reversedDepth)}else et.updateMatrices($);n=et.getFrustum(),L(G,V,et.camera,$,this.type)}et.isPointLightShadow!==!0&&this.type===th&&R(et,V),et.needsUpdate=!1}M=this.type,T.needsUpdate=!1,i.setRenderTarget(N,I,W)};function R(B,G){const V=t.update(C);x.defines.VSM_SAMPLES!==B.blurSamples&&(x.defines.VSM_SAMPLES=B.blurSamples,_.defines.VSM_SAMPLES=B.blurSamples,x.needsUpdate=!0,_.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new ia(a.x,a.y,{format:hh,type:pi})),x.uniforms.shadow_pass.value=B.map.depthTexture,x.uniforms.resolution.value=B.mapSize,x.uniforms.radius.value=B.radius,i.setRenderTarget(B.mapPass),i.clear(),i.renderBufferDirect(G,null,V,x,C,null),_.uniforms.shadow_pass.value=B.mapPass.texture,_.uniforms.resolution.value=B.mapSize,_.uniforms.radius.value=B.radius,i.setRenderTarget(B.map),i.clear(),i.renderBufferDirect(G,null,V,_,C,null)}function D(B,G,V,N){let I=null;const W=V.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(W!==void 0)I=W;else if(I=V.isPointLight===!0?d:u,i.localClippingEnabled&&G.clipShadows===!0&&Array.isArray(G.clippingPlanes)&&G.clippingPlanes.length!==0||G.displacementMap&&G.displacementScale!==0||G.alphaMap&&G.alphaTest>0||G.map&&G.alphaTest>0||G.alphaToCoverage===!0){const lt=I.uuid,tt=G.uuid;let rt=p[lt];rt===void 0&&(rt={},p[lt]=rt);let mt=rt[tt];mt===void 0&&(mt=I.clone(),rt[tt]=mt,G.addEventListener("dispose",P)),I=mt}if(I.visible=G.visible,I.wireframe=G.wireframe,N===th?I.side=G.shadowSide!==null?G.shadowSide:G.side:I.side=G.shadowSide!==null?G.shadowSide:y[G.side],I.alphaMap=G.alphaMap,I.alphaTest=G.alphaToCoverage===!0?.5:G.alphaTest,I.map=G.map,I.clipShadows=G.clipShadows,I.clippingPlanes=G.clippingPlanes,I.clipIntersection=G.clipIntersection,I.displacementMap=G.displacementMap,I.displacementScale=G.displacementScale,I.displacementBias=G.displacementBias,I.wireframeLinewidth=G.wireframeLinewidth,I.linewidth=G.linewidth,V.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const lt=i.properties.get(I);lt.light=V}return I}function L(B,G,V,N,I){if(B.visible===!1)return;if(B.layers.test(G.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&I===th)&&(!B.frustumCulled||n.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,B.matrixWorld);const tt=t.update(B),rt=B.material;if(Array.isArray(rt)){const mt=tt.groups;for(let $=0,et=mt.length;$<et;$++){const vt=mt[$],ut=rt[vt.materialIndex];if(ut&&ut.visible){const j=D(B,ut,N,I);B.onBeforeShadow(i,B,G,V,tt,j,vt),i.renderBufferDirect(V,null,tt,j,B,vt),B.onAfterShadow(i,B,G,V,tt,j,vt)}}}else if(rt.visible){const mt=D(B,rt,N,I);B.onBeforeShadow(i,B,G,V,tt,mt,null),i.renderBufferDirect(V,null,tt,mt,B,null),B.onAfterShadow(i,B,G,V,tt,mt,null)}}const lt=B.children;for(let tt=0,rt=lt.length;tt<rt;tt++)L(lt[tt],G,V,N,I)}function P(B){B.target.removeEventListener("dispose",P);for(const V in p){const N=p[V],I=B.target.uuid;I in N&&(N[I].dispose(),delete N[I])}}}const V7={[yx]:xx,[_x]:Mx,[Sx]:Ex,[fh]:bx,[xx]:yx,[Mx]:_x,[Ex]:Sx,[bx]:fh};function H7(i,t){function e(){let ot=!1;const At=new di;let Qt=null;const Ee=new di(0,0,0,0);return{setMask:function(ne){Qt!==ne&&!ot&&(i.colorMask(ne,ne,ne,ne),Qt=ne)},setLocked:function(ne){ot=ne},setClear:function(ne,Yt,ce,je,pn){pn===!0&&(ne*=je,Yt*=je,ce*=je),At.set(ne,Yt,ce,je),Ee.equals(At)===!1&&(i.clearColor(ne,Yt,ce,je),Ee.copy(At))},reset:function(){ot=!1,Qt=null,Ee.set(-1,0,0,0)}}}function n(){let ot=!1,At=!1,Qt=null,Ee=null,ne=null;return{setReversed:function(Yt){if(At!==Yt){const ce=t.get("EXT_clip_control");Yt?ce.clipControlEXT(ce.LOWER_LEFT_EXT,ce.ZERO_TO_ONE_EXT):ce.clipControlEXT(ce.LOWER_LEFT_EXT,ce.NEGATIVE_ONE_TO_ONE_EXT),At=Yt;const je=ne;ne=null,this.setClear(je)}},getReversed:function(){return At},setTest:function(Yt){Yt?Rt(i.DEPTH_TEST):Ft(i.DEPTH_TEST)},setMask:function(Yt){Qt!==Yt&&!ot&&(i.depthMask(Yt),Qt=Yt)},setFunc:function(Yt){if(At&&(Yt=V7[Yt]),Ee!==Yt){switch(Yt){case yx:i.depthFunc(i.NEVER);break;case xx:i.depthFunc(i.ALWAYS);break;case _x:i.depthFunc(i.LESS);break;case fh:i.depthFunc(i.LEQUAL);break;case Sx:i.depthFunc(i.EQUAL);break;case bx:i.depthFunc(i.GEQUAL);break;case Mx:i.depthFunc(i.GREATER);break;case Ex:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ee=Yt}},setLocked:function(Yt){ot=Yt},setClear:function(Yt){ne!==Yt&&(At&&(Yt=1-Yt),i.clearDepth(Yt),ne=Yt)},reset:function(){ot=!1,Qt=null,Ee=null,ne=null,At=!1}}}function a(){let ot=!1,At=null,Qt=null,Ee=null,ne=null,Yt=null,ce=null,je=null,pn=null;return{setTest:function(hn){ot||(hn?Rt(i.STENCIL_TEST):Ft(i.STENCIL_TEST))},setMask:function(hn){At!==hn&&!ot&&(i.stencilMask(hn),At=hn)},setFunc:function(hn,xi,_i){(Qt!==hn||Ee!==xi||ne!==_i)&&(i.stencilFunc(hn,xi,_i),Qt=hn,Ee=xi,ne=_i)},setOp:function(hn,xi,_i){(Yt!==hn||ce!==xi||je!==_i)&&(i.stencilOp(hn,xi,_i),Yt=hn,ce=xi,je=_i)},setLocked:function(hn){ot=hn},setClear:function(hn){pn!==hn&&(i.clearStencil(hn),pn=hn)},reset:function(){ot=!1,At=null,Qt=null,Ee=null,ne=null,Yt=null,ce=null,je=null,pn=null}}}const r=new e,l=new n,u=new a,d=new WeakMap,p=new WeakMap;let g={},y={},x=new WeakMap,_=[],E=null,C=!1,T=null,M=null,R=null,D=null,L=null,P=null,B=null,G=new Ae(0,0,0),V=0,N=!1,I=null,W=null,lt=null,tt=null,rt=null;const mt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,et=0;const vt=i.getParameter(i.VERSION);vt.indexOf("WebGL")!==-1?(et=parseFloat(/^WebGL (\d)/.exec(vt)[1]),$=et>=1):vt.indexOf("OpenGL ES")!==-1&&(et=parseFloat(/^OpenGL ES (\d)/.exec(vt)[1]),$=et>=2);let ut=null,j={};const st=i.getParameter(i.SCISSOR_BOX),wt=i.getParameter(i.VIEWPORT),Ct=new di().fromArray(st),Mt=new di().fromArray(wt);function Vt(ot,At,Qt,Ee){const ne=new Uint8Array(4),Yt=i.createTexture();i.bindTexture(ot,Yt),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ce=0;ce<Qt;ce++)ot===i.TEXTURE_3D||ot===i.TEXTURE_2D_ARRAY?i.texImage3D(At,0,i.RGBA,1,1,Ee,0,i.RGBA,i.UNSIGNED_BYTE,ne):i.texImage2D(At+ce,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ne);return Yt}const ft={};ft[i.TEXTURE_2D]=Vt(i.TEXTURE_2D,i.TEXTURE_2D,1),ft[i.TEXTURE_CUBE_MAP]=Vt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),ft[i.TEXTURE_2D_ARRAY]=Vt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ft[i.TEXTURE_3D]=Vt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Rt(i.DEPTH_TEST),l.setFunc(fh),Wt(!1),ve(kb),Rt(i.CULL_FACE),Gt(Yr);function Rt(ot){g[ot]!==!0&&(i.enable(ot),g[ot]=!0)}function Ft(ot){g[ot]!==!1&&(i.disable(ot),g[ot]=!1)}function Se(ot,At){return y[ot]!==At?(i.bindFramebuffer(ot,At),y[ot]=At,ot===i.DRAW_FRAMEBUFFER&&(y[i.FRAMEBUFFER]=At),ot===i.FRAMEBUFFER&&(y[i.DRAW_FRAMEBUFFER]=At),!0):!1}function $t(ot,At){let Qt=_,Ee=!1;if(ot){Qt=x.get(At),Qt===void 0&&(Qt=[],x.set(At,Qt));const ne=ot.textures;if(Qt.length!==ne.length||Qt[0]!==i.COLOR_ATTACHMENT0){for(let Yt=0,ce=ne.length;Yt<ce;Yt++)Qt[Yt]=i.COLOR_ATTACHMENT0+Yt;Qt.length=ne.length,Ee=!0}}else Qt[0]!==i.BACK&&(Qt[0]=i.BACK,Ee=!0);Ee&&i.drawBuffers(Qt)}function ze(ot){return E!==ot?(i.useProgram(ot),E=ot,!0):!1}const Qe={[Cu]:i.FUNC_ADD,[z3]:i.FUNC_SUBTRACT,[F3]:i.FUNC_REVERSE_SUBTRACT};Qe[V3]=i.MIN,Qe[H3]=i.MAX;const Oe={[G3]:i.ZERO,[j3]:i.ONE,[k3]:i.SRC_COLOR,[gx]:i.SRC_ALPHA,[K3]:i.SRC_ALPHA_SATURATE,[W3]:i.DST_COLOR,[Y3]:i.DST_ALPHA,[X3]:i.ONE_MINUS_SRC_COLOR,[vx]:i.ONE_MINUS_SRC_ALPHA,[Z3]:i.ONE_MINUS_DST_COLOR,[q3]:i.ONE_MINUS_DST_ALPHA,[Q3]:i.CONSTANT_COLOR,[J3]:i.ONE_MINUS_CONSTANT_COLOR,[$3]:i.CONSTANT_ALPHA,[tD]:i.ONE_MINUS_CONSTANT_ALPHA};function Gt(ot,At,Qt,Ee,ne,Yt,ce,je,pn,hn){if(ot===Yr){C===!0&&(Ft(i.BLEND),C=!1);return}if(C===!1&&(Rt(i.BLEND),C=!0),ot!==B3){if(ot!==T||hn!==N){if((M!==Cu||L!==Cu)&&(i.blendEquation(i.FUNC_ADD),M=Cu,L=Cu),hn)switch(ot){case lh:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Ul:i.blendFunc(i.ONE,i.ONE);break;case Xb:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Yb:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:Ke("WebGLState: Invalid blending: ",ot);break}else switch(ot){case lh:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Ul:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case Xb:Ke("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Yb:Ke("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Ke("WebGLState: Invalid blending: ",ot);break}R=null,D=null,P=null,B=null,G.set(0,0,0),V=0,T=ot,N=hn}return}ne=ne||At,Yt=Yt||Qt,ce=ce||Ee,(At!==M||ne!==L)&&(i.blendEquationSeparate(Qe[At],Qe[ne]),M=At,L=ne),(Qt!==R||Ee!==D||Yt!==P||ce!==B)&&(i.blendFuncSeparate(Oe[Qt],Oe[Ee],Oe[Yt],Oe[ce]),R=Qt,D=Ee,P=Yt,B=ce),(je.equals(G)===!1||pn!==V)&&(i.blendColor(je.r,je.g,je.b,pn),G.copy(je),V=pn),T=ot,N=!1}function se(ot,At){ot.side===Ns?Ft(i.CULL_FACE):Rt(i.CULL_FACE);let Qt=ot.side===ps;At&&(Qt=!Qt),Wt(Qt),ot.blending===lh&&ot.transparent===!1?Gt(Yr):Gt(ot.blending,ot.blendEquation,ot.blendSrc,ot.blendDst,ot.blendEquationAlpha,ot.blendSrcAlpha,ot.blendDstAlpha,ot.blendColor,ot.blendAlpha,ot.premultipliedAlpha),l.setFunc(ot.depthFunc),l.setTest(ot.depthTest),l.setMask(ot.depthWrite),r.setMask(ot.colorWrite);const Ee=ot.stencilWrite;u.setTest(Ee),Ee&&(u.setMask(ot.stencilWriteMask),u.setFunc(ot.stencilFunc,ot.stencilRef,ot.stencilFuncMask),u.setOp(ot.stencilFail,ot.stencilZFail,ot.stencilZPass)),Fe(ot.polygonOffset,ot.polygonOffsetFactor,ot.polygonOffsetUnits),ot.alphaToCoverage===!0?Rt(i.SAMPLE_ALPHA_TO_COVERAGE):Ft(i.SAMPLE_ALPHA_TO_COVERAGE)}function Wt(ot){I!==ot&&(ot?i.frontFace(i.CW):i.frontFace(i.CCW),I=ot)}function ve(ot){ot!==L3?(Rt(i.CULL_FACE),ot!==W&&(ot===kb?i.cullFace(i.BACK):ot===P3?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ft(i.CULL_FACE),W=ot}function J(ot){ot!==lt&&($&&i.lineWidth(ot),lt=ot)}function Fe(ot,At,Qt){ot?(Rt(i.POLYGON_OFFSET_FILL),(tt!==At||rt!==Qt)&&(i.polygonOffset(At,Qt),tt=At,rt=Qt)):Ft(i.POLYGON_OFFSET_FILL)}function be(ot){ot?Rt(i.SCISSOR_TEST):Ft(i.SCISSOR_TEST)}function He(ot){ot===void 0&&(ot=i.TEXTURE0+mt-1),ut!==ot&&(i.activeTexture(ot),ut=ot)}function ye(ot,At,Qt){Qt===void 0&&(ut===null?Qt=i.TEXTURE0+mt-1:Qt=ut);let Ee=j[Qt];Ee===void 0&&(Ee={type:void 0,texture:void 0},j[Qt]=Ee),(Ee.type!==ot||Ee.texture!==At)&&(ut!==Qt&&(i.activeTexture(Qt),ut=Qt),i.bindTexture(ot,At||ft[ot]),Ee.type=ot,Ee.texture=At)}function Q(){const ot=j[ut];ot!==void 0&&ot.type!==void 0&&(i.bindTexture(ot.type,null),ot.type=void 0,ot.texture=void 0)}function F(){try{i.compressedTexImage2D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function gt(){try{i.compressedTexImage3D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Bt(){try{i.texSubImage2D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function qt(){try{i.texSubImage3D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Pt(){try{i.compressedTexSubImage2D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Le(){try{i.compressedTexSubImage3D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Me(){try{i.texStorage2D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Pe(){try{i.texStorage3D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Ye(){try{i.texImage2D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Zt(){try{i.texImage3D(...arguments)}catch(ot){Ke("WebGLState:",ot)}}function Kt(ot){Ct.equals(ot)===!1&&(i.scissor(ot.x,ot.y,ot.z,ot.w),Ct.copy(ot))}function De(ot){Mt.equals(ot)===!1&&(i.viewport(ot.x,ot.y,ot.z,ot.w),Mt.copy(ot))}function nt(ot,At){let Qt=p.get(At);Qt===void 0&&(Qt=new WeakMap,p.set(At,Qt));let Ee=Qt.get(ot);Ee===void 0&&(Ee=i.getUniformBlockIndex(At,ot.name),Qt.set(ot,Ee))}function _t(ot,At){const Ee=p.get(At).get(ot);d.get(At)!==Ee&&(i.uniformBlockBinding(At,Ee,ot.__bindingPointIndex),d.set(At,Ee))}function te(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),l.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),g={},ut=null,j={},y={},x=new WeakMap,_=[],E=null,C=!1,T=null,M=null,R=null,D=null,L=null,P=null,B=null,G=new Ae(0,0,0),V=0,N=!1,I=null,W=null,lt=null,tt=null,rt=null,Ct.set(0,0,i.canvas.width,i.canvas.height),Mt.set(0,0,i.canvas.width,i.canvas.height),r.reset(),l.reset(),u.reset()}return{buffers:{color:r,depth:l,stencil:u},enable:Rt,disable:Ft,bindFramebuffer:Se,drawBuffers:$t,useProgram:ze,setBlending:Gt,setMaterial:se,setFlipSided:Wt,setCullFace:ve,setLineWidth:J,setPolygonOffset:Fe,setScissorTest:be,activeTexture:He,bindTexture:ye,unbindTexture:Q,compressedTexImage2D:F,compressedTexImage3D:gt,texImage2D:Ye,texImage3D:Zt,updateUBOMapping:nt,uniformBlockBinding:_t,texStorage2D:Me,texStorage3D:Pe,texSubImage2D:Bt,texSubImage3D:qt,compressedTexSubImage2D:Pt,compressedTexSubImage3D:Le,scissor:Kt,viewport:De,reset:te}}function G7(i,t,e,n,a,r,l){const u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new It,g=new WeakMap;let y;const x=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(Q,F){return _?new OffscreenCanvas(Q,F):F0("canvas")}function C(Q,F,gt){let Bt=1;const qt=ye(Q);if((qt.width>gt||qt.height>gt)&&(Bt=gt/Math.max(qt.width,qt.height)),Bt<1)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const Pt=Math.floor(Bt*qt.width),Le=Math.floor(Bt*qt.height);y===void 0&&(y=E(Pt,Le));const Me=F?E(Pt,Le):y;return Me.width=Pt,Me.height=Le,Me.getContext("2d").drawImage(Q,0,0,Pt,Le),Re("WebGLRenderer: Texture has been resized from ("+qt.width+"x"+qt.height+") to ("+Pt+"x"+Le+")."),Me}else return"data"in Q&&Re("WebGLRenderer: Image in DataTexture is too big ("+qt.width+"x"+qt.height+")."),Q;return Q}function T(Q){return Q.generateMipmaps}function M(Q){i.generateMipmap(Q)}function R(Q){return Q.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?i.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function D(Q,F,gt,Bt,qt=!1){if(Q!==null){if(i[Q]!==void 0)return i[Q];Re("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let Pt=F;if(F===i.RED&&(gt===i.FLOAT&&(Pt=i.R32F),gt===i.HALF_FLOAT&&(Pt=i.R16F),gt===i.UNSIGNED_BYTE&&(Pt=i.R8)),F===i.RED_INTEGER&&(gt===i.UNSIGNED_BYTE&&(Pt=i.R8UI),gt===i.UNSIGNED_SHORT&&(Pt=i.R16UI),gt===i.UNSIGNED_INT&&(Pt=i.R32UI),gt===i.BYTE&&(Pt=i.R8I),gt===i.SHORT&&(Pt=i.R16I),gt===i.INT&&(Pt=i.R32I)),F===i.RG&&(gt===i.FLOAT&&(Pt=i.RG32F),gt===i.HALF_FLOAT&&(Pt=i.RG16F),gt===i.UNSIGNED_BYTE&&(Pt=i.RG8)),F===i.RG_INTEGER&&(gt===i.UNSIGNED_BYTE&&(Pt=i.RG8UI),gt===i.UNSIGNED_SHORT&&(Pt=i.RG16UI),gt===i.UNSIGNED_INT&&(Pt=i.RG32UI),gt===i.BYTE&&(Pt=i.RG8I),gt===i.SHORT&&(Pt=i.RG16I),gt===i.INT&&(Pt=i.RG32I)),F===i.RGB_INTEGER&&(gt===i.UNSIGNED_BYTE&&(Pt=i.RGB8UI),gt===i.UNSIGNED_SHORT&&(Pt=i.RGB16UI),gt===i.UNSIGNED_INT&&(Pt=i.RGB32UI),gt===i.BYTE&&(Pt=i.RGB8I),gt===i.SHORT&&(Pt=i.RGB16I),gt===i.INT&&(Pt=i.RGB32I)),F===i.RGBA_INTEGER&&(gt===i.UNSIGNED_BYTE&&(Pt=i.RGBA8UI),gt===i.UNSIGNED_SHORT&&(Pt=i.RGBA16UI),gt===i.UNSIGNED_INT&&(Pt=i.RGBA32UI),gt===i.BYTE&&(Pt=i.RGBA8I),gt===i.SHORT&&(Pt=i.RGBA16I),gt===i.INT&&(Pt=i.RGBA32I)),F===i.RGB&&(gt===i.UNSIGNED_INT_5_9_9_9_REV&&(Pt=i.RGB9_E5),gt===i.UNSIGNED_INT_10F_11F_11F_REV&&(Pt=i.R11F_G11F_B10F)),F===i.RGBA){const Le=qt?B0:Un.getTransfer(Bt);gt===i.FLOAT&&(Pt=i.RGBA32F),gt===i.HALF_FLOAT&&(Pt=i.RGBA16F),gt===i.UNSIGNED_BYTE&&(Pt=Le===ti?i.SRGB8_ALPHA8:i.RGBA8),gt===i.UNSIGNED_SHORT_4_4_4_4&&(Pt=i.RGBA4),gt===i.UNSIGNED_SHORT_5_5_5_1&&(Pt=i.RGB5_A1)}return(Pt===i.R16F||Pt===i.R32F||Pt===i.RG16F||Pt===i.RG32F||Pt===i.RGBA16F||Pt===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Pt}function L(Q,F){let gt;return Q?F===null||F===Mr||F===cp?gt=i.DEPTH24_STENCIL8:F===Mi?gt=i.DEPTH32F_STENCIL8:F===lp&&(gt=i.DEPTH24_STENCIL8,Re("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===Mr||F===cp?gt=i.DEPTH_COMPONENT24:F===Mi?gt=i.DEPTH_COMPONENT32F:F===lp&&(gt=i.DEPTH_COMPONENT16),gt}function P(Q,F){return T(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==la&&Q.minFilter!==Nn?Math.log2(Math.max(F.width,F.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?F.mipmaps.length:1}function B(Q){const F=Q.target;F.removeEventListener("dispose",B),V(F),F.isVideoTexture&&g.delete(F)}function G(Q){const F=Q.target;F.removeEventListener("dispose",G),I(F)}function V(Q){const F=n.get(Q);if(F.__webglInit===void 0)return;const gt=Q.source,Bt=x.get(gt);if(Bt){const qt=Bt[F.__cacheKey];qt.usedTimes--,qt.usedTimes===0&&N(Q),Object.keys(Bt).length===0&&x.delete(gt)}n.remove(Q)}function N(Q){const F=n.get(Q);i.deleteTexture(F.__webglTexture);const gt=Q.source,Bt=x.get(gt);delete Bt[F.__cacheKey],l.memory.textures--}function I(Q){const F=n.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),n.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let Bt=0;Bt<6;Bt++){if(Array.isArray(F.__webglFramebuffer[Bt]))for(let qt=0;qt<F.__webglFramebuffer[Bt].length;qt++)i.deleteFramebuffer(F.__webglFramebuffer[Bt][qt]);else i.deleteFramebuffer(F.__webglFramebuffer[Bt]);F.__webglDepthbuffer&&i.deleteRenderbuffer(F.__webglDepthbuffer[Bt])}else{if(Array.isArray(F.__webglFramebuffer))for(let Bt=0;Bt<F.__webglFramebuffer.length;Bt++)i.deleteFramebuffer(F.__webglFramebuffer[Bt]);else i.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&i.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&i.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let Bt=0;Bt<F.__webglColorRenderbuffer.length;Bt++)F.__webglColorRenderbuffer[Bt]&&i.deleteRenderbuffer(F.__webglColorRenderbuffer[Bt]);F.__webglDepthRenderbuffer&&i.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const gt=Q.textures;for(let Bt=0,qt=gt.length;Bt<qt;Bt++){const Pt=n.get(gt[Bt]);Pt.__webglTexture&&(i.deleteTexture(Pt.__webglTexture),l.memory.textures--),n.remove(gt[Bt])}n.remove(Q)}let W=0;function lt(){W=0}function tt(){const Q=W;return Q>=a.maxTextures&&Re("WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+a.maxTextures),W+=1,Q}function rt(Q){const F=[];return F.push(Q.wrapS),F.push(Q.wrapT),F.push(Q.wrapR||0),F.push(Q.magFilter),F.push(Q.minFilter),F.push(Q.anisotropy),F.push(Q.internalFormat),F.push(Q.format),F.push(Q.type),F.push(Q.generateMipmaps),F.push(Q.premultiplyAlpha),F.push(Q.flipY),F.push(Q.unpackAlignment),F.push(Q.colorSpace),F.join()}function mt(Q,F){const gt=n.get(Q);if(Q.isVideoTexture&&be(Q),Q.isRenderTargetTexture===!1&&Q.isExternalTexture!==!0&&Q.version>0&&gt.__version!==Q.version){const Bt=Q.image;if(Bt===null)Re("WebGLRenderer: Texture marked for update but no image data found.");else if(Bt.complete===!1)Re("WebGLRenderer: Texture marked for update but image is incomplete");else{ft(gt,Q,F);return}}else Q.isExternalTexture&&(gt.__webglTexture=Q.sourceTexture?Q.sourceTexture:null);e.bindTexture(i.TEXTURE_2D,gt.__webglTexture,i.TEXTURE0+F)}function $(Q,F){const gt=n.get(Q);if(Q.isRenderTargetTexture===!1&&Q.version>0&&gt.__version!==Q.version){ft(gt,Q,F);return}else Q.isExternalTexture&&(gt.__webglTexture=Q.sourceTexture?Q.sourceTexture:null);e.bindTexture(i.TEXTURE_2D_ARRAY,gt.__webglTexture,i.TEXTURE0+F)}function et(Q,F){const gt=n.get(Q);if(Q.isRenderTargetTexture===!1&&Q.version>0&&gt.__version!==Q.version){ft(gt,Q,F);return}e.bindTexture(i.TEXTURE_3D,gt.__webglTexture,i.TEXTURE0+F)}function vt(Q,F){const gt=n.get(Q);if(Q.isCubeDepthTexture!==!0&&Q.version>0&&gt.__version!==Q.version){Rt(gt,Q,F);return}e.bindTexture(i.TEXTURE_CUBE_MAP,gt.__webglTexture,i.TEXTURE0+F)}const ut={[O0]:i.REPEAT,[na]:i.CLAMP_TO_EDGE,[L0]:i.MIRRORED_REPEAT},j={[la]:i.NEAREST,[nE]:i.NEAREST_MIPMAP_NEAREST,[Zd]:i.NEAREST_MIPMAP_LINEAR,[Nn]:i.LINEAR,[p0]:i.LINEAR_MIPMAP_NEAREST,[Ol]:i.LINEAR_MIPMAP_LINEAR},st={[cD]:i.NEVER,[pD]:i.ALWAYS,[uD]:i.LESS,[C_]:i.LEQUAL,[fD]:i.EQUAL,[R_]:i.GEQUAL,[hD]:i.GREATER,[dD]:i.NOTEQUAL};function wt(Q,F){if(F.type===Mi&&t.has("OES_texture_float_linear")===!1&&(F.magFilter===Nn||F.magFilter===p0||F.magFilter===Zd||F.magFilter===Ol||F.minFilter===Nn||F.minFilter===p0||F.minFilter===Zd||F.minFilter===Ol)&&Re("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Q,i.TEXTURE_WRAP_S,ut[F.wrapS]),i.texParameteri(Q,i.TEXTURE_WRAP_T,ut[F.wrapT]),(Q===i.TEXTURE_3D||Q===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Q,i.TEXTURE_WRAP_R,ut[F.wrapR]),i.texParameteri(Q,i.TEXTURE_MAG_FILTER,j[F.magFilter]),i.texParameteri(Q,i.TEXTURE_MIN_FILTER,j[F.minFilter]),F.compareFunction&&(i.texParameteri(Q,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Q,i.TEXTURE_COMPARE_FUNC,st[F.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===la||F.minFilter!==Zd&&F.minFilter!==Ol||F.type===Mi&&t.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||n.get(F).__currentAnisotropy){const gt=t.get("EXT_texture_filter_anisotropic");i.texParameterf(Q,gt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,a.getMaxAnisotropy())),n.get(F).__currentAnisotropy=F.anisotropy}}}function Ct(Q,F){let gt=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,F.addEventListener("dispose",B));const Bt=F.source;let qt=x.get(Bt);qt===void 0&&(qt={},x.set(Bt,qt));const Pt=rt(F);if(Pt!==Q.__cacheKey){qt[Pt]===void 0&&(qt[Pt]={texture:i.createTexture(),usedTimes:0},l.memory.textures++,gt=!0),qt[Pt].usedTimes++;const Le=qt[Q.__cacheKey];Le!==void 0&&(qt[Q.__cacheKey].usedTimes--,Le.usedTimes===0&&N(F)),Q.__cacheKey=Pt,Q.__webglTexture=qt[Pt].texture}return gt}function Mt(Q,F,gt){return Math.floor(Math.floor(Q/gt)/F)}function Vt(Q,F,gt,Bt){const Pt=Q.updateRanges;if(Pt.length===0)e.texSubImage2D(i.TEXTURE_2D,0,0,0,F.width,F.height,gt,Bt,F.data);else{Pt.sort((Zt,Kt)=>Zt.start-Kt.start);let Le=0;for(let Zt=1;Zt<Pt.length;Zt++){const Kt=Pt[Le],De=Pt[Zt],nt=Kt.start+Kt.count,_t=Mt(De.start,F.width,4),te=Mt(Kt.start,F.width,4);De.start<=nt+1&&_t===te&&Mt(De.start+De.count-1,F.width,4)===_t?Kt.count=Math.max(Kt.count,De.start+De.count-Kt.start):(++Le,Pt[Le]=De)}Pt.length=Le+1;const Me=i.getParameter(i.UNPACK_ROW_LENGTH),Pe=i.getParameter(i.UNPACK_SKIP_PIXELS),Ye=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,F.width);for(let Zt=0,Kt=Pt.length;Zt<Kt;Zt++){const De=Pt[Zt],nt=Math.floor(De.start/4),_t=Math.ceil(De.count/4),te=nt%F.width,ot=Math.floor(nt/F.width),At=_t,Qt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,te),i.pixelStorei(i.UNPACK_SKIP_ROWS,ot),e.texSubImage2D(i.TEXTURE_2D,0,te,ot,At,Qt,gt,Bt,F.data)}Q.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,Me),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Pe),i.pixelStorei(i.UNPACK_SKIP_ROWS,Ye)}}function ft(Q,F,gt){let Bt=i.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(Bt=i.TEXTURE_2D_ARRAY),F.isData3DTexture&&(Bt=i.TEXTURE_3D);const qt=Ct(Q,F),Pt=F.source;e.bindTexture(Bt,Q.__webglTexture,i.TEXTURE0+gt);const Le=n.get(Pt);if(Pt.version!==Le.__version||qt===!0){e.activeTexture(i.TEXTURE0+gt);const Me=Un.getPrimaries(Un.workingColorSpace),Pe=F.colorSpace===Ec?null:Un.getPrimaries(F.colorSpace),Ye=F.colorSpace===Ec||Me===Pe?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,F.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,F.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ye);let Zt=C(F.image,!1,a.maxTextureSize);Zt=He(F,Zt);const Kt=r.convert(F.format,F.colorSpace),De=r.convert(F.type);let nt=D(F.internalFormat,Kt,De,F.colorSpace,F.isVideoTexture);wt(Bt,F);let _t;const te=F.mipmaps,ot=F.isVideoTexture!==!0,At=Le.__version===void 0||qt===!0,Qt=Pt.dataReady,Ee=P(F,Zt);if(F.isDepthTexture)nt=L(F.format===Du,F.type),At&&(ot?e.texStorage2D(i.TEXTURE_2D,1,nt,Zt.width,Zt.height):e.texImage2D(i.TEXTURE_2D,0,nt,Zt.width,Zt.height,0,Kt,De,null));else if(F.isDataTexture)if(te.length>0){ot&&At&&e.texStorage2D(i.TEXTURE_2D,Ee,nt,te[0].width,te[0].height);for(let ne=0,Yt=te.length;ne<Yt;ne++)_t=te[ne],ot?Qt&&e.texSubImage2D(i.TEXTURE_2D,ne,0,0,_t.width,_t.height,Kt,De,_t.data):e.texImage2D(i.TEXTURE_2D,ne,nt,_t.width,_t.height,0,Kt,De,_t.data);F.generateMipmaps=!1}else ot?(At&&e.texStorage2D(i.TEXTURE_2D,Ee,nt,Zt.width,Zt.height),Qt&&Vt(F,Zt,Kt,De)):e.texImage2D(i.TEXTURE_2D,0,nt,Zt.width,Zt.height,0,Kt,De,Zt.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){ot&&At&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ee,nt,te[0].width,te[0].height,Zt.depth);for(let ne=0,Yt=te.length;ne<Yt;ne++)if(_t=te[ne],F.format!==ca)if(Kt!==null)if(ot){if(Qt)if(F.layerUpdates.size>0){const ce=iM(_t.width,_t.height,F.format,F.type);for(const je of F.layerUpdates){const pn=_t.data.subarray(je*ce/_t.data.BYTES_PER_ELEMENT,(je+1)*ce/_t.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ne,0,0,je,_t.width,_t.height,1,Kt,pn)}F.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ne,0,0,0,_t.width,_t.height,Zt.depth,Kt,_t.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ne,nt,_t.width,_t.height,Zt.depth,0,_t.data,0,0);else Re("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ot?Qt&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,ne,0,0,0,_t.width,_t.height,Zt.depth,Kt,De,_t.data):e.texImage3D(i.TEXTURE_2D_ARRAY,ne,nt,_t.width,_t.height,Zt.depth,0,Kt,De,_t.data)}else{ot&&At&&e.texStorage2D(i.TEXTURE_2D,Ee,nt,te[0].width,te[0].height);for(let ne=0,Yt=te.length;ne<Yt;ne++)_t=te[ne],F.format!==ca?Kt!==null?ot?Qt&&e.compressedTexSubImage2D(i.TEXTURE_2D,ne,0,0,_t.width,_t.height,Kt,_t.data):e.compressedTexImage2D(i.TEXTURE_2D,ne,nt,_t.width,_t.height,0,_t.data):Re("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ot?Qt&&e.texSubImage2D(i.TEXTURE_2D,ne,0,0,_t.width,_t.height,Kt,De,_t.data):e.texImage2D(i.TEXTURE_2D,ne,nt,_t.width,_t.height,0,Kt,De,_t.data)}else if(F.isDataArrayTexture)if(ot){if(At&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ee,nt,Zt.width,Zt.height,Zt.depth),Qt)if(F.layerUpdates.size>0){const ne=iM(Zt.width,Zt.height,F.format,F.type);for(const Yt of F.layerUpdates){const ce=Zt.data.subarray(Yt*ne/Zt.data.BYTES_PER_ELEMENT,(Yt+1)*ne/Zt.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Yt,Zt.width,Zt.height,1,Kt,De,ce)}F.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Zt.width,Zt.height,Zt.depth,Kt,De,Zt.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,nt,Zt.width,Zt.height,Zt.depth,0,Kt,De,Zt.data);else if(F.isData3DTexture)ot?(At&&e.texStorage3D(i.TEXTURE_3D,Ee,nt,Zt.width,Zt.height,Zt.depth),Qt&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Zt.width,Zt.height,Zt.depth,Kt,De,Zt.data)):e.texImage3D(i.TEXTURE_3D,0,nt,Zt.width,Zt.height,Zt.depth,0,Kt,De,Zt.data);else if(F.isFramebufferTexture){if(At)if(ot)e.texStorage2D(i.TEXTURE_2D,Ee,nt,Zt.width,Zt.height);else{let ne=Zt.width,Yt=Zt.height;for(let ce=0;ce<Ee;ce++)e.texImage2D(i.TEXTURE_2D,ce,nt,ne,Yt,0,Kt,De,null),ne>>=1,Yt>>=1}}else if(te.length>0){if(ot&&At){const ne=ye(te[0]);e.texStorage2D(i.TEXTURE_2D,Ee,nt,ne.width,ne.height)}for(let ne=0,Yt=te.length;ne<Yt;ne++)_t=te[ne],ot?Qt&&e.texSubImage2D(i.TEXTURE_2D,ne,0,0,Kt,De,_t):e.texImage2D(i.TEXTURE_2D,ne,nt,Kt,De,_t);F.generateMipmaps=!1}else if(ot){if(At){const ne=ye(Zt);e.texStorage2D(i.TEXTURE_2D,Ee,nt,ne.width,ne.height)}Qt&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Kt,De,Zt)}else e.texImage2D(i.TEXTURE_2D,0,nt,Kt,De,Zt);T(F)&&M(Bt),Le.__version=Pt.version,F.onUpdate&&F.onUpdate(F)}Q.__version=F.version}function Rt(Q,F,gt){if(F.image.length!==6)return;const Bt=Ct(Q,F),qt=F.source;e.bindTexture(i.TEXTURE_CUBE_MAP,Q.__webglTexture,i.TEXTURE0+gt);const Pt=n.get(qt);if(qt.version!==Pt.__version||Bt===!0){e.activeTexture(i.TEXTURE0+gt);const Le=Un.getPrimaries(Un.workingColorSpace),Me=F.colorSpace===Ec?null:Un.getPrimaries(F.colorSpace),Pe=F.colorSpace===Ec||Le===Me?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,F.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,F.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);const Ye=F.isCompressedTexture||F.image[0].isCompressedTexture,Zt=F.image[0]&&F.image[0].isDataTexture,Kt=[];for(let Yt=0;Yt<6;Yt++)!Ye&&!Zt?Kt[Yt]=C(F.image[Yt],!0,a.maxCubemapSize):Kt[Yt]=Zt?F.image[Yt].image:F.image[Yt],Kt[Yt]=He(F,Kt[Yt]);const De=Kt[0],nt=r.convert(F.format,F.colorSpace),_t=r.convert(F.type),te=D(F.internalFormat,nt,_t,F.colorSpace),ot=F.isVideoTexture!==!0,At=Pt.__version===void 0||Bt===!0,Qt=qt.dataReady;let Ee=P(F,De);wt(i.TEXTURE_CUBE_MAP,F);let ne;if(Ye){ot&&At&&e.texStorage2D(i.TEXTURE_CUBE_MAP,Ee,te,De.width,De.height);for(let Yt=0;Yt<6;Yt++){ne=Kt[Yt].mipmaps;for(let ce=0;ce<ne.length;ce++){const je=ne[ce];F.format!==ca?nt!==null?ot?Qt&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce,0,0,je.width,je.height,nt,je.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce,te,je.width,je.height,0,je.data):Re("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ot?Qt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce,0,0,je.width,je.height,nt,_t,je.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce,te,je.width,je.height,0,nt,_t,je.data)}}}else{if(ne=F.mipmaps,ot&&At){ne.length>0&&Ee++;const Yt=ye(Kt[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,Ee,te,Yt.width,Yt.height)}for(let Yt=0;Yt<6;Yt++)if(Zt){ot?Qt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,0,0,Kt[Yt].width,Kt[Yt].height,nt,_t,Kt[Yt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,te,Kt[Yt].width,Kt[Yt].height,0,nt,_t,Kt[Yt].data);for(let ce=0;ce<ne.length;ce++){const pn=ne[ce].image[Yt].image;ot?Qt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce+1,0,0,pn.width,pn.height,nt,_t,pn.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce+1,te,pn.width,pn.height,0,nt,_t,pn.data)}}else{ot?Qt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,0,0,nt,_t,Kt[Yt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,te,nt,_t,Kt[Yt]);for(let ce=0;ce<ne.length;ce++){const je=ne[ce];ot?Qt&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce+1,0,0,nt,_t,je.image[Yt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,ce+1,te,nt,_t,je.image[Yt])}}}T(F)&&M(i.TEXTURE_CUBE_MAP),Pt.__version=qt.version,F.onUpdate&&F.onUpdate(F)}Q.__version=F.version}function Ft(Q,F,gt,Bt,qt,Pt){const Le=r.convert(gt.format,gt.colorSpace),Me=r.convert(gt.type),Pe=D(gt.internalFormat,Le,Me,gt.colorSpace),Ye=n.get(F),Zt=n.get(gt);if(Zt.__renderTarget=F,!Ye.__hasExternalTextures){const Kt=Math.max(1,F.width>>Pt),De=Math.max(1,F.height>>Pt);qt===i.TEXTURE_3D||qt===i.TEXTURE_2D_ARRAY?e.texImage3D(qt,Pt,Pe,Kt,De,F.depth,0,Le,Me,null):e.texImage2D(qt,Pt,Pe,Kt,De,0,Le,Me,null)}e.bindFramebuffer(i.FRAMEBUFFER,Q),Fe(F)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Bt,qt,Zt.__webglTexture,0,J(F)):(qt===i.TEXTURE_2D||qt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&qt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Bt,qt,Zt.__webglTexture,Pt),e.bindFramebuffer(i.FRAMEBUFFER,null)}function Se(Q,F,gt){if(i.bindRenderbuffer(i.RENDERBUFFER,Q),F.depthBuffer){const Bt=F.depthTexture,qt=Bt&&Bt.isDepthTexture?Bt.type:null,Pt=L(F.stencilBuffer,qt),Le=F.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;Fe(F)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,J(F),Pt,F.width,F.height):gt?i.renderbufferStorageMultisample(i.RENDERBUFFER,J(F),Pt,F.width,F.height):i.renderbufferStorage(i.RENDERBUFFER,Pt,F.width,F.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Le,i.RENDERBUFFER,Q)}else{const Bt=F.textures;for(let qt=0;qt<Bt.length;qt++){const Pt=Bt[qt],Le=r.convert(Pt.format,Pt.colorSpace),Me=r.convert(Pt.type),Pe=D(Pt.internalFormat,Le,Me,Pt.colorSpace);Fe(F)?u.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,J(F),Pe,F.width,F.height):gt?i.renderbufferStorageMultisample(i.RENDERBUFFER,J(F),Pe,F.width,F.height):i.renderbufferStorage(i.RENDERBUFFER,Pe,F.width,F.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function $t(Q,F,gt){const Bt=F.isWebGLCubeRenderTarget===!0;if(e.bindFramebuffer(i.FRAMEBUFFER,Q),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const qt=n.get(F.depthTexture);if(qt.__renderTarget=F,(!qt.__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),Bt){if(qt.__webglInit===void 0&&(qt.__webglInit=!0,F.depthTexture.addEventListener("dispose",B)),qt.__webglTexture===void 0){qt.__webglTexture=i.createTexture(),e.bindTexture(i.TEXTURE_CUBE_MAP,qt.__webglTexture),wt(i.TEXTURE_CUBE_MAP,F.depthTexture);const Ye=r.convert(F.depthTexture.format),Zt=r.convert(F.depthTexture.type);let Kt;F.depthTexture.format===zl?Kt=i.DEPTH_COMPONENT24:F.depthTexture.format===Du&&(Kt=i.DEPTH24_STENCIL8);for(let De=0;De<6;De++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,Kt,F.width,F.height,0,Ye,Zt,null)}}else mt(F.depthTexture,0);const Pt=qt.__webglTexture,Le=J(F),Me=Bt?i.TEXTURE_CUBE_MAP_POSITIVE_X+gt:i.TEXTURE_2D,Pe=F.depthTexture.format===Du?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;if(F.depthTexture.format===zl)Fe(F)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Pe,Me,Pt,0,Le):i.framebufferTexture2D(i.FRAMEBUFFER,Pe,Me,Pt,0);else if(F.depthTexture.format===Du)Fe(F)?u.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Pe,Me,Pt,0,Le):i.framebufferTexture2D(i.FRAMEBUFFER,Pe,Me,Pt,0);else throw new Error("Unknown depthTexture format")}function ze(Q){const F=n.get(Q),gt=Q.isWebGLCubeRenderTarget===!0;if(F.__boundDepthTexture!==Q.depthTexture){const Bt=Q.depthTexture;if(F.__depthDisposeCallback&&F.__depthDisposeCallback(),Bt){const qt=()=>{delete F.__boundDepthTexture,delete F.__depthDisposeCallback,Bt.removeEventListener("dispose",qt)};Bt.addEventListener("dispose",qt),F.__depthDisposeCallback=qt}F.__boundDepthTexture=Bt}if(Q.depthTexture&&!F.__autoAllocateDepthBuffer)if(gt)for(let Bt=0;Bt<6;Bt++)$t(F.__webglFramebuffer[Bt],Q,Bt);else{const Bt=Q.texture.mipmaps;Bt&&Bt.length>0?$t(F.__webglFramebuffer[0],Q,0):$t(F.__webglFramebuffer,Q,0)}else if(gt){F.__webglDepthbuffer=[];for(let Bt=0;Bt<6;Bt++)if(e.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer[Bt]),F.__webglDepthbuffer[Bt]===void 0)F.__webglDepthbuffer[Bt]=i.createRenderbuffer(),Se(F.__webglDepthbuffer[Bt],Q,!1);else{const qt=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pt=F.__webglDepthbuffer[Bt];i.bindRenderbuffer(i.RENDERBUFFER,Pt),i.framebufferRenderbuffer(i.FRAMEBUFFER,qt,i.RENDERBUFFER,Pt)}}else{const Bt=Q.texture.mipmaps;if(Bt&&Bt.length>0?e.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer===void 0)F.__webglDepthbuffer=i.createRenderbuffer(),Se(F.__webglDepthbuffer,Q,!1);else{const qt=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Pt=F.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Pt),i.framebufferRenderbuffer(i.FRAMEBUFFER,qt,i.RENDERBUFFER,Pt)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function Qe(Q,F,gt){const Bt=n.get(Q);F!==void 0&&Ft(Bt.__webglFramebuffer,Q,Q.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),gt!==void 0&&ze(Q)}function Oe(Q){const F=Q.texture,gt=n.get(Q),Bt=n.get(F);Q.addEventListener("dispose",G);const qt=Q.textures,Pt=Q.isWebGLCubeRenderTarget===!0,Le=qt.length>1;if(Le||(Bt.__webglTexture===void 0&&(Bt.__webglTexture=i.createTexture()),Bt.__version=F.version,l.memory.textures++),Pt){gt.__webglFramebuffer=[];for(let Me=0;Me<6;Me++)if(F.mipmaps&&F.mipmaps.length>0){gt.__webglFramebuffer[Me]=[];for(let Pe=0;Pe<F.mipmaps.length;Pe++)gt.__webglFramebuffer[Me][Pe]=i.createFramebuffer()}else gt.__webglFramebuffer[Me]=i.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){gt.__webglFramebuffer=[];for(let Me=0;Me<F.mipmaps.length;Me++)gt.__webglFramebuffer[Me]=i.createFramebuffer()}else gt.__webglFramebuffer=i.createFramebuffer();if(Le)for(let Me=0,Pe=qt.length;Me<Pe;Me++){const Ye=n.get(qt[Me]);Ye.__webglTexture===void 0&&(Ye.__webglTexture=i.createTexture(),l.memory.textures++)}if(Q.samples>0&&Fe(Q)===!1){gt.__webglMultisampledFramebuffer=i.createFramebuffer(),gt.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,gt.__webglMultisampledFramebuffer);for(let Me=0;Me<qt.length;Me++){const Pe=qt[Me];gt.__webglColorRenderbuffer[Me]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,gt.__webglColorRenderbuffer[Me]);const Ye=r.convert(Pe.format,Pe.colorSpace),Zt=r.convert(Pe.type),Kt=D(Pe.internalFormat,Ye,Zt,Pe.colorSpace,Q.isXRRenderTarget===!0),De=J(Q);i.renderbufferStorageMultisample(i.RENDERBUFFER,De,Kt,Q.width,Q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Me,i.RENDERBUFFER,gt.__webglColorRenderbuffer[Me])}i.bindRenderbuffer(i.RENDERBUFFER,null),Q.depthBuffer&&(gt.__webglDepthRenderbuffer=i.createRenderbuffer(),Se(gt.__webglDepthRenderbuffer,Q,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Pt){e.bindTexture(i.TEXTURE_CUBE_MAP,Bt.__webglTexture),wt(i.TEXTURE_CUBE_MAP,F);for(let Me=0;Me<6;Me++)if(F.mipmaps&&F.mipmaps.length>0)for(let Pe=0;Pe<F.mipmaps.length;Pe++)Ft(gt.__webglFramebuffer[Me][Pe],Q,F,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,Pe);else Ft(gt.__webglFramebuffer[Me],Q,F,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0);T(F)&&M(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(Le){for(let Me=0,Pe=qt.length;Me<Pe;Me++){const Ye=qt[Me],Zt=n.get(Ye);let Kt=i.TEXTURE_2D;(Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(Kt=Q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Kt,Zt.__webglTexture),wt(Kt,Ye),Ft(gt.__webglFramebuffer,Q,Ye,i.COLOR_ATTACHMENT0+Me,Kt,0),T(Ye)&&M(Kt)}e.unbindTexture()}else{let Me=i.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(Me=Q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Me,Bt.__webglTexture),wt(Me,F),F.mipmaps&&F.mipmaps.length>0)for(let Pe=0;Pe<F.mipmaps.length;Pe++)Ft(gt.__webglFramebuffer[Pe],Q,F,i.COLOR_ATTACHMENT0,Me,Pe);else Ft(gt.__webglFramebuffer,Q,F,i.COLOR_ATTACHMENT0,Me,0);T(F)&&M(Me),e.unbindTexture()}Q.depthBuffer&&ze(Q)}function Gt(Q){const F=Q.textures;for(let gt=0,Bt=F.length;gt<Bt;gt++){const qt=F[gt];if(T(qt)){const Pt=R(Q),Le=n.get(qt).__webglTexture;e.bindTexture(Pt,Le),M(Pt),e.unbindTexture()}}}const se=[],Wt=[];function ve(Q){if(Q.samples>0){if(Fe(Q)===!1){const F=Q.textures,gt=Q.width,Bt=Q.height;let qt=i.COLOR_BUFFER_BIT;const Pt=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Le=n.get(Q),Me=F.length>1;if(Me)for(let Ye=0;Ye<F.length;Ye++)e.bindFramebuffer(i.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,Le.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,Le.__webglMultisampledFramebuffer);const Pe=Q.texture.mipmaps;Pe&&Pe.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Le.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Le.__webglFramebuffer);for(let Ye=0;Ye<F.length;Ye++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(qt|=i.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(qt|=i.STENCIL_BUFFER_BIT)),Me){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Le.__webglColorRenderbuffer[Ye]);const Zt=n.get(F[Ye]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Zt,0)}i.blitFramebuffer(0,0,gt,Bt,0,0,gt,Bt,qt,i.NEAREST),d===!0&&(se.length=0,Wt.length=0,se.push(i.COLOR_ATTACHMENT0+Ye),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(se.push(Pt),Wt.push(Pt),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Wt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,se))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Me)for(let Ye=0;Ye<F.length;Ye++){e.bindFramebuffer(i.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.RENDERBUFFER,Le.__webglColorRenderbuffer[Ye]);const Zt=n.get(F[Ye]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,Le.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ye,i.TEXTURE_2D,Zt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Le.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&d){const F=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[F])}}}function J(Q){return Math.min(a.maxSamples,Q.samples)}function Fe(Q){const F=n.get(Q);return Q.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function be(Q){const F=l.render.frame;g.get(Q)!==F&&(g.set(Q,F),Q.update())}function He(Q,F){const gt=Q.colorSpace,Bt=Q.format,qt=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||gt!==Ho&&gt!==Ec&&(Un.getTransfer(gt)===ti?(Bt!==ca||qt!==za)&&Re("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Ke("WebGLTextures: Unsupported texture color space:",gt)),F}function ye(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(p.width=Q.naturalWidth||Q.width,p.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(p.width=Q.displayWidth,p.height=Q.displayHeight):(p.width=Q.width,p.height=Q.height),p}this.allocateTextureUnit=tt,this.resetTextureUnits=lt,this.setTexture2D=mt,this.setTexture2DArray=$,this.setTexture3D=et,this.setTextureCube=vt,this.rebindTextures=Qe,this.setupRenderTarget=Oe,this.updateRenderTargetMipmap=Gt,this.updateMultisampleRenderTarget=ve,this.setupDepthRenderbuffer=ze,this.setupFrameBufferTexture=Ft,this.useMultisampledRTT=Fe,this.isReversedDepthBuffer=function(){return e.buffers.depth.getReversed()}}function gN(i,t){function e(n,a=Ec){let r;const l=Un.getTransfer(a);if(n===za)return i.UNSIGNED_BYTE;if(n===M_)return i.UNSIGNED_SHORT_4_4_4_4;if(n===E_)return i.UNSIGNED_SHORT_5_5_5_1;if(n===iE)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===aE)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===S_)return i.BYTE;if(n===b_)return i.SHORT;if(n===lp)return i.UNSIGNED_SHORT;if(n===sg)return i.INT;if(n===Mr)return i.UNSIGNED_INT;if(n===Mi)return i.FLOAT;if(n===pi)return i.HALF_FLOAT;if(n===sE)return i.ALPHA;if(n===rE)return i.RGB;if(n===ca)return i.RGBA;if(n===zl)return i.DEPTH_COMPONENT;if(n===Du)return i.DEPTH_STENCIL;if(n===rg)return i.RED;if(n===og)return i.RED_INTEGER;if(n===hh)return i.RG;if(n===T_)return i.RG_INTEGER;if(n===A_)return i.RGBA_INTEGER;if(n===m0||n===g0||n===v0||n===y0)if(l===ti)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===m0)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===g0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===v0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===y0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===m0)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===g0)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===v0)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===y0)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===Tx||n===Ax||n===wx||n===Cx)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===Tx)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ax)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===wx)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Cx)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Rx||n===Dx||n===Nx||n===Ux||n===Ox||n===Lx||n===Px)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(n===Rx||n===Dx)return l===ti?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Nx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC;if(n===Ux)return r.COMPRESSED_R11_EAC;if(n===Ox)return r.COMPRESSED_SIGNED_R11_EAC;if(n===Lx)return r.COMPRESSED_RG11_EAC;if(n===Px)return r.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===Ix||n===Bx||n===zx||n===Fx||n===Vx||n===Hx||n===Gx||n===jx||n===kx||n===Xx||n===Yx||n===qx||n===Wx||n===Zx)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(n===Ix)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Bx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===zx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Fx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Vx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Hx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Gx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===jx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===kx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Xx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Yx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===qx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Wx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Zx)return l===ti?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Kx||n===Qx||n===Jx)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(n===Kx)return l===ti?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Qx)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Jx)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===$x||n===t_||n===e_||n===n_)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(n===$x)return r.COMPRESSED_RED_RGTC1_EXT;if(n===t_)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===e_)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===n_)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===cp?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const j7=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,k7=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class X7{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){const n=new mE(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new Ri({vertexShader:j7,fragmentShader:k7,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Zn(new Dc(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Y7 extends Hl{constructor(t,e){super();const n=this;let a=null,r=1,l=null,u="local-floor",d=1,p=null,g=null,y=null,x=null,_=null,E=null;const C=typeof XRWebGLBinding<"u",T=new X7,M={},R=e.getContextAttributes();let D=null,L=null;const P=[],B=[],G=new It;let V=null;const N=new Fi;N.viewport=new di;const I=new Fi;I.viewport=new di;const W=[N,I],lt=new sN;let tt=null,rt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ft){let Rt=P[ft];return Rt===void 0&&(Rt=new ax,P[ft]=Rt),Rt.getTargetRaySpace()},this.getControllerGrip=function(ft){let Rt=P[ft];return Rt===void 0&&(Rt=new ax,P[ft]=Rt),Rt.getGripSpace()},this.getHand=function(ft){let Rt=P[ft];return Rt===void 0&&(Rt=new ax,P[ft]=Rt),Rt.getHandSpace()};function mt(ft){const Rt=B.indexOf(ft.inputSource);if(Rt===-1)return;const Ft=P[Rt];Ft!==void 0&&(Ft.update(ft.inputSource,ft.frame,p||l),Ft.dispatchEvent({type:ft.type,data:ft.inputSource}))}function $(){a.removeEventListener("select",mt),a.removeEventListener("selectstart",mt),a.removeEventListener("selectend",mt),a.removeEventListener("squeeze",mt),a.removeEventListener("squeezestart",mt),a.removeEventListener("squeezeend",mt),a.removeEventListener("end",$),a.removeEventListener("inputsourceschange",et);for(let ft=0;ft<P.length;ft++){const Rt=B[ft];Rt!==null&&(B[ft]=null,P[ft].disconnect(Rt))}tt=null,rt=null,T.reset();for(const ft in M)delete M[ft];t.setRenderTarget(D),_=null,x=null,y=null,a=null,L=null,Vt.stop(),n.isPresenting=!1,t.setPixelRatio(V),t.setSize(G.width,G.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ft){r=ft,n.isPresenting===!0&&Re("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ft){u=ft,n.isPresenting===!0&&Re("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(ft){p=ft},this.getBaseLayer=function(){return x!==null?x:_},this.getBinding=function(){return y===null&&C&&(y=new XRWebGLBinding(a,e)),y},this.getFrame=function(){return E},this.getSession=function(){return a},this.setSession=async function(ft){if(a=ft,a!==null){if(D=t.getRenderTarget(),a.addEventListener("select",mt),a.addEventListener("selectstart",mt),a.addEventListener("selectend",mt),a.addEventListener("squeeze",mt),a.addEventListener("squeezestart",mt),a.addEventListener("squeezeend",mt),a.addEventListener("end",$),a.addEventListener("inputsourceschange",et),R.xrCompatible!==!0&&await e.makeXRCompatible(),V=t.getPixelRatio(),t.getSize(G),C&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ft=null,Se=null,$t=null;R.depth&&($t=R.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ft=R.stencil?Du:zl,Se=R.stencil?cp:Mr);const ze={colorFormat:e.RGBA8,depthFormat:$t,scaleFactor:r};y=this.getBinding(),x=y.createProjectionLayer(ze),a.updateRenderState({layers:[x]}),t.setPixelRatio(1),t.setSize(x.textureWidth,x.textureHeight,!1),L=new ia(x.textureWidth,x.textureHeight,{format:ca,type:za,depthTexture:new ph(x.textureWidth,x.textureHeight,Se,void 0,void 0,void 0,void 0,void 0,void 0,Ft),stencilBuffer:R.stencil,colorSpace:t.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const Ft={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:r};_=new XRWebGLLayer(a,e,Ft),a.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),L=new ia(_.framebufferWidth,_.framebufferHeight,{format:ca,type:za,colorSpace:t.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}L.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await a.requestReferenceSpace(u),Vt.setContext(a),Vt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function et(ft){for(let Rt=0;Rt<ft.removed.length;Rt++){const Ft=ft.removed[Rt],Se=B.indexOf(Ft);Se>=0&&(B[Se]=null,P[Se].disconnect(Ft))}for(let Rt=0;Rt<ft.added.length;Rt++){const Ft=ft.added[Rt];let Se=B.indexOf(Ft);if(Se===-1){for(let ze=0;ze<P.length;ze++)if(ze>=B.length){B.push(Ft),Se=ze;break}else if(B[ze]===null){B[ze]=Ft,Se=ze;break}if(Se===-1)break}const $t=P[Se];$t&&$t.connect(Ft)}}const vt=new K,ut=new K;function j(ft,Rt,Ft){vt.setFromMatrixPosition(Rt.matrixWorld),ut.setFromMatrixPosition(Ft.matrixWorld);const Se=vt.distanceTo(ut),$t=Rt.projectionMatrix.elements,ze=Ft.projectionMatrix.elements,Qe=$t[14]/($t[10]-1),Oe=$t[14]/($t[10]+1),Gt=($t[9]+1)/$t[5],se=($t[9]-1)/$t[5],Wt=($t[8]-1)/$t[0],ve=(ze[8]+1)/ze[0],J=Qe*Wt,Fe=Qe*ve,be=Se/(-Wt+ve),He=be*-Wt;if(Rt.matrixWorld.decompose(ft.position,ft.quaternion,ft.scale),ft.translateX(He),ft.translateZ(be),ft.matrixWorld.compose(ft.position,ft.quaternion,ft.scale),ft.matrixWorldInverse.copy(ft.matrixWorld).invert(),$t[10]===-1)ft.projectionMatrix.copy(Rt.projectionMatrix),ft.projectionMatrixInverse.copy(Rt.projectionMatrixInverse);else{const ye=Qe+be,Q=Oe+be,F=J-He,gt=Fe+(Se-He),Bt=Gt*Oe/Q*ye,qt=se*Oe/Q*ye;ft.projectionMatrix.makePerspective(F,gt,Bt,qt,ye,Q),ft.projectionMatrixInverse.copy(ft.projectionMatrix).invert()}}function st(ft,Rt){Rt===null?ft.matrixWorld.copy(ft.matrix):ft.matrixWorld.multiplyMatrices(Rt.matrixWorld,ft.matrix),ft.matrixWorldInverse.copy(ft.matrixWorld).invert()}this.updateCamera=function(ft){if(a===null)return;let Rt=ft.near,Ft=ft.far;T.texture!==null&&(T.depthNear>0&&(Rt=T.depthNear),T.depthFar>0&&(Ft=T.depthFar)),lt.near=I.near=N.near=Rt,lt.far=I.far=N.far=Ft,(tt!==lt.near||rt!==lt.far)&&(a.updateRenderState({depthNear:lt.near,depthFar:lt.far}),tt=lt.near,rt=lt.far),lt.layers.mask=ft.layers.mask|6,N.layers.mask=lt.layers.mask&3,I.layers.mask=lt.layers.mask&5;const Se=ft.parent,$t=lt.cameras;st(lt,Se);for(let ze=0;ze<$t.length;ze++)st($t[ze],Se);$t.length===2?j(lt,N,I):lt.projectionMatrix.copy(N.projectionMatrix),wt(ft,lt,Se)};function wt(ft,Rt,Ft){Ft===null?ft.matrix.copy(Rt.matrixWorld):(ft.matrix.copy(Ft.matrixWorld),ft.matrix.invert(),ft.matrix.multiply(Rt.matrixWorld)),ft.matrix.decompose(ft.position,ft.quaternion,ft.scale),ft.updateMatrixWorld(!0),ft.projectionMatrix.copy(Rt.projectionMatrix),ft.projectionMatrixInverse.copy(Rt.projectionMatrixInverse),ft.isPerspectiveCamera&&(ft.fov=hp*2*Math.atan(1/ft.projectionMatrix.elements[5]),ft.zoom=1)}this.getCamera=function(){return lt},this.getFoveation=function(){if(!(x===null&&_===null))return d},this.setFoveation=function(ft){d=ft,x!==null&&(x.fixedFoveation=ft),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ft)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(lt)},this.getCameraTexture=function(ft){return M[ft]};let Ct=null;function Mt(ft,Rt){if(g=Rt.getViewerPose(p||l),E=Rt,g!==null){const Ft=g.views;_!==null&&(t.setRenderTargetFramebuffer(L,_.framebuffer),t.setRenderTarget(L));let Se=!1;Ft.length!==lt.cameras.length&&(lt.cameras.length=0,Se=!0);for(let Oe=0;Oe<Ft.length;Oe++){const Gt=Ft[Oe];let se=null;if(_!==null)se=_.getViewport(Gt);else{const ve=y.getViewSubImage(x,Gt);se=ve.viewport,Oe===0&&(t.setRenderTargetTextures(L,ve.colorTexture,ve.depthStencilTexture),t.setRenderTarget(L))}let Wt=W[Oe];Wt===void 0&&(Wt=new Fi,Wt.layers.enable(Oe),Wt.viewport=new di,W[Oe]=Wt),Wt.matrix.fromArray(Gt.transform.matrix),Wt.matrix.decompose(Wt.position,Wt.quaternion,Wt.scale),Wt.projectionMatrix.fromArray(Gt.projectionMatrix),Wt.projectionMatrixInverse.copy(Wt.projectionMatrix).invert(),Wt.viewport.set(se.x,se.y,se.width,se.height),Oe===0&&(lt.matrix.copy(Wt.matrix),lt.matrix.decompose(lt.position,lt.quaternion,lt.scale)),Se===!0&&lt.cameras.push(Wt)}const $t=a.enabledFeatures;if($t&&$t.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&C){y=n.getBinding();const Oe=y.getDepthInformation(Ft[0]);Oe&&Oe.isValid&&Oe.texture&&T.init(Oe,a.renderState)}if($t&&$t.includes("camera-access")&&C){t.state.unbindTexture(),y=n.getBinding();for(let Oe=0;Oe<Ft.length;Oe++){const Gt=Ft[Oe].camera;if(Gt){let se=M[Gt];se||(se=new mE,M[Gt]=se);const Wt=y.getCameraImage(Gt);se.sourceTexture=Wt}}}}for(let Ft=0;Ft<P.length;Ft++){const Se=B[Ft],$t=P[Ft];Se!==null&&$t!==void 0&&$t.update(Se,Rt,p||l)}Ct&&Ct(ft,Rt),Rt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Rt}),E=null}const Vt=new fN;Vt.setAnimationLoop(Mt),this.setAnimationLoop=function(ft){Ct=ft},this.dispose=function(){}}}const Wf=new Er,q7=new rn;function W7(i,t){function e(T,M){T.matrixAutoUpdate===!0&&T.updateMatrix(),M.value.copy(T.matrix)}function n(T,M){M.color.getRGB(T.fogColor.value,_D(i)),M.isFog?(T.fogNear.value=M.near,T.fogFar.value=M.far):M.isFogExp2&&(T.fogDensity.value=M.density)}function a(T,M,R,D,L){M.isMeshBasicMaterial||M.isMeshLambertMaterial?r(T,M):M.isMeshToonMaterial?(r(T,M),y(T,M)):M.isMeshPhongMaterial?(r(T,M),g(T,M)):M.isMeshStandardMaterial?(r(T,M),x(T,M),M.isMeshPhysicalMaterial&&_(T,M,L)):M.isMeshMatcapMaterial?(r(T,M),E(T,M)):M.isMeshDepthMaterial?r(T,M):M.isMeshDistanceMaterial?(r(T,M),C(T,M)):M.isMeshNormalMaterial?r(T,M):M.isLineBasicMaterial?(l(T,M),M.isLineDashedMaterial&&u(T,M)):M.isPointsMaterial?d(T,M,R,D):M.isSpriteMaterial?p(T,M):M.isShadowMaterial?(T.color.value.copy(M.color),T.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function r(T,M){T.opacity.value=M.opacity,M.color&&T.diffuse.value.copy(M.color),M.emissive&&T.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(T.map.value=M.map,e(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,e(M.alphaMap,T.alphaMapTransform)),M.bumpMap&&(T.bumpMap.value=M.bumpMap,e(M.bumpMap,T.bumpMapTransform),T.bumpScale.value=M.bumpScale,M.side===ps&&(T.bumpScale.value*=-1)),M.normalMap&&(T.normalMap.value=M.normalMap,e(M.normalMap,T.normalMapTransform),T.normalScale.value.copy(M.normalScale),M.side===ps&&T.normalScale.value.negate()),M.displacementMap&&(T.displacementMap.value=M.displacementMap,e(M.displacementMap,T.displacementMapTransform),T.displacementScale.value=M.displacementScale,T.displacementBias.value=M.displacementBias),M.emissiveMap&&(T.emissiveMap.value=M.emissiveMap,e(M.emissiveMap,T.emissiveMapTransform)),M.specularMap&&(T.specularMap.value=M.specularMap,e(M.specularMap,T.specularMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest);const R=t.get(M),D=R.envMap,L=R.envMapRotation;D&&(T.envMap.value=D,Wf.copy(L),Wf.x*=-1,Wf.y*=-1,Wf.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Wf.y*=-1,Wf.z*=-1),T.envMapRotation.value.setFromMatrix4(q7.makeRotationFromEuler(Wf)),T.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=M.reflectivity,T.ior.value=M.ior,T.refractionRatio.value=M.refractionRatio),M.lightMap&&(T.lightMap.value=M.lightMap,T.lightMapIntensity.value=M.lightMapIntensity,e(M.lightMap,T.lightMapTransform)),M.aoMap&&(T.aoMap.value=M.aoMap,T.aoMapIntensity.value=M.aoMapIntensity,e(M.aoMap,T.aoMapTransform))}function l(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,M.map&&(T.map.value=M.map,e(M.map,T.mapTransform))}function u(T,M){T.dashSize.value=M.dashSize,T.totalSize.value=M.dashSize+M.gapSize,T.scale.value=M.scale}function d(T,M,R,D){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.size.value=M.size*R,T.scale.value=D*.5,M.map&&(T.map.value=M.map,e(M.map,T.uvTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,e(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function p(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.rotation.value=M.rotation,M.map&&(T.map.value=M.map,e(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,e(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function g(T,M){T.specular.value.copy(M.specular),T.shininess.value=Math.max(M.shininess,1e-4)}function y(T,M){M.gradientMap&&(T.gradientMap.value=M.gradientMap)}function x(T,M){T.metalness.value=M.metalness,M.metalnessMap&&(T.metalnessMap.value=M.metalnessMap,e(M.metalnessMap,T.metalnessMapTransform)),T.roughness.value=M.roughness,M.roughnessMap&&(T.roughnessMap.value=M.roughnessMap,e(M.roughnessMap,T.roughnessMapTransform)),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)}function _(T,M,R){T.ior.value=M.ior,M.sheen>0&&(T.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),T.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(T.sheenColorMap.value=M.sheenColorMap,e(M.sheenColorMap,T.sheenColorMapTransform)),M.sheenRoughnessMap&&(T.sheenRoughnessMap.value=M.sheenRoughnessMap,e(M.sheenRoughnessMap,T.sheenRoughnessMapTransform))),M.clearcoat>0&&(T.clearcoat.value=M.clearcoat,T.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(T.clearcoatMap.value=M.clearcoatMap,e(M.clearcoatMap,T.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,e(M.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(T.clearcoatNormalMap.value=M.clearcoatNormalMap,e(M.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===ps&&T.clearcoatNormalScale.value.negate())),M.dispersion>0&&(T.dispersion.value=M.dispersion),M.iridescence>0&&(T.iridescence.value=M.iridescence,T.iridescenceIOR.value=M.iridescenceIOR,T.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(T.iridescenceMap.value=M.iridescenceMap,e(M.iridescenceMap,T.iridescenceMapTransform)),M.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=M.iridescenceThicknessMap,e(M.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),M.transmission>0&&(T.transmission.value=M.transmission,T.transmissionSamplerMap.value=R.texture,T.transmissionSamplerSize.value.set(R.width,R.height),M.transmissionMap&&(T.transmissionMap.value=M.transmissionMap,e(M.transmissionMap,T.transmissionMapTransform)),T.thickness.value=M.thickness,M.thicknessMap&&(T.thicknessMap.value=M.thicknessMap,e(M.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=M.attenuationDistance,T.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(T.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(T.anisotropyMap.value=M.anisotropyMap,e(M.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=M.specularIntensity,T.specularColor.value.copy(M.specularColor),M.specularColorMap&&(T.specularColorMap.value=M.specularColorMap,e(M.specularColorMap,T.specularColorMapTransform)),M.specularIntensityMap&&(T.specularIntensityMap.value=M.specularIntensityMap,e(M.specularIntensityMap,T.specularIntensityMapTransform))}function E(T,M){M.matcap&&(T.matcap.value=M.matcap)}function C(T,M){const R=t.get(M).light;T.referencePosition.value.setFromMatrixPosition(R.matrixWorld),T.nearDistance.value=R.shadow.camera.near,T.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function Z7(i,t,e,n){let a={},r={},l=[];const u=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(R,D){const L=D.program;n.uniformBlockBinding(R,L)}function p(R,D){let L=a[R.id];L===void 0&&(E(R),L=g(R),a[R.id]=L,R.addEventListener("dispose",T));const P=D.program;n.updateUBOMapping(R,P);const B=t.render.frame;r[R.id]!==B&&(x(R),r[R.id]=B)}function g(R){const D=y();R.__bindingPointIndex=D;const L=i.createBuffer(),P=R.__size,B=R.usage;return i.bindBuffer(i.UNIFORM_BUFFER,L),i.bufferData(i.UNIFORM_BUFFER,P,B),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,D,L),L}function y(){for(let R=0;R<u;R++)if(l.indexOf(R)===-1)return l.push(R),R;return Ke("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(R){const D=a[R.id],L=R.uniforms,P=R.__cache;i.bindBuffer(i.UNIFORM_BUFFER,D);for(let B=0,G=L.length;B<G;B++){const V=Array.isArray(L[B])?L[B]:[L[B]];for(let N=0,I=V.length;N<I;N++){const W=V[N];if(_(W,B,N,P)===!0){const lt=W.__offset,tt=Array.isArray(W.value)?W.value:[W.value];let rt=0;for(let mt=0;mt<tt.length;mt++){const $=tt[mt],et=C($);typeof $=="number"||typeof $=="boolean"?(W.__data[0]=$,i.bufferSubData(i.UNIFORM_BUFFER,lt+rt,W.__data)):$.isMatrix3?(W.__data[0]=$.elements[0],W.__data[1]=$.elements[1],W.__data[2]=$.elements[2],W.__data[3]=0,W.__data[4]=$.elements[3],W.__data[5]=$.elements[4],W.__data[6]=$.elements[5],W.__data[7]=0,W.__data[8]=$.elements[6],W.__data[9]=$.elements[7],W.__data[10]=$.elements[8],W.__data[11]=0):($.toArray(W.__data,rt),rt+=et.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,lt,W.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(R,D,L,P){const B=R.value,G=D+"_"+L;if(P[G]===void 0)return typeof B=="number"||typeof B=="boolean"?P[G]=B:P[G]=B.clone(),!0;{const V=P[G];if(typeof B=="number"||typeof B=="boolean"){if(V!==B)return P[G]=B,!0}else if(V.equals(B)===!1)return V.copy(B),!0}return!1}function E(R){const D=R.uniforms;let L=0;const P=16;for(let G=0,V=D.length;G<V;G++){const N=Array.isArray(D[G])?D[G]:[D[G]];for(let I=0,W=N.length;I<W;I++){const lt=N[I],tt=Array.isArray(lt.value)?lt.value:[lt.value];for(let rt=0,mt=tt.length;rt<mt;rt++){const $=tt[rt],et=C($),vt=L%P,ut=vt%et.boundary,j=vt+ut;L+=ut,j!==0&&P-j<et.storage&&(L+=P-j),lt.__data=new Float32Array(et.storage/Float32Array.BYTES_PER_ELEMENT),lt.__offset=L,L+=et.storage}}}const B=L%P;return B>0&&(L+=P-B),R.__size=L,R.__cache={},this}function C(R){const D={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(D.boundary=4,D.storage=4):R.isVector2?(D.boundary=8,D.storage=8):R.isVector3||R.isColor?(D.boundary=16,D.storage=12):R.isVector4?(D.boundary=16,D.storage=16):R.isMatrix3?(D.boundary=48,D.storage=48):R.isMatrix4?(D.boundary=64,D.storage=64):R.isTexture?Re("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Re("WebGLRenderer: Unsupported uniform value type.",R),D}function T(R){const D=R.target;D.removeEventListener("dispose",T);const L=l.indexOf(D.__bindingPointIndex);l.splice(L,1),i.deleteBuffer(a[D.id]),delete a[D.id],delete r[D.id]}function M(){for(const R in a)i.deleteBuffer(a[R]);l=[],a={},r={}}return{bind:d,update:p,dispose:M}}const K7=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Cl=null;function Q7(){return Cl===null&&(Cl=new Wr(K7,16,16,hh,pi),Cl.name="DFG_LUT",Cl.minFilter=Nn,Cl.magFilter=Nn,Cl.wrapS=na,Cl.wrapT=na,Cl.generateMipmaps=!1,Cl.needsUpdate=!0),Cl}class yg{constructor(t={}){const{canvas:e=vD(),context:n=null,depth:a=!0,stencil:r=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reversedDepthBuffer:x=!1,outputBufferType:_=za}=t;this.isWebGLRenderer=!0;let E;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");E=n.getContextAttributes().alpha}else E=l;const C=_,T=new Set([A_,T_,og]),M=new Set([za,Mr,lp,cp,M_,E_]),R=new Uint32Array(4),D=new Int32Array(4);let L=null,P=null;const B=[],G=[];let V=null;this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=qr,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const N=this;let I=!1;this._outputColorSpace=Ka;let W=0,lt=0,tt=null,rt=-1,mt=null;const $=new di,et=new di;let vt=null;const ut=new Ae(0);let j=0,st=e.width,wt=e.height,Ct=1,Mt=null,Vt=null;const ft=new di(0,0,st,wt),Rt=new di(0,0,st,wt);let Ft=!1;const Se=new Cp;let $t=!1,ze=!1;const Qe=new rn,Oe=new K,Gt=new di,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Wt=!1;function ve(){return tt===null?Ct:1}let J=n;function Fe(k,it){return e.getContext(k,it)}try{const k={alpha:!0,depth:a,stencil:r,antialias:u,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ap}`),e.addEventListener("webglcontextlost",je,!1),e.addEventListener("webglcontextrestored",pn,!1),e.addEventListener("webglcontextcreationerror",hn,!1),J===null){const it="webgl2";if(J=Fe(it,k),J===null)throw Fe(it)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(k){throw Ke("WebGLRenderer: "+k.message),k}let be,He,ye,Q,F,gt,Bt,qt,Pt,Le,Me,Pe,Ye,Zt,Kt,De,nt,_t,te,ot,At,Qt,Ee,ne;function Yt(){be=new JH(J),be.init(),Qt=new gN(J,be),He=new jH(J,be,t,Qt),ye=new H7(J,be),He.reversedDepthBuffer&&x&&ye.buffers.depth.setReversed(!0),Q=new eG(J),F=new A7,gt=new G7(J,be,ye,F,He,Qt,Q),Bt=new XH(N),qt=new QH(N),Pt=new sV(J),Ee=new HH(J,Pt),Le=new $H(J,Pt,Q,Ee),Me=new iG(J,Le,Pt,Q),te=new nG(J,He,gt),De=new kH(F),Pe=new T7(N,Bt,qt,be,He,Ee,De),Ye=new W7(N,F),Zt=new C7,Kt=new L7(be),_t=new VH(N,Bt,qt,ye,Me,E,d),nt=new F7(N,Me,He),ne=new Z7(J,Q,He,ye),ot=new GH(J,be,Q),At=new tG(J,be,Q),Q.programs=Pe.programs,N.capabilities=He,N.extensions=be,N.properties=F,N.renderLists=Zt,N.shadowMap=nt,N.state=ye,N.info=Q}Yt(),C!==za&&(V=new sG(C,e.width,e.height,a,r));const ce=new Y7(N,J);this.xr=ce,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const k=be.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=be.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return Ct},this.setPixelRatio=function(k){k!==void 0&&(Ct=k,this.setSize(st,wt,!1))},this.getSize=function(k){return k.set(st,wt)},this.setSize=function(k,it,pt=!0){if(ce.isPresenting){Re("WebGLRenderer: Can't change size while VR device is presenting.");return}st=k,wt=it,e.width=Math.floor(k*Ct),e.height=Math.floor(it*Ct),pt===!0&&(e.style.width=k+"px",e.style.height=it+"px"),V!==null&&V.setSize(e.width,e.height),this.setViewport(0,0,k,it)},this.getDrawingBufferSize=function(k){return k.set(st*Ct,wt*Ct).floor()},this.setDrawingBufferSize=function(k,it,pt){st=k,wt=it,Ct=pt,e.width=Math.floor(k*pt),e.height=Math.floor(it*pt),this.setViewport(0,0,k,it)},this.setEffects=function(k){if(C===za){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(k){for(let it=0;it<k.length;it++)if(k[it].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}V.setEffects(k||[])},this.getCurrentViewport=function(k){return k.copy($)},this.getViewport=function(k){return k.copy(ft)},this.setViewport=function(k,it,pt,yt){k.isVector4?ft.set(k.x,k.y,k.z,k.w):ft.set(k,it,pt,yt),ye.viewport($.copy(ft).multiplyScalar(Ct).round())},this.getScissor=function(k){return k.copy(Rt)},this.setScissor=function(k,it,pt,yt){k.isVector4?Rt.set(k.x,k.y,k.z,k.w):Rt.set(k,it,pt,yt),ye.scissor(et.copy(Rt).multiplyScalar(Ct).round())},this.getScissorTest=function(){return Ft},this.setScissorTest=function(k){ye.setScissorTest(Ft=k)},this.setOpaqueSort=function(k){Mt=k},this.setTransparentSort=function(k){Vt=k},this.getClearColor=function(k){return k.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor(...arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha(...arguments)},this.clear=function(k=!0,it=!0,pt=!0){let yt=0;if(k){let dt=!1;if(tt!==null){const ae=tt.texture.format;dt=T.has(ae)}if(dt){const ae=tt.texture.type,ue=M.has(ae),fe=_t.getClearColor(),Te=_t.getClearAlpha(),xe=fe.r,Ve=fe.g,_e=fe.b;ue?(R[0]=xe,R[1]=Ve,R[2]=_e,R[3]=Te,J.clearBufferuiv(J.COLOR,0,R)):(D[0]=xe,D[1]=Ve,D[2]=_e,D[3]=Te,J.clearBufferiv(J.COLOR,0,D))}else yt|=J.COLOR_BUFFER_BIT}it&&(yt|=J.DEPTH_BUFFER_BIT),pt&&(yt|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(yt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",je,!1),e.removeEventListener("webglcontextrestored",pn,!1),e.removeEventListener("webglcontextcreationerror",hn,!1),_t.dispose(),Zt.dispose(),Kt.dispose(),F.dispose(),Bt.dispose(),qt.dispose(),Me.dispose(),Ee.dispose(),ne.dispose(),Pe.dispose(),ce.dispose(),ce.removeEventListener("sessionstart",Bs),ce.removeEventListener("sessionend",va),ke.stop()};function je(k){k.preventDefault(),V0("WebGLRenderer: Context Lost."),I=!0}function pn(){V0("WebGLRenderer: Context Restored."),I=!1;const k=Q.autoReset,it=nt.enabled,pt=nt.autoUpdate,yt=nt.needsUpdate,dt=nt.type;Yt(),Q.autoReset=k,nt.enabled=it,nt.autoUpdate=pt,nt.needsUpdate=yt,nt.type=dt}function hn(k){Ke("WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function xi(k){const it=k.target;it.removeEventListener("dispose",xi),_i(it)}function _i(k){Nc(k),F.remove(k)}function Nc(k){const it=F.get(k).programs;it!==void 0&&(it.forEach(function(pt){Pe.releaseProgram(pt)}),k.isShaderMaterial&&Pe.releaseShaderCache(k))}this.renderBufferDirect=function(k,it,pt,yt,dt,ae){it===null&&(it=se);const ue=dt.isMesh&&dt.matrixWorld.determinant()<0,fe=pe(k,it,pt,yt,dt);ye.setMaterial(yt,ue);let Te=pt.index,xe=1;if(yt.wireframe===!0){if(Te=Le.getWireframeAttribute(pt),Te===void 0)return;xe=2}const Ve=pt.drawRange,_e=pt.attributes.position;let Ie=Ve.start*xe,mn=(Ve.start+Ve.count)*xe;ae!==null&&(Ie=Math.max(Ie,ae.start*xe),mn=Math.min(mn,(ae.start+ae.count)*xe)),Te!==null?(Ie=Math.max(Ie,0),mn=Math.min(mn,Te.count)):_e!=null&&(Ie=Math.max(Ie,0),mn=Math.min(mn,_e.count));const Vn=mn-Ie;if(Vn<0||Vn===1/0)return;Ee.setup(dt,yt,fe,pt,Te);let gn,Xe=ot;if(Te!==null&&(gn=Pt.get(Te),Xe=At,Xe.setIndex(gn)),dt.isMesh)yt.wireframe===!0?(ye.setLineWidth(yt.wireframeLinewidth*ve()),Xe.setMode(J.LINES)):Xe.setMode(J.TRIANGLES);else if(dt.isLine){let we=yt.linewidth;we===void 0&&(we=1),ye.setLineWidth(we*ve()),dt.isLineSegments?Xe.setMode(J.LINES):dt.isLineLoop?Xe.setMode(J.LINE_LOOP):Xe.setMode(J.LINE_STRIP)}else dt.isPoints?Xe.setMode(J.POINTS):dt.isSprite&&Xe.setMode(J.TRIANGLES);if(dt.isBatchedMesh)if(dt._multiDrawInstances!==null)fp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Xe.renderMultiDrawInstances(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount,dt._multiDrawInstances);else if(be.get("WEBGL_multi_draw"))Xe.renderMultiDraw(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount);else{const we=dt._multiDrawStarts,qe=dt._multiDrawCounts,Ce=dt._multiDrawCount,Hn=Te?Pt.get(Te).bytesPerElement:1,ua=F.get(yt).currentProgram.getUniforms();for(let Bn=0;Bn<Ce;Bn++)ua.setValue(J,"_gl_DrawID",Bn),Xe.render(we[Bn]/Hn,qe[Bn])}else if(dt.isInstancedMesh)Xe.renderInstances(Ie,Vn,dt.count);else if(pt.isInstancedBufferGeometry){const we=pt._maxInstanceCount!==void 0?pt._maxInstanceCount:1/0,qe=Math.min(pt.instanceCount,we);Xe.renderInstances(Ie,Vn,qe)}else Xe.render(Ie,Vn)};function Qr(k,it,pt){k.transparent===!0&&k.side===Ns&&k.forceSinglePass===!1?(k.side=ps,k.needsUpdate=!0,Nt(k,it,pt),k.side=Rc,k.needsUpdate=!0,Nt(k,it,pt),k.side=Ns):Nt(k,it,pt)}this.compile=function(k,it,pt=null){pt===null&&(pt=k),P=Kt.get(pt),P.init(it),G.push(P),pt.traverseVisible(function(dt){dt.isLight&&dt.layers.test(it.layers)&&(P.pushLight(dt),dt.castShadow&&P.pushShadow(dt))}),k!==pt&&k.traverseVisible(function(dt){dt.isLight&&dt.layers.test(it.layers)&&(P.pushLight(dt),dt.castShadow&&P.pushShadow(dt))}),P.setupLights();const yt=new Set;return k.traverse(function(dt){if(!(dt.isMesh||dt.isPoints||dt.isLine||dt.isSprite))return;const ae=dt.material;if(ae)if(Array.isArray(ae))for(let ue=0;ue<ae.length;ue++){const fe=ae[ue];Qr(fe,pt,dt),yt.add(fe)}else Qr(ae,pt,dt),yt.add(ae)}),P=G.pop(),yt},this.compileAsync=function(k,it,pt=null){const yt=this.compile(k,it,pt);return new Promise(dt=>{function ae(){if(yt.forEach(function(ue){F.get(ue).currentProgram.isReady()&&yt.delete(ue)}),yt.size===0){dt(k);return}setTimeout(ae,10)}be.get("KHR_parallel_shader_compile")!==null?ae():setTimeout(ae,10)})};let vs=null;function ys(k){vs&&vs(k)}function Bs(){ke.stop()}function va(){ke.start()}const ke=new fN;ke.setAnimationLoop(ys),typeof self<"u"&&ke.setContext(self),this.setAnimationLoop=function(k){vs=k,ce.setAnimationLoop(k),k===null?ke.stop():ke.start()},ce.addEventListener("sessionstart",Bs),ce.addEventListener("sessionend",va),this.render=function(k,it){if(it!==void 0&&it.isCamera!==!0){Ke("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;const pt=ce.enabled===!0&&ce.isPresenting===!0,yt=V!==null&&(tt===null||pt)&&V.begin(N,tt);if(k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),it.parent===null&&it.matrixWorldAutoUpdate===!0&&it.updateMatrixWorld(),ce.enabled===!0&&ce.isPresenting===!0&&(V===null||V.isCompositing()===!1)&&(ce.cameraAutoUpdate===!0&&ce.updateCamera(it),it=ce.getCamera()),k.isScene===!0&&k.onBeforeRender(N,k,it,tt),P=Kt.get(k,G.length),P.init(it),G.push(P),Qe.multiplyMatrices(it.projectionMatrix,it.matrixWorldInverse),Se.setFromProjectionMatrix(Qe,_r,it.reversedDepth),ze=this.localClippingEnabled,$t=De.init(this.clippingPlanes,ze),L=Zt.get(k,B.length),L.init(),B.push(L),ce.enabled===!0&&ce.isPresenting===!0){const ue=N.xr.getDepthSensingMesh();ue!==null&&ai(ue,it,-1/0,N.sortObjects)}ai(k,it,0,N.sortObjects),L.finish(),N.sortObjects===!0&&L.sort(Mt,Vt),Wt=ce.enabled===!1||ce.isPresenting===!1||ce.hasDepthSensing()===!1,Wt&&_t.addToRenderList(L,k),this.info.render.frame++,$t===!0&&De.beginShadows();const dt=P.state.shadowsArray;if(nt.render(dt,k,it),$t===!0&&De.endShadows(),this.info.autoReset===!0&&this.info.reset(),(yt&&V.hasRenderPass())===!1){const ue=L.opaque,fe=L.transmissive;if(P.setupLights(),it.isArrayCamera){const Te=it.cameras;if(fe.length>0)for(let xe=0,Ve=Te.length;xe<Ve;xe++){const _e=Te[xe];H(ue,fe,k,_e)}Wt&&_t.render(k);for(let xe=0,Ve=Te.length;xe<Ve;xe++){const _e=Te[xe];xn(L,k,_e,_e.viewport)}}else fe.length>0&&H(ue,fe,k,it),Wt&&_t.render(k),xn(L,k,it)}tt!==null&&lt===0&&(gt.updateMultisampleRenderTarget(tt),gt.updateRenderTargetMipmap(tt)),yt&&V.end(N),k.isScene===!0&&k.onAfterRender(N,k,it),Ee.resetDefaultState(),rt=-1,mt=null,G.pop(),G.length>0?(P=G[G.length-1],$t===!0&&De.setGlobalState(N.clippingPlanes,P.state.camera)):P=null,B.pop(),B.length>0?L=B[B.length-1]:L=null};function ai(k,it,pt,yt){if(k.visible===!1)return;if(k.layers.test(it.layers)){if(k.isGroup)pt=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(it);else if(k.isLight)P.pushLight(k),k.castShadow&&P.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||Se.intersectsSprite(k)){yt&&Gt.setFromMatrixPosition(k.matrixWorld).applyMatrix4(Qe);const ue=Me.update(k),fe=k.material;fe.visible&&L.push(k,ue,fe,pt,Gt.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(!k.frustumCulled||Se.intersectsObject(k))){const ue=Me.update(k),fe=k.material;if(yt&&(k.boundingSphere!==void 0?(k.boundingSphere===null&&k.computeBoundingSphere(),Gt.copy(k.boundingSphere.center)):(ue.boundingSphere===null&&ue.computeBoundingSphere(),Gt.copy(ue.boundingSphere.center)),Gt.applyMatrix4(k.matrixWorld).applyMatrix4(Qe)),Array.isArray(fe)){const Te=ue.groups;for(let xe=0,Ve=Te.length;xe<Ve;xe++){const _e=Te[xe],Ie=fe[_e.materialIndex];Ie&&Ie.visible&&L.push(k,ue,Ie,pt,Gt.z,_e)}}else fe.visible&&L.push(k,ue,fe,pt,Gt.z,null)}}const ae=k.children;for(let ue=0,fe=ae.length;ue<fe;ue++)ai(ae[ue],it,pt,yt)}function xn(k,it,pt,yt){const{opaque:dt,transmissive:ae,transparent:ue}=k;P.setupLightsView(pt),$t===!0&&De.setGlobalState(N.clippingPlanes,pt),yt&&ye.viewport($.copy(yt)),dt.length>0&&q(dt,it,pt),ae.length>0&&q(ae,it,pt),ue.length>0&&q(ue,it,pt),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function H(k,it,pt,yt){if((pt.isScene===!0?pt.overrideMaterial:null)!==null)return;if(P.state.transmissionRenderTarget[yt.id]===void 0){const Ie=be.has("EXT_color_buffer_half_float")||be.has("EXT_color_buffer_float");P.state.transmissionRenderTarget[yt.id]=new ia(1,1,{generateMipmaps:!0,type:Ie?pi:za,minFilter:Ol,samples:He.samples,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Un.workingColorSpace})}const ae=P.state.transmissionRenderTarget[yt.id],ue=yt.viewport||$;ae.setSize(ue.z*N.transmissionResolutionScale,ue.w*N.transmissionResolutionScale);const fe=N.getRenderTarget(),Te=N.getActiveCubeFace(),xe=N.getActiveMipmapLevel();N.setRenderTarget(ae),N.getClearColor(ut),j=N.getClearAlpha(),j<1&&N.setClearColor(16777215,.5),N.clear(),Wt&&_t.render(pt);const Ve=N.toneMapping;N.toneMapping=qr;const _e=yt.viewport;if(yt.viewport!==void 0&&(yt.viewport=void 0),P.setupLightsView(yt),$t===!0&&De.setGlobalState(N.clippingPlanes,yt),q(k,pt,yt),gt.updateMultisampleRenderTarget(ae),gt.updateRenderTargetMipmap(ae),be.has("WEBGL_multisampled_render_to_texture")===!1){let Ie=!1;for(let mn=0,Vn=it.length;mn<Vn;mn++){const gn=it[mn],{object:Xe,geometry:we,material:qe,group:Ce}=gn;if(qe.side===Ns&&Xe.layers.test(yt.layers)){const Hn=qe.side;qe.side=ps,qe.needsUpdate=!0,ht(Xe,pt,yt,we,qe,Ce),qe.side=Hn,qe.needsUpdate=!0,Ie=!0}}Ie===!0&&(gt.updateMultisampleRenderTarget(ae),gt.updateRenderTargetMipmap(ae))}N.setRenderTarget(fe,Te,xe),N.setClearColor(ut,j),_e!==void 0&&(yt.viewport=_e),N.toneMapping=Ve}function q(k,it,pt){const yt=it.isScene===!0?it.overrideMaterial:null;for(let dt=0,ae=k.length;dt<ae;dt++){const ue=k[dt],{object:fe,geometry:Te,group:xe}=ue;let Ve=ue.material;Ve.allowOverride===!0&&yt!==null&&(Ve=yt),fe.layers.test(pt.layers)&&ht(fe,it,pt,Te,Ve,xe)}}function ht(k,it,pt,yt,dt,ae){k.onBeforeRender(N,it,pt,yt,dt,ae),k.modelViewMatrix.multiplyMatrices(pt.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),dt.onBeforeRender(N,it,pt,yt,k,ae),dt.transparent===!0&&dt.side===Ns&&dt.forceSinglePass===!1?(dt.side=ps,dt.needsUpdate=!0,N.renderBufferDirect(pt,it,yt,dt,k,ae),dt.side=Rc,dt.needsUpdate=!0,N.renderBufferDirect(pt,it,yt,dt,k,ae),dt.side=Ns):N.renderBufferDirect(pt,it,yt,dt,k,ae),k.onAfterRender(N,it,pt,yt,dt,ae)}function Nt(k,it,pt){it.isScene!==!0&&(it=se);const yt=F.get(k),dt=P.state.lights,ae=P.state.shadowsArray,ue=dt.state.version,fe=Pe.getParameters(k,dt.state,ae,it,pt),Te=Pe.getProgramCacheKey(fe);let xe=yt.programs;yt.environment=k.isMeshStandardMaterial?it.environment:null,yt.fog=it.fog,yt.envMap=(k.isMeshStandardMaterial?qt:Bt).get(k.envMap||yt.environment),yt.envMapRotation=yt.environment!==null&&k.envMap===null?it.environmentRotation:k.envMapRotation,xe===void 0&&(k.addEventListener("dispose",xi),xe=new Map,yt.programs=xe);let Ve=xe.get(Te);if(Ve!==void 0){if(yt.currentProgram===Ve&&yt.lightsStateVersion===ue)return zt(k,fe),Ve}else fe.uniforms=Pe.getUniforms(k),k.onBeforeCompile(fe,N),Ve=Pe.acquireProgram(fe,Te),xe.set(Te,Ve),yt.uniforms=fe.uniforms;const _e=yt.uniforms;return(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(_e.clippingPlanes=De.uniform),zt(k,fe),yt.needsLights=oe(k),yt.lightsStateVersion=ue,yt.needsLights&&(_e.ambientLightColor.value=dt.state.ambient,_e.lightProbe.value=dt.state.probe,_e.directionalLights.value=dt.state.directional,_e.directionalLightShadows.value=dt.state.directionalShadow,_e.spotLights.value=dt.state.spot,_e.spotLightShadows.value=dt.state.spotShadow,_e.rectAreaLights.value=dt.state.rectArea,_e.ltc_1.value=dt.state.rectAreaLTC1,_e.ltc_2.value=dt.state.rectAreaLTC2,_e.pointLights.value=dt.state.point,_e.pointLightShadows.value=dt.state.pointShadow,_e.hemisphereLights.value=dt.state.hemi,_e.directionalShadowMap.value=dt.state.directionalShadowMap,_e.directionalShadowMatrix.value=dt.state.directionalShadowMatrix,_e.spotShadowMap.value=dt.state.spotShadowMap,_e.spotLightMatrix.value=dt.state.spotLightMatrix,_e.spotLightMap.value=dt.state.spotLightMap,_e.pointShadowMap.value=dt.state.pointShadowMap,_e.pointShadowMatrix.value=dt.state.pointShadowMatrix),yt.currentProgram=Ve,yt.uniformsList=null,Ve}function Ht(k){if(k.uniformsList===null){const it=k.currentProgram.getUniforms();k.uniformsList=sx.seqWithValue(it.seq,k.uniforms)}return k.uniformsList}function zt(k,it){const pt=F.get(k);pt.outputColorSpace=it.outputColorSpace,pt.batching=it.batching,pt.batchingColor=it.batchingColor,pt.instancing=it.instancing,pt.instancingColor=it.instancingColor,pt.instancingMorph=it.instancingMorph,pt.skinning=it.skinning,pt.morphTargets=it.morphTargets,pt.morphNormals=it.morphNormals,pt.morphColors=it.morphColors,pt.morphTargetsCount=it.morphTargetsCount,pt.numClippingPlanes=it.numClippingPlanes,pt.numIntersection=it.numClipIntersection,pt.vertexAlphas=it.vertexAlphas,pt.vertexTangents=it.vertexTangents,pt.toneMapping=it.toneMapping}function pe(k,it,pt,yt,dt){it.isScene!==!0&&(it=se),gt.resetTextureUnits();const ae=it.fog,ue=yt.isMeshStandardMaterial?it.environment:null,fe=tt===null?N.outputColorSpace:tt.isXRRenderTarget===!0?tt.texture.colorSpace:Ho,Te=(yt.isMeshStandardMaterial?qt:Bt).get(yt.envMap||ue),xe=yt.vertexColors===!0&&!!pt.attributes.color&&pt.attributes.color.itemSize===4,Ve=!!pt.attributes.tangent&&(!!yt.normalMap||yt.anisotropy>0),_e=!!pt.morphAttributes.position,Ie=!!pt.morphAttributes.normal,mn=!!pt.morphAttributes.color;let Vn=qr;yt.toneMapped&&(tt===null||tt.isXRRenderTarget===!0)&&(Vn=N.toneMapping);const gn=pt.morphAttributes.position||pt.morphAttributes.normal||pt.morphAttributes.color,Xe=gn!==void 0?gn.length:0,we=F.get(yt),qe=P.state.lights;if($t===!0&&(ze===!0||k!==mt)){const ji=k===mt&&yt.id===rt;De.setState(yt,k,ji)}let Ce=!1;yt.version===we.__version?(we.needsLights&&we.lightsStateVersion!==qe.state.version||we.outputColorSpace!==fe||dt.isBatchedMesh&&we.batching===!1||!dt.isBatchedMesh&&we.batching===!0||dt.isBatchedMesh&&we.batchingColor===!0&&dt.colorTexture===null||dt.isBatchedMesh&&we.batchingColor===!1&&dt.colorTexture!==null||dt.isInstancedMesh&&we.instancing===!1||!dt.isInstancedMesh&&we.instancing===!0||dt.isSkinnedMesh&&we.skinning===!1||!dt.isSkinnedMesh&&we.skinning===!0||dt.isInstancedMesh&&we.instancingColor===!0&&dt.instanceColor===null||dt.isInstancedMesh&&we.instancingColor===!1&&dt.instanceColor!==null||dt.isInstancedMesh&&we.instancingMorph===!0&&dt.morphTexture===null||dt.isInstancedMesh&&we.instancingMorph===!1&&dt.morphTexture!==null||we.envMap!==Te||yt.fog===!0&&we.fog!==ae||we.numClippingPlanes!==void 0&&(we.numClippingPlanes!==De.numPlanes||we.numIntersection!==De.numIntersection)||we.vertexAlphas!==xe||we.vertexTangents!==Ve||we.morphTargets!==_e||we.morphNormals!==Ie||we.morphColors!==mn||we.toneMapping!==Vn||we.morphTargetsCount!==Xe)&&(Ce=!0):(Ce=!0,we.__version=yt.version);let Hn=we.currentProgram;Ce===!0&&(Hn=Nt(yt,it,dt));let ua=!1,Bn=!1,Di=!1;const jn=Hn.getUniforms(),Ei=we.uniforms;if(ye.useProgram(Hn.program)&&(ua=!0,Bn=!0,Di=!0),yt.id!==rt&&(rt=yt.id,Bn=!0),ua||mt!==k){ye.buffers.depth.getReversed()&&k.reversedDepth!==!0&&(k._reversedDepth=!0,k.updateProjectionMatrix()),jn.setValue(J,"projectionMatrix",k.projectionMatrix),jn.setValue(J,"viewMatrix",k.matrixWorldInverse);const ki=jn.map.cameraPosition;ki!==void 0&&ki.setValue(J,Oe.setFromMatrixPosition(k.matrixWorld)),He.logarithmicDepthBuffer&&jn.setValue(J,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),(yt.isMeshPhongMaterial||yt.isMeshToonMaterial||yt.isMeshLambertMaterial||yt.isMeshBasicMaterial||yt.isMeshStandardMaterial||yt.isShaderMaterial)&&jn.setValue(J,"isOrthographic",k.isOrthographicCamera===!0),mt!==k&&(mt=k,Bn=!0,Di=!0)}if(we.needsLights&&(qe.state.directionalShadowMap.length>0&&jn.setValue(J,"directionalShadowMap",qe.state.directionalShadowMap,gt),qe.state.spotShadowMap.length>0&&jn.setValue(J,"spotShadowMap",qe.state.spotShadowMap,gt),qe.state.pointShadowMap.length>0&&jn.setValue(J,"pointShadowMap",qe.state.pointShadowMap,gt)),dt.isSkinnedMesh){jn.setOptional(J,dt,"bindMatrix"),jn.setOptional(J,dt,"bindMatrixInverse");const ji=dt.skeleton;ji&&(ji.boneTexture===null&&ji.computeBoneTexture(),jn.setValue(J,"boneTexture",ji.boneTexture,gt))}dt.isBatchedMesh&&(jn.setOptional(J,dt,"batchingTexture"),jn.setValue(J,"batchingTexture",dt._matricesTexture,gt),jn.setOptional(J,dt,"batchingIdTexture"),jn.setValue(J,"batchingIdTexture",dt._indirectTexture,gt),jn.setOptional(J,dt,"batchingColorTexture"),dt._colorsTexture!==null&&jn.setValue(J,"batchingColorTexture",dt._colorsTexture,gt));const Gi=pt.morphAttributes;if((Gi.position!==void 0||Gi.normal!==void 0||Gi.color!==void 0)&&te.update(dt,pt,Hn),(Bn||we.receiveShadow!==dt.receiveShadow)&&(we.receiveShadow=dt.receiveShadow,jn.setValue(J,"receiveShadow",dt.receiveShadow)),yt.isMeshGouraudMaterial&&yt.envMap!==null&&(Ei.envMap.value=Te,Ei.flipEnvMap.value=Te.isCubeTexture&&Te.isRenderTargetTexture===!1?-1:1),yt.isMeshStandardMaterial&&yt.envMap===null&&it.environment!==null&&(Ei.envMapIntensity.value=it.environmentIntensity),Ei.dfgLUT!==void 0&&(Ei.dfgLUT.value=Q7()),Bn&&(jn.setValue(J,"toneMappingExposure",N.toneMappingExposure),we.needsLights&&ie(Ei,Di),ae&&yt.fog===!0&&Ye.refreshFogUniforms(Ei,ae),Ye.refreshMaterialUniforms(Ei,yt,Ct,wt,P.state.transmissionRenderTarget[k.id]),sx.upload(J,Ht(we),Ei,gt)),yt.isShaderMaterial&&yt.uniformsNeedUpdate===!0&&(sx.upload(J,Ht(we),Ei,gt),yt.uniformsNeedUpdate=!1),yt.isSpriteMaterial&&jn.setValue(J,"center",dt.center),jn.setValue(J,"modelViewMatrix",dt.modelViewMatrix),jn.setValue(J,"normalMatrix",dt.normalMatrix),jn.setValue(J,"modelMatrix",dt.matrixWorld),yt.isShaderMaterial||yt.isRawShaderMaterial){const ji=yt.uniformsGroups;for(let ki=0,jl=ji.length;ki<jl;ki++){const xs=ji[ki];ne.update(xs,Hn),ne.bind(xs,Hn)}}return Hn}function ie(k,it){k.ambientLightColor.needsUpdate=it,k.lightProbe.needsUpdate=it,k.directionalLights.needsUpdate=it,k.directionalLightShadows.needsUpdate=it,k.pointLights.needsUpdate=it,k.pointLightShadows.needsUpdate=it,k.spotLights.needsUpdate=it,k.spotLightShadows.needsUpdate=it,k.rectAreaLights.needsUpdate=it,k.hemisphereLights.needsUpdate=it}function oe(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return lt},this.getRenderTarget=function(){return tt},this.setRenderTargetTextures=function(k,it,pt){const yt=F.get(k);yt.__autoAllocateDepthBuffer=k.resolveDepthBuffer===!1,yt.__autoAllocateDepthBuffer===!1&&(yt.__useRenderToTexture=!1),F.get(k.texture).__webglTexture=it,F.get(k.depthTexture).__webglTexture=yt.__autoAllocateDepthBuffer?void 0:pt,yt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(k,it){const pt=F.get(k);pt.__webglFramebuffer=it,pt.__useDefaultFramebuffer=it===void 0};const ee=J.createFramebuffer();this.setRenderTarget=function(k,it=0,pt=0){tt=k,W=it,lt=pt;let yt=null,dt=!1,ae=!1;if(k){const fe=F.get(k);if(fe.__useDefaultFramebuffer!==void 0){ye.bindFramebuffer(J.FRAMEBUFFER,fe.__webglFramebuffer),$.copy(k.viewport),et.copy(k.scissor),vt=k.scissorTest,ye.viewport($),ye.scissor(et),ye.setScissorTest(vt),rt=-1;return}else if(fe.__webglFramebuffer===void 0)gt.setupRenderTarget(k);else if(fe.__hasExternalTextures)gt.rebindTextures(k,F.get(k.texture).__webglTexture,F.get(k.depthTexture).__webglTexture);else if(k.depthBuffer){const Ve=k.depthTexture;if(fe.__boundDepthTexture!==Ve){if(Ve!==null&&F.has(Ve)&&(k.width!==Ve.image.width||k.height!==Ve.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");gt.setupDepthRenderbuffer(k)}}const Te=k.texture;(Te.isData3DTexture||Te.isDataArrayTexture||Te.isCompressedArrayTexture)&&(ae=!0);const xe=F.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(Array.isArray(xe[it])?yt=xe[it][pt]:yt=xe[it],dt=!0):k.samples>0&&gt.useMultisampledRTT(k)===!1?yt=F.get(k).__webglMultisampledFramebuffer:Array.isArray(xe)?yt=xe[pt]:yt=xe,$.copy(k.viewport),et.copy(k.scissor),vt=k.scissorTest}else $.copy(ft).multiplyScalar(Ct).floor(),et.copy(Rt).multiplyScalar(Ct).floor(),vt=Ft;if(pt!==0&&(yt=ee),ye.bindFramebuffer(J.FRAMEBUFFER,yt)&&ye.drawBuffers(k,yt),ye.viewport($),ye.scissor(et),ye.setScissorTest(vt),dt){const fe=F.get(k.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+it,fe.__webglTexture,pt)}else if(ae){const fe=it;for(let Te=0;Te<k.textures.length;Te++){const xe=F.get(k.textures[Te]);J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+Te,xe.__webglTexture,pt,fe)}}else if(k!==null&&pt!==0){const fe=F.get(k.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,fe.__webglTexture,pt)}rt=-1},this.readRenderTargetPixels=function(k,it,pt,yt,dt,ae,ue,fe=0){if(!(k&&k.isWebGLRenderTarget)){Ke("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Te=F.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&ue!==void 0&&(Te=Te[ue]),Te){ye.bindFramebuffer(J.FRAMEBUFFER,Te);try{const xe=k.textures[fe],Ve=xe.format,_e=xe.type;if(!He.textureFormatReadable(Ve)){Ke("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!He.textureTypeReadable(_e)){Ke("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}it>=0&&it<=k.width-yt&&pt>=0&&pt<=k.height-dt&&(k.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+fe),J.readPixels(it,pt,yt,dt,Qt.convert(Ve),Qt.convert(_e),ae))}finally{const xe=tt!==null?F.get(tt).__webglFramebuffer:null;ye.bindFramebuffer(J.FRAMEBUFFER,xe)}}},this.readRenderTargetPixelsAsync=async function(k,it,pt,yt,dt,ae,ue,fe=0){if(!(k&&k.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Te=F.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&ue!==void 0&&(Te=Te[ue]),Te)if(it>=0&&it<=k.width-yt&&pt>=0&&pt<=k.height-dt){ye.bindFramebuffer(J.FRAMEBUFFER,Te);const xe=k.textures[fe],Ve=xe.format,_e=xe.type;if(!He.textureFormatReadable(Ve))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!He.textureTypeReadable(_e))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ie=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,Ie),J.bufferData(J.PIXEL_PACK_BUFFER,ae.byteLength,J.STREAM_READ),k.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+fe),J.readPixels(it,pt,yt,dt,Qt.convert(Ve),Qt.convert(_e),0);const mn=tt!==null?F.get(tt).__webglFramebuffer:null;ye.bindFramebuffer(J.FRAMEBUFFER,mn);const Vn=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),await fz(J,Vn,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,Ie),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,ae),J.deleteBuffer(Ie),J.deleteSync(Vn),ae}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(k,it=null,pt=0){const yt=Math.pow(2,-pt),dt=Math.floor(k.image.width*yt),ae=Math.floor(k.image.height*yt),ue=it!==null?it.x:0,fe=it!==null?it.y:0;gt.setTexture2D(k,0),J.copyTexSubImage2D(J.TEXTURE_2D,pt,0,0,ue,fe,dt,ae),ye.unbindTexture()};const ge=J.createFramebuffer(),re=J.createFramebuffer();this.copyTextureToTexture=function(k,it,pt=null,yt=null,dt=0,ae=null){ae===null&&(dt!==0?(fp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ae=dt,dt=0):ae=0);let ue,fe,Te,xe,Ve,_e,Ie,mn,Vn;const gn=k.isCompressedTexture?k.mipmaps[ae]:k.image;if(pt!==null)ue=pt.max.x-pt.min.x,fe=pt.max.y-pt.min.y,Te=pt.isBox3?pt.max.z-pt.min.z:1,xe=pt.min.x,Ve=pt.min.y,_e=pt.isBox3?pt.min.z:0;else{const Gi=Math.pow(2,-dt);ue=Math.floor(gn.width*Gi),fe=Math.floor(gn.height*Gi),k.isDataArrayTexture?Te=gn.depth:k.isData3DTexture?Te=Math.floor(gn.depth*Gi):Te=1,xe=0,Ve=0,_e=0}yt!==null?(Ie=yt.x,mn=yt.y,Vn=yt.z):(Ie=0,mn=0,Vn=0);const Xe=Qt.convert(it.format),we=Qt.convert(it.type);let qe;it.isData3DTexture?(gt.setTexture3D(it,0),qe=J.TEXTURE_3D):it.isDataArrayTexture||it.isCompressedArrayTexture?(gt.setTexture2DArray(it,0),qe=J.TEXTURE_2D_ARRAY):(gt.setTexture2D(it,0),qe=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,it.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,it.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,it.unpackAlignment);const Ce=J.getParameter(J.UNPACK_ROW_LENGTH),Hn=J.getParameter(J.UNPACK_IMAGE_HEIGHT),ua=J.getParameter(J.UNPACK_SKIP_PIXELS),Bn=J.getParameter(J.UNPACK_SKIP_ROWS),Di=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,gn.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,gn.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,xe),J.pixelStorei(J.UNPACK_SKIP_ROWS,Ve),J.pixelStorei(J.UNPACK_SKIP_IMAGES,_e);const jn=k.isDataArrayTexture||k.isData3DTexture,Ei=it.isDataArrayTexture||it.isData3DTexture;if(k.isDepthTexture){const Gi=F.get(k),ji=F.get(it),ki=F.get(Gi.__renderTarget),jl=F.get(ji.__renderTarget);ye.bindFramebuffer(J.READ_FRAMEBUFFER,ki.__webglFramebuffer),ye.bindFramebuffer(J.DRAW_FRAMEBUFFER,jl.__webglFramebuffer);for(let xs=0;xs<Te;xs++)jn&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,F.get(k).__webglTexture,dt,_e+xs),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,F.get(it).__webglTexture,ae,Vn+xs)),J.blitFramebuffer(xe,Ve,ue,fe,Ie,mn,ue,fe,J.DEPTH_BUFFER_BIT,J.NEAREST);ye.bindFramebuffer(J.READ_FRAMEBUFFER,null),ye.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(dt!==0||k.isRenderTargetTexture||F.has(k)){const Gi=F.get(k),ji=F.get(it);ye.bindFramebuffer(J.READ_FRAMEBUFFER,ge),ye.bindFramebuffer(J.DRAW_FRAMEBUFFER,re);for(let ki=0;ki<Te;ki++)jn?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Gi.__webglTexture,dt,_e+ki):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Gi.__webglTexture,dt),Ei?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,ji.__webglTexture,ae,Vn+ki):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,ji.__webglTexture,ae),dt!==0?J.blitFramebuffer(xe,Ve,ue,fe,Ie,mn,ue,fe,J.COLOR_BUFFER_BIT,J.NEAREST):Ei?J.copyTexSubImage3D(qe,ae,Ie,mn,Vn+ki,xe,Ve,ue,fe):J.copyTexSubImage2D(qe,ae,Ie,mn,xe,Ve,ue,fe);ye.bindFramebuffer(J.READ_FRAMEBUFFER,null),ye.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else Ei?k.isDataTexture||k.isData3DTexture?J.texSubImage3D(qe,ae,Ie,mn,Vn,ue,fe,Te,Xe,we,gn.data):it.isCompressedArrayTexture?J.compressedTexSubImage3D(qe,ae,Ie,mn,Vn,ue,fe,Te,Xe,gn.data):J.texSubImage3D(qe,ae,Ie,mn,Vn,ue,fe,Te,Xe,we,gn):k.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,ae,Ie,mn,ue,fe,Xe,we,gn.data):k.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,ae,Ie,mn,gn.width,gn.height,Xe,gn.data):J.texSubImage2D(J.TEXTURE_2D,ae,Ie,mn,ue,fe,Xe,we,gn);J.pixelStorei(J.UNPACK_ROW_LENGTH,Ce),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Hn),J.pixelStorei(J.UNPACK_SKIP_PIXELS,ua),J.pixelStorei(J.UNPACK_SKIP_ROWS,Bn),J.pixelStorei(J.UNPACK_SKIP_IMAGES,Di),ae===0&&it.generateMipmaps&&J.generateMipmap(qe),ye.unbindTexture()},this.initRenderTarget=function(k){F.get(k).__webglFramebuffer===void 0&&gt.setupRenderTarget(k)},this.initTexture=function(k){k.isCubeTexture?gt.setTextureCube(k,0):k.isData3DTexture?gt.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?gt.setTexture2DArray(k,0):gt.setTexture2D(k,0),ye.unbindTexture()},this.resetState=function(){W=0,lt=0,tt=null,ye.reset(),Ee.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _r}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Un._getDrawingBufferColorSpace(t),e.unpackColorSpace=Un._getUnpackColorSpace()}}const J7=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:__,AddEquation:Cu,AddOperation:nD,AdditiveAnimationBlendMode:oE,AdditiveBlending:Ul,AgXToneMapping:tE,AlphaFormat:sE,AlwaysCompare:pD,AlwaysDepth:xx,AlwaysStencilFunc:Zb,AmbientLight:n1,AnimationAction:lN,AnimationClip:q0,AnimationLoader:$F,AnimationMixer:A6,AnimationObjectGroup:E6,AnimationUtils:ZF,ArcCurve:ND,ArrayCamera:sN,ArrowHelper:Q6,AttachedBindMode:qb,Audio:rN,AudioAnalyser:p6,AudioContext:OE,AudioListener:f6,AudioLoader:l6,AxesHelper:J6,BackSide:ps,BasicDepthPacking:oD,BasicShadowMap:I3,BatchedMesh:AD,Bone:dE,BooleanKeyframeTrack:Eh,Box2:P6,Box3:ms,Box3Helper:Z6,BoxGeometry:ar,BoxHelper:W6,BufferAttribute:ii,BufferGeometry:ln,BufferGeometryLoader:aN,ByteType:S_,Cache:Ll,Camera:O_,CameraHelper:q6,CanvasTexture:yF,CapsuleGeometry:H_,CatmullRomCurve3:UD,CineonToneMapping:JM,CircleGeometry:G_,ClampToEdgeWrapping:na,Clock:Rp,Color:Ae,ColorKeyframeTrack:wE,ColorManagement:Un,CompressedArrayTexture:gF,CompressedCubeTexture:vF,CompressedTexture:V_,CompressedTextureLoader:t6,ConeGeometry:hg,ConstantAlphaFactor:$3,ConstantColorFactor:Q3,Controls:uN,CubeCamera:SD,CubeDepthTexture:RD,CubeReflectionMapping:Vo,CubeRefractionMapping:Fu,CubeTexture:lg,CubeTextureLoader:JD,CubeUVReflectionMapping:wp,CubicBezierCurve:vE,CubicBezierCurve3:OD,CubicInterpolant:WD,CullFaceBack:kb,CullFaceFront:P3,CullFaceFrontBack:bB,CullFaceNone:L3,Curve:jo,CurvePath:PD,CustomBlending:B3,CustomToneMapping:$M,CylinderGeometry:fg,Cylindrical:L6,Data3DTexture:U_,DataArrayTexture:N_,DataTexture:Wr,DataTextureLoader:CE,DataUtils:ih,DecrementStencilOp:FB,DecrementWrapStencilOp:HB,DefaultLoadingManager:QD,DepthFormat:zl,DepthStencilFormat:Du,DepthTexture:ph,DetachedBindMode:iD,DirectionalLight:NE,DirectionalLightHelper:Y6,DiscreteInterpolant:ZD,DodecahedronGeometry:j_,DoubleSide:Ns,DstAlphaFactor:Y3,DstColorFactor:W3,DynamicCopyUsage:nz,DynamicDrawUsage:KB,DynamicReadUsage:$B,EdgesGeometry:DD,EllipseCurve:k_,EqualCompare:fD,EqualDepth:Sx,EqualStencilFunc:XB,EquirectangularReflectionMapping:op,EquirectangularRefractionMapping:U0,Euler:Er,EventDispatcher:Hl,ExternalTexture:mE,ExtrudeGeometry:X_,FileLoader:br,Float16BufferAttribute:Wz,Float32BufferAttribute:Be,FloatType:Mi,Fog:ug,FogExp2:cg,FramebufferTexture:mF,FrontSide:Rc,Frustum:Cp,FrustumArray:z_,GLBufferAttribute:N6,GLSL1:az,GLSL3:Kb,GreaterCompare:hD,GreaterDepth:Mx,GreaterEqualCompare:R_,GreaterEqualDepth:bx,GreaterEqualStencilFunc:ZB,GreaterStencilFunc:qB,GridHelper:k6,Group:Ba,HalfFloatType:pi,HemisphereLight:$D,HemisphereLightHelper:j6,IcosahedronGeometry:dg,ImageBitmapLoader:o6,ImageLoader:W0,ImageUtils:yD,IncrementStencilOp:zB,IncrementWrapStencilOp:VB,InstancedBufferAttribute:mp,InstancedBufferGeometry:iN,InstancedInterleavedBuffer:D6,InstancedMesh:B_,Int16BufferAttribute:Yz,Int32BufferAttribute:qz,Int8BufferAttribute:jz,IntType:sg,InterleavedBuffer:P_,InterleavedBufferAttribute:dh,Interpolant:gg,InterpolateDiscrete:P0,InterpolateLinear:i_,InterpolateSmooth:ix,InterpolationSamplingMode:oz,InterpolationSamplingType:rz,InvertStencilOp:GB,KeepStencilOp:Kf,KeyframeTrack:Zr,LOD:ED,LatheGeometry:Y_,Layers:dp,LessCompare:uD,LessDepth:_x,LessEqualCompare:C_,LessEqualDepth:fh,LessEqualStencilFunc:YB,LessStencilFunc:kB,Light:Yu,LightProbe:nN,Line:Hu,Line3:z6,LineBasicMaterial:Ps,LineCurve:yE,LineCurve3:LD,LineDashedMaterial:YD,LineLoop:wD,LineSegments:Gl,LinearFilter:Nn,LinearInterpolant:AE,LinearMipMapLinearFilter:Wb,LinearMipMapNearestFilter:TB,LinearMipmapLinearFilter:Ol,LinearMipmapNearestFilter:p0,LinearSRGBColorSpace:Ho,LinearToneMapping:QM,LinearTransfer:B0,Loader:Is,LoaderUtils:eM,LoadingManager:e1,LoopOnce:aD,LoopPingPong:rD,LoopRepeat:sD,MOUSE:yr,Material:gs,MaterialLoader:i1,MathUtils:D_,Matrix2:zE,Matrix3:vn,Matrix4:rn,MaxEquation:H3,Mesh:Zn,MeshBasicMaterial:Go,MeshDepthMaterial:t1,MeshDistanceMaterial:EE,MeshLambertMaterial:ME,MeshMatcapMaterial:XD,MeshNormalMaterial:kD,MeshPhongMaterial:GD,MeshPhysicalMaterial:$_,MeshStandardMaterial:vp,MeshToonMaterial:jD,MinEquation:V3,MirroredRepeatWrapping:L0,MixOperation:eD,MultiplyBlending:Yb,MultiplyOperation:ag,NearestFilter:la,NearestMipMapLinearFilter:EB,NearestMipMapNearestFilter:MB,NearestMipmapLinearFilter:Zd,NearestMipmapNearestFilter:nE,NeutralToneMapping:eE,NeverCompare:cD,NeverDepth:yx,NeverStencilFunc:jB,NoBlending:Yr,NoColorSpace:Ec,NoNormalPacking:OB,NoToneMapping:qr,NormalAnimationBlendMode:w_,NormalBlending:lh,NormalGAPacking:PB,NormalRGPacking:LB,NotEqualCompare:dD,NotEqualDepth:Ex,NotEqualStencilFunc:WB,NumberKeyframeTrack:X0,Object3D:On,ObjectLoader:s6,ObjectSpaceNormalMap:lD,OctahedronGeometry:pg,OneFactor:j3,OneMinusConstantAlphaFactor:tD,OneMinusConstantColorFactor:J3,OneMinusDstAlphaFactor:q3,OneMinusDstColorFactor:Z3,OneMinusSrcAlphaFactor:vx,OneMinusSrcColorFactor:X3,OrthographicCamera:Fo,PCFShadowMap:tp,PCFSoftShadowMap:ep,PMREMGenerator:aM,Path:o_,PerspectiveCamera:Fi,Plane:Rl,PlaneGeometry:Dc,PlaneHelper:K6,PointLight:DE,PointLightHelper:H6,Points:pE,PointsMaterial:F_,PolarGridHelper:X6,PolyhedronGeometry:Xu,PositionalAudio:d6,PropertyBinding:Gn,PropertyMixer:oN,QuadraticBezierCurve:xE,QuadraticBezierCurve3:_E,Quaternion:Fa,QuaternionKeyframeTrack:vg,QuaternionLinearInterpolant:KD,R11_EAC_Format:Ux,RED_GREEN_RGTC2_Format:e_,RED_RGTC1_Format:$x,REVISION:Ap,RG11_EAC_Format:Lx,RGBADepthPacking:DB,RGBAFormat:ca,RGBAIntegerFormat:A_,RGBA_ASTC_10x10_Format:qx,RGBA_ASTC_10x5_Format:kx,RGBA_ASTC_10x6_Format:Xx,RGBA_ASTC_10x8_Format:Yx,RGBA_ASTC_12x10_Format:Wx,RGBA_ASTC_12x12_Format:Zx,RGBA_ASTC_4x4_Format:Ix,RGBA_ASTC_5x4_Format:Bx,RGBA_ASTC_5x5_Format:zx,RGBA_ASTC_6x5_Format:Fx,RGBA_ASTC_6x6_Format:Vx,RGBA_ASTC_8x5_Format:Hx,RGBA_ASTC_8x6_Format:Gx,RGBA_ASTC_8x8_Format:jx,RGBA_BPTC_Format:Kx,RGBA_ETC2_EAC_Format:Nx,RGBA_PVRTC_2BPPV1_Format:Cx,RGBA_PVRTC_4BPPV1_Format:wx,RGBA_S3TC_DXT1_Format:g0,RGBA_S3TC_DXT3_Format:v0,RGBA_S3TC_DXT5_Format:y0,RGBDepthPacking:NB,RGBFormat:rE,RGBIntegerFormat:AB,RGB_BPTC_SIGNED_Format:Qx,RGB_BPTC_UNSIGNED_Format:Jx,RGB_ETC1_Format:Rx,RGB_ETC2_Format:Dx,RGB_PVRTC_2BPPV1_Format:Ax,RGB_PVRTC_4BPPV1_Format:Tx,RGB_S3TC_DXT1_Format:m0,RGDepthPacking:UB,RGFormat:hh,RGIntegerFormat:T_,RawShaderMaterial:bE,Ray:ku,Raycaster:BE,RectAreaLight:eN,RedFormat:rg,RedIntegerFormat:og,ReinhardToneMapping:x_,RenderTarget:cE,RenderTarget3D:w6,RepeatWrapping:O0,ReplaceStencilOp:BB,ReverseSubtractEquation:F3,RingGeometry:q_,SIGNED_R11_EAC_Format:Ox,SIGNED_RED_GREEN_RGTC2_Format:n_,SIGNED_RED_RGTC1_Format:t_,SIGNED_RG11_EAC_Format:Px,SRGBColorSpace:Ka,SRGBTransfer:ti,Scene:Mh,ShaderChunk:Mn,ShaderLib:Bo,ShaderMaterial:Ri,ShadowMaterial:HD,Shape:uh,ShapeGeometry:W_,ShapePath:$6,ShapeUtils:zo,ShortType:b_,Skeleton:I_,SkeletonHelper:V6,SkinnedMesh:TD,Source:Nu,Sphere:Qa,SphereGeometry:mg,Spherical:yp,SphericalHarmonics3:UE,SplineCurve:SE,SpotLight:tN,SpotLightHelper:F6,Sprite:MD,SpriteMaterial:hE,SrcAlphaFactor:gx,SrcAlphaSaturateFactor:K3,SrcColorFactor:k3,StaticCopyUsage:ez,StaticDrawUsage:z0,StaticReadUsage:JB,StereoCamera:c6,StreamCopyUsage:iz,StreamDrawUsage:QB,StreamReadUsage:tz,StringKeyframeTrack:Th,SubtractEquation:z3,SubtractiveBlending:Xb,TOUCH:xr,TangentSpaceNormalMap:ju,TetrahedronGeometry:Z_,Texture:ci,TextureLoader:e6,TextureUtils:aV,Timer:U6,TimestampQuery:sz,TorusGeometry:K_,TorusKnotGeometry:Q_,Triangle:nr,TriangleFanDrawMode:RB,TriangleStripDrawMode:CB,TrianglesDrawMode:wB,TubeGeometry:J_,UVMapping:zu,Uint16BufferAttribute:uE,Uint32BufferAttribute:fE,Uint8BufferAttribute:kz,Uint8ClampedBufferAttribute:Xz,Uniform:IE,UniformsGroup:R6,UniformsLib:Ue,UniformsUtils:H0,UnsignedByteType:za,UnsignedInt101111Type:aE,UnsignedInt248Type:cp,UnsignedInt5999Type:iE,UnsignedIntType:Mr,UnsignedShort4444Type:M_,UnsignedShort5551Type:E_,UnsignedShortType:lp,VSMShadowMap:th,Vector2:It,Vector3:K,Vector4:di,VectorKeyframeTrack:Y0,VideoFrameTexture:pF,VideoTexture:CD,WebGL3DRenderTarget:Uz,WebGLArrayRenderTarget:Nz,WebGLCoordinateSystem:_r,WebGLCubeRenderTarget:L_,WebGLRenderTarget:ia,WebGLRenderer:yg,WebGLUtils:gN,WebGPUCoordinateSystem:up,WebXRController:ax,WireframeGeometry:VD,WrapAroundEnding:I0,ZeroCurvatureEnding:eh,ZeroFactor:G3,ZeroSlopeEnding:nh,ZeroStencilOp:IB,createCanvasElement:vD,error:Ke,getConsoleFunction:uz,log:V0,setConsoleFunction:cz,warn:Re,warnOnce:fp},Symbol.toStringTag,{value:"Module"}));var eb={exports:{}},nb={},ib={exports:{}},ab={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function $7(){if(Zw)return ab;Zw=1;var i=bp();function t(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,a=i.useEffect,r=i.useLayoutEffect,l=i.useDebugValue;function u(y,x){var _=x(),E=n({inst:{value:_,getSnapshot:x}}),C=E[0].inst,T=E[1];return r(function(){C.value=_,C.getSnapshot=x,d(C)&&T({inst:C})},[y,_,x]),a(function(){return d(C)&&T({inst:C}),y(function(){d(C)&&T({inst:C})})},[y]),l(_),_}function d(y){var x=y.getSnapshot;y=y.value;try{var _=x();return!e(y,_)}catch{return!0}}function p(y,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return ab.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:g,ab}var Kw;function tj(){return Kw||(Kw=1,ib.exports=$7()),ib.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function ej(){if(Qw)return nb;Qw=1;var i=bp(),t=tj();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,r=i.useRef,l=i.useEffect,u=i.useMemo,d=i.useDebugValue;return nb.useSyncExternalStoreWithSelector=function(p,g,y,x,_){var E=r(null);if(E.current===null){var C={hasValue:!1,value:null};E.current=C}else C=E.current;E=u(function(){function M(B){if(!R){if(R=!0,D=B,B=x(B),_!==void 0&&C.hasValue){var G=C.value;if(_(G,B))return L=G}return L=B}if(G=L,n(D,B))return G;var V=x(B);return _!==void 0&&_(G,V)?(D=B,G):(D=B,L=V)}var R=!1,D,L,P=y===void 0?null:y;return[function(){return M(g())},P===null?void 0:function(){return M(P())}]},[g,y,x,_]);var T=a(p,E[0],E[1]);return l(function(){C.hasValue=!0,C.value=T},[T]),d(T),T},nb}var Jw;function nj(){return Jw||(Jw=1,eb.exports=ej()),eb.exports}var ij=nj();const aj=d_(ij),$w=i=>{let t;const e=new Set,n=(p,g)=>{const y=typeof p=="function"?p(t):p;if(!Object.is(y,t)){const x=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(_=>_(t,x))}},a=()=>t,u={setState:n,getState:a,getInitialState:()=>d,subscribe:p=>(e.add(p),()=>e.delete(p))},d=t=i(n,a,u);return u},sj=(i=>i?$w(i):$w),{useSyncExternalStoreWithSelector:rj}=aj,oj=i=>i;function lj(i,t=oj,e){const n=rj(i.subscribe,i.getState,i.getInitialState,t,e);return Bl.useDebugValue(n),n}const tC=(i,t)=>{const e=sj(i),n=(a,r=t)=>lj(e,a,r);return Object.assign(n,e),n},vN=((i,t)=>i?tC(i,t):tC),cj=i=>typeof i=="object"&&typeof i.then=="function",sh=[];function yN(i,t,e=(n,a)=>n===a){if(i===t)return!0;if(!i||!t)return!1;const n=i.length;if(t.length!==n)return!1;for(let a=0;a<n;a++)if(!e(i[a],t[a]))return!1;return!0}function xN(i,t=null,e=!1,n={}){t===null&&(t=[i]);for(const r of sh)if(yN(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!e)throw r.promise}const a={keys:t,equal:n.equal,remove:()=>{const r=sh.indexOf(a);r!==-1&&sh.splice(r,1)},promise:(cj(i)?i:i(...t)).then(r=>{a.response=r,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(r=>a.error=r)};if(sh.push(a),!e)throw a.promise}const uj=(i,t,e)=>xN(i,t,!1,e),fj=(i,t,e)=>void xN(i,t,!0,e),hj=i=>{if(i===void 0||i.length===0)sh.splice(0,sh.length);else{const t=sh.find(e=>yN(i,e.keys,e.equal));t&&t.remove()}};var sb={exports:{}},rb={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC;function dj(){return eC||(eC=1,(function(i){i.exports=function(t){function e(c,f,v,b){return new Yg(c,f,v,b)}function n(){}function a(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return c===null||typeof c!="object"?null:(c=Yn&&c[Yn]||c["@@iterator"],typeof c=="function"?c:null)}function l(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===qi?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case sl:return"Fragment";case Dr:return"Portal";case rl:return"Profiler";case ec:return"StrictMode";case po:return"Suspense";case _f:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case ol:return(c.displayName||"Context")+".Provider";case nm:return(c._context.displayName||"Context")+".Consumer";case Yh:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Zc:return f=c.displayName||null,f!==null?f:l(c.type)||"Memo";case mo:f=c._payload,c=c._init;try{return l(c(f))}catch{}}return null}function u(c){if(ll===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);ll=f&&f[1]||"",cl=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ll+c+cl}function d(c,f){if(!c||Kc)return"";Kc=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(f){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(fn){var de=fn}Reflect.construct(c,[],Ne)}else{try{Ne.call()}catch(fn){de=fn}c.call(Ne.prototype)}}else{try{throw Error()}catch(fn){de=fn}(Ne=c())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(fn){if(fn&&de&&typeof fn.stack=="string")return[fn.stack,de.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=b.DetermineComponentFrameRoot(),Y=U[0],ct=U[1];if(Y&&ct){var Tt=Y.split(`
`),kt=ct.split(`
`);for(w=b=0;b<Tt.length&&!Tt[b].includes("DetermineComponentFrameRoot");)b++;for(;w<kt.length&&!kt[w].includes("DetermineComponentFrameRoot");)w++;if(b===Tt.length||w===kt.length)for(b=Tt.length-1,w=kt.length-1;1<=b&&0<=w&&Tt[b]!==kt[w];)w--;for(;1<=b&&0<=w;b--,w--)if(Tt[b]!==kt[w]){if(b!==1||w!==1)do if(b--,w--,0>w||Tt[b]!==kt[w]){var me=`
`+Tt[b].replace(" at new "," at ");return c.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",c.displayName)),me}while(1<=b&&0<=w);break}}}finally{Kc=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?u(v):""}function p(c){switch(c.tag){case 26:case 27:case 5:return u(c.type);case 16:return u("Lazy");case 13:return u("Suspense");case 19:return u("SuspenseList");case 0:case 15:return c=d(c.type,!1),c;case 11:return c=d(c.type.render,!1),c;case 1:return c=d(c.type,!0),c;default:return""}}function g(c){try{var f="";do f+=p(c),c=c.return;while(c);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function y(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function x(c){if(y(c)!==c)throw Error(a(188))}function _(c){var f=c.alternate;if(!f){if(f=y(c),f===null)throw Error(a(188));return f!==c?null:c}for(var v=c,b=f;;){var w=v.return;if(w===null)break;var U=w.alternate;if(U===null){if(b=w.return,b!==null){v=b;continue}break}if(w.child===U.child){for(U=w.child;U;){if(U===v)return x(w),c;if(U===b)return x(w),f;U=U.sibling}throw Error(a(188))}if(v.return!==b.return)v=w,b=U;else{for(var Y=!1,ct=w.child;ct;){if(ct===v){Y=!0,v=w,b=U;break}if(ct===b){Y=!0,b=w,v=U;break}ct=ct.sibling}if(!Y){for(ct=U.child;ct;){if(ct===v){Y=!0,v=U,b=w;break}if(ct===b){Y=!0,b=U,v=w;break}ct=ct.sibling}if(!Y)throw Error(a(189))}}if(v.alternate!==b)throw Error(a(190))}if(v.tag!==3)throw Error(a(188));return v.stateNode.current===v?c:f}function E(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=E(c),f!==null)return f;c=c.sibling}return null}function C(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(c.tag!==4&&(f=C(c),f!==null))return f;c=c.sibling}return null}function T(c){return{current:c}}function M(c){0>dl||(c.current=sd[dl],sd[dl]=null,dl--)}function R(c,f){dl++,sd[dl]=c.current,c.current=f}function D(c){return c>>>=0,c===0?32:31-(Am(c)/x1|0)|0}function L(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function P(c,f){var v=c.pendingLanes;if(v===0)return 0;var b=0,w=c.suspendedLanes,U=c.pingedLanes,Y=c.warmLanes;c=c.finishedLanes!==0;var ct=v&134217727;return ct!==0?(v=ct&~w,v!==0?b=L(v):(U&=ct,U!==0?b=L(U):c||(Y=ct&~Y,Y!==0&&(b=L(Y))))):(ct=v&~w,ct!==0?b=L(ct):U!==0?b=L(U):c||(Y=v&~Y,Y!==0&&(b=L(Y)))),b===0?0:f!==0&&f!==b&&(f&w)===0&&(w=b&-b,Y=f&-f,w>=Y||w===32&&(Y&4194176)!==0)?f:b}function B(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function G(c,f){switch(c){case 1:case 2:case 4:case 8:return f+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V(){var c=Ef;return Ef<<=1,(Ef&4194176)===0&&(Ef=128),c}function N(){var c=eu;return eu<<=1,(eu&62914560)===0&&(eu=4194304),c}function I(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function W(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function lt(c,f,v,b,w,U){var Y=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var ct=c.entanglements,Tt=c.expirationTimes,kt=c.hiddenUpdates;for(v=Y&~v;0<v;){var me=31-Oi(v),Ne=1<<me;ct[me]=0,Tt[me]=-1;var de=kt[me];if(de!==null)for(kt[me]=null,me=0;me<de.length;me++){var fn=de[me];fn!==null&&(fn.lane&=-536870913)}v&=~Ne}b!==0&&tt(c,b,0),U!==0&&w===0&&c.tag!==0&&(c.suspendedLanes|=U&~(Y&~f))}function tt(c,f,v){c.pendingLanes|=f,c.suspendedLanes&=~f;var b=31-Oi(f);c.entangledLanes|=f,c.entanglements[b]=c.entanglements[b]|1073741824|v&4194218}function rt(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var b=31-Oi(v),w=1<<b;w&f|c[b]&f&&(c[b]|=f),v&=~w}}function mt(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function $(c){if(Wi&&typeof Wi.onCommitFiberRoot=="function")try{Wi.onCommitFiberRoot(iu,c,void 0,(c.current.flags&128)===128)}catch{}}function et(c){if(typeof Ra=="function"&&od(c),Wi&&typeof Wi.setStrictMode=="function")try{Wi.setStrictMode(iu,c)}catch{}}function vt(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}function ut(c,f){if(typeof c=="object"&&c!==null){var v=ld.get(c);return v!==void 0?v:(f={value:c,source:f,stack:g(f)},ld.set(c,f),f)}return{value:c,source:f,stack:g(f)}}function j(c,f){Es[Ts++]=au,Es[Ts++]=ml,ml=c,au=f}function st(c,f,v){ss[Da++]=Lr,ss[Da++]=Pr,ss[Da++]=cr,cr=c;var b=Lr;c=Pr;var w=32-Oi(b)-1;b&=~(1<<w),v+=1;var U=32-Oi(f)+w;if(30<U){var Y=w-w%5;U=(b&(1<<Y)-1).toString(32),b>>=Y,w-=Y,Lr=1<<32-Oi(f)+w|v<<w|b,Pr=U+c}else Lr=1<<U|v<<w|b,Pr=c}function wt(c){c.return!==null&&(j(c,1),st(c,1,0))}function Ct(c){for(;c===ml;)ml=Es[--Ts],Es[Ts]=null,au=Es[--Ts],Es[Ts]=null;for(;c===cr;)cr=ss[--Da],ss[Da]=null,Pr=ss[--Da],ss[Da]=null,Lr=ss[--Da],ss[Da]=null}function Mt(c,f){R(_o,f),R(Gs,c),R(Li,null),c=im(f),M(Li),R(Li,c)}function Vt(){M(Li),M(Gs),M(_o)}function ft(c){c.memoizedState!==null&&R(Af,c);var f=Li.current,v=qg(f,c.type);f!==v&&(R(Gs,c),R(Li,v))}function Rt(c){Gs.current===c&&(M(Li),M(Gs)),Af.current===c&&(M(Af),rr?vo._currentValue=ic:vo._currentValue2=ic)}function Ft(c){var f=Error(a(418,""));throw Oe(ut(f,c)),wf}function Se(c,f){if(!as)throw Error(a(175));rc(c.stateNode,c.type,c.memoizedProps,f,c)||Ft(c)}function $t(c){for(Pi=c.return;Pi;)switch(Pi.tag){case 3:case 27:ur=!0;return;case 5:case 13:ur=!1;return;default:Pi=Pi.return}}function ze(c){if(!as||c!==Pi)return!1;if(!Pn)return $t(c),Pn=!0,!1;var f=!1;if(ha?c.tag!==3&&c.tag!==27&&(c.tag!==5||gm(c.type)&&!Sa(c.type,c.memoizedProps))&&(f=!0):c.tag!==3&&(c.tag!==5||gm(c.type)&&!Sa(c.type,c.memoizedProps))&&(f=!0),f&&Kn&&Ft(c),$t(c),c.tag===13){if(!as)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));Kn=Tv(c)}else Kn=Pi?hl(c.stateNode):null;return!0}function Qe(){as&&(Kn=Pi=null,Pn=!1)}function Oe(c){js===null?js=[c]:js.push(c)}function Gt(){for(var c=So,f=fr=So=0;f<c;){var v=rs[f];rs[f++]=null;var b=rs[f];rs[f++]=null;var w=rs[f];rs[f++]=null;var U=rs[f];if(rs[f++]=null,b!==null&&w!==null){var Y=b.pending;Y===null?w.next=w:(w.next=Y.next,Y.next=w),b.pending=w}U!==0&&J(v,w,U)}}function se(c,f,v,b){rs[So++]=c,rs[So++]=f,rs[So++]=v,rs[So++]=b,fr|=b,c.lanes|=b,c=c.alternate,c!==null&&(c.lanes|=b)}function Wt(c,f,v,b){return se(c,f,v,b),Fe(c)}function ve(c,f){return se(c,null,null,f),Fe(c)}function J(c,f,v){c.lanes|=v;var b=c.alternate;b!==null&&(b.lanes|=v);for(var w=!1,U=c.return;U!==null;)U.childLanes|=v,b=U.alternate,b!==null&&(b.childLanes|=v),U.tag===22&&(c=U.stateNode,c===null||c._visibility&1||(w=!0)),c=U,U=U.return;w&&f!==null&&c.tag===3&&(U=c.stateNode,w=31-Oi(v),U=U.hiddenUpdates,c=U[w],c===null?U[w]=[f]:c.push(f),f.lane=v|536870912)}function Fe(c){if(50<pc)throw pc=0,Nm=null,Error(a(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}function be(c){c!==gl&&c.next===null&&(gl===null?ui=gl=c:gl=gl.next=c),Ii=!0,cd||(cd=!0,Bt(ye))}function He(c,f){if(!ud&&Ii){ud=!0;do for(var v=!1,b=ui;b!==null;){if(c!==0){var w=b.pendingLanes;if(w===0)var U=0;else{var Y=b.suspendedLanes,ct=b.pingedLanes;U=(1<<31-Oi(42|c)+1)-1,U&=w&~(Y&~ct),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(v=!0,gt(b,U))}else U=Cn,U=P(b,b===Jn?U:0),(U&3)===0||B(b,U)||(v=!0,gt(b,U));b=b.next}while(v);ud=!1}}function ye(){Ii=cd=!1;var c=0;su!==0&&(Qg()&&(c=su),su=0);for(var f=Ms(),v=null,b=ui;b!==null;){var w=b.next,U=Q(b,f);U===0?(b.next=null,v===null?ui=w:v.next=w,w===null&&(gl=v)):(v=b,(c!==0||(U&3)!==0)&&(Ii=!0)),b=w}He(c)}function Q(c,f){for(var v=c.suspendedLanes,b=c.pingedLanes,w=c.expirationTimes,U=c.pendingLanes&-62914561;0<U;){var Y=31-Oi(U),ct=1<<Y,Tt=w[Y];Tt===-1?((ct&v)===0||(ct&b)!==0)&&(w[Y]=G(ct,f)):Tt<=f&&(c.expiredLanes|=ct),U&=~ct}if(f=Jn,v=Cn,v=P(c,c===f?v:0),b=c.callbackNode,v===0||c===f&&qn===2||c.cancelPendingCommit!==null)return b!==null&&b!==null&&lr(b),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||B(c,v)){if(f=v&-v,f===c.callbackPriority)return f;switch(b!==null&&lr(b),mt(v)){case 2:case 8:v=Tf;break;case 32:v=nu;break;case 268435456:v=lc;break;default:v=nu}return b=F.bind(null,c),v=Or(v,b),c.callbackPriority=f,c.callbackNode=v,f}return b!==null&&b!==null&&lr(b),c.callbackPriority=2,c.callbackNode=null,2}function F(c,f){var v=c.callbackNode;if(el()&&c.callbackNode!==v)return null;var b=Cn;return b=P(c,c===Jn?b:0),b===0?null:(_s(c,b,f),Q(c,Ms()),c.callbackNode!=null&&c.callbackNode===v?F.bind(null,c):null)}function gt(c,f){if(el())return null;_s(c,f,!0)}function Bt(c){ev?nv(function(){(wn&6)!==0?Or(rd,c):c()}):Or(rd,c)}function qt(){return su===0&&(su=V()),su}function Pt(c,f){if(ru===null){var v=ru=[];fd=0,fi=qt(),da={status:"pending",value:void 0,then:function(b){v.push(b)}}}return fd++,f.then(Le,Le),f}function Le(){if(--fd===0&&ru!==null){da!==null&&(da.status="fulfilled");var c=ru;ru=null,fi=0,da=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function Me(c,f){var v=[],b={status:"pending",value:null,reason:null,then:function(w){v.push(w)}};return c.then(function(){b.status="fulfilled",b.value=f;for(var w=0;w<v.length;w++)(0,v[w])(f)},function(w){for(b.status="rejected",b.reason=w,w=0;w<v.length;w++)(0,v[w])(void 0)}),b}function Pe(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ye(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Zt(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Kt(c,f,v){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(wn&2)!==0){var w=b.pending;return w===null?f.next=f:(f.next=w.next,w.next=f),b.pending=f,f=Fe(c),J(c,null,v),f}return se(c,b,f,v),Fe(c)}function De(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194176)!==0)){var b=f.lanes;b&=c.pendingLanes,v|=b,f.lanes=v,rt(c,v)}}function nt(c,f){var v=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,v===b)){var w=null,U=null;if(v=v.firstBaseUpdate,v!==null){do{var Y={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};U===null?w=U=Y:U=U.next=Y,v=v.next}while(v!==null);U===null?w=U=f:U=U.next=f}else w=U=f;v={baseState:b.baseState,firstBaseUpdate:w,lastBaseUpdate:U,shared:b.shared,callbacks:b.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}function _t(){if(hd){var c=da;if(c!==null)throw c}}function te(c,f,v,b){hd=!1;var w=c.updateQueue;Na=!1;var U=w.firstBaseUpdate,Y=w.lastBaseUpdate,ct=w.shared.pending;if(ct!==null){w.shared.pending=null;var Tt=ct,kt=Tt.next;Tt.next=null,Y===null?U=kt:Y.next=kt,Y=Tt;var me=c.alternate;me!==null&&(me=me.updateQueue,ct=me.lastBaseUpdate,ct!==Y&&(ct===null?me.firstBaseUpdate=kt:ct.next=kt,me.lastBaseUpdate=Tt))}if(U!==null){var Ne=w.baseState;Y=0,me=kt=Tt=null,ct=U;do{var de=ct.lane&-536870913,fn=de!==ct.lane;if(fn?(Cn&de)===de:(b&de)===de){de!==0&&de===fi&&(hd=!0),me!==null&&(me=me.next={lane:0,tag:ct.tag,payload:ct.payload,callback:null,next:null});t:{var Qs=c,hu=ct;de=f;var mc=v;switch(hu.tag){case 1:if(Qs=hu.payload,typeof Qs=="function"){Ne=Qs.call(mc,Ne,de);break t}Ne=Qs;break t;case 3:Qs.flags=Qs.flags&-65537|128;case 0:if(Qs=hu.payload,de=typeof Qs=="function"?Qs.call(mc,Ne,de):Qs,de==null)break t;Ne=Ni({},Ne,de);break t;case 2:Na=!0}}de=ct.callback,de!==null&&(c.flags|=64,fn&&(c.flags|=8192),fn=w.callbacks,fn===null?w.callbacks=[de]:fn.push(de))}else fn={lane:de,tag:ct.tag,payload:ct.payload,callback:ct.callback,next:null},me===null?(kt=me=fn,Tt=Ne):me=me.next=fn,Y|=de;if(ct=ct.next,ct===null){if(ct=w.shared.pending,ct===null)break;fn=ct,ct=fn.next,fn.next=null,w.lastBaseUpdate=fn,w.shared.pending=null}}while(!0);me===null&&(Tt=Ne),w.baseState=Tt,w.firstBaseUpdate=kt,w.lastBaseUpdate=me,U===null&&(w.shared.lanes=0),Zs|=Y,c.lanes=Y,c.memoizedState=Ne}}function ot(c,f){if(typeof c!="function")throw Error(a(191,c));c.call(f)}function At(c,f){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)ot(v[c],f)}function Qt(c,f){if(ja(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),b=Object.keys(f);if(v.length!==b.length)return!1;for(b=0;b<v.length;b++){var w=v[b];if(!Ov.call(f,w)||!ja(c[w],f[w]))return!1}return!0}function Ee(c){return c=c.status,c==="fulfilled"||c==="rejected"}function ne(){}function Yt(c,f,v){switch(v=c[v],v===void 0?c.push(f):v!==f&&(f.then(ne,ne),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,c===Cf?Error(a(483)):c;default:if(typeof f.status=="string")f.then(ne,ne);else{if(c=Jn,c!==null&&100<c.shellSuspendCounter)throw Error(a(482));c=f,c.status="pending",c.then(function(b){if(f.status==="pending"){var w=f;w.status="fulfilled",w.value=b}},function(b){if(f.status==="pending"){var w=f;w.status="rejected",w.reason=b}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,c===Cf?Error(a(483)):c}throw Ua=f,Cf}}function ce(){if(Ua===null)throw Error(a(459));var c=Ua;return Ua=null,c}function je(c){var f=Oa;return Oa+=1,cc===null&&(cc=[]),Yt(cc,c,f)}function pn(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function hn(c,f){throw f.$$typeof===em?Error(a(525)):(c=Object.prototype.toString.call(f),Error(a(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function xi(c){var f=c._init;return f(c._payload)}function _i(c){function f(Ut,bt){if(c){var Lt=Ut.deletions;Lt===null?(Ut.deletions=[bt],Ut.flags|=16):Lt.push(bt)}}function v(Ut,bt){if(!c)return null;for(;bt!==null;)f(Ut,bt),bt=bt.sibling;return null}function b(Ut){for(var bt=new Map;Ut!==null;)Ut.key!==null?bt.set(Ut.key,Ut):bt.set(Ut.index,Ut),Ut=Ut.sibling;return bt}function w(Ut,bt){return Ut=uo(Ut,bt),Ut.index=0,Ut.sibling=null,Ut}function U(Ut,bt,Lt){return Ut.index=Lt,c?(Lt=Ut.alternate,Lt!==null?(Lt=Lt.index,Lt<bt?(Ut.flags|=33554434,bt):Lt):(Ut.flags|=33554434,bt)):(Ut.flags|=1048576,bt)}function Y(Ut){return c&&Ut.alternate===null&&(Ut.flags|=33554434),Ut}function ct(Ut,bt,Lt,he){return bt===null||bt.tag!==6?(bt=xf(Lt,Ut.mode,he),bt.return=Ut,bt):(bt=w(bt,Lt),bt.return=Ut,bt)}function Tt(Ut,bt,Lt,he){var We=Lt.type;return We===sl?me(Ut,bt,Lt.props.children,he,Lt.key):bt!==null&&(bt.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===mo&&xi(We)===bt.type)?(bt=w(bt,Lt.props),pn(bt,Lt),bt.return=Ut,bt):(bt=tc(Lt.type,Lt.key,Lt.props,null,Ut.mode,he),pn(bt,Lt),bt.return=Ut,bt)}function kt(Ut,bt,Lt,he){return bt===null||bt.tag!==4||bt.stateNode.containerInfo!==Lt.containerInfo||bt.stateNode.implementation!==Lt.implementation?(bt=is(Lt,Ut.mode,he),bt.return=Ut,bt):(bt=w(bt,Lt.children||[]),bt.return=Ut,bt)}function me(Ut,bt,Lt,he,We){return bt===null||bt.tag!==7?(bt=il(Lt,Ut.mode,he,We),bt.return=Ut,bt):(bt=w(bt,Lt),bt.return=Ut,bt)}function Ne(Ut,bt,Lt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return bt=xf(""+bt,Ut.mode,Lt),bt.return=Ut,bt;if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case al:return Lt=tc(bt.type,bt.key,bt.props,null,Ut.mode,Lt),pn(Lt,bt),Lt.return=Ut,Lt;case Dr:return bt=is(bt,Ut.mode,Lt),bt.return=Ut,bt;case mo:var he=bt._init;return bt=he(bt._payload),Ne(Ut,bt,Lt)}if(ul(bt)||r(bt))return bt=il(bt,Ut.mode,Lt,null),bt.return=Ut,bt;if(typeof bt.then=="function")return Ne(Ut,je(bt),Lt);if(bt.$$typeof===ol)return Ne(Ut,nf(Ut,bt),Lt);hn(Ut,bt)}return null}function de(Ut,bt,Lt,he){var We=bt!==null?bt.key:null;if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint")return We!==null?null:ct(Ut,bt,""+Lt,he);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case al:return Lt.key===We?Tt(Ut,bt,Lt,he):null;case Dr:return Lt.key===We?kt(Ut,bt,Lt,he):null;case mo:return We=Lt._init,Lt=We(Lt._payload),de(Ut,bt,Lt,he)}if(ul(Lt)||r(Lt))return We!==null?null:me(Ut,bt,Lt,he,null);if(typeof Lt.then=="function")return de(Ut,bt,je(Lt),he);if(Lt.$$typeof===ol)return de(Ut,bt,nf(Ut,Lt),he);hn(Ut,Lt)}return null}function fn(Ut,bt,Lt,he,We){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Ut=Ut.get(Lt)||null,ct(bt,Ut,""+he,We);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case al:return Ut=Ut.get(he.key===null?Lt:he.key)||null,Tt(bt,Ut,he,We);case Dr:return Ut=Ut.get(he.key===null?Lt:he.key)||null,kt(bt,Ut,he,We);case mo:var $n=he._init;return he=$n(he._payload),fn(Ut,bt,Lt,he,We)}if(ul(he)||r(he))return Ut=Ut.get(Lt)||null,me(bt,Ut,he,We,null);if(typeof he.then=="function")return fn(Ut,bt,Lt,je(he),We);if(he.$$typeof===ol)return fn(Ut,bt,Lt,nf(bt,he),We);hn(bt,he)}return null}function Qs(Ut,bt,Lt,he){for(var We=null,$n=null,en=bt,Tn=bt=0,ni=null;en!==null&&Tn<Lt.length;Tn++){en.index>Tn?(ni=en,en=null):ni=en.sibling;var Rn=de(Ut,en,Lt[Tn],he);if(Rn===null){en===null&&(en=ni);break}c&&en&&Rn.alternate===null&&f(Ut,en),bt=U(Rn,bt,Tn),$n===null?We=Rn:$n.sibling=Rn,$n=Rn,en=ni}if(Tn===Lt.length)return v(Ut,en),Pn&&j(Ut,Tn),We;if(en===null){for(;Tn<Lt.length;Tn++)en=Ne(Ut,Lt[Tn],he),en!==null&&(bt=U(en,bt,Tn),$n===null?We=en:$n.sibling=en,$n=en);return Pn&&j(Ut,Tn),We}for(en=b(en);Tn<Lt.length;Tn++)ni=fn(en,Ut,Tn,Lt[Tn],he),ni!==null&&(c&&ni.alternate!==null&&en.delete(ni.key===null?Tn:ni.key),bt=U(ni,bt,Tn),$n===null?We=ni:$n.sibling=ni,$n=ni);return c&&en.forEach(function(Tl){return f(Ut,Tl)}),Pn&&j(Ut,Tn),We}function hu(Ut,bt,Lt,he){if(Lt==null)throw Error(a(151));for(var We=null,$n=null,en=bt,Tn=bt=0,ni=null,Rn=Lt.next();en!==null&&!Rn.done;Tn++,Rn=Lt.next()){en.index>Tn?(ni=en,en=null):ni=en.sibling;var Tl=de(Ut,en,Rn.value,he);if(Tl===null){en===null&&(en=ni);break}c&&en&&Tl.alternate===null&&f(Ut,en),bt=U(Tl,bt,Tn),$n===null?We=Tl:$n.sibling=Tl,$n=Tl,en=ni}if(Rn.done)return v(Ut,en),Pn&&j(Ut,Tn),We;if(en===null){for(;!Rn.done;Tn++,Rn=Lt.next())Rn=Ne(Ut,Rn.value,he),Rn!==null&&(bt=U(Rn,bt,Tn),$n===null?We=Rn:$n.sibling=Rn,$n=Rn);return Pn&&j(Ut,Tn),We}for(en=b(en);!Rn.done;Tn++,Rn=Lt.next())Rn=fn(en,Ut,Tn,Rn.value,he),Rn!==null&&(c&&Rn.alternate!==null&&en.delete(Rn.key===null?Tn:Rn.key),bt=U(Rn,bt,Tn),$n===null?We=Rn:$n.sibling=Rn,$n=Rn);return c&&en.forEach(function(Pv){return f(Ut,Pv)}),Pn&&j(Ut,Tn),We}function mc(Ut,bt,Lt,he){if(typeof Lt=="object"&&Lt!==null&&Lt.type===sl&&Lt.key===null&&(Lt=Lt.props.children),typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case al:t:{for(var We=Lt.key;bt!==null;){if(bt.key===We){if(We=Lt.type,We===sl){if(bt.tag===7){v(Ut,bt.sibling),he=w(bt,Lt.props.children),he.return=Ut,Ut=he;break t}}else if(bt.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===mo&&xi(We)===bt.type){v(Ut,bt.sibling),he=w(bt,Lt.props),pn(he,Lt),he.return=Ut,Ut=he;break t}v(Ut,bt);break}else f(Ut,bt);bt=bt.sibling}Lt.type===sl?(he=il(Lt.props.children,Ut.mode,he,Lt.key),he.return=Ut,Ut=he):(he=tc(Lt.type,Lt.key,Lt.props,null,Ut.mode,he),pn(he,Lt),he.return=Ut,Ut=he)}return Y(Ut);case Dr:t:{for(We=Lt.key;bt!==null;){if(bt.key===We)if(bt.tag===4&&bt.stateNode.containerInfo===Lt.containerInfo&&bt.stateNode.implementation===Lt.implementation){v(Ut,bt.sibling),he=w(bt,Lt.children||[]),he.return=Ut,Ut=he;break t}else{v(Ut,bt);break}else f(Ut,bt);bt=bt.sibling}he=is(Lt,Ut.mode,he),he.return=Ut,Ut=he}return Y(Ut);case mo:return We=Lt._init,Lt=We(Lt._payload),mc(Ut,bt,Lt,he)}if(ul(Lt))return Qs(Ut,bt,Lt,he);if(r(Lt)){if(We=r(Lt),typeof We!="function")throw Error(a(150));return Lt=We.call(Lt),hu(Ut,bt,Lt,he)}if(typeof Lt.then=="function")return mc(Ut,bt,je(Lt),he);if(Lt.$$typeof===ol)return mc(Ut,bt,nf(Ut,Lt),he);hn(Ut,Lt)}return typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint"?(Lt=""+Lt,bt!==null&&bt.tag===6?(v(Ut,bt.sibling),he=w(bt,Lt),he.return=Ut,Ut=he):(v(Ut,bt),he=xf(Lt,Ut.mode,he),he.return=Ut,Ut=he),Y(Ut)):v(Ut,bt)}return function(Ut,bt,Lt,he){try{Oa=0;var We=mc(Ut,bt,Lt,he);return cc=null,We}catch(en){if(en===Cf)throw en;var $n=e(29,en,null,Ut.mode);return $n.lanes=he,$n.return=Ut,$n}finally{}}}function Nc(c,f){c=mr,R(dr,c),R(hr,f),mr=c|f.baseLanes}function Qr(){R(dr,mr),R(hr,hr.current)}function vs(){mr=dr.current,M(hr),M(dr)}function ys(c){var f=c.alternate;R(ri,ri.current&1),R(os,c),ks===null&&(f===null||hr.current!==null||f.memoizedState!==null)&&(ks=c)}function Bs(c){if(c.tag===22){if(R(ri,ri.current),R(os,c),ks===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(ks=c)}}else va()}function va(){R(ri,ri.current),R(os,os.current)}function ke(c){M(os),ks===c&&(ks=null),M(ri)}function ai(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||ac(v)||Mf(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function xn(){throw Error(a(321))}function H(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!ja(c[v],f[v]))return!1;return!0}function q(c,f,v,b,w,U){return bo=U,cn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,nn.H=c===null||c.memoizedState===null?To:Xa,yl=!1,U=v(b,w),yl=!1,uc&&(U=Nt(f,v,b,w)),ht(c),U}function ht(c){nn.H=Bi;var f=zn!==null&&zn.next!==null;if(bo=0,vi=zn=cn=null,Mo=!1,ou=0,Eo=null,f)throw Error(a(300));c===null||Zi||(c=c.dependencies,c!==null&&ef(c)&&(Zi=!0))}function Nt(c,f,v,b){cn=c;var w=0;do{if(uc&&(Eo=null),ou=0,uc=!1,25<=w)throw Error(a(301));if(w+=1,vi=zn=null,c.updateQueue!=null){var U=c.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}nn.H=_l,U=f(v,b)}while(uc);return U}function Ht(){var c=nn.H,f=c.useState()[0];return f=typeof f.then=="function"?ge(f):f,c=c.useState()[0],(zn!==null?zn.memoizedState:null)!==c&&(cn.flags|=1024),f}function zt(){var c=xl!==0;return xl=0,c}function pe(c,f,v){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~v}function ie(c){if(Mo){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Mo=!1}bo=0,vi=zn=cn=null,uc=!1,ou=xl=0,Eo=null}function oe(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?cn.memoizedState=vi=c:vi=vi.next=c,vi}function ee(){if(zn===null){var c=cn.alternate;c=c!==null?c.memoizedState:null}else c=zn.next;var f=vi===null?cn.memoizedState:vi.next;if(f!==null)vi=f,zn=c;else{if(c===null)throw cn.alternate===null?Error(a(467)):Error(a(310));zn=c,c={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},vi===null?cn.memoizedState=vi=c:vi=vi.next=c}return vi}function ge(c){var f=ou;return ou+=1,Eo===null&&(Eo=[]),c=Yt(Eo,c,f),f=cn,(vi===null?f.memoizedState:vi.next)===null&&(f=f.alternate,nn.H=f===null||f.memoizedState===null?To:Xa),c}function re(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return ge(c);if(c.$$typeof===ol)return xa(c)}throw Error(a(438,String(c)))}function k(c){var f=null,v=cn.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var b=cn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(f={data:b.data.map(function(w){return w.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=wm(),cn.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(c),b=0;b<c;b++)v[b]=_n;return f.index++,v}function it(c,f){return typeof f=="function"?f(c):f}function pt(c){var f=ee();return yt(f,zn,c)}function yt(c,f,v){var b=c.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=v;var w=c.baseQueue,U=b.pending;if(U!==null){if(w!==null){var Y=w.next;w.next=U.next,U.next=Y}f.baseQueue=w=U,b.pending=null}if(U=c.baseState,w===null)c.memoizedState=U;else{f=w.next;var ct=Y=null,Tt=null,kt=f,me=!1;do{var Ne=kt.lane&-536870913;if(Ne!==kt.lane?(Cn&Ne)===Ne:(bo&Ne)===Ne){var de=kt.revertLane;if(de===0)Tt!==null&&(Tt=Tt.next={lane:0,revertLane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),Ne===fi&&(me=!0);else if((bo&de)===de){kt=kt.next,de===fi&&(me=!0);continue}else Ne={lane:0,revertLane:kt.revertLane,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null},Tt===null?(ct=Tt=Ne,Y=U):Tt=Tt.next=Ne,cn.lanes|=de,Zs|=de;Ne=kt.action,yl&&v(U,Ne),U=kt.hasEagerState?kt.eagerState:v(U,Ne)}else de={lane:Ne,revertLane:kt.revertLane,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null},Tt===null?(ct=Tt=de,Y=U):Tt=Tt.next=de,cn.lanes|=Ne,Zs|=Ne;kt=kt.next}while(kt!==null&&kt!==f);if(Tt===null?Y=U:Tt.next=ct,!ja(U,c.memoizedState)&&(Zi=!0,me&&(v=da,v!==null)))throw v;c.memoizedState=U,c.baseState=Y,c.baseQueue=Tt,b.lastRenderedState=U}return w===null&&(b.lanes=0),[c.memoizedState,b.dispatch]}function dt(c){var f=ee(),v=f.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=c;var b=v.dispatch,w=v.pending,U=f.memoizedState;if(w!==null){v.pending=null;var Y=w=w.next;do U=c(U,Y.action),Y=Y.next;while(Y!==w);ja(U,f.memoizedState)||(Zi=!0),f.memoizedState=U,f.baseQueue===null&&(f.baseState=U),v.lastRenderedState=U}return[U,b]}function ae(c,f,v){var b=cn,w=ee(),U=Pn;if(U){if(v===void 0)throw Error(a(407));v=v()}else v=f();var Y=!ja((zn||w).memoizedState,v);if(Y&&(w.memoizedState=v,Zi=!0),w=w.queue,xs(Te.bind(null,b,w,c),[c]),w.getSnapshot!==f||Y||vi!==null&&vi.memoizedState.tag&1){if(b.flags|=2048,Ei(9,fe.bind(null,b,w,v,f),{destroy:void 0},null),Jn===null)throw Error(a(349));U||(bo&60)!==0||ue(b,f,v)}return v}function ue(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=cn.updateQueue,f===null?(f=wm(),cn.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function fe(c,f,v,b){f.value=v,f.getSnapshot=b,xe(f)&&Ve(c)}function Te(c,f,v){return v(function(){xe(f)&&Ve(c)})}function xe(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!ja(c,v)}catch{return!0}}function Ve(c){var f=ve(c,2);f!==null&&si(f,c,2)}function _e(c){var f=oe();if(typeof c=="function"){var v=c;if(c=v(),yl){et(!0);try{v()}finally{et(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:c},f}function Ie(c,f,v,b){return c.baseState=v,yt(c,zn,typeof b=="function"?b:it)}function mn(c,f,v,b,w){if(Ku(c))throw Error(a(485));if(c=f.action,c!==null){var U={payload:w,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){U.listeners.push(Y)}};nn.T!==null?v(!0):U.isTransition=!1,b(U),v=f.pending,v===null?(U.next=f.pending=U,Vn(f,U)):(U.next=v.next,f.pending=v.next=U)}}function Vn(c,f){var v=f.action,b=f.payload,w=c.state;if(f.isTransition){var U=nn.T,Y={};nn.T=Y;try{var ct=v(w,b),Tt=nn.S;Tt!==null&&Tt(Y,ct),gn(c,f,ct)}catch(kt){we(c,f,kt)}finally{nn.T=U}}else try{U=v(w,b),gn(c,f,U)}catch(kt){we(c,f,kt)}}function gn(c,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(b){Xe(c,f,b)},function(b){return we(c,f,b)}):Xe(c,f,v)}function Xe(c,f,v){f.status="fulfilled",f.value=v,qe(f),c.state=v,f=c.pending,f!==null&&(v=f.next,v===f?c.pending=null:(v=v.next,f.next=v,Vn(c,v)))}function we(c,f,v){var b=c.pending;if(c.pending=null,b!==null){b=b.next;do f.status="rejected",f.reason=v,qe(f),f=f.next;while(f!==b)}c.action=null}function qe(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function Ce(c,f){return f}function Hn(c,f){if(Pn){var v=Jn.formState;if(v!==null){t:{var b=cn;if(Pn){if(Kn){var w=Sv(Kn,ur);if(w){Kn=hl(w),b=Ur(w);break t}}Ft(b)}b=!1}b&&(f=v[0])}}v=oe(),v.memoizedState=v.baseState=f,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ce,lastRenderedState:f},v.queue=b,v=Lp.bind(null,cn,b),b.dispatch=v,b=_e(!1);var U=Lc.bind(null,cn,!1,b.queue);return b=oe(),w={state:f,dispatch:null,action:c,pending:null},b.queue=w,v=mn.bind(null,cn,w,U,v),w.dispatch=v,b.memoizedState=c,[f,v,!1]}function ua(c){var f=ee();return Bn(f,zn,c)}function Bn(c,f,v){f=yt(c,f,Ce)[0],c=pt(it)[0],f=typeof f=="object"&&f!==null&&typeof f.then=="function"?ge(f):f;var b=ee(),w=b.queue,U=w.dispatch;return v!==b.memoizedState&&(cn.flags|=2048,Ei(9,Di.bind(null,w,v),{destroy:void 0},null)),[f,U,c]}function Di(c,f){c.action=f}function jn(c){var f=ee(),v=zn;if(v!==null)return Bn(f,v,c);ee(),f=f.memoizedState,v=ee();var b=v.queue.dispatch;return v.memoizedState=c,[f,b,!1]}function Ei(c,f,v,b){return c={tag:c,create:f,inst:v,deps:b,next:null},f=cn.updateQueue,f===null&&(f=wm(),cn.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=c.next=c:(b=v.next,v.next=c,c.next=b,f.lastEffect=c),c}function Gi(){return ee().memoizedState}function ji(c,f,v,b){var w=oe();cn.flags|=c,w.memoizedState=Ei(1|f,v,{destroy:void 0},b===void 0?null:b)}function ki(c,f,v,b){var w=ee();b=b===void 0?null:b;var U=w.memoizedState.inst;zn!==null&&b!==null&&H(b,zn.memoizedState.deps)?w.memoizedState=Ei(f,v,U,b):(cn.flags|=c,w.memoizedState=Ei(1|f,v,U,b))}function jl(c,f){ji(8390656,8,c,f)}function xs(c,f){ki(2048,8,c,f)}function Mg(c,f){return ki(4,2,c,f)}function Eg(c,f){return ki(4,4,c,f)}function qu(c,f){if(typeof f=="function"){c=c();var v=f(c);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Ah(c,f,v){v=v!=null?v.concat([c]):null,ki(4,4,qu.bind(null,f,c),v)}function Wu(){}function kl(c,f){var v=ee();f=f===void 0?null:f;var b=v.memoizedState;return f!==null&&H(f,b[1])?b[0]:(v.memoizedState=[c,f],c)}function Xl(c,f){var v=ee();f=f===void 0?null:f;var b=v.memoizedState;if(f!==null&&H(f,b[1]))return b[0];if(b=c(),yl){et(!0);try{c()}finally{et(!1)}}return v.memoizedState=[b,f],b}function wh(c,f,v){return v===void 0||(bo&1073741824)!==0?c.memoizedState=f:(c.memoizedState=v,c=hf(),cn.lanes|=c,Zs|=c,v)}function Ch(c,f,v,b){return ja(v,f)?v:hr.current!==null?(c=wh(c,v,b),ja(c,f)||(Zi=!0),c):(bo&42)===0?(Zi=!0,c.memoizedState=v):(c=hf(),cn.lanes|=c,Zs|=c,f)}function Up(c,f,v,b,w){var U=fl();Ga(U!==0&&8>U?U:8);var Y=nn.T,ct={};nn.T=ct,Lc(c,!1,f,v);try{var Tt=w(),kt=nn.S;if(kt!==null&&kt(ct,Tt),Tt!==null&&typeof Tt=="object"&&typeof Tt.then=="function"){var me=Me(Tt,b);ko(c,f,me,wa(c))}else ko(c,f,b,wa(c))}catch(Ne){ko(c,f,{then:function(){},status:"rejected",reason:Ne},wa())}finally{Ga(U),nn.T=Y}}function Uc(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:ic,baseState:ic,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:ic},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:v},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function Zu(){return xa(vo)}function Oc(){return ee().memoizedState}function Jr(){return ee().memoizedState}function Op(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var v=wa();c=Zt(v);var b=Kt(f,c,v);b!==null&&(si(b,f,v),De(b,f,v)),f={cache:Wo()},c.payload=f;return}f=f.return}}function Rh(c,f,v){var b=wa();v={lane:b,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Ku(c)?Va(f,v):(v=Wt(c,f,v,b),v!==null&&(si(v,c,b),Xo(v,f,b)))}function Lp(c,f,v){var b=wa();ko(c,f,v,b)}function ko(c,f,v,b){var w={lane:b,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Ku(c))Va(f,w);else{var U=c.alternate;if(c.lanes===0&&(U===null||U.lanes===0)&&(U=f.lastRenderedReducer,U!==null))try{var Y=f.lastRenderedState,ct=U(Y,v);if(w.hasEagerState=!0,w.eagerState=ct,ja(ct,Y))return se(c,f,w,0),Jn===null&&Gt(),!1}catch{}finally{}if(v=Wt(c,f,w,b),v!==null)return si(v,c,b),Xo(v,f,b),!0}return!1}function Lc(c,f,v,b){if(b={lane:2,revertLane:qt(),action:b,hasEagerState:!1,eagerState:null,next:null},Ku(c)){if(f)throw Error(a(479))}else f=Wt(c,v,b,2),f!==null&&si(f,c,2)}function Ku(c){var f=c.alternate;return c===cn||f!==null&&f===cn}function Va(c,f){uc=Mo=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function Xo(c,f,v){if((v&4194176)!==0){var b=f.lanes;b&=c.pendingLanes,v|=b,f.lanes=v,rt(c,v)}}function Pc(c,f,v,b){f=c.memoizedState,v=v(b,f),v=v==null?f:Ni({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}function Ic(c,f,v,b,w,U,Y){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,U,Y):f.prototype&&f.prototype.isPureReactComponent?!Qt(v,b)||!Qt(w,U):!0}function Tg(c,f,v,b){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,b),f.state!==c&&lu.enqueueReplaceState(f,f.state,null)}function $r(c,f){var v=f;if("ref"in f){v={};for(var b in f)b!=="ref"&&(v[b]=f[b])}if(c=c.defaultProps){v===f&&(v=Ni({},v));for(var w in c)v[w]===void 0&&(v[w]=c[w])}return v}function Bc(c,f){try{var v=c.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(b){setTimeout(function(){throw b})}}function zc(c,f,v){try{var b=c.onCaughtError;b(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Fc(c,f,v){return v=Zt(v),v.tag=3,v.payload={element:null},v.callback=function(){Bc(c,f)},v}function Pp(c){return c=Zt(c),c.tag=3,c}function Ag(c,f,v,b){var w=v.type.getDerivedStateFromError;if(typeof w=="function"){var U=b.value;c.payload=function(){return w(U)},c.callback=function(){zc(f,v,b)}}var Y=v.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(c.callback=function(){zc(f,v,b),typeof w!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var ct=b.stack;this.componentDidCatch(b.value,{componentStack:ct!==null?ct:""})})}function l1(c,f,v,b,w){if(v.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(f=v.alternate,f!==null&&tf(f,v,w,!0),v=os.current,v!==null){switch(v.tag){case 13:return ks===null?Hs():v.alternate===null&&yi===0&&(yi=3),v.flags&=-257,v.flags|=65536,v.lanes=w,b===ka?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([b]):f.add(b),nl(c,b,w)),!1;case 22:return v.flags|=65536,b===ka?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([b])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([b]):v.add(b)),nl(c,b,w)),!1}throw Error(a(435,v.tag))}return nl(c,b,w),Hs(),!1}if(Pn)return f=os.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=w,b!==wf&&(c=Error(a(422),{cause:b}),Oe(ut(c,v)))):(b!==wf&&(f=Error(a(423),{cause:b}),Oe(ut(f,v))),c=c.current.alternate,c.flags|=65536,w&=-w,c.lanes|=w,b=ut(b,v),w=Fc(c.stateNode,b,w),nt(c,w),yi!==4&&(yi=2)),!1;var U=Error(a(520),{cause:b});if(U=ut(U,v),uu===null?uu=[U]:uu.push(U),yi!==4&&(yi=2),f===null)return!0;b=ut(b,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,c=w&-w,v.lanes|=c,c=Fc(v.stateNode,b,c),nt(v,c),!1;case 1:if(f=v.type,U=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Fr===null||!Fr.has(U))))return v.flags|=65536,w&=-w,v.lanes|=w,w=Pp(w),Ag(w,c,v,b),nt(v,w),!1}v=v.return}while(v!==null);return!1}function ya(c,f,v,b){f.child=c===null?Ir(f,null,v,b):vl(f,c.child,v,b)}function Dh(c,f,v,b,w){v=v.render;var U=f.ref;if("ref"in b){var Y={};for(var ct in b)ct!=="ref"&&(Y[ct]=b[ct])}else Y=b;return qo(f),b=q(c,f,v,Y,U,w),ct=zt(),c!==null&&!Zi?(pe(c,f,w),to(c,f,w)):(Pn&&ct&&wt(f),f.flags|=1,ya(c,f,b,w),f.child)}function wg(c,f,v,b,w){if(c===null){var U=v.type;return typeof U=="function"&&!co(U)&&U.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=U,Cg(c,f,U,b,w)):(c=tc(v.type,null,b,f,f.mode,w),c.ref=f.ref,c.return=f,f.child=c)}if(U=c.child,!Vp(c,w)){var Y=U.memoizedProps;if(v=v.compare,v=v!==null?v:Qt,v(Y,b)&&c.ref===f.ref)return to(c,f,w)}return f.flags|=1,c=uo(U,b),c.ref=f.ref,c.return=f,f.child=c}function Cg(c,f,v,b,w){if(c!==null){var U=c.memoizedProps;if(Qt(U,b)&&c.ref===f.ref)if(Zi=!1,f.pendingProps=b=U,Vp(c,w))(c.flags&131072)!==0&&(Zi=!0);else return f.lanes=c.lanes,to(c,f,w)}return Nh(c,f,v,b,w)}function Rg(c,f,v){var b=f.pendingProps,w=b.children,U=(f.stateNode._pendingVisibility&2)!==0,Y=c!==null?c.memoizedState:null;if(Qu(c,f),b.mode==="hidden"||U){if((f.flags&128)!==0){if(b=Y!==null?Y.baseLanes|v:v,c!==null){for(w=f.child=c.child,U=0;w!==null;)U=U|w.lanes|w.childLanes,w=w.sibling;f.childLanes=U&~b}else f.childLanes=0,f.child=null;return Dg(c,f,b,v)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Oh(f,Y!==null?Y.cachePool:null),Y!==null?Nc(f,Y):Qr(),Bs(f);else return f.lanes=f.childLanes=536870912,Dg(c,f,Y!==null?Y.baseLanes|v:v,v)}else Y!==null?(Oh(f,Y.cachePool),Nc(f,Y),va(),f.memoizedState=null):(c!==null&&Oh(f,null),Qr(),va());return ya(c,f,w,v),f.child}function Dg(c,f,v,b){var w=Gp();return w=w===null?null:{parent:rr?Ai._currentValue:Ai._currentValue2,pool:w},f.memoizedState={baseLanes:v,cachePool:w},c!==null&&Oh(f,null),Qr(),Bs(f),c!==null&&tf(c,f,b,!0),null}function Qu(c,f){var v=f.ref;if(v===null)c!==null&&c.ref!==null&&(f.flags|=2097664);else{if(typeof v!="function"&&typeof v!="object")throw Error(a(284));(c===null||c.ref!==v)&&(f.flags|=2097664)}}function Nh(c,f,v,b,w){return qo(f),v=q(c,f,v,b,void 0,w),b=zt(),c!==null&&!Zi?(pe(c,f,w),to(c,f,w)):(Pn&&b&&wt(f),f.flags|=1,ya(c,f,v,w),f.child)}function Ng(c,f,v,b,w,U){return qo(f),f.updateQueue=null,v=Nt(f,b,v,w),ht(c),b=zt(),c!==null&&!Zi?(pe(c,f,U),to(c,f,U)):(Pn&&b&&wt(f),f.flags|=1,ya(c,f,v,U),f.child)}function Ug(c,f,v,b,w){if(qo(f),f.stateNode===null){var U=oc,Y=v.contextType;typeof Y=="object"&&Y!==null&&(U=xa(Y)),U=new v(b,U),f.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=lu,f.stateNode=U,U._reactInternals=f,U=f.stateNode,U.props=b,U.state=f.memoizedState,U.refs={},Pe(f),Y=v.contextType,U.context=typeof Y=="object"&&Y!==null?xa(Y):oc,U.state=f.memoizedState,Y=v.getDerivedStateFromProps,typeof Y=="function"&&(Pc(f,v,Y,b),U.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(Y=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),Y!==U.state&&lu.enqueueReplaceState(U,U.state,null),te(f,b,U,w),_t(),U.state=f.memoizedState),typeof U.componentDidMount=="function"&&(f.flags|=4194308),b=!0}else if(c===null){U=f.stateNode;var ct=f.memoizedProps,Tt=$r(v,ct);U.props=Tt;var kt=U.context,me=v.contextType;Y=oc,typeof me=="object"&&me!==null&&(Y=xa(me));var Ne=v.getDerivedStateFromProps;me=typeof Ne=="function"||typeof U.getSnapshotBeforeUpdate=="function",ct=f.pendingProps!==ct,me||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ct||kt!==Y)&&Tg(f,U,b,Y),Na=!1;var de=f.memoizedState;U.state=de,te(f,b,U,w),_t(),kt=f.memoizedState,ct||de!==kt||Na?(typeof Ne=="function"&&(Pc(f,v,Ne,b),kt=f.memoizedState),(Tt=Na||Ic(f,v,Tt,b,de,kt,Y))?(me||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=kt),U.props=b,U.state=kt,U.context=Y,b=Tt):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{U=f.stateNode,Ye(c,f),Y=f.memoizedProps,me=$r(v,Y),U.props=me,Ne=f.pendingProps,de=U.context,kt=v.contextType,Tt=oc,typeof kt=="object"&&kt!==null&&(Tt=xa(kt)),ct=v.getDerivedStateFromProps,(kt=typeof ct=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(Y!==Ne||de!==Tt)&&Tg(f,U,b,Tt),Na=!1,de=f.memoizedState,U.state=de,te(f,b,U,w),_t();var fn=f.memoizedState;Y!==Ne||de!==fn||Na||c!==null&&c.dependencies!==null&&ef(c.dependencies)?(typeof ct=="function"&&(Pc(f,v,ct,b),fn=f.memoizedState),(me=Na||Ic(f,v,me,b,de,fn,Tt)||c!==null&&c.dependencies!==null&&ef(c.dependencies))?(kt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(b,fn,Tt),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(b,fn,Tt)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||Y===c.memoizedProps&&de===c.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&de===c.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=fn),U.props=b,U.state=fn,U.context=Tt,b=me):(typeof U.componentDidUpdate!="function"||Y===c.memoizedProps&&de===c.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&de===c.memoizedState||(f.flags|=1024),b=!1)}return U=b,Qu(c,f),b=(f.flags&128)!==0,U||b?(U=f.stateNode,v=b&&typeof v.getDerivedStateFromError!="function"?null:U.render(),f.flags|=1,c!==null&&b?(f.child=vl(f,c.child,null,w),f.child=vl(f,null,v,w)):ya(c,f,v,w),f.memoizedState=U.state,c=f.child):c=to(c,f,w),c}function Og(c,f,v,b){return Qe(),f.flags|=256,ya(c,f,v,b),f.child}function Ip(c){return{baseLanes:c,cachePool:jp()}}function Ju(c,f,v){return c=c!==null?c.childLanes&~v:0,f&&(c|=As),c}function Lg(c,f,v){var b=f.pendingProps,w=!1,U=(f.flags&128)!==0,Y;if((Y=U)||(Y=c!==null&&c.memoizedState===null?!1:(ri.current&2)!==0),Y&&(w=!0,f.flags&=-129),Y=(f.flags&32)!==0,f.flags&=-33,c===null){if(Pn){if(w?ys(f):va(),Pn){var ct=Kn,Tt;(Tt=ct)&&(ct=Mv(ct,ur),ct!==null?(f.memoizedState={dehydrated:ct,treeContext:cr!==null?{id:Lr,overflow:Pr}:null,retryLane:536870912},Tt=e(18,null,null,0),Tt.stateNode=ct,Tt.return=f,f.child=Tt,Pi=f,Kn=null,Tt=!0):Tt=!1),Tt||Ft(f)}if(ct=f.memoizedState,ct!==null&&(ct=ct.dehydrated,ct!==null))return Mf(ct)?f.lanes=16:f.lanes=536870912,null;ke(f)}return ct=b.children,b=b.fallback,w?(va(),w=f.mode,ct=zp({mode:"hidden",children:ct},w),b=il(b,w,v,null),ct.return=f,b.return=f,ct.sibling=b,f.child=ct,w=f.child,w.memoizedState=Ip(v),w.childLanes=Ju(c,Y,v),f.memoizedState=Df,b):(ys(f),Bp(f,ct))}if(Tt=c.memoizedState,Tt!==null&&(ct=Tt.dehydrated,ct!==null)){if(U)f.flags&256?(ys(f),f.flags&=-257,f=Uh(c,f,v)):f.memoizedState!==null?(va(),f.child=c.child,f.flags|=128,f=null):(va(),w=b.fallback,ct=f.mode,b=zp({mode:"visible",children:b.children},ct),w=il(w,ct,v,null),w.flags|=2,b.return=f,w.return=f,b.sibling=w,f.child=b,vl(f,c.child,null,v),b=f.child,b.memoizedState=Ip(v),b.childLanes=Ju(c,Y,v),f.memoizedState=Df,f=w);else if(ys(f),Mf(ct))Y=td(ct).digest,b=Error(a(419)),b.stack="",b.digest=Y,Oe({value:b,source:null,stack:null}),f=Uh(c,f,v);else if(Zi||tf(c,f,v,!1),Y=(v&c.childLanes)!==0,Zi||Y){if(Y=Jn,Y!==null){if(b=v&-v,(b&42)!==0)b=1;else switch(b){case 2:b=1;break;case 8:b=4;break;case 32:b=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:b=64;break;case 268435456:b=134217728;break;default:b=0}if(b=(b&(Y.suspendedLanes|v))!==0?0:b,b!==0&&b!==Tt.retryLane)throw Tt.retryLane=b,ve(c,b),si(Y,c,b),Cm}ac(ct)||Hs(),f=Uh(c,f,v)}else ac(ct)?(f.flags|=128,f.child=c.child,f=yf.bind(null,c),_v(ct,f),f=null):(c=Tt.treeContext,as&&(Kn=dm(ct),Pi=f,Pn=!0,js=null,ur=!1,c!==null&&(ss[Da++]=Lr,ss[Da++]=Pr,ss[Da++]=cr,Lr=c.id,Pr=c.overflow,cr=f)),f=Bp(f,b.children),f.flags|=4096);return f}return w?(va(),w=b.fallback,ct=f.mode,Tt=c.child,U=Tt.sibling,b=uo(Tt,{mode:"hidden",children:b.children}),b.subtreeFlags=Tt.subtreeFlags&31457280,U!==null?w=uo(U,w):(w=il(w,ct,v,null),w.flags|=2),w.return=f,b.return=f,b.sibling=w,f.child=b,b=w,w=f.child,ct=c.child.memoizedState,ct===null?ct=Ip(v):(Tt=ct.cachePool,Tt!==null?(U=rr?Ai._currentValue:Ai._currentValue2,Tt=Tt.parent!==U?{parent:U,pool:U}:Tt):Tt=jp(),ct={baseLanes:ct.baseLanes|v,cachePool:Tt}),w.memoizedState=ct,w.childLanes=Ju(c,Y,v),f.memoizedState=Df,b):(ys(f),v=c.child,c=v.sibling,v=uo(v,{mode:"visible",children:b.children}),v.return=f,v.sibling=null,c!==null&&(Y=f.deletions,Y===null?(f.deletions=[c],f.flags|=16):Y.push(c)),f.child=v,f.memoizedState=null,v)}function Bp(c,f){return f=zp({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function zp(c,f){return Xh(c,f,0,null)}function Uh(c,f,v){return vl(f,c.child,null,v),c=Bp(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function Pg(c,f,v){c.lanes|=f;var b=c.alternate;b!==null&&(b.lanes|=f),$u(c.return,f,v)}function Fp(c,f,v,b,w){var U=c.memoizedState;U===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:v,tailMode:w}:(U.isBackwards=f,U.rendering=null,U.renderingStartTime=0,U.last=b,U.tail=v,U.tailMode=w)}function Ig(c,f,v){var b=f.pendingProps,w=b.revealOrder,U=b.tail;if(ya(c,f,b.children,v),b=ri.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)t:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Pg(c,v,f);else if(c.tag===19)Pg(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break t;for(;c.sibling===null;){if(c.return===null||c.return===f)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}switch(R(ri,b),w){case"forwards":for(v=f.child,w=null;v!==null;)c=v.alternate,c!==null&&ai(c)===null&&(w=v),v=v.sibling;v=w,v===null?(w=f.child,f.child=null):(w=v.sibling,v.sibling=null),Fp(f,!1,w,v,U);break;case"backwards":for(v=null,w=f.child,f.child=null;w!==null;){if(c=w.alternate,c!==null&&ai(c)===null){f.child=w;break}c=w.sibling,w.sibling=v,v=w,w=c}Fp(f,!0,v,null,U);break;case"together":Fp(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function to(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),Zs|=f.lanes,(v&f.childLanes)===0)if(c!==null){if(tf(c,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(a(153));if(f.child!==null){for(c=f.child,v=uo(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=uo(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function Vp(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&ef(c)))}function c1(c,f,v){switch(f.tag){case 3:Mt(f,f.stateNode.containerInfo),Yo(f,Ai,c.memoizedState.cache),Qe();break;case 27:case 5:ft(f);break;case 4:Mt(f,f.stateNode.containerInfo);break;case 10:Yo(f,f.type,f.memoizedProps.value);break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(ys(f),f.flags|=128,null):(v&f.child.childLanes)!==0?Lg(c,f,v):(ys(f),c=to(c,f,v),c!==null?c.sibling:null);ys(f);break;case 19:var w=(c.flags&128)!==0;if(b=(v&f.childLanes)!==0,b||(tf(c,f,v,!1),b=(v&f.childLanes)!==0),w){if(b)return Ig(c,f,v);f.flags|=128}if(w=f.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),R(ri,ri.current),b)break;return null;case 22:case 23:return f.lanes=0,Rg(c,f,v);case 24:Yo(f,Ai,c.memoizedState.cache)}return to(c,f,v)}function Bg(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps)Zi=!0;else{if(!Vp(c,v)&&(f.flags&128)===0)return Zi=!1,c1(c,f,v);Zi=(c.flags&131072)!==0}else Zi=!1,Pn&&(f.flags&1048576)!==0&&st(f,au,f.index);switch(f.lanes=0,f.tag){case 16:t:{c=f.pendingProps;var b=f.elementType,w=b._init;if(b=w(b._payload),f.type=b,typeof b=="function")co(b)?(c=$r(b,c),f.tag=1,f=Ug(null,f,b,c,v)):(f.tag=0,f=Nh(null,f,b,c,v));else{if(b!=null){if(w=b.$$typeof,w===Yh){f.tag=11,f=Dh(null,f,b,c,v);break t}else if(w===Zc){f.tag=14,f=wg(null,f,b,c,v);break t}}throw f=l(b)||b,Error(a(306,f,""))}}return f;case 0:return Nh(c,f,f.type,f.pendingProps,v);case 1:return b=f.type,w=$r(b,f.pendingProps),Ug(c,f,b,w,v);case 3:t:{if(Mt(f,f.stateNode.containerInfo),c===null)throw Error(a(387));var U=f.pendingProps;w=f.memoizedState,b=w.element,Ye(c,f),te(f,U,null,v);var Y=f.memoizedState;if(U=Y.cache,Yo(f,Ai,U),U!==w.cache&&Yl(f,[Ai],v,!0),_t(),U=Y.element,as&&w.isDehydrated)if(w={element:U,isDehydrated:!1,cache:Y.cache},f.updateQueue.baseState=w,f.memoizedState=w,f.flags&256){f=Og(c,f,U,v);break t}else if(U!==b){b=ut(Error(a(424)),f),Oe(b),f=Og(c,f,U,v);break t}else for(as&&(Kn=sc(f.stateNode.containerInfo),Pi=f,Pn=!0,js=null,ur=!0),v=Ir(f,null,U,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Qe(),U===b){f=to(c,f,v);break t}ya(c,f,U,v)}f=f.child}return f;case 26:if(bs)return Qu(c,f),c===null?(v=vm(f.type,null,f.pendingProps,null))?f.memoizedState=v:Pn||(f.stateNode=Sm(f.type,f.pendingProps,_o.current,f)):f.memoizedState=vm(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:if(ha)return ft(f),c===null&&ha&&Pn&&(b=f.stateNode=id(f.type,f.pendingProps,_o.current,Li.current,!1),Pi=f,ur=!0,Kn=yo(b)),b=f.pendingProps.children,c!==null||Pn?ya(c,f,b,v):f.child=vl(f,null,b,v),Qu(c,f),f.child;case 5:return c===null&&Pn&&(Cv(f.type,f.pendingProps,Li.current),(w=b=Kn)&&(b=pm(b,f.type,f.pendingProps,ur),b!==null?(f.stateNode=b,Pi=f,Kn=yo(b),ur=!1,w=!0):w=!1),w||Ft(f)),ft(f),w=f.type,U=f.pendingProps,Y=c!==null?c.memoizedProps:null,b=U.children,Sa(w,U)?b=null:Y!==null&&Sa(w,Y)&&(f.flags|=32),f.memoizedState!==null&&(w=q(c,f,Ht,null,null,v),rr?vo._currentValue=w:vo._currentValue2=w),Qu(c,f),ya(c,f,b,v),f.child;case 6:return c===null&&Pn&&(y1(f.pendingProps,Li.current),(c=v=Kn)&&(v=bv(v,f.pendingProps,ur),v!==null?(f.stateNode=v,Pi=f,Kn=null,c=!0):c=!1),c||Ft(f)),null;case 13:return Lg(c,f,v);case 4:return Mt(f,f.stateNode.containerInfo),b=f.pendingProps,c===null?f.child=vl(f,null,b,v):ya(c,f,b,v),f.child;case 11:return Dh(c,f,f.type,f.pendingProps,v);case 7:return ya(c,f,f.pendingProps,v),f.child;case 8:return ya(c,f,f.pendingProps.children,v),f.child;case 12:return ya(c,f,f.pendingProps.children,v),f.child;case 10:return b=f.pendingProps,Yo(f,f.type,b.value),ya(c,f,b.children,v),f.child;case 9:return w=f.type._context,b=f.pendingProps.children,qo(f),w=xa(w),b=b(w),f.flags|=1,ya(c,f,b,v),f.child;case 14:return wg(c,f,f.type,f.pendingProps,v);case 15:return Cg(c,f,f.type,f.pendingProps,v);case 19:return Ig(c,f,v);case 22:return Rg(c,f,v);case 24:return qo(f),b=xa(Ai),c===null?(w=Gp(),w===null&&(w=Jn,U=Wo(),w.pooledCache=U,U.refCount++,U!==null&&(w.pooledCacheLanes|=v),w=U),f.memoizedState={parent:b,cache:w},Pe(f),Yo(f,Ai,w)):((c.lanes&v)!==0&&(Ye(c,f),te(f,null,null,v),_t()),w=c.memoizedState,U=f.memoizedState,w.parent!==b?(w={parent:b,cache:b},f.memoizedState=w,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=w),Yo(f,Ai,b)):(b=U.cache,Yo(f,Ai,b),b!==w.cache&&Yl(f,[Ai],v,!0))),ya(c,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(a(156,f.tag))}function Yo(c,f,v){rr?(R(Xs,f._currentValue),f._currentValue=v):(R(Xs,f._currentValue2),f._currentValue2=v)}function eo(c){var f=Xs.current;rr?c._currentValue=f:c._currentValue2=f,M(Xs)}function $u(c,f,v){for(;c!==null;){var b=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),c===v)break;c=c.return}}function Yl(c,f,v,b){var w=c.child;for(w!==null&&(w.return=c);w!==null;){var U=w.dependencies;if(U!==null){var Y=w.child;U=U.firstContext;t:for(;U!==null;){var ct=U;U=w;for(var Tt=0;Tt<f.length;Tt++)if(ct.context===f[Tt]){U.lanes|=v,ct=U.alternate,ct!==null&&(ct.lanes|=v),$u(U.return,v,c),b||(Y=null);break t}U=ct.next}}else if(w.tag===18){if(Y=w.return,Y===null)throw Error(a(341));Y.lanes|=v,U=Y.alternate,U!==null&&(U.lanes|=v),$u(Y,v,c),Y=null}else Y=w.child;if(Y!==null)Y.return=w;else for(Y=w;Y!==null;){if(Y===c){Y=null;break}if(w=Y.sibling,w!==null){w.return=Y.return,Y=w;break}Y=Y.return}w=Y}}function tf(c,f,v,b){c=null;for(var w=f,U=!1;w!==null;){if(!U){if((w.flags&524288)!==0)U=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var Y=w.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ct=w.type;ja(w.pendingProps.value,Y.value)||(c!==null?c.push(ct):c=[ct])}}else if(w===Af.current){if(Y=w.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(c!==null?c.push(vo):c=[vo])}w=w.return}c!==null&&Yl(f,c,v,b),f.flags|=262144}function ef(c){for(c=c.firstContext;c!==null;){var f=c.context;if(!ja(rr?f._currentValue:f._currentValue2,c.memoizedValue))return!0;c=c.next}return!1}function qo(c){bl=c,Ys=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function xa(c){return Hp(bl,c)}function nf(c,f){return bl===null&&qo(c),Hp(c,f)}function Hp(c,f){var v=rr?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:v,next:null},Ys===null){if(c===null)throw Error(a(308));Ys=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Ys=Ys.next=f;return v}function Wo(){return{controller:new Nf,data:new Map,refCount:0}}function af(c){c.refCount--,c.refCount===0&&Si(_1,function(){c.controller.abort()})}function Gp(){var c=fc.current;return c!==null?c:Jn.pooledCache}function Oh(c,f){f===null?R(fc,fc.current):R(fc,f.pool)}function jp(){var c=Gp();return c===null?null:{parent:rr?Ai._currentValue:Ai._currentValue2,pool:c}}function Ja(c){c.flags|=4}function Vc(c,f){if(c!==null&&c.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(c=f.child;c!==null;){if((c.flags&13878)!==0||(c.subtreeFlags&13878)!==0)return!0;c=c.sibling}return!1}function ql(c,f,v,b){if(gi)for(v=f.child;v!==null;){if(v.tag===5||v.tag===6)Sf(c,v.stateNode);else if(!(v.tag===4||ha&&v.tag===27)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else if(or)for(var w=f.child;w!==null;){if(w.tag===5){var U=w.stateNode;v&&b&&(U=xv(U,w.type,w.memoizedProps)),Sf(c,U)}else if(w.tag===6)U=w.stateNode,v&&b&&(U=hm(U,w.memoizedProps)),Sf(c,U);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)U=w.child,U!==null&&(U.return=w),ql(c,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===f)break;for(;w.sibling===null;){if(w.return===null||w.return===f)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function zg(c,f,v,b){if(or)for(var w=f.child;w!==null;){if(w.tag===5){var U=w.stateNode;v&&b&&(U=xv(U,w.type,w.memoizedProps)),fm(c,U)}else if(w.tag===6)U=w.stateNode,v&&b&&(U=hm(U,w.memoizedProps)),fm(c,U);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)U=w.child,U!==null&&(U.return=w),zg(c,w,!(w.memoizedProps!==null&&w.memoizedProps.mode==="manual"),!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===f)break;for(;w.sibling===null;){if(w.return===null||w.return===f)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function sf(c,f){if(or&&Vc(c,f)){c=f.stateNode;var v=c.containerInfo,b=$h();zg(b,f,!1,!1),c.pendingChildren=b,Ja(f),vv(v,b)}}function Lh(c,f,v,b){if(gi)c.memoizedProps!==b&&Ja(f);else if(or){var w=c.stateNode,U=c.memoizedProps;if((c=Vc(c,f))||U!==b){var Y=Li.current;U=gv(w,v,U,b,!c,null),U===w?f.stateNode=w:(qh(U,v,b,Y)&&Ja(f),f.stateNode=U,c?ql(U,f,!1,!1):Ja(f))}else f.stateNode=w}}function Ph(c,f,v){if(sm(f,v)){if(c.flags|=16777216,!rm(f,v))if(fa())c.flags|=8192;else throw Ua=ka,Rf}else c.flags&=-16777217}function Ih(c,f){if(Nv(f)){if(c.flags|=16777216,!bm(f))if(fa())c.flags|=8192;else throw Ua=ka,Rf}else c.flags&=-16777217}function Hc(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?N():536870912,c.lanes|=f,Qi|=f)}function Gc(c,f){if(!Pn)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var b=null;v!==null;)v.alternate!==null&&(b=v),v=v.sibling;b===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function mi(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,b=0;if(f)for(var w=c.child;w!==null;)v|=w.lanes|w.childLanes,b|=w.subtreeFlags&31457280,b|=w.flags&31457280,w.return=c,w=w.sibling;else for(w=c.child;w!==null;)v|=w.lanes|w.childLanes,b|=w.subtreeFlags,b|=w.flags,w.return=c,w=w.sibling;return c.subtreeFlags|=b,c.childLanes=v,f}function Fg(c,f,v){var b=f.pendingProps;switch(Ct(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(f),null;case 1:return mi(f),null;case 3:return v=f.stateNode,b=null,c!==null&&(b=c.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),eo(Ai),Vt(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(ze(f)?Ja(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,js!==null&&(oo(js),js=null))),sf(c,f),mi(f),null;case 26:if(bs){v=f.type;var w=f.memoizedState;return c===null?(Ja(f),w!==null?(mi(f),Ih(f,w)):(mi(f),Ph(f,v,b))):w?w!==c.memoizedState?(Ja(f),mi(f),Ih(f,w)):(mi(f),f.flags&=-16777217):(gi?c.memoizedProps!==b&&Ja(f):Lh(c,f,v,b),mi(f),Ph(f,v,b)),null}case 27:if(ha){if(Rt(f),v=_o.current,w=f.type,c!==null&&f.stateNode!=null)gi?c.memoizedProps!==b&&Ja(f):Lh(c,f,w,b);else{if(!b){if(f.stateNode===null)throw Error(a(166));return mi(f),null}c=Li.current,ze(f)?Se(f,c):(c=id(w,b,v,c,!0),f.stateNode=c,Ja(f))}return mi(f),null}case 5:if(Rt(f),v=f.type,c!==null&&f.stateNode!=null)Lh(c,f,v,b);else{if(!b){if(f.stateNode===null)throw Error(a(166));return mi(f),null}c=Li.current,ze(f)?Se(f,c):(w=am(v,b,_o.current,c,f),ql(w,f,!1,!1),f.stateNode=w,qh(w,v,b,c)&&Ja(f))}return mi(f),Ph(f,f.type,f.pendingProps),null;case 6:if(c&&f.stateNode!=null)v=c.memoizedProps,gi?v!==b&&Ja(f):or&&(v!==b?(f.stateNode=Ui(b,_o.current,Li.current,f),Ja(f)):f.stateNode=c.stateNode);else{if(typeof b!="string"&&f.stateNode===null)throw Error(a(166));if(c=_o.current,v=Li.current,ze(f)){if(!as)throw Error(a(176));if(c=f.stateNode,v=f.memoizedProps,b=null,w=Pi,w!==null)switch(w.tag){case 27:case 5:b=w.memoizedProps}ed(c,v,f,b)||Ft(f)}else f.stateNode=Ui(b,c,v,f)}return mi(f),null;case 13:if(b=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(w=ze(f),b!==null&&b.dehydrated!==null){if(c===null){if(!w)throw Error(a(318));if(!as)throw Error(a(344));if(w=f.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));Ev(w,f)}else Qe(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;mi(f),w=!1}else js!==null&&(oo(js),js=null),w=!0;if(!w)return f.flags&256?(ke(f),f):(ke(f),null)}if(ke(f),(f.flags&128)!==0)return f.lanes=v,f;if(v=b!==null,c=c!==null&&c.memoizedState!==null,v){b=f.child,w=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(w=b.alternate.memoizedState.cachePool.pool);var U=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(U=b.memoizedState.cachePool.pool),U!==w&&(b.flags|=2048)}return v!==c&&v&&(f.child.flags|=8192),Hc(f,f.updateQueue),mi(f),null;case 4:return Vt(),sf(c,f),c===null&&Zg(f.stateNode.containerInfo),mi(f),null;case 10:return eo(f.type),mi(f),null;case 19:if(M(ri),w=f.memoizedState,w===null)return mi(f),null;if(b=(f.flags&128)!==0,U=w.rendering,U===null)if(b)Gc(w,!1);else{if(yi!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(U=ai(c),U!==null){for(f.flags|=128,Gc(w,!1),c=U.updateQueue,f.updateQueue=c,Hc(f,c),f.subtreeFlags=0,c=v,v=f.child;v!==null;)$l(v,c),v=v.sibling;return R(ri,ri.current&1|2),f.child}c=c.sibling}w.tail!==null&&Ms()>ws&&(f.flags|=128,b=!0,Gc(w,!1),f.lanes=4194304)}else{if(!b)if(c=ai(U),c!==null){if(f.flags|=128,b=!0,c=c.updateQueue,f.updateQueue=c,Hc(f,c),Gc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!U.alternate&&!Pn)return mi(f),null}else 2*Ms()-w.renderingStartTime>ws&&v!==536870912&&(f.flags|=128,b=!0,Gc(w,!1),f.lanes=4194304);w.isBackwards?(U.sibling=f.child,f.child=U):(c=w.last,c!==null?c.sibling=U:f.child=U,w.last=U)}return w.tail!==null?(f=w.tail,w.rendering=f,w.tail=f.sibling,w.renderingStartTime=Ms(),f.sibling=null,c=ri.current,R(ri,b?c&1|2:c&1),f):(mi(f),null);case 22:case 23:return ke(f),vs(),b=f.memoizedState!==null,c!==null?c.memoizedState!==null!==b&&(f.flags|=8192):b&&(f.flags|=8192),b?(v&536870912)!==0&&(f.flags&128)===0&&(mi(f),f.subtreeFlags&6&&(f.flags|=8192)):mi(f),v=f.updateQueue,v!==null&&Hc(f,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048),c!==null&&M(fc),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),eo(Ai),mi(f),null;case 25:return null}throw Error(a(156,f.tag))}function u1(c,f){switch(Ct(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return eo(Ai),Vt(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Rt(f),null;case 13:if(ke(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(a(340));Qe()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return M(ri),null;case 4:return Vt(),null;case 10:return eo(f.type),null;case 22:case 23:return ke(f),vs(),c!==null&&M(fc),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return eo(Ai),null;case 25:return null;default:return null}}function Vg(c,f){switch(Ct(f),f.tag){case 3:eo(Ai),Vt();break;case 26:case 27:case 5:Rt(f);break;case 4:Vt();break;case 13:ke(f);break;case 19:M(ri);break;case 10:eo(f.type);break;case 22:case 23:ke(f),vs(),c!==null&&M(fc);break;case 24:eo(Ai)}}function rf(c,f){try{var v=f.updateQueue,b=v!==null?v.lastEffect:null;if(b!==null){var w=b.next;v=w;do{if((v.tag&c)===c){b=void 0;var U=v.create,Y=v.inst;b=U(),Y.destroy=b}v=v.next}while(v!==w)}}catch(ct){kn(f,f.return,ct)}}function Zo(c,f,v){try{var b=f.updateQueue,w=b!==null?b.lastEffect:null;if(w!==null){var U=w.next;b=U;do{if((b.tag&c)===c){var Y=b.inst,ct=Y.destroy;if(ct!==void 0){Y.destroy=void 0,w=f;var Tt=v;try{ct()}catch(kt){kn(w,Tt,kt)}}}b=b.next}while(b!==U)}}catch(kt){kn(f,f.return,kt)}}function Hg(c){var f=c.updateQueue;if(f!==null){var v=c.stateNode;try{At(f,v)}catch(b){kn(c,c.return,b)}}}function $a(c,f,v){v.props=$r(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(b){kn(c,f,b)}}function sr(c,f){try{var v=c.ref;if(v!==null){var b=c.stateNode;switch(c.tag){case 26:case 27:case 5:var w=nc(b);break;default:w=b}typeof v=="function"?c.refCleanup=v(w):v.current=w}}catch(U){kn(c,f,U)}}function ts(c,f){var v=c.ref,b=c.refCleanup;if(v!==null)if(typeof b=="function")try{b()}catch(w){kn(c,f,w)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(w){kn(c,f,w)}else v.current=null}function kp(c){var f=c.type,v=c.memoizedProps,b=c.stateNode;try{lv(b,f,v,c)}catch(w){kn(c,c.return,w)}}function Xp(c,f,v){try{cv(c.stateNode,c.type,v,f,c)}catch(b){kn(c,c.return,b)}}function Yp(c){return c.tag===5||c.tag===3||(bs?c.tag===26:!1)||(ha?c.tag===27:!1)||c.tag===4}function of(c){t:for(;;){for(;c.sibling===null;){if(c.return===null||Yp(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&(!ha||c.tag!==27)&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue t;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function qp(c,f,v){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?cm(v,c,f):lm(v,c);else if(!(b===4||ha&&b===27)&&(c=c.child,c!==null))for(qp(c,f,v),c=c.sibling;c!==null;)qp(c,f,v),c=c.sibling}function Bh(c,f,v){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?uv(v,c,f):rv(v,c);else if(!(b===4||ha&&b===27)&&(c=c.child,c!==null))for(Bh(c,f,v),c=c.sibling;c!==null;)Bh(c,f,v),c=c.sibling}function Wl(c,f,v){c=c.containerInfo;try{yv(c,v)}catch(b){kn(f,f.return,b)}}function Wp(c,f){for(Wg(c.containerInfo),$e=f;$e!==null;)if(c=$e,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,$e=f;else for(;$e!==null;){c=$e;var v=c.alternate;switch(f=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&v!==null){f=void 0;var b=c,w=v.memoizedProps;v=v.memoizedState;var U=b.stateNode;try{var Y=$r(b.type,w,b.elementType===b.type);f=U.getSnapshotBeforeUpdate(Y,v),U.__reactInternalSnapshotBeforeUpdate=f}catch(ct){kn(b,b.return,ct)}}break;case 3:(f&1024)!==0&&gi&&mv(c.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(a(163))}if(f=c.sibling,f!==null){f.return=c.return,$e=f;break}$e=c.return}return Y=ei,ei=!1,Y}function jc(c,f,v){var b=v.flags;switch(v.tag){case 0:case 11:case 15:io(c,v),b&4&&rf(5,v);break;case 1:if(io(c,v),b&4)if(c=v.stateNode,f===null)try{c.componentDidMount()}catch(ct){kn(v,v.return,ct)}else{var w=$r(v.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(w,f,c.__reactInternalSnapshotBeforeUpdate)}catch(ct){kn(v,v.return,ct)}}b&64&&Hg(v),b&512&&sr(v,v.return);break;case 3:if(io(c,v),b&64&&(b=v.updateQueue,b!==null)){if(c=null,v.child!==null)switch(v.child.tag){case 27:case 5:c=nc(v.child.stateNode);break;case 1:c=v.child.stateNode}try{At(b,c)}catch(ct){kn(v,v.return,ct)}}break;case 26:if(bs){io(c,v),b&512&&sr(v,v.return);break}case 27:case 5:io(c,v),f===null&&b&4&&kp(v),b&512&&sr(v,v.return);break;case 12:io(c,v);break;case 13:io(c,v),b&4&&Zl(c,v);break;case 22:if(w=v.memoizedState!==null||Ao,!w){f=f!==null&&f.memoizedState!==null||un;var U=Ao,Y=un;Ao=w,(un=f)&&!Y?Ko(c,v,(v.subtreeFlags&8772)!==0):io(c,v),Ao=U,un=Y}b&512&&(v.memoizedProps.mode==="manual"?sr(v,v.return):ts(v,v.return));break;default:io(c,v)}}function zh(c){var f=c.alternate;f!==null&&(c.alternate=null,zh(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Jg(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function zs(c,f,v){for(v=v.child;v!==null;)no(c,f,v),v=v.sibling}function no(c,f,v){if(Wi&&typeof Wi.onCommitFiberUnmount=="function")try{Wi.onCommitFiberUnmount(iu,v)}catch{}switch(v.tag){case 26:if(bs){un||ts(v,f),zs(c,f,v),v.memoizedState?xm(v.memoizedState):v.stateNode&&tu(v.stateNode);break}case 27:if(ha){un||ts(v,f);var b=Fn,w=zi;Fn=v.stateNode,zs(c,f,v),Tm(v.stateNode),Fn=b,zi=w;break}case 5:un||ts(v,f);case 6:if(gi){if(b=Fn,w=zi,Fn=null,zs(c,f,v),Fn=b,zi=w,Fn!==null)if(zi)try{hv(Fn,v.stateNode)}catch(U){kn(v,f,U)}else try{fv(Fn,v.stateNode)}catch(U){kn(v,f,U)}}else zs(c,f,v);break;case 18:gi&&Fn!==null&&(zi?mm(Fn,v.stateNode):wv(Fn,v.stateNode));break;case 4:gi?(b=Fn,w=zi,Fn=v.stateNode.containerInfo,zi=!0,zs(c,f,v),Fn=b,zi=w):(or&&Wl(v.stateNode,v,$h()),zs(c,f,v));break;case 0:case 11:case 14:case 15:un||Zo(2,v,f),un||Zo(4,v,f),zs(c,f,v);break;case 1:un||(ts(v,f),b=v.stateNode,typeof b.componentWillUnmount=="function"&&$a(v,f,b)),zs(c,f,v);break;case 21:zs(c,f,v);break;case 22:un||ts(v,f),un=(b=un)||v.memoizedState!==null,zs(c,f,v),un=b;break;default:zs(c,f,v)}}function Zl(c,f){if(as&&f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{nd(c)}catch(v){kn(f,f.return,v)}}function Zp(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new En),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new En),f;default:throw Error(a(435,c.tag))}}function Fh(c,f){var v=Zp(c);f.forEach(function(b){var w=kh.bind(null,c,b);v.has(b)||(v.add(b),b.then(w,w))})}function Xi(c,f){var v=f.deletions;if(v!==null)for(var b=0;b<v.length;b++){var w=v[b],U=c,Y=f;if(gi){var ct=Y;t:for(;ct!==null;){switch(ct.tag){case 27:case 5:Fn=ct.stateNode,zi=!1;break t;case 3:Fn=ct.stateNode.containerInfo,zi=!0;break t;case 4:Fn=ct.stateNode.containerInfo,zi=!0;break t}ct=ct.return}if(Fn===null)throw Error(a(160));no(U,Y,w),Fn=null,zi=!1}else no(U,Y,w);U=w.alternate,U!==null&&(U.return=null),w.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Kp(f,c),f=f.sibling}function Kp(c,f){var v=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Xi(f,c),es(c),b&4&&(Zo(3,c,c.return),rf(3,c),Zo(5,c,c.return));break;case 1:Xi(f,c),es(c),b&512&&(un||v===null||ts(v,v.return)),b&64&&Ao&&(c=c.updateQueue,c!==null&&(b=c.callbacks,b!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?b:v.concat(b))));break;case 26:if(bs){var w=La;Xi(f,c),es(c),b&512&&(un||v===null||ts(v,v.return)),b&4&&(b=v!==null?v.memoizedState:null,f=c.memoizedState,v===null?f===null?c.stateNode===null?c.stateNode=Rv(w,c.type,c.memoizedProps,c):_m(w,c.type,c.stateNode):c.stateNode=ym(w,f,c.memoizedProps):b!==f?(b===null?v.stateNode!==null&&tu(v.stateNode):xm(b),f===null?_m(w,c.type,c.stateNode):ym(w,f,c.memoizedProps)):f===null&&c.stateNode!==null&&Xp(c,c.memoizedProps,v.memoizedProps));break}case 27:if(ha&&b&4&&c.alternate===null){w=c.stateNode;var U=c.memoizedProps;try{Uv(w),Em(c.type,U,w,c)}catch(me){kn(c,c.return,me)}}case 5:if(Xi(f,c),es(c),b&512&&(un||v===null||ts(v,v.return)),gi){if(c.flags&32){f=c.stateNode;try{Jh(f)}catch(me){kn(c,c.return,me)}}b&4&&c.stateNode!=null&&(f=c.memoizedProps,Xp(c,f,v!==null?v.memoizedProps:f)),b&1024&&(Qn=!0)}break;case 6:if(Xi(f,c),es(c),b&4&&gi){if(c.stateNode===null)throw Error(a(162));b=c.memoizedProps,v=v!==null?v.memoizedProps:b,f=c.stateNode;try{ov(f,v,b)}catch(me){kn(c,c.return,me)}}break;case 3:if(bs?(Dv(),w=La,La=sa(f.containerInfo),Xi(f,c),La=w):Xi(f,c),es(c),b&4){if(gi&&as&&v!==null&&v.memoizedState.isDehydrated)try{Av(f.containerInfo)}catch(me){kn(c,c.return,me)}if(or){b=f.containerInfo,v=f.pendingChildren;try{yv(b,v)}catch(me){kn(c,c.return,me)}}}Qn&&(Qn=!1,Qp(c));break;case 4:bs?(v=La,La=sa(c.stateNode.containerInfo),Xi(f,c),es(c),La=v):(Xi(f,c),es(c)),b&4&&or&&Wl(c.stateNode,c,c.stateNode.pendingChildren);break;case 12:Xi(f,c),es(c);break;case 13:Xi(f,c),es(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Dm=Ms()),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,Fh(c,b)));break;case 22:b&512&&(un||v===null||ts(v,v.return)),w=c.memoizedState!==null;var Y=v!==null&&v.memoizedState!==null,ct=Ao,Tt=un;if(Ao=ct||w,un=Tt||Y,Xi(f,c),un=Tt,Ao=ct,es(c),f=c.stateNode,f._current=c,f._visibility&=-3,f._visibility|=f._pendingVisibility&2,b&8192&&(f._visibility=w?f._visibility&-2:f._visibility|1,w&&(f=Ao||un,v===null||Y||f||kc(c)),gi&&(c.memoizedProps===null||c.memoizedProps.mode!=="manual"))){t:if(v=null,gi)for(f=c;;){if(f.tag===5||bs&&f.tag===26||ha&&f.tag===27){if(v===null){Y=v=f;try{U=Y.stateNode,w?dv(U):v1(Y.stateNode,Y.memoizedProps)}catch(me){kn(Y,Y.return,me)}}}else if(f.tag===6){if(v===null){Y=f;try{var kt=Y.stateNode;w?pv(kt):um(kt,Y.memoizedProps)}catch(me){kn(Y,Y.return,me)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break t;for(;f.sibling===null;){if(f.return===null||f.return===c)break t;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}}b&4&&(b=c.updateQueue,b!==null&&(v=b.retryQueue,v!==null&&(b.retryQueue=null,Fh(c,v))));break;case 19:Xi(f,c),es(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,Fh(c,b)));break;case 21:break;default:Xi(f,c),es(c)}}function es(c){var f=c.flags;if(f&2){try{if(gi&&(!ha||c.tag!==27)){t:{for(var v=c.return;v!==null;){if(Yp(v)){var b=v;break t}v=v.return}throw Error(a(160))}switch(b.tag){case 27:if(ha){var w=b.stateNode,U=of(c);Bh(c,U,w);break}case 5:var Y=b.stateNode;b.flags&32&&(Jh(Y),b.flags&=-33);var ct=of(c);Bh(c,ct,Y);break;case 3:case 4:var Tt=b.stateNode.containerInfo,kt=of(c);qp(c,kt,Tt);break;default:throw Error(a(161))}}}catch(me){kn(c,c.return,me)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function Qp(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;Qp(f),f.tag===5&&f.flags&1024&&tv(f.stateNode),c=c.sibling}}function io(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)jc(c,f.alternate,f),f=f.sibling}function kc(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Zo(4,f,f.return),kc(f);break;case 1:ts(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&$a(f,f.return,v),kc(f);break;case 26:case 27:case 5:ts(f,f.return),kc(f);break;case 22:ts(f,f.return),f.memoizedState===null&&kc(f);break;default:kc(f)}c=c.sibling}}function Ko(c,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var b=f.alternate,w=c,U=f,Y=U.flags;switch(U.tag){case 0:case 11:case 15:Ko(w,U,v),rf(4,U);break;case 1:if(Ko(w,U,v),b=U,w=b.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(kt){kn(b,b.return,kt)}if(b=U,w=b.updateQueue,w!==null){var ct=b.stateNode;try{var Tt=w.shared.hiddenCallbacks;if(Tt!==null)for(w.shared.hiddenCallbacks=null,w=0;w<Tt.length;w++)ot(Tt[w],ct)}catch(kt){kn(b,b.return,kt)}}v&&Y&64&&Hg(U),sr(U,U.return);break;case 26:case 27:case 5:Ko(w,U,v),v&&b===null&&Y&4&&kp(U),sr(U,U.return);break;case 12:Ko(w,U,v);break;case 13:Ko(w,U,v),v&&Y&4&&Zl(w,U);break;case 22:U.memoizedState===null&&Ko(w,U,v),sr(U,U.return);break;default:Ko(w,U,v)}f=f.sibling}}function Vh(c,f){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&af(v))}function Hh(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&af(c))}function ao(c,f,v,b){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Fs(c,f,v,b),f=f.sibling}function Fs(c,f,v,b){var w=f.flags;switch(f.tag){case 0:case 11:case 15:ao(c,f,v,b),w&2048&&rf(9,f);break;case 3:ao(c,f,v,b),w&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&af(c)));break;case 12:if(w&2048){ao(c,f,v,b),c=f.stateNode;try{var U=f.memoizedProps,Y=U.id,ct=U.onPostCommit;typeof ct=="function"&&ct(Y,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Tt){kn(f,f.return,Tt)}}else ao(c,f,v,b);break;case 23:break;case 22:U=f.stateNode,f.memoizedState!==null?U._visibility&4?ao(c,f,v,b):Tr(c,f):U._visibility&4?ao(c,f,v,b):(U._visibility|=4,_a(c,f,v,b,(f.subtreeFlags&10256)!==0)),w&2048&&Vh(f.alternate,f);break;case 24:ao(c,f,v,b),w&2048&&Hh(f.alternate,f);break;default:ao(c,f,v,b)}}function _a(c,f,v,b,w){for(w=w&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var U=c,Y=f,ct=v,Tt=b,kt=Y.flags;switch(Y.tag){case 0:case 11:case 15:_a(U,Y,ct,Tt,w),rf(8,Y);break;case 23:break;case 22:var me=Y.stateNode;Y.memoizedState!==null?me._visibility&4?_a(U,Y,ct,Tt,w):Tr(U,Y):(me._visibility|=4,_a(U,Y,ct,Tt,w)),w&&kt&2048&&Vh(Y.alternate,Y);break;case 24:_a(U,Y,ct,Tt,w),w&&kt&2048&&Hh(Y.alternate,Y);break;default:_a(U,Y,ct,Tt,w)}f=f.sibling}}function Tr(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=c,b=f,w=b.flags;switch(b.tag){case 22:Tr(v,b),w&2048&&Vh(b.alternate,b);break;case 24:Tr(v,b),w&2048&&Hh(b.alternate,b);break;default:Tr(v,b)}f=f.sibling}}function so(c){if(c.subtreeFlags&Ml)for(c=c.child;c!==null;)lf(c),c=c.sibling}function lf(c){switch(c.tag){case 26:so(c),c.flags&Ml&&(c.memoizedState!==null?Mm(La,c.memoizedState,c.memoizedProps):om(c.type,c.memoizedProps));break;case 5:so(c),c.flags&Ml&&om(c.type,c.memoizedProps);break;case 3:case 4:if(bs){var f=La;La=sa(c.stateNode.containerInfo),so(c),La=f}else so(c);break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=Ml,Ml=16777216,so(c),Ml=f):so(c));break;default:so(c)}}function cf(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function Kl(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var b=f[v];$e=b,ff(b,c)}cf(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)ro(c),c=c.sibling}function ro(c){switch(c.tag){case 0:case 11:case 15:Kl(c),c.flags&2048&&Zo(9,c,c.return);break;case 3:Kl(c);break;case 12:Kl(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&4&&(c.return===null||c.return.tag!==13)?(f._visibility&=-5,uf(c)):Kl(c);break;default:Kl(c)}}function uf(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var b=f[v];$e=b,ff(b,c)}cf(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Zo(8,f,f.return),uf(f);break;case 22:v=f.stateNode,v._visibility&4&&(v._visibility&=-5,uf(f));break;default:uf(f)}c=c.sibling}}function ff(c,f){for(;$e!==null;){var v=$e;switch(v.tag){case 0:case 11:case 15:Zo(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var b=v.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:af(v.memoizedState.cache)}if(b=v.child,b!==null)b.return=v,$e=b;else t:for(v=c;$e!==null;){b=$e;var w=b.sibling,U=b.return;if(zh(b),b===v){$e=null;break t}if(w!==null){w.return=U,$e=w;break t}$e=U}}}function Qo(c){var f=Zh(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(c=iv(c),c===null)throw Error(a(362));return c.stateNode.current}function Gh(c,f){var v=c.tag;switch(f.$$typeof){case hi:if(c.type===f.value)return!0;break;case pr:t:{for(f=f.value,c=[c,0],v=0;v<c.length;){var b=c[v++],w=b.tag,U=c[v++],Y=f[U];if(w!==5&&w!==26&&w!==27||!Nr(b)){for(;Y!=null&&Gh(b,Y);)U++,Y=f[U];if(U===f.length){f=!0;break t}else for(b=b.child;b!==null;)c.push(b,U),b=b.sibling}}f=!1}return f;case Br:if((v===5||v===26||v===27)&&sv(c.stateNode,f.value))return!0;break;case Ya:if((v===5||v===6||v===26||v===27)&&(c=av(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case cu:if((v===5||v===26||v===27)&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ns(c){switch(c.$$typeof){case hi:return"<"+(l(c.value)||"Unknown")+">";case pr:return":has("+(ns(c)||"")+")";case Br:return'[role="'+c.value+'"]';case Ya:return'"'+c.value+'"';case cu:return'[data-testname="'+c.value+'"]';default:throw Error(a(365))}}function Ql(c,f){var v=[];c=[c,0];for(var b=0;b<c.length;){var w=c[b++],U=w.tag,Y=c[b++],ct=f[Y];if(U!==5&&U!==26&&U!==27||!Nr(w)){for(;ct!=null&&Gh(w,ct);)Y++,ct=f[Y];if(Y===f.length)v.push(w);else for(w=w.child;w!==null;)c.push(w,Y),w=w.sibling}}return v}function Jo(c,f){if(!$c)throw Error(a(363));c=Qo(c),c=Ql(c,f),f=[],c=Array.from(c);for(var v=0;v<c.length;){var b=c[v++],w=b.tag;if(w===5||w===26||w===27)Nr(b)||f.push(b.stateNode);else for(b=b.child;b!==null;)c.push(b),b=b.sibling}return f}function wa(){if((wn&2)!==0&&Cn!==0)return Cn&-Cn;if(nn.T!==null){var c=fi;return c!==0?c:qt()}return Kg()}function hf(){As===0&&(As=(Cn&536870912)===0||Pn?V():536870912);var c=os.current;return c!==null&&(c.flags|=32),As}function si(c,f,v){(c===Jn&&qn===2||c.cancelPendingCommit!==null)&&($o(c,0),Ha(c,Cn,As,!1)),W(c,v),((wn&2)===0||c!==Jn)&&(c===Jn&&((wn&2)===0&&(Co|=v),yi===4&&Ha(c,Cn,As,!1)),be(c))}function _s(c,f,v){if((wn&6)!==0)throw Error(a(327));var b=!v&&(f&60)===0&&(f&c.expiredLanes)===0||B(c,f),w=b?Gg(c,f):pf(c,f,!0),U=b;do{if(w===0){Ws&&!b&&Ha(c,f,0,!1);break}else if(w===6)Ha(c,f,0,!qs);else{if(v=c.current.alternate,U&&!lo(v)){w=pf(c,f,!1),U=!1;continue}if(w===2){if(U=f,c.errorRecoveryDisabledLanes&U)var Y=0;else Y=c.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){f=Y;t:{var ct=c;w=uu;var Tt=as&&ct.current.memoizedState.isDehydrated;if(Tt&&($o(ct,Y).flags|=256),Y=pf(ct,Y,!1),Y!==2){if(hc&&!Tt){ct.errorRecoveryDisabledLanes|=U,Co|=U,w=4;break t}U=Ks,Ks=w,U!==null&&oo(U)}w=Y}if(U=!1,w!==2)continue}}if(w===1){$o(c,0),Ha(c,f,0,!0);break}t:{switch(b=c,w){case 0:case 1:throw Error(a(345));case 4:if((f&4194176)===f){Ha(b,f,As,!qs);break t}break;case 2:Ks=null;break;case 3:case 5:break;default:throw Error(a(329))}if(b.finishedWork=v,b.finishedLanes=f,(f&62914560)===f&&(U=Dm+300-Ms(),10<U)){if(Ha(b,f,As,!qs),P(b,0)!==0)break t;b.timeoutHandle=Wh(Ar.bind(null,b,v,Ks,dc,dd,f,As,Co,Qi,qs,2,-0,0),U);break t}Ar(b,v,Ks,dc,dd,f,As,Co,Qi,qs,0,-0,0)}}break}while(!0);be(c)}function oo(c){Ks===null?Ks=c:Ks.push.apply(Ks,c)}function Ar(c,f,v,b,w,U,Y,ct,Tt,kt,me,Ne,de){var fn=f.subtreeFlags;if((fn&8192||(fn&16785408)===16785408)&&(m1(),lf(f),f=$g(),f!==null)){c.cancelPendingCommit=f(jh.bind(null,c,v,b,w,Y,ct,Tt,1,Ne,de)),Ha(c,U,Y,!kt);return}jh(c,v,b,w,Y,ct,Tt,me,Ne,de)}function lo(c){for(var f=c;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var b=0;b<v.length;b++){var w=v[b],U=w.getSnapshot;w=w.value;try{if(!ja(U(),w))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ha(c,f,v,b){f&=~qa,f&=~Co,c.suspendedLanes|=f,c.pingedLanes&=~f,b&&(c.warmLanes|=f),b=c.expirationTimes;for(var w=f;0<w;){var U=31-Oi(w),Y=1<<U;b[U]=-1,w&=~Y}v!==0&&tt(c,v,f)}function Jp(){return(wn&6)===0?(He(0),!1):!0}function df(){if(Sn!==null){if(qn===0)var c=Sn.return;else c=Sn,Ys=bl=null,ie(c),cc=null,Oa=0,c=Sn;for(;c!==null;)Vg(c.alternate,c),c=c.return;Sn=null}}function $o(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;v!==Jc&&(c.timeoutHandle=Jc,bf(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),df(),Jn=c,Sn=v=uo(c.current,null),Cn=f,qn=0,Ki=null,qs=!1,Ws=B(c,f),hc=!1,Qi=As=qa=Co=Zs=yi=0,Ks=uu=null,dd=!1,(f&8)!==0&&(f|=f&32);var b=c.entangledLanes;if(b!==0)for(c=c.entanglements,b&=f;0<b;){var w=31-Oi(b),U=1<<w;f|=c[w],b&=~U}return mr=f,Gt(),v}function Ca(c,f){cn=null,nn.H=Bi,f===Cf?(f=ce(),qn=3):f===Rf?(f=ce(),qn=4):qn=f===Cm?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ki=f,Sn===null&&(yi=1,Bc(c,ut(f,c.current)))}function fa(){var c=os.current;return c===null?!0:(Cn&4194176)===Cn?ks===null:(Cn&62914560)===Cn||(Cn&536870912)!==0?c===ks:!1}function Ln(){var c=nn.H;return nn.H=Bi,c===null?Bi:c}function Vs(){var c=nn.A;return nn.A=wo,c}function Hs(){yi=4,qs||(Cn&4194176)!==Cn&&os.current!==null||(Ws=!0),(Zs&134217727)===0&&(Co&134217727)===0||Jn===null||Ha(Jn,Cn,As,!1)}function pf(c,f,v){var b=wn;wn|=2;var w=Ln(),U=Vs();(Jn!==c||Cn!==f)&&(dc=null,$o(c,f)),f=!1;var Y=yi;t:do try{if(qn!==0&&Sn!==null){var ct=Sn,Tt=Ki;switch(qn){case 8:df(),Y=6;break t;case 3:case 2:case 6:os.current===null&&(f=!0);var kt=qn;if(qn=0,Ki=null,wr(c,ct,Tt,kt),v&&Ws){Y=0;break t}break;default:kt=qn,qn=0,Ki=null,wr(c,ct,Tt,kt)}}Jl(),Y=yi;break}catch(me){Ca(c,me)}while(!0);return f&&c.shellSuspendCounter++,Ys=bl=null,wn=b,nn.H=w,nn.A=U,Sn===null&&(Jn=null,Cn=0,Gt()),Y}function Jl(){for(;Sn!==null;)Xc(Sn)}function Gg(c,f){var v=wn;wn|=2;var b=Ln(),w=Vs();Jn!==c||Cn!==f?(dc=null,ws=Ms()+500,$o(c,f)):Ws=B(c,f);t:do try{if(qn!==0&&Sn!==null){f=Sn;var U=Ki;e:switch(qn){case 1:qn=0,Ki=null,wr(c,f,U,1);break;case 2:if(Ee(U)){qn=0,Ki=null,Yc(f);break}f=function(){qn===2&&Jn===c&&(qn=7),be(c)},U.then(f,f);break t;case 3:qn=7;break t;case 4:qn=5;break t;case 7:Ee(U)?(qn=0,Ki=null,Yc(f)):(qn=0,Ki=null,wr(c,f,U,7));break;case 5:var Y=null;switch(Sn.tag){case 26:Y=Sn.memoizedState;case 5:case 27:var ct=Sn,Tt=ct.type,kt=ct.pendingProps;if(Y?bm(Y):rm(Tt,kt)){qn=0,Ki=null;var me=ct.sibling;if(me!==null)Sn=me;else{var Ne=ct.return;Ne!==null?(Sn=Ne,tl(Ne)):Sn=null}break e}}qn=0,Ki=null,wr(c,f,U,5);break;case 6:qn=0,Ki=null,wr(c,f,U,6);break;case 8:df(),yi=6;break t;default:throw Error(a(462))}}jg();break}catch(de){Ca(c,de)}while(!0);return Ys=bl=null,nn.H=b,nn.A=w,wn=v,Sn!==null?0:(Jn=null,Cn=0,Gt(),yi)}function jg(){for(;Sn!==null&&!pl();)Xc(Sn)}function Xc(c){var f=Bg(c.alternate,c,mr);c.memoizedProps=c.pendingProps,f===null?tl(c):Sn=f}function Yc(c){var f=c,v=f.alternate;switch(f.tag){case 15:case 0:f=Ng(v,f,f.pendingProps,f.type,void 0,Cn);break;case 11:f=Ng(v,f,f.pendingProps,f.type.render,f.ref,Cn);break;case 5:ie(f);default:Vg(v,f),f=Sn=$l(f,mr),f=Bg(v,f,mr)}c.memoizedProps=c.pendingProps,f===null?tl(c):Sn=f}function wr(c,f,v,b){Ys=bl=null,ie(f),cc=null,Oa=0;var w=f.return;try{if(l1(c,w,f,v,Cn)){yi=1,Bc(c,ut(v,c.current)),Sn=null;return}}catch(U){if(w!==null)throw Sn=w,U;yi=1,Bc(c,ut(v,c.current)),Sn=null;return}f.flags&32768?(Pn||b===1?c=!0:Ws||(Cn&536870912)!==0?c=!1:(qs=c=!0,(b===2||b===3||b===6)&&(b=os.current,b!==null&&b.tag===13&&(b.flags|=16384))),$p(f,c)):tl(f)}function tl(c){var f=c;do{if((f.flags&32768)!==0){$p(f,qs);return}c=f.return;var v=Fg(f.alternate,f,mr);if(v!==null){Sn=v;return}if(f=f.sibling,f!==null){Sn=f;return}Sn=f=c}while(f!==null);yi===0&&(yi=5)}function $p(c,f){do{var v=u1(c.alternate,c);if(v!==null){v.flags&=32767,Sn=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(c=c.sibling,c!==null)){Sn=c;return}Sn=c=v}while(c!==null);yi=6,Sn=null}function jh(c,f,v,b,w,U,Y,ct,Tt,kt){var me=nn.T,Ne=fl();try{Ga(2),nn.T=null,kg(c,f,v,b,Ne,w,U,Y,ct,Tt,kt)}finally{nn.T=me,Ga(Ne)}}function kg(c,f,v,b,w,U,Y,ct){do el();while(El!==null);if((wn&6)!==0)throw Error(a(327));var Tt=c.finishedWork;if(b=c.finishedLanes,Tt===null)return null;if(c.finishedWork=null,c.finishedLanes=0,Tt===c.current)throw Error(a(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var kt=Tt.lanes|Tt.childLanes;if(kt|=fr,lt(c,b,kt,U,Y,ct),c===Jn&&(Sn=Jn=null,Cn=0),(Tt.subtreeFlags&10256)===0&&(Tt.flags&10256)===0||Ro||(Ro=!0,pd=kt,Of=v,Xg(nu,function(){return el(),null})),v=(Tt.flags&15990)!==0,(Tt.subtreeFlags&15990)!==0||v?(v=nn.T,nn.T=null,U=fl(),Ga(2),Y=wn,wn|=4,Wp(c,Tt),Kp(Tt,c),p1(c.containerInfo),c.current=Tt,jc(c,Tt.alternate,Tt),xo(),wn=Y,Ga(U),nn.T=v):c.current=Tt,Ro?(Ro=!1,El=c,fu=b):mf(c,kt),kt=c.pendingLanes,kt===0&&(Fr=null),$(Tt.stateNode),be(c),f!==null)for(w=c.onRecoverableError,Tt=0;Tt<f.length;Tt++)kt=f[Tt],w(kt.value,{componentStack:kt.stack});return(fu&3)!==0&&el(),kt=c.pendingLanes,(b&4194218)!==0&&(kt&42)!==0?c===Nm?pc++:(pc=0,Nm=c):pc=0,He(0),null}function mf(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,af(f)))}function el(){if(El!==null){var c=El,f=pd;pd=0;var v=mt(fu),b=32>v?32:v;v=nn.T;var w=fl();try{if(Ga(b),nn.T=null,El===null)var U=!1;else{b=Of,Of=null;var Y=El,ct=fu;if(El=null,fu=0,(wn&6)!==0)throw Error(a(331));var Tt=wn;if(wn|=4,ro(Y.current),Fs(Y,Y.current,ct,b),wn=Tt,He(0,!1),Wi&&typeof Wi.onPostCommitFiberRoot=="function")try{Wi.onPostCommitFiberRoot(iu,Y)}catch{}U=!0}return U}finally{Ga(w),nn.T=v,mf(c,f)}}return!1}function qc(c,f,v){f=ut(v,f),f=Fc(c.stateNode,f,2),c=Kt(c,f,2),c!==null&&(W(c,2),be(c))}function kn(c,f,v){if(c.tag===3)qc(c,c,v);else for(;f!==null;){if(f.tag===3){qc(f,c,v);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Fr===null||!Fr.has(b))){c=ut(v,c),v=Pp(2),b=Kt(f,v,2),b!==null&&(Ag(v,b,f,c),W(b,2),be(b));break}}f=f.return}}function nl(c,f,v){var b=c.pingCache;if(b===null){b=c.pingCache=new Uf;var w=new Set;b.set(f,w)}else w=b.get(f),w===void 0&&(w=new Set,b.set(f,w));w.has(v)||(hc=!0,w.add(v),c=gf.bind(null,c,f,v),f.then(c,c))}function gf(c,f,v){var b=c.pingCache;b!==null&&b.delete(f),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,Jn===c&&(Cn&v)===v&&(yi===4||yi===3&&(Cn&62914560)===Cn&&300>Ms()-Dm?(wn&2)===0&&$o(c,0):qa|=v,Qi===Cn&&(Qi=0)),be(c)}function vf(c,f){f===0&&(f=N()),c=ve(c,f),c!==null&&(W(c,f),be(c))}function yf(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),vf(c,v)}function kh(c,f){var v=0;switch(c.tag){case 13:var b=c.stateNode,w=c.memoizedState;w!==null&&(v=w.retryLane);break;case 19:b=c.stateNode;break;case 22:b=c.stateNode._retryCache;break;default:throw Error(a(314))}b!==null&&b.delete(f),vf(c,v)}function Xg(c,f){return Or(c,f)}function Yg(c,f,v,b){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function co(c){return c=c.prototype,!(!c||!c.isReactComponent)}function uo(c,f){var v=c.alternate;return v===null?(v=e(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&31457280,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function $l(c,f){c.flags&=31457282;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,f=v.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function tc(c,f,v,b,w,U){var Y=0;if(b=c,typeof c=="function")co(c)&&(Y=1);else if(typeof c=="string")Y=bs&&ha?aa(c,v,Li.current)?26:ad(c)?27:5:bs?aa(c,v,Li.current)?26:5:ha&&ad(c)?27:5;else t:switch(c){case sl:return il(v.children,w,U,f);case ec:Y=8,w|=24;break;case rl:return c=e(12,v,f,w|2),c.elementType=rl,c.lanes=U,c;case po:return c=e(13,v,f,w),c.elementType=po,c.lanes=U,c;case _f:return c=e(19,v,f,w),c.elementType=_f,c.lanes=U,c;case go:return Xh(v,w,U,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case h1:case ol:Y=10;break t;case nm:Y=9;break t;case Yh:Y=11;break t;case Zc:Y=14;break t;case mo:Y=16,b=null;break t}Y=29,v=Error(a(130,c===null?"null":typeof c,"")),b=null}return f=e(Y,v,f,w),f.elementType=c,f.type=b,f.lanes=U,f}function il(c,f,v,b){return c=e(7,c,b,f),c.lanes=v,c}function Xh(c,f,v,b){c=e(22,c,b,f),c.elementType=go,c.lanes=v;var w={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=w._current;if(U===null)throw Error(a(456));if((w._pendingVisibility&2)===0){var Y=ve(U,2);Y!==null&&(w._pendingVisibility|=2,si(Y,U,2))}},attach:function(){var U=w._current;if(U===null)throw Error(a(456));if((w._pendingVisibility&2)!==0){var Y=ve(U,2);Y!==null&&(w._pendingVisibility&=-3,si(Y,U,2))}}};return c.stateNode=w,c}function xf(c,f,v){return c=e(6,c,null,f),c.lanes=v,c}function is(c,f,v){return f=e(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function Cr(c,f,v,b,w,U,Y,ct){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Jc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=b,this.onUncaughtError=w,this.onCaughtError=U,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ct,this.incompleteTransitions=new Map}function fo(c,f,v,b,w,U,Y,ct,Tt,kt,me,Ne){return c=new Cr(c,f,v,Y,ct,Tt,kt,Ne),f=1,U===!0&&(f|=24),U=e(3,null,null,f),c.current=U,U.stateNode=c,f=Wo(),f.refCount++,c.pooledCache=f,f.refCount++,U.memoizedState={element:b,isDehydrated:v,cache:f},Pe(U),c}function tm(c){return c?(c=oc,c):oc}function ho(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(a(188)):(c=Object.keys(c).join(","),Error(a(268,c)));return c=_(f),c=c!==null?E(c):null,c===null?null:nc(c.stateNode)}function Rr(c,f,v,b,w,U){w=tm(w),b.context===null?b.context=w:b.pendingContext=w,b=Zt(f),b.payload={element:v},U=U===void 0?null:U,U!==null&&(b.callback=U),v=Kt(c,b,f),v!==null&&(si(v,c,f),De(v,c,f))}function Yi(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function Wc(c,f){Yi(c,f),(c=c.alternate)&&Yi(c,f)}var An={},f1=bp(),Ss=pM(),Ni=Object.assign,em=Symbol.for("react.element"),al=Symbol.for("react.transitional.element"),Dr=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),ec=Symbol.for("react.strict_mode"),rl=Symbol.for("react.profiler"),h1=Symbol.for("react.provider"),nm=Symbol.for("react.consumer"),ol=Symbol.for("react.context"),Yh=Symbol.for("react.forward_ref"),po=Symbol.for("react.suspense"),_f=Symbol.for("react.suspense_list"),Zc=Symbol.for("react.memo"),mo=Symbol.for("react.lazy"),go=Symbol.for("react.offscreen"),_n=Symbol.for("react.memo_cache_sentinel"),Yn=Symbol.iterator,qi=Symbol.for("react.client.reference"),nn=f1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ll,cl,Kc=!1,ul=Array.isArray,Qc=t.rendererVersion,d1=t.rendererPackageName,Ti=t.extraDevToolsConfig,nc=t.getPublicInstance,im=t.getRootHostContext,qg=t.getChildHostContext,Wg=t.prepareForCommit,p1=t.resetAfterCommit,am=t.createInstance,Sf=t.appendInitialChild,qh=t.finalizeInitialChildren,Sa=t.shouldSetTextContent,Ui=t.createTextInstance,Wh=t.scheduleTimeout,bf=t.cancelTimeout,Jc=t.noTimeout,rr=t.isPrimaryRenderer;t.warnsIfNotActing;var gi=t.supportsMutation,or=t.supportsPersistence,as=t.supportsHydration,Zh=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Zg=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ga=t.setCurrentUpdatePriority,fl=t.getCurrentUpdatePriority,Kg=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Qg=t.shouldAttemptEagerTransition,Jg=t.detachDeletedInstance;t.requestPostPaintCallback;var sm=t.maySuspendCommit,rm=t.preloadInstance,m1=t.startSuspendingCommit,om=t.suspendInstance,$g=t.waitForCommitToBeReady,ic=t.NotPendingTransition,vo=t.HostTransitionContext,tv=t.resetFormInstance;t.bindToConsole;var ev=t.supportsMicrotasks,nv=t.scheduleMicrotask,$c=t.supportsTestSelectors,iv=t.findFiberRoot,g1=t.getBoundingRect,av=t.getTextContent,Nr=t.isHiddenSubtree,sv=t.matchAccessibilityRole,Kh=t.setFocusIfFocusable,Qh=t.setupIntersectionObserver,rv=t.appendChild,lm=t.appendChildToContainer,ov=t.commitTextUpdate,lv=t.commitMount,cv=t.commitUpdate,uv=t.insertBefore,cm=t.insertInContainerBefore,fv=t.removeChild,hv=t.removeChildFromContainer,Jh=t.resetTextContent,dv=t.hideInstance,pv=t.hideTextInstance,v1=t.unhideInstance,um=t.unhideTextInstance,mv=t.clearContainer,gv=t.cloneInstance,$h=t.createContainerChildSet,fm=t.appendChildToContainerChildSet,vv=t.finalizeContainerChildren,yv=t.replaceContainerChildren,xv=t.cloneHiddenInstance,hm=t.cloneHiddenTextInstance,ac=t.isSuspenseInstancePending,Mf=t.isSuspenseInstanceFallback,td=t.getSuspenseInstanceFallbackErrorDetails,_v=t.registerSuspenseInstanceRetry,Sv=t.canHydrateFormStateMarker,Ur=t.isFormStateMarkerMatching,hl=t.getNextHydratableSibling,yo=t.getFirstHydratableChild,sc=t.getFirstHydratableChildWithinContainer,dm=t.getFirstHydratableChildWithinSuspenseInstance,pm=t.canHydrateInstance,bv=t.canHydrateTextInstance,Mv=t.canHydrateSuspenseInstance,rc=t.hydrateInstance,ed=t.hydrateTextInstance,Ev=t.hydrateSuspenseInstance,Tv=t.getNextHydratableInstanceAfterSuspenseInstance,Av=t.commitHydratedContainer,nd=t.commitHydratedSuspenseInstance,wv=t.clearSuspenseBoundary,mm=t.clearSuspenseBoundaryFromContainer,gm=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Cv=t.validateHydratableInstance,y1=t.validateHydratableTextInstance,bs=t.supportsResources,aa=t.isHostHoistableType,sa=t.getHoistableRoot,vm=t.getResource,ym=t.acquireResource,xm=t.releaseResource,Rv=t.hydrateHoistable,_m=t.mountHoistable,tu=t.unmountHoistable,Sm=t.createHoistableInstance,Dv=t.prepareToCommitHoistables,Nv=t.mayResourceSuspendCommit,bm=t.preloadResource,Mm=t.suspendResource,ha=t.supportsSingletons,id=t.resolveSingletonInstance,Uv=t.clearSingleton,Em=t.acquireSingletonInstance,Tm=t.releaseSingletonInstance,ad=t.isHostSingletonType,sd=[],dl=-1,oc={},Oi=Math.clz32?Math.clz32:D,Am=Math.log,x1=Math.LN2,Ef=128,eu=4194304,Or=Ss.unstable_scheduleCallback,lr=Ss.unstable_cancelCallback,pl=Ss.unstable_shouldYield,xo=Ss.unstable_requestPaint,Ms=Ss.unstable_now,rd=Ss.unstable_ImmediatePriority,Tf=Ss.unstable_UserBlockingPriority,nu=Ss.unstable_NormalPriority,lc=Ss.unstable_IdlePriority,Ra=Ss.log,od=Ss.unstable_setDisableYieldValue,iu=null,Wi=null,ja=typeof Object.is=="function"?Object.is:vt,ld=new WeakMap,Es=[],Ts=0,ml=null,au=0,ss=[],Da=0,cr=null,Lr=1,Pr="",Li=T(null),Gs=T(null),_o=T(null),Af=T(null),Pi=null,Kn=null,Pn=!1,js=null,ur=!1,wf=Error(a(519)),rs=[],So=0,fr=0,ui=null,gl=null,cd=!1,Ii=!1,ud=!1,su=0,ru=null,fd=0,fi=0,da=null,Na=!1,hd=!1,Ov=Object.prototype.hasOwnProperty,Cf=Error(a(460)),Rf=Error(a(474)),ka={then:function(){}},Ua=null,cc=null,Oa=0,vl=_i(!0),Ir=_i(!1),hr=T(null),dr=T(0),os=T(null),ks=null,ri=T(0),bo=0,cn=null,zn=null,vi=null,Mo=!1,uc=!1,yl=!1,xl=0,ou=0,Eo=null,Lv=0,wm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Bi={readContext:xa,use:re,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn};Bi.useCacheRefresh=xn,Bi.useMemoCache=xn,Bi.useHostTransitionStatus=xn,Bi.useFormState=xn,Bi.useActionState=xn,Bi.useOptimistic=xn;var To={readContext:xa,use:re,useCallback:function(c,f){return oe().memoizedState=[c,f===void 0?null:f],c},useContext:xa,useEffect:jl,useImperativeHandle:function(c,f,v){v=v!=null?v.concat([c]):null,ji(4194308,4,qu.bind(null,f,c),v)},useLayoutEffect:function(c,f){return ji(4194308,4,c,f)},useInsertionEffect:function(c,f){ji(4,2,c,f)},useMemo:function(c,f){var v=oe();f=f===void 0?null:f;var b=c();if(yl){et(!0);try{c()}finally{et(!1)}}return v.memoizedState=[b,f],b},useReducer:function(c,f,v){var b=oe();if(v!==void 0){var w=v(f);if(yl){et(!0);try{v(f)}finally{et(!1)}}}else w=f;return b.memoizedState=b.baseState=w,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:w},b.queue=c,c=c.dispatch=Rh.bind(null,cn,c),[b.memoizedState,c]},useRef:function(c){var f=oe();return c={current:c},f.memoizedState=c},useState:function(c){c=_e(c);var f=c.queue,v=Lp.bind(null,cn,f);return f.dispatch=v,[c.memoizedState,v]},useDebugValue:Wu,useDeferredValue:function(c,f){var v=oe();return wh(v,c,f)},useTransition:function(){var c=_e(!1);return c=Up.bind(null,cn,c.queue,!0,!1),oe().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,v){var b=cn,w=oe();if(Pn){if(v===void 0)throw Error(a(407));v=v()}else{if(v=f(),Jn===null)throw Error(a(349));(Cn&60)!==0||ue(b,f,v)}w.memoizedState=v;var U={value:v,getSnapshot:f};return w.queue=U,jl(Te.bind(null,b,U,c),[c]),b.flags|=2048,Ei(9,fe.bind(null,b,U,v,f),{destroy:void 0},null),v},useId:function(){var c=oe(),f=Jn.identifierPrefix;if(Pn){var v=Pr,b=Lr;v=(b&~(1<<32-Oi(b)-1)).toString(32)+v,f=":"+f+"R"+v,v=xl++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=Lv++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},useCacheRefresh:function(){return oe().memoizedState=Op.bind(null,cn)}};To.useMemoCache=k,To.useHostTransitionStatus=Zu,To.useFormState=Hn,To.useActionState=Hn,To.useOptimistic=function(c){var f=oe();f.memoizedState=f.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=Lc.bind(null,cn,!0,v),v.dispatch=f,[c,f]};var Xa={readContext:xa,use:re,useCallback:kl,useContext:xa,useEffect:xs,useImperativeHandle:Ah,useInsertionEffect:Mg,useLayoutEffect:Eg,useMemo:Xl,useReducer:pt,useRef:Gi,useState:function(){return pt(it)},useDebugValue:Wu,useDeferredValue:function(c,f){var v=ee();return Ch(v,zn.memoizedState,c,f)},useTransition:function(){var c=pt(it)[0],f=ee().memoizedState;return[typeof c=="boolean"?c:ge(c),f]},useSyncExternalStore:ae,useId:Oc};Xa.useCacheRefresh=Jr,Xa.useMemoCache=k,Xa.useHostTransitionStatus=Zu,Xa.useFormState=ua,Xa.useActionState=ua,Xa.useOptimistic=function(c,f){var v=ee();return Ie(v,zn,c,f)};var _l={readContext:xa,use:re,useCallback:kl,useContext:xa,useEffect:xs,useImperativeHandle:Ah,useInsertionEffect:Mg,useLayoutEffect:Eg,useMemo:Xl,useReducer:dt,useRef:Gi,useState:function(){return dt(it)},useDebugValue:Wu,useDeferredValue:function(c,f){var v=ee();return zn===null?wh(v,c,f):Ch(v,zn.memoizedState,c,f)},useTransition:function(){var c=dt(it)[0],f=ee().memoizedState;return[typeof c=="boolean"?c:ge(c),f]},useSyncExternalStore:ae,useId:Oc};_l.useCacheRefresh=Jr,_l.useMemoCache=k,_l.useHostTransitionStatus=Zu,_l.useFormState=jn,_l.useActionState=jn,_l.useOptimistic=function(c,f){var v=ee();return zn!==null?Ie(v,zn,c,f):(v.baseState=c,[c,v.queue.dispatch])};var lu={isMounted:function(c){return(c=c._reactInternals)?y(c)===c:!1},enqueueSetState:function(c,f,v){c=c._reactInternals;var b=wa(),w=Zt(b);w.payload=f,v!=null&&(w.callback=v),f=Kt(c,w,b),f!==null&&(si(f,c,b),De(f,c,b))},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var b=wa(),w=Zt(b);w.tag=1,w.payload=f,v!=null&&(w.callback=v),f=Kt(c,w,b),f!==null&&(si(f,c,b),De(f,c,b))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=wa(),b=Zt(v);b.tag=2,f!=null&&(b.callback=f),f=Kt(c,b,v),f!==null&&(si(f,c,v),De(f,c,v))}},Sl=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},Cm=Error(a(461)),Zi=!1,Df={dehydrated:null,treeContext:null,retryLane:0},Xs=T(null),bl=null,Ys=null,Nf=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(v,b){c.push(b)}};this.abort=function(){f.aborted=!0,c.forEach(function(v){return v()})}},Si=Ss.unstable_scheduleCallback,_1=Ss.unstable_NormalPriority,Ai={$$typeof:ol,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Rm=nn.S;nn.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Pt(c,f),Rm!==null&&Rm(c,f)};var fc=T(null),Ao=!1,un=!1,Qn=!1,En=typeof WeakSet=="function"?WeakSet:Set,$e=null,ei=!1,Fn=null,zi=!1,La=null,Ml=8192,wo={getCacheForType:function(c){var f=xa(Ai),v=f.data.get(c);return v===void 0&&(v=c(),f.data.set(c,v)),v}},hi=0,pr=1,Br=2,cu=3,Ya=4;if(typeof Symbol=="function"&&Symbol.for){var zr=Symbol.for;hi=zr("selector.component"),pr=zr("selector.has_pseudo_class"),Br=zr("selector.role"),cu=zr("selector.test_id"),Ya=zr("selector.text")}var Uf=typeof WeakMap=="function"?WeakMap:Map,wn=0,Jn=null,Sn=null,Cn=0,qn=0,Ki=null,qs=!1,Ws=!1,hc=!1,mr=0,yi=0,Zs=0,Co=0,qa=0,As=0,Qi=0,uu=null,Ks=null,dd=!1,Dm=0,ws=1/0,dc=null,Fr=null,Ro=!1,El=null,fu=0,pd=0,Of=null,pc=0,Nm=null;return An.attemptContinuousHydration=function(c){if(c.tag===13){var f=ve(c,67108864);f!==null&&si(f,c,67108864),Wc(c,67108864)}},An.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=wa(),v=ve(c,f);v!==null&&si(v,c,f),Wc(c,f)}},An.attemptSynchronousHydration=function(c){switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=L(c.pendingLanes);if(f!==0){for(c.pendingLanes|=2,c.entangledLanes|=2;f;){var v=1<<31-Oi(f);c.entanglements[1]|=v,f&=~v}be(c),(wn&6)===0&&(ws=Ms()+500,He(0))}}break;case 13:f=ve(c,2),f!==null&&si(f,c,2),Jp(),Wc(c,2)}},An.batchedUpdates=function(c,f){return c(f)},An.createComponentSelector=function(c){return{$$typeof:hi,value:c}},An.createContainer=function(c,f,v,b,w,U,Y,ct,Tt,kt){return fo(c,f,!1,null,v,b,U,Y,ct,Tt,kt,null)},An.createHasPseudoClassSelector=function(c){return{$$typeof:pr,value:c}},An.createHydrationContainer=function(c,f,v,b,w,U,Y,ct,Tt,kt,me,Ne,de){return c=fo(v,b,!0,c,w,U,ct,Tt,kt,me,Ne,de),c.context=tm(null),v=c.current,b=wa(),w=Zt(b),w.callback=f??null,Kt(v,w,b),c.current.lanes=b,W(c,b),be(c),c},An.createPortal=function(c,f,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dr,key:b==null?null:""+b,children:c,containerInfo:f,implementation:v}},An.createRoleSelector=function(c){return{$$typeof:Br,value:c}},An.createTestNameSelector=function(c){return{$$typeof:cu,value:c}},An.createTextSelector=function(c){return{$$typeof:Ya,value:c}},An.defaultOnCaughtError=function(c){console.error(c)},An.defaultOnRecoverableError=function(c){Sl(c)},An.defaultOnUncaughtError=function(c){Sl(c)},An.deferredUpdates=function(c){var f=nn.T,v=fl();try{return Ga(32),nn.T=null,c()}finally{Ga(v),nn.T=f}},An.discreteUpdates=function(c,f,v,b,w){var U=nn.T,Y=fl();try{return Ga(2),nn.T=null,c(f,v,b,w)}finally{Ga(Y),nn.T=U,wn===0&&(ws=Ms()+500)}},An.findAllNodes=Jo,An.findBoundingRects=function(c,f){if(!$c)throw Error(a(363));f=Jo(c,f),c=[];for(var v=0;v<f.length;v++)c.push(g1(f[v]));for(f=c.length-1;0<f;f--){v=c[f];for(var b=v.x,w=b+v.width,U=v.y,Y=U+v.height,ct=f-1;0<=ct;ct--)if(f!==ct){var Tt=c[ct],kt=Tt.x,me=kt+Tt.width,Ne=Tt.y,de=Ne+Tt.height;if(b>=kt&&U>=Ne&&w<=me&&Y<=de){c.splice(f,1);break}else if(b!==kt||v.width!==Tt.width||de<U||Ne>Y){if(!(U!==Ne||v.height!==Tt.height||me<b||kt>w)){kt>b&&(Tt.width+=kt-b,Tt.x=b),me<w&&(Tt.width=w-kt),c.splice(f,1);break}}else{Ne>U&&(Tt.height+=Ne-U,Tt.y=U),de<Y&&(Tt.height=Y-Ne),c.splice(f,1);break}}}return c},An.findHostInstance=ho,An.findHostInstanceWithNoPortals=function(c){return c=_(c),c=c!==null?C(c):null,c===null?null:nc(c.stateNode)},An.findHostInstanceWithWarning=function(c){return ho(c)},An.flushPassiveEffects=el,An.flushSyncFromReconciler=function(c){var f=wn;wn|=1;var v=nn.T,b=fl();try{if(Ga(2),nn.T=null,c)return c()}finally{Ga(b),nn.T=v,wn=f,(wn&6)===0&&He(0)}},An.flushSyncWork=Jp,An.focusWithin=function(c,f){if(!$c)throw Error(a(363));for(c=Qo(c),f=Ql(c,f),f=Array.from(f),c=0;c<f.length;){var v=f[c++],b=v.tag;if(!Nr(v)){if((b===5||b===26||b===27)&&Kh(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},An.getFindAllNodesFailureDescription=function(c,f){if(!$c)throw Error(a(363));var v=0,b=[];c=[Qo(c),0];for(var w=0;w<c.length;){var U=c[w++],Y=U.tag,ct=c[w++],Tt=f[ct];if((Y!==5&&Y!==26&&Y!==27||!Nr(U))&&(Gh(U,Tt)&&(b.push(ns(Tt)),ct++,ct>v&&(v=ct)),ct<f.length))for(U=U.child;U!==null;)c.push(U,ct),U=U.sibling}if(v<f.length){for(c=[];v<f.length;v++)c.push(ns(f[v]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},An.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 27:case 5:return nc(c.child.stateNode);default:return c.child.stateNode}},An.injectIntoDevTools=function(){var c={bundleType:0,version:Qc,rendererPackageName:d1,currentDispatcherRef:nn,findFiberByHostInstance:Zh,reconcilerVersion:"19.0.0"};if(Ti!==null&&(c.rendererConfig=Ti),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{iu=f.inject(c),Wi=f}catch{}c=!!f.checkDCE}}return c},An.isAlreadyRendering=function(){return!1},An.observeVisibleRects=function(c,f,v,b){if(!$c)throw Error(a(363));c=Jo(c,f);var w=Qh(c,v,b).disconnect;return{disconnect:function(){w()}}},An.shouldError=function(){return null},An.shouldSuspend=function(){return!1},An.startHostTransition=function(c,f,v,b){if(c.tag!==5)throw Error(a(476));var w=Uc(c).queue;Up(c,w,f,ic,v===null?n:function(){var U=Uc(c).next.queue;return ko(c,U,{},wa()),v(b)})},An.updateContainer=function(c,f,v,b){var w=f.current,U=wa();return Rr(w,U,c,f,v,b),U},An.updateContainerSync=function(c,f,v,b){return f.tag===0&&el(),Rr(f.current,2,c,f,v,b),2},An},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(rb)),rb.exports}var nC;function pj(){return nC||(nC=1,sb.exports=dj()),sb.exports}var mj=pj();const gj=d_(mj);var iC=pM();function FE(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const a=FE(n,t,e);if(a)return a;n=t?null:n.sibling}}function _N(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const VE=_N(Z.createContext(null));class SN extends Z.Component{render(){return Z.createElement(VE.Provider,{value:this._reactInternals},this.props.children)}}function bN(){const i=Z.useContext(VE);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Z.useId();return Z.useMemo(()=>{for(const e of[i,i==null?void 0:i.alternate]){if(!e)continue;const n=FE(e,!1,a=>{let r=a.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[i,t])}const vj=Symbol.for("react.context"),yj=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===vj;function xj(){const i=bN(),[t]=Z.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;yj(n)&&n!==VE&&!t.has(n)&&t.set(n,Z.use(_N(n))),e=e.return}return t}function _j(){const i=xj();return Z.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>Z.createElement(t,null,Z.createElement(e.Provider,{...n,value:i.get(e)})),t=>Z.createElement(SN,{...t})),[i])}function MN(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const EN=i=>i&&i.isOrthographicCamera,Sj=i=>i&&i.hasOwnProperty("current"),bj=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),xg=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?Z.useLayoutEffect:Z.useEffect;function HE(i){const t=Z.useRef(i);return xg(()=>void(t.current=i),[i]),t}function Mj(){const i=bN(),t=_j();return Z.useMemo(()=>({children:e})=>{const a=!!FE(i,!0,r=>r.type===Z.StrictMode)?Z.StrictMode:Z.Fragment;return O.jsx(a,{children:O.jsx(t,{children:e})})},[i,t])}function Ej({set:i}){return xg(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const Tj=(i=>(i=class extends Z.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function TN(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function Vd(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const wi={obj:i=>i===Object(i)&&!wi.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:a=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(wi.str(i)||wi.num(i)||wi.boo(i))return i===t;const r=wi.obj(i);if(r&&n==="reference")return i===t;const l=wi.arr(i);if(l&&e==="reference")return i===t;if((l||r)&&i===t)return!0;let u;for(u in i)if(!(u in t))return!1;if(r&&e==="shallow"&&n==="shallow"){for(u in a?t:i)if(!wi.equ(i[u],t[u],{strict:a,objects:"reference"}))return!1}else for(u in a?t:i)if(i[u]!==t[u])return!1;if(wi.und(u)){if(l&&i.length===0&&t.length===0||r&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function Aj(i){const t={nodes:{},materials:{},meshes:{}};return i&&i.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function wj(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const AN=["children","key","ref"];function Cj(i){const t={};for(const e in i)AN.includes(e)||(t[e]=i[e]);return t}function l_(i,t,e,n){const a=i;let r=a==null?void 0:a.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:Cj(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=r)),r}function Z0(i,t){if(!t.includes("-"))return{root:i,key:t,target:i[t]};if(t in i)return{root:i,key:t,target:i[t]};let e=i;const n=t.split("-");for(const a of n){if(typeof e!="object"||e===null){if(e!==void 0){const r=n.slice(n.indexOf(a)).join("-");return{root:e,key:r,target:void 0}}return{root:i,key:t,target:void 0}}t=a,i=e,e=e[t]}return{root:i,key:t,target:e}}const aC=/-\d+$/;function c_(i,t){if(wi.str(t.props.attach)){if(aC.test(t.props.attach)){const a=t.props.attach.replace(aC,""),{root:r,key:l}=Z0(i.object,a);Array.isArray(r[l])||(r[l]=[])}const{root:e,key:n}=Z0(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else wi.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function u_(i,t){if(wi.str(t.props.attach)){const{root:e,key:n}=Z0(i.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[n]:e[n]=a}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const oM=[...AN,"args","dispose","attach","object","onUpdate","dispose"],sC=new Map;function Rj(i){let t=sC.get(i.constructor);try{t||(t=new i.constructor,sC.set(i.constructor,t))}catch{}return t}function Dj(i,t){const e={};for(const n in t)if(!oM.includes(n)&&!wi.equ(t[n],i.props[n])){e[n]=t[n];for(const a in t)a.startsWith(`${n}-`)&&(e[a]=t[a])}for(const n in i.props){if(oM.includes(n)||t.hasOwnProperty(n))continue;const{root:a,key:r}=Z0(i.object,n);if(a.constructor&&a.constructor.length===0){const l=Rj(a);wi.und(l)||(e[r]=l[r])}else e[r]=0}return e}const Nj=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Uj=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Nl(i,t){var e;const n=i.__r3f,a=n&&MN(n).getState(),r=n==null?void 0:n.eventCount;for(const u in t){let d=t[u];if(oM.includes(u))continue;if(n&&Uj.test(u)){typeof d=="function"?n.handlers[u]=d:delete n.handlers[u],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:p,key:g,target:y}=Z0(i,u);if(y===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${u}". Ensure it is an object before setting "${g}".`);if(y instanceof dp&&d instanceof dp)y.mask=d.mask;else if(y instanceof Ae&&bj(d))y.set(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&d!=null&&d.constructor&&y.constructor===d.constructor)y.copy(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(d))typeof y.fromArray=="function"?y.fromArray(d):y.set(...d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof d=="number")typeof y.setScalar=="function"?y.setScalar(d):y.set(d);else{var l;p[g]=d,a&&!a.linear&&Nj.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===ca&&p[g].type===za&&(p[g].colorSpace=Ka)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(e=n.object)!=null&&e.isObject3D&&r!==n.eventCount){const u=n.object,d=a.internal.interaction.indexOf(u);d>-1&&a.internal.interaction.splice(d,1),n.eventCount&&u.raycast!==null&&a.internal.interaction.push(u)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Np(n),i}function Np(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function wN(i,t){i.manual||(EN(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const Ds=i=>i==null?void 0:i.isObject3D;function Yy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function CN(i,t,e,n){const a=e.get(t);a&&(e.delete(t),e.size===0&&(i.delete(n),a.target.releasePointerCapture(n)))}function Oj(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,a)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(a)}),e.capturedMap.forEach((n,a)=>{CN(e.capturedMap,t,n,a)})}function Lj(i){function t(d){const{internal:p}=i.getState(),g=d.offsetX-p.initialClick[0],y=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function e(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=p.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function n(d,p){const g=i.getState(),y=new Set,x=[],_=p?p(g.internal.interaction):g.internal.interaction;for(let M=0;M<_.length;M++){const R=Vd(_[M]);R&&(R.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function E(M){const R=Vd(M);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var D;R.events.compute==null||R.events.compute(d,R,(D=R.previousRoot)==null?void 0:D.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(M,!0):[]}let C=_.flatMap(E).sort((M,R)=>{const D=Vd(M.object),L=Vd(R.object);return!D||!L?M.distance-R.distance:L.events.priority-D.events.priority||M.distance-R.distance}).filter(M=>{const R=Yy(M);return y.has(R)?!1:(y.add(R),!0)});g.events.filter&&(C=g.events.filter(C,g));for(const M of C){let R=M.object;for(;R;){var T;(T=R.__r3f)!=null&&T.eventCount&&x.push({...M,eventObject:R}),R=R.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let M of g.internal.capturedMap.get(d.pointerId).values())y.has(Yy(M.intersection))||x.push(M.intersection);return x}function a(d,p,g,y){if(d.length){const x={stopped:!1};for(const _ of d){let E=Vd(_.object);if(E||_.object.traverseAncestors(C=>{const T=Vd(C);if(T)return E=T,!1}),E){const{raycaster:C,pointer:T,camera:M,internal:R}=E,D=new K(T.x,T.y,0).unproject(M),L=N=>{var I,W;return(I=(W=R.capturedMap.get(N))==null?void 0:W.has(_.eventObject))!=null?I:!1},P=N=>{const I={intersection:_,target:p.target};R.capturedMap.has(N)?R.capturedMap.get(N).set(_.eventObject,I):R.capturedMap.set(N,new Map([[_.eventObject,I]])),p.target.setPointerCapture(N)},B=N=>{const I=R.capturedMap.get(N);I&&CN(R.capturedMap,_.eventObject,I,N)};let G={};for(let N in p){let I=p[N];typeof I!="function"&&(G[N]=I)}let V={..._,...G,pointer:T,intersections:d,stopped:x.stopped,delta:g,unprojectedPoint:D,ray:C.ray,camera:M,stopPropagation(){const N="pointerId"in p&&R.capturedMap.get(p.pointerId);if((!N||N.has(_.eventObject))&&(V.stopped=x.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(I=>I.eventObject===_.eventObject))){const I=d.slice(0,d.indexOf(_));r([...I,_])}},target:{hasPointerCapture:L,setPointerCapture:P,releasePointerCapture:B},currentTarget:{hasPointerCapture:L,setPointerCapture:P,releasePointerCapture:B},nativeEvent:p};if(y(V),x.stopped===!0)break}}}return d}function r(d){const{internal:p}=i.getState();for(const g of p.hovered.values())if(!d.length||!d.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const x=g.eventObject.__r3f;if(p.hovered.delete(Yy(g)),x!=null&&x.eventCount){const _=x.handlers,E={...g,intersections:d};_.onPointerOut==null||_.onPointerOut(E),_.onPointerLeave==null||_.onPointerLeave(E)}}}function l(d,p){for(let g=0;g<p.length;g++){const y=p[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function u(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return p=>{const{internal:g}=i.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),r([]))})}}return function(g){const{onPointerMissed:y,internal:x}=i.getState();x.lastEvent.current=g;const _=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",T=n(g,_?e:void 0),M=E?t(g):0;d==="onPointerDown"&&(x.initialClick=[g.offsetX,g.offsetY],x.initialHits=T.map(D=>D.eventObject)),E&&!T.length&&M<=2&&(l(g,x.interaction),y&&y(g)),_&&r(T);function R(D){const L=D.eventObject,P=L.__r3f;if(!(P!=null&&P.eventCount))return;const B=P.handlers;if(_){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const G=Yy(D),V=x.hovered.get(G);V?V.stopped&&D.stopPropagation():(x.hovered.set(G,D),B.onPointerOver==null||B.onPointerOver(D),B.onPointerEnter==null||B.onPointerEnter(D))}B.onPointerMove==null||B.onPointerMove(D)}else{const G=B[d];G?(!E||x.initialHits.includes(L))&&(l(g,x.interaction.filter(V=>!x.initialHits.includes(V))),G(D)):E&&x.initialHits.includes(L)&&l(g,x.interaction.filter(V=>!x.initialHits.includes(V)))}}a(T,g,M,R)}}return{handlePointer:u}}const rC=i=>!!(i!=null&&i.render),GE=Z.createContext(null),Pj=(i,t)=>{const e=vN((u,d)=>{const p=new K,g=new K,y=new K;function x(M=d().camera,R=g,D=d().size){const{width:L,height:P,top:B,left:G}=D,V=L/P;R.isVector3?y.copy(R):y.set(...R);const N=M.getWorldPosition(p).distanceTo(y);if(EN(M))return{width:L/M.zoom,height:P/M.zoom,top:B,left:G,factor:1,distance:N,aspect:V};{const I=M.fov*Math.PI/180,W=2*Math.tan(I/2)*N,lt=W*(L/P);return{width:lt,height:W,top:B,left:G,factor:L/lt,distance:N,aspect:V}}}let _;const E=M=>u(R=>({performance:{...R.performance,current:M}})),C=new It;return{set:u,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>i(d(),M),advance:(M,R)=>t(M,R,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Rp,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();_&&clearTimeout(_),M.performance.current!==M.performance.min&&E(M.performance.min),_=setTimeout(()=>E(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:M=>u(R=>({...R,events:{...R.events,...M}})),setSize:(M,R,D=0,L=0)=>{const P=d().camera,B={width:M,height:R,top:D,left:L};u(G=>({size:B,viewport:{...G.viewport,...x(P,g,B)}}))},setDpr:M=>u(R=>{const D=TN(M);return{viewport:{...R.viewport,dpr:D,initialDpr:R.viewport.initialDpr||D}}}),setFrameloop:(M="always")=>{const R=d().clock;R.stop(),R.elapsedTime=0,M!=="never"&&(R.start(),R.elapsedTime=0),u(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Z.createRef(),active:!1,frames:0,priority:0,subscribe:(M,R,D)=>{const L=d().internal;return L.priority=L.priority+(R>0?1:0),L.subscribers.push({ref:M,priority:R,store:D}),L.subscribers=L.subscribers.sort((P,B)=>P.priority-B.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(R>0?1:0),P.subscribers=P.subscribers.filter(B=>B.ref!==M))}}}}}),n=e.getState();let a=n.size,r=n.viewport.dpr,l=n.camera;return e.subscribe(()=>{const{camera:u,size:d,viewport:p,gl:g,set:y}=e.getState();if(d.width!==a.width||d.height!==a.height||p.dpr!==r){a=d,r=p.dpr,wN(u,d),p.dpr>0&&g.setPixelRatio(p.dpr);const x=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,x)}u!==l&&(l=u,y(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(u)}})))}),e.subscribe(u=>i(u)),e};function jE(){const i=Z.useContext(GE);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function oa(i=e=>e,t){return jE()(i,t)}function Kr(i,t=0){const e=jE(),n=e.getState().internal.subscribe,a=HE(i);return xg(()=>n(a,t,e),[t,n,e]),null}const oC=new WeakMap,Ij=i=>{var t;return typeof i=="function"&&(i==null||(t=i.prototype)==null?void 0:t.constructor)===i};function RN(i,t){return function(e,...n){let a;return Ij(e)?(a=oC.get(e),a||(a=new e,oC.set(e,a))):a=e,i&&i(a),Promise.all(n.map(r=>new Promise((l,u)=>a.load(r,d=>{Ds(d==null?void 0:d.scene)&&Object.assign(d,Aj(d.scene)),l(d)},t,d=>u(new Error(`Could not load ${r}: ${d==null?void 0:d.message}`))))))}}function xp(i,t,e,n){const a=Array.isArray(t)?t:[t],r=uj(RN(e,n),[i,...a],{equal:wi.equ});return Array.isArray(t)?r:r[0]}xp.preload=function(i,t,e){const n=Array.isArray(t)?t:[t];return fj(RN(e),[i,...n])};xp.clear=function(i,t){const e=Array.isArray(t)?t:[t];return hj([i,...e])};var Bj={version:"9.4.2"};function zj(i){const t=gj(i);return t.injectIntoDevTools(),t}const DN=0,_p={},Fj=/^three(?=[A-Z])/,r1=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let Vj=0;const Hj=i=>typeof i=="function";function NN(i){if(Hj(i)){const t=`${Vj++}`;return _p[t]=i,t}else Object.assign(_p,i)}function UN(i,t){const e=r1(i),n=_p[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function Gj(i,t,e){var n;return i=r1(i)in _p?i:i.replace(Fj,""),UN(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,l_(t.object,e,i,t)}function jj(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?u_(i.parent,i):Ds(i.object)&&(i.object.visible=!1),i.isHidden=!0,Np(i)}}function ON(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?c_(i.parent,i):Ds(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Np(i)}}function kE(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var a,r;const l=_p[r1(t.type)];t.object=(a=t.props.object)!=null?a:new l(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(Nl(t.object,t.props),t.props.attach)c_(i,t);else if(Ds(t.object)&&Ds(i.object)){const l=i.object.children.indexOf(e==null?void 0:e.object);if(e&&l!==-1){const u=i.object.children.indexOf(t.object);if(u!==-1){i.object.children.splice(u,1);const d=u<l?l-1:l;i.object.children.splice(d,0,t.object)}else t.object.parent=i.object,i.object.children.splice(l,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const l of t.children)kE(t,l);Np(t)}}function ob(i,t){t&&(t.parent=i,i.children.push(t),kE(i,t))}function lC(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),kE(i,t,e)}function LN(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():iC.unstable_scheduleCallback(iC.unstable_IdlePriority,t)}}function lM(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?u_(i,t):Ds(t.object)&&Ds(i.object)&&(i.object.remove(t.object),Oj(MN(t),t.object));const a=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const l=t.children[r];lM(t,l,a)}t.children.length=0,delete t.object.__r3f,a&&t.type!=="primitive"&&t.object.type!=="Scene"&&LN(t.object),e===void 0&&Np(t)}function kj(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const rx=[];function Xj(){for(const[e]of rx){const n=e.parent;if(n){e.props.attach?u_(n,e):Ds(e.object)&&Ds(n.object)&&n.object.remove(e.object);for(const a of e.children)a.props.attach?u_(e,a):Ds(a.object)&&Ds(e.object)&&e.object.remove(a.object)}e.isHidden&&ON(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&LN(e.object)}for(const[e,n,a]of rx){e.props=n;const r=e.parent;if(r){var i,t;const l=_p[r1(e.type)];e.object=(i=e.props.object)!=null?i:new l(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,kj(a,e.object),Nl(e.object,e.props),e.props.attach?c_(r,e):Ds(e.object)&&Ds(r.object)&&r.object.add(e.object);for(const u of e.children)u.props.attach?c_(e,u):Ds(u.object)&&Ds(e.object)&&e.object.add(u.object);Np(e)}}rx.length=0}const lb=()=>{},cC={};let qy=DN;const Yj=0,qj=4,f_=zj({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Gj,removeChild:lM,appendChild:ob,appendInitialChild:ob,insertBefore:lC,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||ob(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||lM(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||lC(n,t,e)},getRootHostContext:()=>cC,getChildHostContext:()=>cC,commitUpdate(i,t,e,n,a){var r,l,u;UN(t,n);let d=!1;if((i.type==="primitive"&&e.object!==n.object||((r=n.args)==null?void 0:r.length)!==((l=e.args)==null?void 0:l.length)||(u=n.args)!=null&&u.some((g,y)=>{var x;return g!==((x=e.args)==null?void 0:x[y])}))&&(d=!0),d)rx.push([i,{...n},a]);else{const g=Dj(i,n);Object.keys(g).length&&(Object.assign(i.props,g),Nl(i.object,g))}(a.sibling===null||(a.flags&qj)===Yj)&&Xj()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>l_(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:jj,unhideInstance:ON,createTextInstance:lb,hideTextInstance:lb,unhideTextInstance:lb,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Z.createContext(null),setCurrentUpdatePriority(i){qy=i},getCurrentUpdatePriority(){return qy},resolveUpdatePriority(){var i;if(qy!==DN)return qy;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nx.ContinuousEventPriority;default:return nx.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:Bj.version}),gh=new Map,Hd={objects:"shallow",strict:!1};function Wj(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:a,left:r}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:a,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function Zj(i){const t=gh.get(i),e=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,r=n||Pj(fM,fC),l=e||f_.createContainer(r,nx.ConcurrentRoot,null,!1,null,"",a,a,a,null);t||gh.set(i,{fiber:l,store:r});let u,d,p=!1,g=null;return{async configure(y={}){let x;g=new Promise(st=>x=st);let{gl:_,size:E,scene:C,events:T,onCreated:M,shadows:R=!1,linear:D=!1,flat:L=!1,legacy:P=!1,orthographic:B=!1,frameloop:G="always",dpr:V=[1,2],performance:N,raycaster:I,camera:W,onPointerMissed:lt}=y,tt=r.getState(),rt=tt.gl;if(!tt.gl){const st={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},wt=typeof _=="function"?await _(st):_;rC(wt)?rt=wt:rt=new yg({...st,..._}),tt.set({gl:rt})}let mt=tt.raycaster;mt||tt.set({raycaster:mt=new BE});const{params:$,...et}=I||{};if(wi.equ(et,mt,Hd)||Nl(mt,{...et}),wi.equ($,mt.params,Hd)||Nl(mt,{params:{...mt.params,...$}}),!tt.camera||tt.camera===d&&!wi.equ(d,W,Hd)){d=W;const st=W==null?void 0:W.isCamera,wt=st?W:B?new Fo(0,0,0,0,.1,1e3):new Fi(75,0,.1,1e3);st||(wt.position.z=5,W&&(Nl(wt,W),wt.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(wt.manual=!0,wt.updateProjectionMatrix())),!tt.camera&&!(W!=null&&W.rotation)&&wt.lookAt(0,0,0)),tt.set({camera:wt}),mt.camera=wt}if(!tt.scene){let st;C!=null&&C.isScene?(st=C,l_(st,r,"",{})):(st=new Mh,l_(st,r,"",{}),C&&Nl(st,C)),tt.set({scene:st})}T&&!tt.events.handlers&&tt.set({events:T(r)});const vt=Wj(i,E);if(wi.equ(vt,tt.size,Hd)||tt.setSize(vt.width,vt.height,vt.top,vt.left),V&&tt.viewport.dpr!==TN(V)&&tt.setDpr(V),tt.frameloop!==G&&tt.setFrameloop(G),tt.onPointerMissed||tt.set({onPointerMissed:lt}),N&&!wi.equ(N,tt.performance,Hd)&&tt.set(st=>({performance:{...st.performance,...N}})),!tt.xr){var ut;const st=(Mt,Vt)=>{const ft=r.getState();ft.frameloop!=="never"&&fC(Mt,!0,ft,Vt)},wt=()=>{const Mt=r.getState();Mt.gl.xr.enabled=Mt.gl.xr.isPresenting,Mt.gl.xr.setAnimationLoop(Mt.gl.xr.isPresenting?st:null),Mt.gl.xr.isPresenting||fM(Mt)},Ct={connect(){const Mt=r.getState().gl;Mt.xr.addEventListener("sessionstart",wt),Mt.xr.addEventListener("sessionend",wt)},disconnect(){const Mt=r.getState().gl;Mt.xr.removeEventListener("sessionstart",wt),Mt.xr.removeEventListener("sessionend",wt)}};typeof((ut=rt.xr)==null?void 0:ut.addEventListener)=="function"&&Ct.connect(),tt.set({xr:Ct})}if(rt.shadowMap){const st=rt.shadowMap.enabled,wt=rt.shadowMap.type;if(rt.shadowMap.enabled=!!R,wi.boo(R))rt.shadowMap.type=ep;else if(wi.str(R)){var j;const Ct={basic:I3,percentage:tp,soft:ep,variance:th};rt.shadowMap.type=(j=Ct[R])!=null?j:ep}else wi.obj(R)&&Object.assign(rt.shadowMap,R);(st!==rt.shadowMap.enabled||wt!==rt.shadowMap.type)&&(rt.shadowMap.needsUpdate=!0)}return Un.enabled=!P,p||(rt.outputColorSpace=D?Ho:Ka,rt.toneMapping=L?qr:__),tt.legacy!==P&&tt.set(()=>({legacy:P})),tt.linear!==D&&tt.set(()=>({linear:D})),tt.flat!==L&&tt.set(()=>({flat:L})),_&&!wi.fun(_)&&!rC(_)&&!wi.equ(_,rt,Hd)&&Nl(rt,_),u=M,p=!0,x(),this},render(y){return!p&&!g&&this.configure(),g.then(()=>{f_.updateContainer(O.jsx(Kj,{store:r,children:y,onCreated:u,rootElement:i}),l,null,()=>{})}),r},unmount(){PN(i)}}}function Kj({store:i,children:t,onCreated:e,rootElement:n}){return xg(()=>{const a=i.getState();a.set(r=>({internal:{...r.internal,active:!0}})),e&&e(a),i.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),O.jsx(GE.Provider,{value:i,children:t})}function PN(i,t){const e=gh.get(i),n=e==null?void 0:e.fiber;if(n){const a=e==null?void 0:e.store.getState();a&&(a.internal.active=!1),f_.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var r,l,u,d;a.events.disconnect==null||a.events.disconnect(),(r=a.gl)==null||(l=r.renderLists)==null||l.dispose==null||l.dispose(),(u=a.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),wj(a.scene),gh.delete(i)}catch{}},500)})}}function Qj(i,t,e){return O.jsx(Jj,{children:i,container:t,state:e})}function Jj({state:i={},children:t,container:e}){const{events:n,size:a,...r}=i,l=jE(),[u]=Z.useState(()=>new BE),[d]=Z.useState(()=>new It),p=HE((y,x)=>{let _;if(x.camera&&a){const E=x.camera;_=y.viewport.getCurrentViewport(E,new K,a),E!==y.camera&&wN(E,a)}return{...y,...x,scene:e,raycaster:u,pointer:d,mouse:d,previousRoot:l,events:{...y.events,...x.events,...n},size:{...y.size,...a},viewport:{...y.viewport,..._},setEvents:E=>x.set(C=>({...C,events:{...C.events,...E}}))}}),g=Z.useMemo(()=>{const y=vN((_,E)=>({...r,set:_,get:E})),x=_=>y.setState(E=>p.current(_,E));return x(l.getState()),l.subscribe(x),y},[l,e]);return O.jsx(O.Fragment,{children:f_.createPortal(O.jsx(GE.Provider,{value:g,children:t}),g,null)})}const $j=new Set,tk=new Set,ek=new Set;function cb(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function b0(i,t){switch(i){case"before":return cb($j,t);case"after":return cb(tk,t);case"tail":return cb(ek,t)}}let ub,fb;function cM(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),ub=t.internal.subscribers;for(let a=0;a<ub.length;a++)fb=ub[a],fb.ref.current(fb.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let h_=!1,uM=!1,hb,uC,Gd;function IN(i){uC=requestAnimationFrame(IN),h_=!0,hb=0,b0("before",i),uM=!0;for(const e of gh.values()){var t;Gd=e.store.getState(),Gd.internal.active&&(Gd.frameloop==="always"||Gd.internal.frames>0)&&!((t=Gd.gl.xr)!=null&&t.isPresenting)&&(hb+=cM(i,Gd))}if(uM=!1,b0("after",i),hb===0)return b0("tail",i),h_=!1,cancelAnimationFrame(uC)}function fM(i,t=1){var e;if(!i)return gh.forEach(n=>fM(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):uM?i.internal.frames=2:i.internal.frames=1,h_||(h_=!0,requestAnimationFrame(IN)))}function fC(i,t=!0,e,n){if(t&&b0("before",i),e)cM(i,e,n);else for(const a of gh.values())cM(i,a.store.getState());t&&b0("after",i)}const db={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nk(i){const{handlePointer:t}=Lj(i);return{priority:1,enabled:!0,compute(e,n,a){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(db).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:a}=i.getState();(e=a.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:e=>{const{set:n,events:a}=i.getState();if(a.disconnect==null||a.disconnect(),n(r=>({events:{...r.events,connected:e}})),a.handlers)for(const r in a.handlers){const l=a.handlers[r],[u,d]=db[r];e.addEventListener(u,l,{passive:d})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const r=n.handlers[a],[l]=db[a];n.connected.removeEventListener(l,r)}e(a=>({events:{...a.events,connected:void 0}}))}}}}function hC(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function ik({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,l]=Z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=Z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,p=i?typeof i=="number"?i:i.resize:null,g=Z.useRef(!1);Z.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[y,x,_]=Z.useMemo(()=>{const M=()=>{if(!u.current.element)return;const{left:R,top:D,width:L,height:P,bottom:B,right:G,x:V,y:N}=u.current.element.getBoundingClientRect(),I={left:R,top:D,width:L,height:P,bottom:B,right:G,x:V,y:N};u.current.element instanceof HTMLElement&&n&&(I.height=u.current.element.offsetHeight,I.width=u.current.element.offsetWidth),Object.freeze(I),g.current&&!ok(u.current.lastBounds,I)&&l(u.current.lastBounds=I)};return[M,p?hC(M,p):M,d?hC(M,d):M]},[l,n,d,p]);function E(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",_,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",u.current.orientationHandler))}function C(){u.current.element&&(u.current.resizeObserver=new a(_),u.current.resizeObserver.observe(u.current.element),t&&u.current.scrollContainers&&u.current.scrollContainers.forEach(M=>M.addEventListener("scroll",_,{capture:!0,passive:!0})),u.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",u.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",u.current.orientationHandler))}const T=M=>{!M||M===u.current.element||(E(),u.current.element=M,u.current.scrollContainers=BN(M),C())};return sk(_,!!t),ak(x),Z.useEffect(()=>{E(),C()},[t,_,x]),Z.useEffect(()=>E,[]),[T,r,y]}function ak(i){Z.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function sk(i,t){Z.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function BN(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:a}=window.getComputedStyle(i);return[e,n,a].some(r=>r==="auto"||r==="scroll")&&t.push(i),[...t,...BN(i.parentElement)]}const rk=["x","y","top","bottom","left","right","width","height"],ok=(i,t)=>rk.every(e=>i[e]===t[e]);function lk({ref:i,children:t,fallback:e,resize:n,style:a,gl:r,events:l=nk,eventSource:u,eventPrefix:d,shadows:p,linear:g,flat:y,legacy:x,orthographic:_,frameloop:E,dpr:C,performance:T,raycaster:M,camera:R,scene:D,onPointerMissed:L,onCreated:P,...B}){Z.useMemo(()=>NN(J7),[]);const G=Mj(),[V,N]=ik({scroll:!0,debounce:{scroll:50,resize:0},...n}),I=Z.useRef(null),W=Z.useRef(null);Z.useImperativeHandle(i,()=>I.current);const lt=HE(L),[tt,rt]=Z.useState(!1),[mt,$]=Z.useState(!1);if(tt)throw tt;if(mt)throw mt;const et=Z.useRef(null);xg(()=>{const ut=I.current;if(N.width>0&&N.height>0&&ut){et.current||(et.current=Zj(ut));async function j(){await et.current.configure({gl:r,scene:D,events:l,shadows:p,linear:g,flat:y,legacy:x,orthographic:_,frameloop:E,dpr:C,performance:T,raycaster:M,camera:R,size:N,onPointerMissed:(...st)=>lt.current==null?void 0:lt.current(...st),onCreated:st=>{st.events.connect==null||st.events.connect(u?Sj(u)?u.current:u:W.current),d&&st.setEvents({compute:(wt,Ct)=>{const Mt=wt[d+"X"],Vt=wt[d+"Y"];Ct.pointer.set(Mt/Ct.size.width*2-1,-(Vt/Ct.size.height)*2+1),Ct.raycaster.setFromCamera(Ct.pointer,Ct.camera)}}),P==null||P(st)}}),et.current.render(O.jsx(G,{children:O.jsx(Tj,{set:$,children:O.jsx(Z.Suspense,{fallback:O.jsx(Ej,{set:rt}),children:t??null})})}))}j()}}),Z.useEffect(()=>{const ut=I.current;if(ut)return()=>PN(ut)},[]);const vt=u?"none":"auto";return O.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:vt,...a},...B,children:O.jsx("div",{ref:V,style:{width:"100%",height:"100%"},children:O.jsx("canvas",{ref:I,style:{display:"block"},children:e})})})}function XE(i){return O.jsx(SN,{children:O.jsx(lk,{...i})})}function vh(){return vh=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},vh.apply(null,arguments)}const zN=parseInt(Ap.replace(/\D+/g,""));var jr=Uint8Array,Ou=Uint16Array,hM=Uint32Array,FN=new jr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VN=new jr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ck=new jr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HN=function(i,t){for(var e=new Ou(31),n=0;n<31;++n)e[n]=t+=1<<i[n-1];for(var a=new hM(e[30]),n=1;n<30;++n)for(var r=e[n];r<e[n+1];++r)a[r]=r-e[n]<<5|n;return[e,a]},GN=HN(FN,2),jN=GN[0],uk=GN[1];jN[28]=258,uk[258]=28;var fk=HN(VN,0),hk=fk[0],dM=new Ou(32768);for(var bi=0;bi<32768;++bi){var Tu=(bi&43690)>>>1|(bi&21845)<<1;Tu=(Tu&52428)>>>2|(Tu&13107)<<2,Tu=(Tu&61680)>>>4|(Tu&3855)<<4,dM[bi]=((Tu&65280)>>>8|(Tu&255)<<8)>>>1}var M0=(function(i,t,e){for(var n=i.length,a=0,r=new Ou(t);a<n;++a)++r[i[a]-1];var l=new Ou(t);for(a=0;a<t;++a)l[a]=l[a-1]+r[a-1]<<1;var u;if(e){u=new Ou(1<<t);var d=15-t;for(a=0;a<n;++a)if(i[a])for(var p=a<<4|i[a],g=t-i[a],y=l[i[a]-1]++<<g,x=y|(1<<g)-1;y<=x;++y)u[dM[y]>>>d]=p}else for(u=new Ou(n),a=0;a<n;++a)i[a]&&(u[a]=dM[l[i[a]-1]++]>>>15-i[a]);return u}),_g=new jr(288);for(var bi=0;bi<144;++bi)_g[bi]=8;for(var bi=144;bi<256;++bi)_g[bi]=9;for(var bi=256;bi<280;++bi)_g[bi]=7;for(var bi=280;bi<288;++bi)_g[bi]=8;var kN=new jr(32);for(var bi=0;bi<32;++bi)kN[bi]=5;var dk=M0(_g,9,1),pk=M0(kN,5,1),pb=function(i){for(var t=i[0],e=1;e<i.length;++e)i[e]>t&&(t=i[e]);return t},Po=function(i,t,e){var n=t/8|0;return(i[n]|i[n+1]<<8)>>(t&7)&e},mb=function(i,t){var e=t/8|0;return(i[e]|i[e+1]<<8|i[e+2]<<16)>>(t&7)},mk=function(i){return(i/8|0)+(i&7&&1)},gk=function(i,t,e){(e==null||e>i.length)&&(e=i.length);var n=new(i instanceof Ou?Ou:i instanceof hM?hM:jr)(e-t);return n.set(i.subarray(t,e)),n},vk=function(i,t,e){var n=i.length;if(!n||e&&!e.l&&n<5)return t||new jr(0);var a=!t||e,r=!e||e.i;e||(e={}),t||(t=new jr(n*3));var l=function(ft){var Rt=t.length;if(ft>Rt){var Ft=new jr(Math.max(Rt*2,ft));Ft.set(t),t=Ft}},u=e.f||0,d=e.p||0,p=e.b||0,g=e.l,y=e.d,x=e.m,_=e.n,E=n*8;do{if(!g){e.f=u=Po(i,d,1);var C=Po(i,d+1,3);if(d+=3,C)if(C==1)g=dk,y=pk,x=9,_=5;else if(C==2){var D=Po(i,d,31)+257,L=Po(i,d+10,15)+4,P=D+Po(i,d+5,31)+1;d+=14;for(var B=new jr(P),G=new jr(19),V=0;V<L;++V)G[ck[V]]=Po(i,d+V*3,7);d+=L*3;for(var N=pb(G),I=(1<<N)-1,W=M0(G,N,1),V=0;V<P;){var lt=W[Po(i,d,I)];d+=lt&15;var T=lt>>>4;if(T<16)B[V++]=T;else{var tt=0,rt=0;for(T==16?(rt=3+Po(i,d,3),d+=2,tt=B[V-1]):T==17?(rt=3+Po(i,d,7),d+=3):T==18&&(rt=11+Po(i,d,127),d+=7);rt--;)B[V++]=tt}}var mt=B.subarray(0,D),$=B.subarray(D);x=pb(mt),_=pb($),g=M0(mt,x,1),y=M0($,_,1)}else throw"invalid block type";else{var T=mk(d)+4,M=i[T-4]|i[T-3]<<8,R=T+M;if(R>n){if(r)throw"unexpected EOF";break}a&&l(p+M),t.set(i.subarray(T,R),p),e.b=p+=M,e.p=d=R*8;continue}if(d>E){if(r)throw"unexpected EOF";break}}a&&l(p+131072);for(var et=(1<<x)-1,vt=(1<<_)-1,ut=d;;ut=d){var tt=g[mb(i,d)&et],j=tt>>>4;if(d+=tt&15,d>E){if(r)throw"unexpected EOF";break}if(!tt)throw"invalid length/literal";if(j<256)t[p++]=j;else if(j==256){ut=d,g=null;break}else{var st=j-254;if(j>264){var V=j-257,wt=FN[V];st=Po(i,d,(1<<wt)-1)+jN[V],d+=wt}var Ct=y[mb(i,d)&vt],Mt=Ct>>>4;if(!Ct)throw"invalid distance";d+=Ct&15;var $=hk[Mt];if(Mt>3){var wt=VN[Mt];$+=mb(i,d)&(1<<wt)-1,d+=wt}if(d>E){if(r)throw"unexpected EOF";break}a&&l(p+131072);for(var Vt=p+st;p<Vt;p+=4)t[p]=t[p-$],t[p+1]=t[p+1-$],t[p+2]=t[p+2-$],t[p+3]=t[p+3-$];p=Vt}}e.l=g,e.p=ut,e.b=p,g&&(u=1,e.m=x,e.d=y,e.n=_)}while(!u);return p==t.length?t:gk(t,0,p)},yk=new jr(0),xk=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Wy(i,t){return vk((xk(i),i.subarray(2,-4)),t)}var _k=typeof TextDecoder<"u"&&new TextDecoder,Sk=0;try{_k.decode(yk,{stream:!0}),Sk=1}catch{}const bk=i=>i&&i.isCubeTexture;class Mk extends Zn{constructor(t,e){var n,a;const r=bk(t),u=((a=r?(n=t.image[0])==null?void 0:n.width:t.image.width)!=null?a:1024)/4,d=Math.floor(Math.log2(u)),p=Math.pow(2,d),g=3*Math.max(p,112),y=4*p,x=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/g}`,`#define CUBEUV_TEXEL_HEIGHT ${1/y}`,`#define CUBEUV_MAX_MIP ${d}.0`],_=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,E=x.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${zN>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,C={map:{value:t},height:{value:(e==null?void 0:e.height)||15},radius:{value:(e==null?void 0:e.radius)||100}},T=new dg(1,16),M=new Ri({uniforms:C,fragmentShader:E,vertexShader:_,side:Ns});super(T,M)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var Ek=Object.defineProperty,Tk=(i,t,e)=>t in i?Ek(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Ak=(i,t,e)=>(Tk(i,t+"",e),e);class wk{constructor(){Ak(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const a=this._listeners[t];if(a!==void 0){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const a=n.slice(0);for(let r=0,l=a.length;r<l;r++)a[r].call(this,t);t.target=null}}}var Ck=Object.defineProperty,Rk=(i,t,e)=>t in i?Ck(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,tn=(i,t,e)=>(Rk(i,typeof t!="symbol"?t+"":t,e),e);const Zy=new ku,dC=new Rl,Dk=Math.cos(70*(Math.PI/180)),pC=(i,t)=>(i%t+t)%t;let Nk=class extends wk{constructor(t,e){super(),tn(this,"object"),tn(this,"domElement"),tn(this,"enabled",!0),tn(this,"target",new K),tn(this,"minDistance",0),tn(this,"maxDistance",1/0),tn(this,"minZoom",0),tn(this,"maxZoom",1/0),tn(this,"minPolarAngle",0),tn(this,"maxPolarAngle",Math.PI),tn(this,"minAzimuthAngle",-1/0),tn(this,"maxAzimuthAngle",1/0),tn(this,"enableDamping",!1),tn(this,"dampingFactor",.05),tn(this,"enableZoom",!0),tn(this,"zoomSpeed",1),tn(this,"enableRotate",!0),tn(this,"rotateSpeed",1),tn(this,"enablePan",!0),tn(this,"panSpeed",1),tn(this,"screenSpacePanning",!0),tn(this,"keyPanSpeed",7),tn(this,"zoomToCursor",!1),tn(this,"autoRotate",!1),tn(this,"autoRotateSpeed",2),tn(this,"reverseOrbit",!1),tn(this,"reverseHorizontalOrbit",!1),tn(this,"reverseVerticalOrbit",!1),tn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),tn(this,"mouseButtons",{LEFT:yr.ROTATE,MIDDLE:yr.DOLLY,RIGHT:yr.PAN}),tn(this,"touches",{ONE:xr.ROTATE,TWO:xr.DOLLY_PAN}),tn(this,"target0"),tn(this,"position0"),tn(this,"zoom0"),tn(this,"_domElementKeyEvents",null),tn(this,"getPolarAngle"),tn(this,"getAzimuthalAngle"),tn(this,"setPolarAngle"),tn(this,"setAzimuthalAngle"),tn(this,"getDistance"),tn(this,"getZoomScale"),tn(this,"listenToKeyEvents"),tn(this,"stopListenToKeyEvents"),tn(this,"saveState"),tn(this,"reset"),tn(this,"update"),tn(this,"connect"),tn(this,"dispose"),tn(this,"dollyIn"),tn(this,"dollyOut"),tn(this,"getScale"),tn(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=nt=>{let _t=pC(nt,2*Math.PI),te=g.phi;te<0&&(te+=2*Math.PI),_t<0&&(_t+=2*Math.PI);let ot=Math.abs(_t-te);2*Math.PI-ot<ot&&(_t<te?_t+=2*Math.PI:te+=2*Math.PI),y.phi=_t-te,n.update()},this.setAzimuthalAngle=nt=>{let _t=pC(nt,2*Math.PI),te=g.theta;te<0&&(te+=2*Math.PI),_t<0&&(_t+=2*Math.PI);let ot=Math.abs(_t-te);2*Math.PI-ot<ot&&(_t<te?_t+=2*Math.PI:te+=2*Math.PI),y.theta=_t-te,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=nt=>{nt.addEventListener("keydown",Pt),this._domElementKeyEvents=nt},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Pt),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),d=u.NONE},this.update=(()=>{const nt=new K,_t=new K(0,1,0),te=new Fa().setFromUnitVectors(t.up,_t),ot=te.clone().invert(),At=new K,Qt=new Fa,Ee=2*Math.PI;return function(){const Yt=n.object.position;te.setFromUnitVectors(t.up,_t),ot.copy(te).invert(),nt.copy(Yt).sub(n.target),nt.applyQuaternion(te),g.setFromVector3(nt),n.autoRotate&&d===u.NONE&&rt(lt()),n.enableDamping?(g.theta+=y.theta*n.dampingFactor,g.phi+=y.phi*n.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let ce=n.minAzimuthAngle,je=n.maxAzimuthAngle;isFinite(ce)&&isFinite(je)&&(ce<-Math.PI?ce+=Ee:ce>Math.PI&&(ce-=Ee),je<-Math.PI?je+=Ee:je>Math.PI&&(je-=Ee),ce<=je?g.theta=Math.max(ce,Math.min(je,g.theta)):g.theta=g.theta>(ce+je)/2?Math.max(ce,g.theta):Math.min(je,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&N||n.object.isOrthographicCamera?g.radius=Ct(g.radius):g.radius=Ct(g.radius*x),nt.setFromSpherical(g),nt.applyQuaternion(ot),Yt.copy(n.target).add(nt),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(y.theta*=1-n.dampingFactor,y.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(y.set(0,0,0),_.set(0,0,0));let pn=!1;if(n.zoomToCursor&&N){let hn=null;if(n.object instanceof Fi&&n.object.isPerspectiveCamera){const xi=nt.length();hn=Ct(xi*x);const _i=xi-hn;n.object.position.addScaledVector(G,_i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const xi=new K(V.x,V.y,0);xi.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),pn=!0;const _i=new K(V.x,V.y,0);_i.unproject(n.object),n.object.position.sub(_i).add(xi),n.object.updateMatrixWorld(),hn=nt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;hn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(hn).add(n.object.position):(Zy.origin.copy(n.object.position),Zy.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Zy.direction))<Dk?t.lookAt(n.target):(dC.setFromNormalAndCoplanarPoint(n.object.up,n.target),Zy.intersectPlane(dC,n.target))))}else n.object instanceof Fo&&n.object.isOrthographicCamera&&(pn=x!==1,pn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,N=!1,pn||At.distanceToSquared(n.object.position)>p||8*(1-Qt.dot(n.object.quaternion))>p?(n.dispatchEvent(a),At.copy(n.object.position),Qt.copy(n.object.quaternion),pn=!1,!0):!1}})(),this.connect=nt=>{n.domElement=nt,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Pe),n.domElement.addEventListener("pointerdown",ye),n.domElement.addEventListener("pointercancel",F),n.domElement.addEventListener("wheel",qt)},this.dispose=()=>{var nt,_t,te,ot,At,Qt;n.domElement&&(n.domElement.style.touchAction="auto"),(nt=n.domElement)==null||nt.removeEventListener("contextmenu",Pe),(_t=n.domElement)==null||_t.removeEventListener("pointerdown",ye),(te=n.domElement)==null||te.removeEventListener("pointercancel",F),(ot=n.domElement)==null||ot.removeEventListener("wheel",qt),(At=n.domElement)==null||At.ownerDocument.removeEventListener("pointermove",Q),(Qt=n.domElement)==null||Qt.ownerDocument.removeEventListener("pointerup",F),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Pt)};const n=this,a={type:"change"},r={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=u.NONE;const p=1e-6,g=new yp,y=new yp;let x=1;const _=new K,E=new It,C=new It,T=new It,M=new It,R=new It,D=new It,L=new It,P=new It,B=new It,G=new K,V=new It;let N=!1;const I=[],W={};function lt(){return 2*Math.PI/60/60*n.autoRotateSpeed}function tt(){return Math.pow(.95,n.zoomSpeed)}function rt(nt){n.reverseOrbit||n.reverseHorizontalOrbit?y.theta+=nt:y.theta-=nt}function mt(nt){n.reverseOrbit||n.reverseVerticalOrbit?y.phi+=nt:y.phi-=nt}const $=(()=>{const nt=new K;return function(te,ot){nt.setFromMatrixColumn(ot,0),nt.multiplyScalar(-te),_.add(nt)}})(),et=(()=>{const nt=new K;return function(te,ot){n.screenSpacePanning===!0?nt.setFromMatrixColumn(ot,1):(nt.setFromMatrixColumn(ot,0),nt.crossVectors(n.object.up,nt)),nt.multiplyScalar(te),_.add(nt)}})(),vt=(()=>{const nt=new K;return function(te,ot){const At=n.domElement;if(At&&n.object instanceof Fi&&n.object.isPerspectiveCamera){const Qt=n.object.position;nt.copy(Qt).sub(n.target);let Ee=nt.length();Ee*=Math.tan(n.object.fov/2*Math.PI/180),$(2*te*Ee/At.clientHeight,n.object.matrix),et(2*ot*Ee/At.clientHeight,n.object.matrix)}else At&&n.object instanceof Fo&&n.object.isOrthographicCamera?($(te*(n.object.right-n.object.left)/n.object.zoom/At.clientWidth,n.object.matrix),et(ot*(n.object.top-n.object.bottom)/n.object.zoom/At.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ut(nt){n.object instanceof Fi&&n.object.isPerspectiveCamera||n.object instanceof Fo&&n.object.isOrthographicCamera?x=nt:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function j(nt){ut(x/nt)}function st(nt){ut(x*nt)}function wt(nt){if(!n.zoomToCursor||!n.domElement)return;N=!0;const _t=n.domElement.getBoundingClientRect(),te=nt.clientX-_t.left,ot=nt.clientY-_t.top,At=_t.width,Qt=_t.height;V.x=te/At*2-1,V.y=-(ot/Qt)*2+1,G.set(V.x,V.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ct(nt){return Math.max(n.minDistance,Math.min(n.maxDistance,nt))}function Mt(nt){E.set(nt.clientX,nt.clientY)}function Vt(nt){wt(nt),L.set(nt.clientX,nt.clientY)}function ft(nt){M.set(nt.clientX,nt.clientY)}function Rt(nt){C.set(nt.clientX,nt.clientY),T.subVectors(C,E).multiplyScalar(n.rotateSpeed);const _t=n.domElement;_t&&(rt(2*Math.PI*T.x/_t.clientHeight),mt(2*Math.PI*T.y/_t.clientHeight)),E.copy(C),n.update()}function Ft(nt){P.set(nt.clientX,nt.clientY),B.subVectors(P,L),B.y>0?j(tt()):B.y<0&&st(tt()),L.copy(P),n.update()}function Se(nt){R.set(nt.clientX,nt.clientY),D.subVectors(R,M).multiplyScalar(n.panSpeed),vt(D.x,D.y),M.copy(R),n.update()}function $t(nt){wt(nt),nt.deltaY<0?st(tt()):nt.deltaY>0&&j(tt()),n.update()}function ze(nt){let _t=!1;switch(nt.code){case n.keys.UP:vt(0,n.keyPanSpeed),_t=!0;break;case n.keys.BOTTOM:vt(0,-n.keyPanSpeed),_t=!0;break;case n.keys.LEFT:vt(n.keyPanSpeed,0),_t=!0;break;case n.keys.RIGHT:vt(-n.keyPanSpeed,0),_t=!0;break}_t&&(nt.preventDefault(),n.update())}function Qe(){if(I.length==1)E.set(I[0].pageX,I[0].pageY);else{const nt=.5*(I[0].pageX+I[1].pageX),_t=.5*(I[0].pageY+I[1].pageY);E.set(nt,_t)}}function Oe(){if(I.length==1)M.set(I[0].pageX,I[0].pageY);else{const nt=.5*(I[0].pageX+I[1].pageX),_t=.5*(I[0].pageY+I[1].pageY);M.set(nt,_t)}}function Gt(){const nt=I[0].pageX-I[1].pageX,_t=I[0].pageY-I[1].pageY,te=Math.sqrt(nt*nt+_t*_t);L.set(0,te)}function se(){n.enableZoom&&Gt(),n.enablePan&&Oe()}function Wt(){n.enableZoom&&Gt(),n.enableRotate&&Qe()}function ve(nt){if(I.length==1)C.set(nt.pageX,nt.pageY);else{const te=De(nt),ot=.5*(nt.pageX+te.x),At=.5*(nt.pageY+te.y);C.set(ot,At)}T.subVectors(C,E).multiplyScalar(n.rotateSpeed);const _t=n.domElement;_t&&(rt(2*Math.PI*T.x/_t.clientHeight),mt(2*Math.PI*T.y/_t.clientHeight)),E.copy(C)}function J(nt){if(I.length==1)R.set(nt.pageX,nt.pageY);else{const _t=De(nt),te=.5*(nt.pageX+_t.x),ot=.5*(nt.pageY+_t.y);R.set(te,ot)}D.subVectors(R,M).multiplyScalar(n.panSpeed),vt(D.x,D.y),M.copy(R)}function Fe(nt){const _t=De(nt),te=nt.pageX-_t.x,ot=nt.pageY-_t.y,At=Math.sqrt(te*te+ot*ot);P.set(0,At),B.set(0,Math.pow(P.y/L.y,n.zoomSpeed)),j(B.y),L.copy(P)}function be(nt){n.enableZoom&&Fe(nt),n.enablePan&&J(nt)}function He(nt){n.enableZoom&&Fe(nt),n.enableRotate&&ve(nt)}function ye(nt){var _t,te;n.enabled!==!1&&(I.length===0&&((_t=n.domElement)==null||_t.ownerDocument.addEventListener("pointermove",Q),(te=n.domElement)==null||te.ownerDocument.addEventListener("pointerup",F)),Ye(nt),nt.pointerType==="touch"?Le(nt):gt(nt))}function Q(nt){n.enabled!==!1&&(nt.pointerType==="touch"?Me(nt):Bt(nt))}function F(nt){var _t,te,ot;Zt(nt),I.length===0&&((_t=n.domElement)==null||_t.releasePointerCapture(nt.pointerId),(te=n.domElement)==null||te.ownerDocument.removeEventListener("pointermove",Q),(ot=n.domElement)==null||ot.ownerDocument.removeEventListener("pointerup",F)),n.dispatchEvent(l),d=u.NONE}function gt(nt){let _t;switch(nt.button){case 0:_t=n.mouseButtons.LEFT;break;case 1:_t=n.mouseButtons.MIDDLE;break;case 2:_t=n.mouseButtons.RIGHT;break;default:_t=-1}switch(_t){case yr.DOLLY:if(n.enableZoom===!1)return;Vt(nt),d=u.DOLLY;break;case yr.ROTATE:if(nt.ctrlKey||nt.metaKey||nt.shiftKey){if(n.enablePan===!1)return;ft(nt),d=u.PAN}else{if(n.enableRotate===!1)return;Mt(nt),d=u.ROTATE}break;case yr.PAN:if(nt.ctrlKey||nt.metaKey||nt.shiftKey){if(n.enableRotate===!1)return;Mt(nt),d=u.ROTATE}else{if(n.enablePan===!1)return;ft(nt),d=u.PAN}break;default:d=u.NONE}d!==u.NONE&&n.dispatchEvent(r)}function Bt(nt){if(n.enabled!==!1)switch(d){case u.ROTATE:if(n.enableRotate===!1)return;Rt(nt);break;case u.DOLLY:if(n.enableZoom===!1)return;Ft(nt);break;case u.PAN:if(n.enablePan===!1)return;Se(nt);break}}function qt(nt){n.enabled===!1||n.enableZoom===!1||d!==u.NONE&&d!==u.ROTATE||(nt.preventDefault(),n.dispatchEvent(r),$t(nt),n.dispatchEvent(l))}function Pt(nt){n.enabled===!1||n.enablePan===!1||ze(nt)}function Le(nt){switch(Kt(nt),I.length){case 1:switch(n.touches.ONE){case xr.ROTATE:if(n.enableRotate===!1)return;Qe(),d=u.TOUCH_ROTATE;break;case xr.PAN:if(n.enablePan===!1)return;Oe(),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(n.touches.TWO){case xr.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;se(),d=u.TOUCH_DOLLY_PAN;break;case xr.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Wt(),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&n.dispatchEvent(r)}function Me(nt){switch(Kt(nt),d){case u.TOUCH_ROTATE:if(n.enableRotate===!1)return;ve(nt),n.update();break;case u.TOUCH_PAN:if(n.enablePan===!1)return;J(nt),n.update();break;case u.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;be(nt),n.update();break;case u.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;He(nt),n.update();break;default:d=u.NONE}}function Pe(nt){n.enabled!==!1&&nt.preventDefault()}function Ye(nt){I.push(nt)}function Zt(nt){delete W[nt.pointerId];for(let _t=0;_t<I.length;_t++)if(I[_t].pointerId==nt.pointerId){I.splice(_t,1);return}}function Kt(nt){let _t=W[nt.pointerId];_t===void 0&&(_t=new It,W[nt.pointerId]=_t),_t.set(nt.pageX,nt.pageY)}function De(nt){const _t=nt.pointerId===I[0].pointerId?I[1]:I[0];return W[_t.pointerId]}this.dollyIn=(nt=tt())=>{st(nt),n.update()},this.dollyOut=(nt=tt())=>{j(nt),n.update()},this.getScale=()=>x,this.setScale=nt=>{ut(nt),n.update()},this.getZoomScale=()=>tt(),e!==void 0&&this.connect(e),this.update()}};const Uk={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Ok={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class Lk extends CE{constructor(t){super(t),this.type=pi}parse(t){const l=function(V,N){switch(V){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},y=function(V,N,I){N=N||1024;let lt=V.pos,tt=-1,rt=0,mt="",$=String.fromCharCode.apply(null,new Uint16Array(V.subarray(lt,lt+128)));for(;0>(tt=$.indexOf(`
`))&&rt<N&&lt<V.byteLength;)mt+=$,rt+=$.length,lt+=128,$+=String.fromCharCode.apply(null,new Uint16Array(V.subarray(lt,lt+128)));return-1<tt?(V.pos+=rt+tt+1,mt+$.slice(0,tt)):!1},x=function(V){const N=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,lt=/^\s*FORMAT=(\S+)\s*$/,tt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,rt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let mt,$;for((V.pos>=V.byteLength||!(mt=y(V)))&&l(1,"no header found"),($=mt.match(N))||l(3,"bad initial token"),rt.valid|=1,rt.programtype=$[1],rt.string+=mt+`
`;mt=y(V),mt!==!1;){if(rt.string+=mt+`
`,mt.charAt(0)==="#"){rt.comments+=mt+`
`;continue}if(($=mt.match(I))&&(rt.gamma=parseFloat($[1])),($=mt.match(W))&&(rt.exposure=parseFloat($[1])),($=mt.match(lt))&&(rt.valid|=2,rt.format=$[1]),($=mt.match(tt))&&(rt.valid|=4,rt.height=parseInt($[1],10),rt.width=parseInt($[2],10)),rt.valid&2&&rt.valid&4)break}return rt.valid&2||l(3,"missing format specifier"),rt.valid&4||l(3,"missing image size specifier"),rt},_=function(V,N,I){const W=N;if(W<8||W>32767||V[0]!==2||V[1]!==2||V[2]&128)return new Uint8Array(V);W!==(V[2]<<8|V[3])&&l(3,"wrong scanline width");const lt=new Uint8Array(4*N*I);lt.length||l(4,"unable to allocate buffer space");let tt=0,rt=0;const mt=4*W,$=new Uint8Array(4),et=new Uint8Array(mt);let vt=I;for(;vt>0&&rt<V.byteLength;){rt+4>V.byteLength&&l(1),$[0]=V[rt++],$[1]=V[rt++],$[2]=V[rt++],$[3]=V[rt++],($[0]!=2||$[1]!=2||($[2]<<8|$[3])!=W)&&l(3,"bad rgbe scanline format");let ut=0,j;for(;ut<mt&&rt<V.byteLength;){j=V[rt++];const wt=j>128;if(wt&&(j-=128),(j===0||ut+j>mt)&&l(3,"bad scanline data"),wt){const Ct=V[rt++];for(let Mt=0;Mt<j;Mt++)et[ut++]=Ct}else et.set(V.subarray(rt,rt+j),ut),ut+=j,rt+=j}const st=W;for(let wt=0;wt<st;wt++){let Ct=0;lt[tt]=et[wt+Ct],Ct+=W,lt[tt+1]=et[wt+Ct],Ct+=W,lt[tt+2]=et[wt+Ct],Ct+=W,lt[tt+3]=et[wt+Ct],tt+=4}vt--}return lt},E=function(V,N,I,W){const lt=V[N+3],tt=Math.pow(2,lt-128)/255;I[W+0]=V[N+0]*tt,I[W+1]=V[N+1]*tt,I[W+2]=V[N+2]*tt,I[W+3]=1},C=function(V,N,I,W){const lt=V[N+3],tt=Math.pow(2,lt-128)/255;I[W+0]=ih.toHalfFloat(Math.min(V[N+0]*tt,65504)),I[W+1]=ih.toHalfFloat(Math.min(V[N+1]*tt,65504)),I[W+2]=ih.toHalfFloat(Math.min(V[N+2]*tt,65504)),I[W+3]=ih.toHalfFloat(1)},T=new Uint8Array(t);T.pos=0;const M=x(T),R=M.width,D=M.height,L=_(T.subarray(T.pos),R,D);let P,B,G;switch(this.type){case Mi:G=L.length/4;const V=new Float32Array(G*4);for(let I=0;I<G;I++)E(L,I*4,V,I*4);P=V,B=Mi;break;case pi:G=L.length/4;const N=new Uint16Array(G*4);for(let I=0;I<G;I++)C(L,I*4,N,I*4);P=N,B=pi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:R,height:D,data:P,header:M.string,gamma:M.gamma,exposure:M.exposure,type:B}}setDataType(t){return this.type=t,this}load(t,e,n,a){function r(l,u){switch(l.type){case Mi:case pi:"colorSpace"in l?l.colorSpace="srgb-linear":l.encoding=3e3,l.minFilter=Nn,l.magFilter=Nn,l.generateMipmaps=!1,l.flipY=!0;break}e&&e(l,u)}return super.load(t,r,n,a)}}const a0=zN>=152;class Pk extends CE{constructor(t){super(t),this.type=pi}parse(t){const N=Math.pow(2.7182818,2.2);function I(H,q){for(var ht=0,Nt=0;Nt<65536;++Nt)(Nt==0||H[Nt>>3]&1<<(Nt&7))&&(q[ht++]=Nt);for(var Ht=ht-1;ht<65536;)q[ht++]=0;return Ht}function W(H){for(var q=0;q<16384;q++)H[q]={},H[q].len=0,H[q].lit=0,H[q].p=null}const lt={l:0,c:0,lc:0};function tt(H,q,ht,Nt,Ht){for(;ht<H;)q=q<<8|De(Nt,Ht),ht+=8;ht-=H,lt.l=q>>ht&(1<<H)-1,lt.c=q,lt.lc=ht}const rt=new Array(59);function mt(H){for(var q=0;q<=58;++q)rt[q]=0;for(var q=0;q<65537;++q)rt[H[q]]+=1;for(var ht=0,q=58;q>0;--q){var Nt=ht+rt[q]>>1;rt[q]=ht,ht=Nt}for(var q=0;q<65537;++q){var Ht=H[q];Ht>0&&(H[q]=Ht|rt[Ht]++<<6)}}function $(H,q,ht,Nt,Ht,zt,pe){for(var ie=ht,oe=0,ee=0;Ht<=zt;Ht++){if(ie.value-ht.value>Nt)return!1;tt(6,oe,ee,H,ie);var ge=lt.l;if(oe=lt.c,ee=lt.lc,pe[Ht]=ge,ge==63){if(ie.value-ht.value>Nt)throw"Something wrong with hufUnpackEncTable";tt(8,oe,ee,H,ie);var re=lt.l+6;if(oe=lt.c,ee=lt.lc,Ht+re>zt+1)throw"Something wrong with hufUnpackEncTable";for(;re--;)pe[Ht++]=0;Ht--}else if(ge>=59){var re=ge-59+2;if(Ht+re>zt+1)throw"Something wrong with hufUnpackEncTable";for(;re--;)pe[Ht++]=0;Ht--}}mt(pe)}function et(H){return H&63}function vt(H){return H>>6}function ut(H,q,ht,Nt){for(;q<=ht;q++){var Ht=vt(H[q]),zt=et(H[q]);if(Ht>>zt)throw"Invalid table entry";if(zt>14){var pe=Nt[Ht>>zt-14];if(pe.len)throw"Invalid table entry";if(pe.lit++,pe.p){var ie=pe.p;pe.p=new Array(pe.lit);for(var oe=0;oe<pe.lit-1;++oe)pe.p[oe]=ie[oe]}else pe.p=new Array(1);pe.p[pe.lit-1]=q}else if(zt)for(var ee=0,oe=1<<14-zt;oe>0;oe--){var pe=Nt[(Ht<<14-zt)+ee];if(pe.len||pe.p)throw"Invalid table entry";pe.len=zt,pe.lit=q,ee++}}return!0}const j={c:0,lc:0};function st(H,q,ht,Nt){H=H<<8|De(ht,Nt),q+=8,j.c=H,j.lc=q}const wt={c:0,lc:0};function Ct(H,q,ht,Nt,Ht,zt,pe,ie,oe,ee){if(H==q){Nt<8&&(st(ht,Nt,Ht,pe),ht=j.c,Nt=j.lc),Nt-=8;var ge=ht>>Nt,ge=new Uint8Array([ge])[0];if(oe.value+ge>ee)return!1;for(var re=ie[oe.value-1];ge-- >0;)ie[oe.value++]=re}else if(oe.value<ee)ie[oe.value++]=H;else return!1;wt.c=ht,wt.lc=Nt}function Mt(H){return H&65535}function Vt(H){var q=Mt(H);return q>32767?q-65536:q}const ft={a:0,b:0};function Rt(H,q){var ht=Vt(H),Nt=Vt(q),Ht=Nt,zt=ht+(Ht&1)+(Ht>>1),pe=zt,ie=zt-Ht;ft.a=pe,ft.b=ie}function Ft(H,q){var ht=Mt(H),Nt=Mt(q),Ht=ht-(Nt>>1)&65535,zt=Nt+Ht-32768&65535;ft.a=zt,ft.b=Ht}function Se(H,q,ht,Nt,Ht,zt,pe){for(var ie=pe<16384,oe=ht>Ht?Ht:ht,ee=1,ge;ee<=oe;)ee<<=1;for(ee>>=1,ge=ee,ee>>=1;ee>=1;){for(var re=0,k=re+zt*(Ht-ge),it=zt*ee,pt=zt*ge,yt=Nt*ee,dt=Nt*ge,ae,ue,fe,Te;re<=k;re+=pt){for(var xe=re,Ve=re+Nt*(ht-ge);xe<=Ve;xe+=dt){var _e=xe+yt,Ie=xe+it,mn=Ie+yt;ie?(Rt(H[xe+q],H[Ie+q]),ae=ft.a,fe=ft.b,Rt(H[_e+q],H[mn+q]),ue=ft.a,Te=ft.b,Rt(ae,ue),H[xe+q]=ft.a,H[_e+q]=ft.b,Rt(fe,Te),H[Ie+q]=ft.a,H[mn+q]=ft.b):(Ft(H[xe+q],H[Ie+q]),ae=ft.a,fe=ft.b,Ft(H[_e+q],H[mn+q]),ue=ft.a,Te=ft.b,Ft(ae,ue),H[xe+q]=ft.a,H[_e+q]=ft.b,Ft(fe,Te),H[Ie+q]=ft.a,H[mn+q]=ft.b)}if(ht&ee){var Ie=xe+it;ie?Rt(H[xe+q],H[Ie+q]):Ft(H[xe+q],H[Ie+q]),ae=ft.a,H[Ie+q]=ft.b,H[xe+q]=ae}}if(Ht&ee)for(var xe=re,Ve=re+Nt*(ht-ge);xe<=Ve;xe+=dt){var _e=xe+yt;ie?Rt(H[xe+q],H[_e+q]):Ft(H[xe+q],H[_e+q]),ae=ft.a,H[_e+q]=ft.b,H[xe+q]=ae}ge=ee,ee>>=1}return re}function $t(H,q,ht,Nt,Ht,zt,pe,ie,oe,ee){for(var ge=0,re=0,k=ie,it=Math.trunc(Ht.value+(zt+7)/8);Ht.value<it;)for(st(ge,re,ht,Ht),ge=j.c,re=j.lc;re>=14;){var pt=ge>>re-14&16383,yt=q[pt];if(yt.len)re-=yt.len,Ct(yt.lit,pe,ge,re,ht,Nt,Ht,oe,ee,k),ge=wt.c,re=wt.lc;else{if(!yt.p)throw"hufDecode issues";var dt;for(dt=0;dt<yt.lit;dt++){for(var ae=et(H[yt.p[dt]]);re<ae&&Ht.value<it;)st(ge,re,ht,Ht),ge=j.c,re=j.lc;if(re>=ae&&vt(H[yt.p[dt]])==(ge>>re-ae&(1<<ae)-1)){re-=ae,Ct(yt.p[dt],pe,ge,re,ht,Nt,Ht,oe,ee,k),ge=wt.c,re=wt.lc;break}}if(dt==yt.lit)throw"hufDecode issues"}}var ue=8-zt&7;for(ge>>=ue,re-=ue;re>0;){var yt=q[ge<<14-re&16383];if(yt.len)re-=yt.len,Ct(yt.lit,pe,ge,re,ht,Nt,Ht,oe,ee,k),ge=wt.c,re=wt.lc;else throw"hufDecode issues"}return!0}function ze(H,q,ht,Nt,Ht,zt){var pe={value:0},ie=ht.value,oe=Kt(q,ht),ee=Kt(q,ht);ht.value+=4;var ge=Kt(q,ht);if(ht.value+=4,oe<0||oe>=65537||ee<0||ee>=65537)throw"Something wrong with HUF_ENCSIZE";var re=new Array(65537),k=new Array(16384);W(k);var it=Nt-(ht.value-ie);if($(H,q,ht,it,oe,ee,re),ge>8*(Nt-(ht.value-ie)))throw"Something wrong with hufUncompress";ut(re,oe,ee,k),$t(re,k,H,q,ht,ge,ee,zt,Ht,pe)}function Qe(H,q,ht){for(var Nt=0;Nt<ht;++Nt)q[Nt]=H[q[Nt]]}function Oe(H){for(var q=1;q<H.length;q++){var ht=H[q-1]+H[q]-128;H[q]=ht}}function Gt(H,q){for(var ht=0,Nt=Math.floor((H.length+1)/2),Ht=0,zt=H.length-1;!(Ht>zt||(q[Ht++]=H[ht++],Ht>zt));)q[Ht++]=H[Nt++]}function se(H){for(var q=H.byteLength,ht=new Array,Nt=0,Ht=new DataView(H);q>0;){var zt=Ht.getInt8(Nt++);if(zt<0){var pe=-zt;q-=pe+1;for(var ie=0;ie<pe;ie++)ht.push(Ht.getUint8(Nt++))}else{var pe=zt;q-=2;for(var oe=Ht.getUint8(Nt++),ie=0;ie<pe+1;ie++)ht.push(oe)}}return ht}function Wt(H,q,ht,Nt,Ht,zt){var _e=new DataView(zt.buffer),pe=ht[H.idx[0]].width,ie=ht[H.idx[0]].height,oe=3,ee=Math.floor(pe/8),ge=Math.ceil(pe/8),re=Math.ceil(ie/8),k=pe-(ge-1)*8,it=ie-(re-1)*8,pt={value:0},yt=new Array(oe),dt=new Array(oe),ae=new Array(oe),ue=new Array(oe),fe=new Array(oe);for(let Xe=0;Xe<oe;++Xe)fe[Xe]=q[H.idx[Xe]],yt[Xe]=Xe<1?0:yt[Xe-1]+ge*re,dt[Xe]=new Float32Array(64),ae[Xe]=new Uint16Array(64),ue[Xe]=new Uint16Array(ge*64);for(let Xe=0;Xe<re;++Xe){var Te=8;Xe==re-1&&(Te=it);var xe=8;for(let qe=0;qe<ge;++qe){qe==ge-1&&(xe=k);for(let Ce=0;Ce<oe;++Ce)ae[Ce].fill(0),ae[Ce][0]=Ht[yt[Ce]++],ve(pt,Nt,ae[Ce]),J(ae[Ce],dt[Ce]),Fe(dt[Ce]);be(dt);for(let Ce=0;Ce<oe;++Ce)He(dt[Ce],ue[Ce],qe*64)}let we=0;for(let qe=0;qe<oe;++qe){const Ce=ht[H.idx[qe]].type;for(let Hn=8*Xe;Hn<8*Xe+Te;++Hn){we=fe[qe][Hn];for(let ua=0;ua<ee;++ua){const Bn=ua*64+(Hn&7)*8;_e.setUint16(we+0*Ce,ue[qe][Bn+0],!0),_e.setUint16(we+2*Ce,ue[qe][Bn+1],!0),_e.setUint16(we+4*Ce,ue[qe][Bn+2],!0),_e.setUint16(we+6*Ce,ue[qe][Bn+3],!0),_e.setUint16(we+8*Ce,ue[qe][Bn+4],!0),_e.setUint16(we+10*Ce,ue[qe][Bn+5],!0),_e.setUint16(we+12*Ce,ue[qe][Bn+6],!0),_e.setUint16(we+14*Ce,ue[qe][Bn+7],!0),we+=16*Ce}}if(ee!=ge)for(let Hn=8*Xe;Hn<8*Xe+Te;++Hn){const ua=fe[qe][Hn]+8*ee*2*Ce,Bn=ee*64+(Hn&7)*8;for(let Di=0;Di<xe;++Di)_e.setUint16(ua+Di*2*Ce,ue[qe][Bn+Di],!0)}}}for(var Ve=new Uint16Array(pe),_e=new DataView(zt.buffer),Ie=0;Ie<oe;++Ie){ht[H.idx[Ie]].decoded=!0;var mn=ht[H.idx[Ie]].type;if(ht[Ie].type==2)for(var Vn=0;Vn<ie;++Vn){const Xe=fe[Ie][Vn];for(var gn=0;gn<pe;++gn)Ve[gn]=_e.getUint16(Xe+gn*2*mn,!0);for(var gn=0;gn<pe;++gn)_e.setFloat32(Xe+gn*2*mn,At(Ve[gn]),!0)}}}function ve(H,q,ht){for(var Nt,Ht=1;Ht<64;)Nt=q[H.value],Nt==65280?Ht=64:Nt>>8==255?Ht+=Nt&255:(ht[Ht]=Nt,Ht++),H.value++}function J(H,q){q[0]=At(H[0]),q[1]=At(H[1]),q[2]=At(H[5]),q[3]=At(H[6]),q[4]=At(H[14]),q[5]=At(H[15]),q[6]=At(H[27]),q[7]=At(H[28]),q[8]=At(H[2]),q[9]=At(H[4]),q[10]=At(H[7]),q[11]=At(H[13]),q[12]=At(H[16]),q[13]=At(H[26]),q[14]=At(H[29]),q[15]=At(H[42]),q[16]=At(H[3]),q[17]=At(H[8]),q[18]=At(H[12]),q[19]=At(H[17]),q[20]=At(H[25]),q[21]=At(H[30]),q[22]=At(H[41]),q[23]=At(H[43]),q[24]=At(H[9]),q[25]=At(H[11]),q[26]=At(H[18]),q[27]=At(H[24]),q[28]=At(H[31]),q[29]=At(H[40]),q[30]=At(H[44]),q[31]=At(H[53]),q[32]=At(H[10]),q[33]=At(H[19]),q[34]=At(H[23]),q[35]=At(H[32]),q[36]=At(H[39]),q[37]=At(H[45]),q[38]=At(H[52]),q[39]=At(H[54]),q[40]=At(H[20]),q[41]=At(H[22]),q[42]=At(H[33]),q[43]=At(H[38]),q[44]=At(H[46]),q[45]=At(H[51]),q[46]=At(H[55]),q[47]=At(H[60]),q[48]=At(H[21]),q[49]=At(H[34]),q[50]=At(H[37]),q[51]=At(H[47]),q[52]=At(H[50]),q[53]=At(H[56]),q[54]=At(H[59]),q[55]=At(H[61]),q[56]=At(H[35]),q[57]=At(H[36]),q[58]=At(H[48]),q[59]=At(H[49]),q[60]=At(H[57]),q[61]=At(H[58]),q[62]=At(H[62]),q[63]=At(H[63])}function Fe(H){const q=.5*Math.cos(.7853975),ht=.5*Math.cos(3.14159/16),Nt=.5*Math.cos(3.14159/8),Ht=.5*Math.cos(3*3.14159/16),zt=.5*Math.cos(5*3.14159/16),pe=.5*Math.cos(3*3.14159/8),ie=.5*Math.cos(7*3.14159/16);for(var oe=new Array(4),ee=new Array(4),ge=new Array(4),re=new Array(4),k=0;k<8;++k){var it=k*8;oe[0]=Nt*H[it+2],oe[1]=pe*H[it+2],oe[2]=Nt*H[it+6],oe[3]=pe*H[it+6],ee[0]=ht*H[it+1]+Ht*H[it+3]+zt*H[it+5]+ie*H[it+7],ee[1]=Ht*H[it+1]-ie*H[it+3]-ht*H[it+5]-zt*H[it+7],ee[2]=zt*H[it+1]-ht*H[it+3]+ie*H[it+5]+Ht*H[it+7],ee[3]=ie*H[it+1]-zt*H[it+3]+Ht*H[it+5]-ht*H[it+7],ge[0]=q*(H[it+0]+H[it+4]),ge[3]=q*(H[it+0]-H[it+4]),ge[1]=oe[0]+oe[3],ge[2]=oe[1]-oe[2],re[0]=ge[0]+ge[1],re[1]=ge[3]+ge[2],re[2]=ge[3]-ge[2],re[3]=ge[0]-ge[1],H[it+0]=re[0]+ee[0],H[it+1]=re[1]+ee[1],H[it+2]=re[2]+ee[2],H[it+3]=re[3]+ee[3],H[it+4]=re[3]-ee[3],H[it+5]=re[2]-ee[2],H[it+6]=re[1]-ee[1],H[it+7]=re[0]-ee[0]}for(var pt=0;pt<8;++pt)oe[0]=Nt*H[16+pt],oe[1]=pe*H[16+pt],oe[2]=Nt*H[48+pt],oe[3]=pe*H[48+pt],ee[0]=ht*H[8+pt]+Ht*H[24+pt]+zt*H[40+pt]+ie*H[56+pt],ee[1]=Ht*H[8+pt]-ie*H[24+pt]-ht*H[40+pt]-zt*H[56+pt],ee[2]=zt*H[8+pt]-ht*H[24+pt]+ie*H[40+pt]+Ht*H[56+pt],ee[3]=ie*H[8+pt]-zt*H[24+pt]+Ht*H[40+pt]-ht*H[56+pt],ge[0]=q*(H[pt]+H[32+pt]),ge[3]=q*(H[pt]-H[32+pt]),ge[1]=oe[0]+oe[3],ge[2]=oe[1]-oe[2],re[0]=ge[0]+ge[1],re[1]=ge[3]+ge[2],re[2]=ge[3]-ge[2],re[3]=ge[0]-ge[1],H[0+pt]=re[0]+ee[0],H[8+pt]=re[1]+ee[1],H[16+pt]=re[2]+ee[2],H[24+pt]=re[3]+ee[3],H[32+pt]=re[3]-ee[3],H[40+pt]=re[2]-ee[2],H[48+pt]=re[1]-ee[1],H[56+pt]=re[0]-ee[0]}function be(H){for(var q=0;q<64;++q){var ht=H[0][q],Nt=H[1][q],Ht=H[2][q];H[0][q]=ht+1.5747*Ht,H[1][q]=ht-.1873*Nt-.4682*Ht,H[2][q]=ht+1.8556*Nt}}function He(H,q,ht){for(var Nt=0;Nt<64;++Nt)q[ht+Nt]=ih.toHalfFloat(ye(H[Nt]))}function ye(H){return H<=1?Math.sign(H)*Math.pow(Math.abs(H),2.2):Math.sign(H)*Math.pow(N,Math.abs(H)-1)}function Q(H){return new DataView(H.array.buffer,H.offset.value,H.size)}function F(H){var q=H.viewer.buffer.slice(H.offset.value,H.offset.value+H.size),ht=new Uint8Array(se(q)),Nt=new Uint8Array(ht.length);return Oe(ht),Gt(ht,Nt),new DataView(Nt.buffer)}function gt(H){var q=H.array.slice(H.offset.value,H.offset.value+H.size),ht=Wy(q),Nt=new Uint8Array(ht.length);return Oe(ht),Gt(ht,Nt),new DataView(Nt.buffer)}function Bt(H){for(var q=H.viewer,ht={value:H.offset.value},Nt=new Uint16Array(H.width*H.scanlineBlockSize*(H.channels*H.type)),Ht=new Uint8Array(8192),zt=0,pe=new Array(H.channels),ie=0;ie<H.channels;ie++)pe[ie]={},pe[ie].start=zt,pe[ie].end=pe[ie].start,pe[ie].nx=H.width,pe[ie].ny=H.lines,pe[ie].size=H.type,zt+=pe[ie].nx*pe[ie].ny*pe[ie].size;var oe=Qt(q,ht),ee=Qt(q,ht);if(ee>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(oe<=ee)for(var ie=0;ie<ee-oe+1;ie++)Ht[ie+oe]=nt(q,ht);var ge=new Uint16Array(65536),re=I(Ht,ge),k=Kt(q,ht);ze(H.array,q,ht,k,Nt,zt);for(var ie=0;ie<H.channels;++ie)for(var it=pe[ie],pt=0;pt<pe[ie].size;++pt)Se(Nt,it.start+pt,it.nx,it.size,it.ny,it.nx*it.size,re);Qe(ge,Nt,zt);for(var yt=0,dt=new Uint8Array(Nt.buffer.byteLength),ae=0;ae<H.lines;ae++)for(var ue=0;ue<H.channels;ue++){var it=pe[ue],fe=it.nx*it.size,Te=new Uint8Array(Nt.buffer,it.end*2,fe*2);dt.set(Te,yt),yt+=fe*2,it.end+=fe}return new DataView(dt.buffer)}function qt(H){var q=H.array.slice(H.offset.value,H.offset.value+H.size),ht=Wy(q);const Nt=H.lines*H.channels*H.width,Ht=H.type==1?new Uint16Array(Nt):new Uint32Array(Nt);let zt=0,pe=0;const ie=new Array(4);for(let oe=0;oe<H.lines;oe++)for(let ee=0;ee<H.channels;ee++){let ge=0;switch(H.type){case 1:ie[0]=zt,ie[1]=ie[0]+H.width,zt=ie[1]+H.width;for(let re=0;re<H.width;++re){const k=ht[ie[0]++]<<8|ht[ie[1]++];ge+=k,Ht[pe]=ge,pe++}break;case 2:ie[0]=zt,ie[1]=ie[0]+H.width,ie[2]=ie[1]+H.width,zt=ie[2]+H.width;for(let re=0;re<H.width;++re){const k=ht[ie[0]++]<<24|ht[ie[1]++]<<16|ht[ie[2]++]<<8;ge+=k,Ht[pe]=ge,pe++}break}}return new DataView(Ht.buffer)}function Pt(H){var q=H.viewer,ht={value:H.offset.value},Nt=new Uint8Array(H.width*H.lines*(H.channels*H.type*2)),Ht={version:_t(q,ht),unknownUncompressedSize:_t(q,ht),unknownCompressedSize:_t(q,ht),acCompressedSize:_t(q,ht),dcCompressedSize:_t(q,ht),rleCompressedSize:_t(q,ht),rleUncompressedSize:_t(q,ht),rleRawSize:_t(q,ht),totalAcUncompressedCount:_t(q,ht),totalDcUncompressedCount:_t(q,ht),acCompression:_t(q,ht)};if(Ht.version<2)throw"EXRLoader.parse: "+va.compression+" version "+Ht.version+" is unsupported";for(var zt=new Array,pe=Qt(q,ht)-2;pe>0;){var ie=Le(q.buffer,ht),oe=nt(q,ht),ee=oe>>2&3,ge=(oe>>4)-1,re=new Int8Array([ge])[0],k=nt(q,ht);zt.push({name:ie,index:re,type:k,compression:ee}),pe-=ie.length+3}for(var it=va.channels,pt=new Array(H.channels),yt=0;yt<H.channels;++yt){var dt=pt[yt]={},ae=it[yt];dt.name=ae.name,dt.compression=0,dt.decoded=!1,dt.type=ae.pixelType,dt.pLinear=ae.pLinear,dt.width=H.width,dt.height=H.lines}for(var ue={idx:new Array(3)},fe=0;fe<H.channels;++fe)for(var dt=pt[fe],yt=0;yt<zt.length;++yt){var Te=zt[yt];dt.name==Te.name&&(dt.compression=Te.compression,Te.index>=0&&(ue.idx[Te.index]=fe),dt.offset=fe)}if(Ht.acCompressedSize>0)switch(Ht.acCompression){case 0:var _e=new Uint16Array(Ht.totalAcUncompressedCount);ze(H.array,q,ht,Ht.acCompressedSize,_e,Ht.totalAcUncompressedCount);break;case 1:var xe=H.array.slice(ht.value,ht.value+Ht.totalAcUncompressedCount),Ve=Wy(xe),_e=new Uint16Array(Ve.buffer);ht.value+=Ht.totalAcUncompressedCount;break}if(Ht.dcCompressedSize>0){var Ie={array:H.array,offset:ht,size:Ht.dcCompressedSize},mn=new Uint16Array(gt(Ie).buffer);ht.value+=Ht.dcCompressedSize}if(Ht.rleRawSize>0){var xe=H.array.slice(ht.value,ht.value+Ht.rleCompressedSize),Ve=Wy(xe),Vn=se(Ve.buffer);ht.value+=Ht.rleCompressedSize}for(var gn=0,Xe=new Array(pt.length),yt=0;yt<Xe.length;++yt)Xe[yt]=new Array;for(var we=0;we<H.lines;++we)for(var qe=0;qe<pt.length;++qe)Xe[qe].push(gn),gn+=pt[qe].width*H.type*2;Wt(ue,Xe,pt,_e,mn,Nt);for(var yt=0;yt<pt.length;++yt){var dt=pt[yt];if(!dt.decoded)switch(dt.compression){case 2:for(var Ce=0,Hn=0,we=0;we<H.lines;++we){for(var ua=Xe[yt][Ce],Bn=0;Bn<dt.width;++Bn){for(var Di=0;Di<2*dt.type;++Di)Nt[ua++]=Vn[Hn+Di*dt.width*dt.height];Hn++}Ce++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Nt.buffer)}function Le(H,q){for(var ht=new Uint8Array(H),Nt=0;ht[q.value+Nt]!=0;)Nt+=1;var Ht=new TextDecoder().decode(ht.slice(q.value,q.value+Nt));return q.value=q.value+Nt+1,Ht}function Me(H,q,ht){var Nt=new TextDecoder().decode(new Uint8Array(H).slice(q.value,q.value+ht));return q.value=q.value+ht,Nt}function Pe(H,q){var ht=Zt(H,q),Nt=Kt(H,q);return[ht,Nt]}function Ye(H,q){var ht=Kt(H,q),Nt=Kt(H,q);return[ht,Nt]}function Zt(H,q){var ht=H.getInt32(q.value,!0);return q.value=q.value+4,ht}function Kt(H,q){var ht=H.getUint32(q.value,!0);return q.value=q.value+4,ht}function De(H,q){var ht=H[q.value];return q.value=q.value+1,ht}function nt(H,q){var ht=H.getUint8(q.value);return q.value=q.value+1,ht}const _t=function(H,q){let ht;return"getBigInt64"in DataView.prototype?ht=Number(H.getBigInt64(q.value,!0)):ht=H.getUint32(q.value+4,!0)+Number(H.getUint32(q.value,!0)<<32),q.value+=8,ht};function te(H,q){var ht=H.getFloat32(q.value,!0);return q.value+=4,ht}function ot(H,q){return ih.toHalfFloat(te(H,q))}function At(H){var q=(H&31744)>>10,ht=H&1023;return(H>>15?-1:1)*(q?q===31?ht?NaN:1/0:Math.pow(2,q-15)*(1+ht/1024):6103515625e-14*(ht/1024))}function Qt(H,q){var ht=H.getUint16(q.value,!0);return q.value+=2,ht}function Ee(H,q){return At(Qt(H,q))}function ne(H,q,ht,Nt){for(var Ht=ht.value,zt=[];ht.value<Ht+Nt-1;){var pe=Le(q,ht),ie=Zt(H,ht),oe=nt(H,ht);ht.value+=3;var ee=Zt(H,ht),ge=Zt(H,ht);zt.push({name:pe,pixelType:ie,pLinear:oe,xSampling:ee,ySampling:ge})}return ht.value+=1,zt}function Yt(H,q){var ht=te(H,q),Nt=te(H,q),Ht=te(H,q),zt=te(H,q),pe=te(H,q),ie=te(H,q),oe=te(H,q),ee=te(H,q);return{redX:ht,redY:Nt,greenX:Ht,greenY:zt,blueX:pe,blueY:ie,whiteX:oe,whiteY:ee}}function ce(H,q){var ht=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Nt=nt(H,q);return ht[Nt]}function je(H,q){var ht=Kt(H,q),Nt=Kt(H,q),Ht=Kt(H,q),zt=Kt(H,q);return{xMin:ht,yMin:Nt,xMax:Ht,yMax:zt}}function pn(H,q){var ht=["INCREASING_Y"],Nt=nt(H,q);return ht[Nt]}function hn(H,q){var ht=te(H,q),Nt=te(H,q);return[ht,Nt]}function xi(H,q){var ht=te(H,q),Nt=te(H,q),Ht=te(H,q);return[ht,Nt,Ht]}function _i(H,q,ht,Nt,Ht){if(Nt==="string"||Nt==="stringvector"||Nt==="iccProfile")return Me(q,ht,Ht);if(Nt==="chlist")return ne(H,q,ht,Ht);if(Nt==="chromaticities")return Yt(H,ht);if(Nt==="compression")return ce(H,ht);if(Nt==="box2i")return je(H,ht);if(Nt==="lineOrder")return pn(H,ht);if(Nt==="float")return te(H,ht);if(Nt==="v2f")return hn(H,ht);if(Nt==="v3f")return xi(H,ht);if(Nt==="int")return Zt(H,ht);if(Nt==="rational")return Pe(H,ht);if(Nt==="timecode")return Ye(H,ht);if(Nt==="preview")return ht.value+=Ht,"skipped";ht.value+=Ht}function Nc(H,q,ht){const Nt={};if(H.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Nt.version=H.getUint8(4);const Ht=H.getUint8(5);Nt.spec={singleTile:!!(Ht&2),longName:!!(Ht&4),deepFormat:!!(Ht&8),multiPart:!!(Ht&16)},ht.value=8;for(var zt=!0;zt;){var pe=Le(q,ht);if(pe==0)zt=!1;else{var ie=Le(q,ht),oe=Kt(H,ht),ee=_i(H,q,ht,ie,oe);ee===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ie}'.`):Nt[pe]=ee}}if((Ht&-5)!=0)throw console.error("EXRHeader:",Nt),"THREE.EXRLoader: provided file is currently unsupported.";return Nt}function Qr(H,q,ht,Nt,Ht){const zt={size:0,viewer:q,array:ht,offset:Nt,width:H.dataWindow.xMax-H.dataWindow.xMin+1,height:H.dataWindow.yMax-H.dataWindow.yMin+1,channels:H.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:H.channels[0].pixelType,uncompress:null,getter:null,format:null,[a0?"colorSpace":"encoding"]:null};switch(H.compression){case"NO_COMPRESSION":zt.lines=1,zt.uncompress=Q;break;case"RLE_COMPRESSION":zt.lines=1,zt.uncompress=F;break;case"ZIPS_COMPRESSION":zt.lines=1,zt.uncompress=gt;break;case"ZIP_COMPRESSION":zt.lines=16,zt.uncompress=gt;break;case"PIZ_COMPRESSION":zt.lines=32,zt.uncompress=Bt;break;case"PXR24_COMPRESSION":zt.lines=16,zt.uncompress=qt;break;case"DWAA_COMPRESSION":zt.lines=32,zt.uncompress=Pt;break;case"DWAB_COMPRESSION":zt.lines=256,zt.uncompress=Pt;break;default:throw"EXRLoader.parse: "+H.compression+" is unsupported"}if(zt.scanlineBlockSize=zt.lines,zt.type==1)switch(Ht){case Mi:zt.getter=Ee,zt.inputSize=2;break;case pi:zt.getter=Qt,zt.inputSize=2;break}else if(zt.type==2)switch(Ht){case Mi:zt.getter=te,zt.inputSize=4;break;case pi:zt.getter=ot,zt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+zt.type+" for "+H.compression+".";zt.blockCount=(H.dataWindow.yMax+1)/zt.scanlineBlockSize;for(var pe=0;pe<zt.blockCount;pe++)_t(q,Nt);zt.outputChannels=zt.channels==3?4:zt.channels;const ie=zt.width*zt.height*zt.outputChannels;switch(Ht){case Mi:zt.byteArray=new Float32Array(ie),zt.channels<zt.outputChannels&&zt.byteArray.fill(1,0,ie);break;case pi:zt.byteArray=new Uint16Array(ie),zt.channels<zt.outputChannels&&zt.byteArray.fill(15360,0,ie);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ht);break}return zt.bytesPerLine=zt.width*zt.inputSize*zt.channels,zt.outputChannels==4?zt.format=ca:zt.format=rg,a0?zt.colorSpace="srgb-linear":zt.encoding=3e3,zt}const vs=new DataView(t),ys=new Uint8Array(t),Bs={value:0},va=Nc(vs,t,Bs),ke=Qr(va,vs,ys,Bs,this.type),ai={value:0},xn={R:0,G:1,B:2,A:3,Y:0};for(let H=0;H<ke.height/ke.scanlineBlockSize;H++){const q=Kt(vs,Bs);ke.size=Kt(vs,Bs),ke.lines=q+ke.scanlineBlockSize>ke.height?ke.height-q:ke.scanlineBlockSize;const Nt=ke.size<ke.lines*ke.bytesPerLine?ke.uncompress(ke):Q(ke);Bs.value+=ke.size;for(let Ht=0;Ht<ke.scanlineBlockSize;Ht++){const zt=Ht+H*ke.scanlineBlockSize;if(zt>=ke.height)break;for(let pe=0;pe<ke.channels;pe++){const ie=xn[va.channels[pe].name];for(let oe=0;oe<ke.width;oe++){ai.value=(Ht*(ke.channels*ke.width)+pe*ke.width+oe)*ke.inputSize;const ee=(ke.height-1-zt)*(ke.width*ke.outputChannels)+oe*ke.outputChannels+ie;ke.byteArray[ee]=ke.getter(Nt,ai)}}}}return{header:va,width:ke.width,height:ke.height,data:ke.byteArray,format:ke.format,[a0?"colorSpace":"encoding"]:ke[a0?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,e,n,a){function r(l,u){a0?l.colorSpace=u.colorSpace:l.encoding=u.encoding,l.minFilter=Nn,l.magFilter=Nn,l.generateMipmaps=!1,l.flipY=!1,e&&e(l,u)}return super.load(t,r,n,a)}}const Ik=()=>parseInt(Ap.replace(/\D+/g,"")),Bk=Ik();function zk(i,t,e){const n=oa(_=>_.size),a=oa(_=>_.viewport),r=typeof i=="number"?i:n.width*a.dpr,l=n.height*a.dpr,u=(typeof i=="number"?e:i)||{},{samples:d=0,depth:p,...g}=u,y=p??u.depthBuffer,x=Z.useMemo(()=>{const _=new ia(r,l,{minFilter:Nn,magFilter:Nn,type:pi,...g});return y&&(_.depthTexture=new ph(r,l,Mi)),_.samples=d,_},[]);return Z.useLayoutEffect(()=>{x.setSize(r,l),d&&(x.samples=d)},[d,x,r,l]),Z.useEffect(()=>()=>x.dispose(),[]),x}const Fk=i=>typeof i=="function",XN=Z.forwardRef(({envMap:i,resolution:t=256,frames:e=1/0,makeDefault:n,children:a,...r},l)=>{const u=oa(({set:T})=>T),d=oa(({camera:T})=>T),p=oa(({size:T})=>T),g=Z.useRef(null);Z.useImperativeHandle(l,()=>g.current,[]);const y=Z.useRef(null),x=zk(t);Z.useLayoutEffect(()=>{r.manual||(g.current.aspect=p.width/p.height)},[p,r]),Z.useLayoutEffect(()=>{g.current.updateProjectionMatrix()});let _=0,E=null;const C=Fk(a);return Kr(T=>{C&&(e===1/0||_<e)&&(y.current.visible=!1,T.gl.setRenderTarget(x),E=T.scene.background,i&&(T.scene.background=i),T.gl.render(T.scene,g.current),T.scene.background=E,T.gl.setRenderTarget(null),y.current.visible=!0,_++)}),Z.useLayoutEffect(()=>{if(n){const T=d;return u(()=>({camera:g.current})),()=>u(()=>({camera:T}))}},[g,n,u]),Z.createElement(Z.Fragment,null,Z.createElement("perspectiveCamera",vh({ref:g},r),!C&&a),Z.createElement("group",{ref:y},C&&a(x.texture)))}),YE=Z.forwardRef(({makeDefault:i,camera:t,regress:e,domElement:n,enableDamping:a=!0,keyEvents:r=!1,onChange:l,onStart:u,onEnd:d,...p},g)=>{const y=oa(B=>B.invalidate),x=oa(B=>B.camera),_=oa(B=>B.gl),E=oa(B=>B.events),C=oa(B=>B.setEvents),T=oa(B=>B.set),M=oa(B=>B.get),R=oa(B=>B.performance),D=t||x,L=n||E.connected||_.domElement,P=Z.useMemo(()=>new Nk(D),[D]);return Kr(()=>{P.enabled&&P.update()},-1),Z.useEffect(()=>(r&&P.connect(r===!0?L:r),P.connect(L),()=>void P.dispose()),[r,L,e,P,y]),Z.useEffect(()=>{const B=N=>{y(),e&&R.regress(),l&&l(N)},G=N=>{u&&u(N)},V=N=>{d&&d(N)};return P.addEventListener("change",B),P.addEventListener("start",G),P.addEventListener("end",V),()=>{P.removeEventListener("start",G),P.removeEventListener("end",V),P.removeEventListener("change",B)}},[l,u,d,P,y,C]),Z.useEffect(()=>{if(i){const B=M().controls;return T({controls:P}),()=>T({controls:B})}},[i,P]),Z.createElement("primitive",vh({ref:g,object:P,enableDamping:a},p))});var Vk=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class Hk extends $_{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.radius=this._radius,t.uniforms.distort=this._distort,t.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${Vk}
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(t){this._time.value=t}get distort(){return this._distort.value}set distort(t){this._distort.value=t}get radius(){return this._radius.value}set radius(t){this._radius.value=t}}const Gk=Z.forwardRef(({speed:i=1,...t},e)=>{const[n]=Z.useState(()=>new Hk);return Kr(a=>n&&(n.time=a.clock.elapsedTime*i)),Z.createElement("primitive",vh({object:n,ref:e,attach:"material"},t))}),YN=Z.forwardRef(({children:i,enabled:t=!0,speed:e=1,rotationIntensity:n=1,floatIntensity:a=1,floatingRange:r=[-.1,.1],autoInvalidate:l=!1,...u},d)=>{const p=Z.useRef(null);Z.useImperativeHandle(d,()=>p.current,[]);const g=Z.useRef(Math.random()*1e4);return Kr(y=>{var x,_;if(!t||e===0)return;l&&y.invalidate();const E=g.current+y.clock.elapsedTime;p.current.rotation.x=Math.cos(E/4*e)/8*n,p.current.rotation.y=Math.sin(E/4*e)/8*n,p.current.rotation.z=Math.sin(E/4*e)/20*n;let C=Math.sin(E/4*e)/10;C=D_.mapLinear(C,-.1,.1,(x=r==null?void 0:r[0])!==null&&x!==void 0?x:-.1,(_=r==null?void 0:r[1])!==null&&_!==void 0?_:.1),p.current.position.y=C*a,p.current.updateMatrix()}),Z.createElement("group",u,Z.createElement("group",{ref:p,matrixAutoUpdate:!1},i))}),qN=(i,t,e)=>{let n;switch(i){case za:n=new Uint8ClampedArray(t*e*4);break;case pi:n=new Uint16Array(t*e*4);break;case Mr:n=new Uint32Array(t*e*4);break;case S_:n=new Int8Array(t*e*4);break;case b_:n=new Int16Array(t*e*4);break;case sg:n=new Int32Array(t*e*4);break;case Mi:n=new Float32Array(t*e*4);break;default:throw new Error("Unsupported data type")}return n};let Ky;const jk=(i,t,e,n)=>{if(Ky!==void 0)return Ky;const a=new ia(1,1,n);t.setRenderTarget(a);const r=new Zn(new Dc,new Go({color:16777215}));t.render(r,e),t.setRenderTarget(null);const l=qN(i,a.width,a.height);return t.readRenderTargetPixels(a,0,0,a.width,a.height,l),a.dispose(),r.geometry.dispose(),r.material.dispose(),Ky=l[0]!==0,Ky};class qE{constructor(t){$i(this,"_renderer");$i(this,"_rendererIsDisposable",!1);$i(this,"_material");$i(this,"_scene");$i(this,"_camera");$i(this,"_quad");$i(this,"_renderTarget");$i(this,"_width");$i(this,"_height");$i(this,"_type");$i(this,"_colorSpace");$i(this,"_supportsReadPixels",!0);$i(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(t){throw this._renderer.setRenderTarget(null),t}this._renderer.setRenderTarget(null)});var n,a,r,l,u,d,p,g,y,x,_,E,C,T,M,R;this._width=t.width,this._height=t.height,this._type=t.type,this._colorSpace=t.colorSpace;const e={format:ca,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=t.renderTargetOptions)==null?void 0:n.anisotropy)!==void 0?(a=t.renderTargetOptions)==null?void 0:a.anisotropy:1,generateMipmaps:((r=t.renderTargetOptions)==null?void 0:r.generateMipmaps)!==void 0?(l=t.renderTargetOptions)==null?void 0:l.generateMipmaps:!1,magFilter:((u=t.renderTargetOptions)==null?void 0:u.magFilter)!==void 0?(d=t.renderTargetOptions)==null?void 0:d.magFilter:Nn,minFilter:((p=t.renderTargetOptions)==null?void 0:p.minFilter)!==void 0?(g=t.renderTargetOptions)==null?void 0:g.minFilter:Nn,samples:((y=t.renderTargetOptions)==null?void 0:y.samples)!==void 0?(x=t.renderTargetOptions)==null?void 0:x.samples:void 0,wrapS:((_=t.renderTargetOptions)==null?void 0:_.wrapS)!==void 0?(E=t.renderTargetOptions)==null?void 0:E.wrapS:na,wrapT:((C=t.renderTargetOptions)==null?void 0:C.wrapT)!==void 0?(T=t.renderTargetOptions)==null?void 0:T.wrapT:na};if(this._material=t.material,t.renderer?this._renderer=t.renderer:(this._renderer=qE.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Mh,this._camera=new Fo,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!jk(this._type,this._renderer,this._camera,e)){let D;switch(this._type){case pi:D=this._renderer.extensions.has("EXT_color_buffer_float")?Mi:void 0;break}D!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Mi}`),this._type=D):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Zn(new Dc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new ia(this.width,this.height,e),this._renderTarget.texture.mapping=((M=t.renderTargetOptions)==null?void 0:M.mapping)!==void 0?(R=t.renderTargetOptions)==null?void 0:R.mapping:zu}static instantiateRenderer(){const t=new yg;return t.setSize(128,128),t}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const t=qN(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,t),t}toDataTexture(t){const e=new Wr(this.toArray(),this.width,this.height,ca,this._type,(t==null?void 0:t.mapping)||zu,(t==null?void 0:t.wrapS)||na,(t==null?void 0:t.wrapT)||na,(t==null?void 0:t.magFilter)||Nn,(t==null?void 0:t.minFilter)||Nn,(t==null?void 0:t.anisotropy)||1,Ho);return e.generateMipmaps=(t==null?void 0:t.generateMipmaps)!==void 0?t==null?void 0:t.generateMipmaps:!1,e}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(t){this.disposeOnDemandRenderer(),t&&this.renderTarget.dispose(),this.material instanceof Ri&&Object.values(this.material.uniforms).forEach(e=>{e.value instanceof ci&&e.value.dispose()}),Object.values(this.material).forEach(e=>{e instanceof ci&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(t){this._width=t,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(t){this._height=t,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(t){this._renderTarget=t,this._width=t.width,this._height=t.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class WN extends Error{}class ZN extends Error{}const s0=(i,t,e)=>{const n=new RegExp(`${t}="([^"]*)"`,"i").exec(i);if(n)return n[1];const a=new RegExp(`<${t}[^>]*>([\\s\\S]*?)</${t}>`,"i").exec(i);if(a){const r=a[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(l=>l.replace(/<\/?rdf:li>/g,"")):a[1].trim()}if(e!==void 0)return e;throw new Error(`Can't find ${t} in gainmap metadata`)},kk=i=>{let t;typeof TextDecoder<"u"?t=new TextDecoder().decode(i):t=i.toString();let e=t.indexOf("<x:xmpmeta");for(;e!==-1;){const n=t.indexOf("x:xmpmeta>",e),a=t.slice(e,n+10);try{const r=s0(a,"hdrgm:GainMapMin","0"),l=s0(a,"hdrgm:GainMapMax"),u=s0(a,"hdrgm:Gamma","1"),d=s0(a,"hdrgm:OffsetSDR","0.015625"),p=s0(a,"hdrgm:OffsetHDR","0.015625"),g=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(a),y=g?g[1]:"0",x=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(a);if(!x)throw new Error("Incomplete gainmap metadata");const _=x[1];return{gainMapMin:Array.isArray(r)?r.map(E=>parseFloat(E)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(l)?l.map(E=>parseFloat(E)):[parseFloat(l),parseFloat(l),parseFloat(l)],gamma:Array.isArray(u)?u.map(E=>parseFloat(E)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetSdr:Array.isArray(d)?d.map(E=>parseFloat(E)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(E=>parseFloat(E)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(_)}}catch{}e=t.indexOf("<x:xmpmeta",n)}};class Xk{constructor(t){$i(this,"options");this.options={debug:t&&t.debug!==void 0?t.debug:!1,extractFII:t&&t.extractFII!==void 0?t.extractFII:!0,extractNonFII:t&&t.extractNonFII!==void 0?t.extractNonFII:!0}}extract(t){return new Promise((e,n)=>{const a=this.options.debug,r=new DataView(t.buffer);if(r.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const l=r.byteLength;let u=2,d=0,p;for(;u<l;){if(++d>250){n(new Error(`Found no marker after ${d} loops `));return}if(r.getUint8(u)!==255){n(new Error(`Not a valid marker at offset 0x${u.toString(16)}, found: 0x${r.getUint8(u).toString(16)}`));return}if(p=r.getUint8(u+1),a&&console.log(`Marker: ${p.toString(16)}`),p===226){a&&console.log("Found APP2 marker (0xffe2)");const g=u+4;if(r.getUint32(g)===1297106432){const y=g+4;let x;if(r.getUint16(y)===18761)x=!1;else if(r.getUint16(y)===19789)x=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(y+2,!x)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const _=r.getUint32(y+4,!x);if(_<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const E=y+_,C=r.getUint16(E,!x),T=E+2;let M=0;for(let P=T;P<T+12*C;P+=12)r.getUint16(P,!x)===45057&&(M=r.getUint32(P+8,!x));const D=E+2+C*12+4,L=[];for(let P=D;P<D+M*16;P+=16){const B={MPType:r.getUint32(P,!x),size:r.getUint32(P+4,!x),dataOffset:r.getUint32(P+8,!x),dependantImages:r.getUint32(P+12,!x),start:-1,end:-1,isFII:!1};B.dataOffset?(B.start=y+B.dataOffset,B.isFII=!1):(B.start=0,B.isFII=!0),B.end=B.start+B.size,L.push(B)}if(this.options.extractNonFII&&L.length){const P=new Blob([r]),B=[];for(const G of L){if(G.isFII&&!this.options.extractFII)continue;const V=P.slice(G.start,G.end+1,"image/jpeg");B.push(V)}e(B)}}}u+=2+r.getUint16(u+2)}})}}const Yk=async i=>{const t=kk(i);if(!t)throw new ZN("Gain map XMP metadata not found");const n=await new Xk({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new WN("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:t}},mC=i=>new Promise((t,e)=>{const n=document.createElement("img");n.onload=()=>{t(n)},n.onerror=a=>{e(a)},n.src=URL.createObjectURL(i)});class qk extends Is{constructor(e,n){super(n);$i(this,"_renderer");$i(this,"_renderTargetOptions");$i(this,"_internalLoadingManager");$i(this,"_config");this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new e1}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ci,sdr:new ci});return this._config.createQuadRenderer({width:16,height:16,type:pi,colorSpace:Ho,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,n,a){const r=n?new Blob([n],{type:"image/jpeg"}):void 0,l=new Blob([e],{type:"image/jpeg"});let u,d,p=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([r?mC(r):Promise.resolve(void 0),mC(l)]);d=g[0],u=g[1],p=a==="flipY"}else{const g=await Promise.all([r?createImageBitmap(r,{imageOrientation:a||"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:a||"flipY"})]);d=g[0],u=g[1]}return{sdrImage:u,gainMapImage:d,needsFlip:p}}createTextures(e,n,a){const r=new ci(n||new ImageData(2,2),zu,na,na,Nn,Wb,ca,za,1,Ho);r.flipY=a,r.needsUpdate=!0;const l=new ci(e,zu,na,na,Nn,Wb,ca,za,1,Ka);return l.flipY=a,l.needsUpdate=!0,{gainMap:r,sdr:l}}updateQuadRenderer(e,n,a,r,l){e.width=n.width,e.height=n.height,e.material.gainMap=a,e.material.sdr=r,e.material.gainMapMin=l.gainMapMin,e.material.gainMapMax=l.gainMapMax,e.material.offsetHdr=l.offsetHdr,e.material.offsetSdr=l.offsetSdr,e.material.gamma=l.gamma,e.material.hdrCapacityMin=l.hdrCapacityMin,e.material.hdrCapacityMax=l.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,l.hdrCapacityMax),e.material.needsUpdate=!0}}const Wk=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Zk=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Kk extends Ri{constructor({gamma:e,offsetHdr:n,offsetSdr:a,gainMapMin:r,gainMapMax:l,maxDisplayBoost:u,hdrCapacityMin:d,hdrCapacityMax:p,sdr:g,gainMap:y}){super({name:"GainMapDecoderMaterial",vertexShader:Wk,fragmentShader:Zk,uniforms:{sdr:{value:g},gainMap:{value:y},gamma:{value:new K(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new K().fromArray(n)},offsetSdr:{value:new K().fromArray(a)},gainMapMin:{value:new K().fromArray(r)},gainMapMax:{value:new K().fromArray(l)},weightFactor:{value:(Math.log2(u)-d)/(p-d)}},blending:Yr,depthTest:!1,depthWrite:!1});$i(this,"_maxDisplayBoost");$i(this,"_hdrCapacityMin");$i(this,"_hdrCapacityMax");this._maxDisplayBoost=u,this._hdrCapacityMin=d,this._hdrCapacityMax=p,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class KN extends qk{constructor(t,e){super({renderer:t,createMaterial:n=>new Kk(n),createQuadRenderer:n=>new qE(n)},e)}async render(t,e,n,a){const{sdrImage:r,gainMapImage:l,needsFlip:u}=await this.processImages(n,a,"flipY"),{gainMap:d,sdr:p}=this.createTextures(r,l,u);this.updateQuadRenderer(t,r,d,p,e),t.render()}}class Qk extends KN{load([t,e,n],a,r,l){const u=this.prepareQuadRenderer();let d,p,g;const y=async()=>{if(d&&p&&g){try{await this.render(u,g,d,p)}catch(N){this.manager.itemError(t),this.manager.itemError(e),this.manager.itemError(n),typeof l=="function"&&l(N),u.disposeOnDemandRenderer();return}typeof a=="function"&&a(u),this.manager.itemEnd(t),this.manager.itemEnd(e),this.manager.itemEnd(n),u.disposeOnDemandRenderer()}};let x=!0,_=0,E=0,C=!0,T=0,M=0,R=!0,D=0,L=0;const P=()=>{if(typeof r=="function"){const N=_+T+D,I=E+M+L,W=x&&C&&R;r(new ProgressEvent("progress",{lengthComputable:W,loaded:I,total:N}))}};this.manager.itemStart(t),this.manager.itemStart(e),this.manager.itemStart(n);const B=new br(this._internalLoadingManager);B.setResponseType("arraybuffer"),B.setRequestHeader(this.requestHeader),B.setPath(this.path),B.setWithCredentials(this.withCredentials),B.load(t,async N=>{if(typeof N=="string")throw new Error("Invalid sdr buffer");d=N,await y()},N=>{x=N.lengthComputable,E=N.loaded,_=N.total,P()},N=>{this.manager.itemError(t),typeof l=="function"&&l(N)});const G=new br(this._internalLoadingManager);G.setResponseType("arraybuffer"),G.setRequestHeader(this.requestHeader),G.setPath(this.path),G.setWithCredentials(this.withCredentials),G.load(e,async N=>{if(typeof N=="string")throw new Error("Invalid gainmap buffer");p=N,await y()},N=>{C=N.lengthComputable,M=N.loaded,T=N.total,P()},N=>{this.manager.itemError(e),typeof l=="function"&&l(N)});const V=new br(this._internalLoadingManager);return V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(n,async N=>{if(typeof N!="string")throw new Error("Invalid metadata string");g=JSON.parse(N),await y()},N=>{R=N.lengthComputable,L=N.loaded,D=N.total,P()},N=>{this.manager.itemError(n),typeof l=="function"&&l(N)}),u}}class Jk extends KN{load(t,e,n,a){const r=this.prepareQuadRenderer(),l=new br(this._internalLoadingManager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(this.withCredentials),this.manager.itemStart(t),l.load(t,async u=>{if(typeof u=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const d=new Uint8Array(u);let p,g,y;try{const x=await Yk(d);p=x.sdr,g=x.gainMap,y=x.metadata}catch(x){if(x instanceof ZN||x instanceof WN)console.warn(`Failure to reconstruct an HDR image from ${t}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),y={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},p=d;else throw x}try{await this.render(r,y,p.buffer,g==null?void 0:g.buffer)}catch(x){this.manager.itemError(t),typeof a=="function"&&a(x),r.disposeOnDemandRenderer();return}typeof e=="function"&&e(r),this.manager.itemEnd(t),r.disposeOnDemandRenderer()},n,u=>{this.manager.itemError(t),typeof a=="function"&&a(u)}),r}}const K0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},QN="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",ip=i=>Array.isArray(i),WE=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function o1({files:i=WE,path:t="",preset:e=void 0,colorSpace:n=void 0,extensions:a}={}){e&&(ZE(e),i=K0[e],t=QN);const r=ip(i),{extension:l,isCubemap:u}=KE(i),d=QE(l);if(!d)throw new Error("useEnvironment: Unrecognized file extension: "+i);const p=oa(_=>_.gl);Z.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function _(){xp.clear(d,r?[i]:i)}p.domElement.addEventListener("webglcontextlost",_,{once:!0})},[i,p.domElement]);const g=xp(d,r?[i]:i,_=>{(l==="webp"||l==="jpg"||l==="jpeg")&&_.setRenderer(p),_.setPath==null||_.setPath(t),a&&a(_)});let y=r?g[0]:g;if(l==="jpg"||l==="jpeg"||l==="webp"){var x;y=(x=y.renderTarget)==null?void 0:x.texture}return y.mapping=u?Vo:op,y.colorSpace=n??(u?"srgb":"srgb-linear"),y}const $k={files:WE,path:"",preset:void 0,extensions:void 0};o1.preload=i=>{const t={...$k,...i};let{files:e,path:n=""}=t;const{preset:a,extensions:r}=t;a&&(ZE(a),e=K0[a],n=QN);const{extension:l}=KE(e);if(l==="webp"||l==="jpg"||l==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const u=QE(l);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+e);xp.preload(u,ip(e)?[e]:e,d=>{d.setPath==null||d.setPath(n),r&&r(d)})};const t9={files:WE,preset:void 0};o1.clear=i=>{const t={...t9,...i};let{files:e}=t;const{preset:n}=t;n&&(ZE(n),e=K0[n]);const{extension:a}=KE(e),r=QE(a);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+e);xp.clear(r,ip(e)?[e]:e)};function ZE(i){if(!(i in K0))throw new Error("Preset must be one of: "+Object.keys(K0).join(", "))}function KE(i){var t;const e=ip(i)&&i.length===6,n=ip(i)&&i.length===3&&i.some(l=>l.endsWith("json")),a=ip(i)?i[0]:i;return{extension:e?"cube":n?"webp":a.startsWith("data:application/exr")?"exr":a.startsWith("data:application/hdr")?"hdr":a.startsWith("data:image/jpeg")?"jpg":(t=a.split(".").pop())==null||(t=t.split("?"))==null||(t=t.shift())==null?void 0:t.toLowerCase(),isCubemap:e,isGainmap:n}}function QE(i){return i==="cube"?JD:i==="hdr"?Lk:i==="exr"?Pk:i==="jpg"||i==="jpeg"?Jk:i==="webp"?Qk:null}const e9=i=>i.current&&i.current.isScene,n9=i=>e9(i)?i.current:i;function JE(i,t,e,n,a={}){var r,l,u,d;a={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...a};const p=n9(t||e),g=p.background,y=p.environment,x={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(r=(l=p.backgroundRotation)==null||l.clone==null?void 0:l.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(u=(d=p.environmentRotation)==null||d.clone==null?void 0:d.clone())!==null&&u!==void 0?u:[0,0,0]};return i!=="only"&&(p.environment=n),i&&(p.background=n),Nl(p,a),()=>{i!=="only"&&(p.environment=y),i&&(p.background=g),Nl(p,x)}}function $E({scene:i,background:t=!1,map:e,...n}){const a=oa(r=>r.scene);return Z.useLayoutEffect(()=>{if(e)return JE(t,i,a,e,n)}),null}function JN({background:i=!1,scene:t,blur:e,backgroundBlurriness:n,backgroundIntensity:a,backgroundRotation:r,environmentIntensity:l,environmentRotation:u,...d}){const p=o1(d),g=oa(y=>y.scene);return Z.useLayoutEffect(()=>JE(i,t,g,p,{backgroundBlurriness:e??n,backgroundIntensity:a,backgroundRotation:r,environmentIntensity:l,environmentRotation:u})),Z.useEffect(()=>()=>{p.dispose()},[p]),null}function i9({children:i,near:t=.1,far:e=1e3,resolution:n=256,frames:a=1,map:r,background:l=!1,blur:u,backgroundBlurriness:d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:x,scene:_,files:E,path:C,preset:T=void 0,extensions:M}){const R=oa(V=>V.gl),D=oa(V=>V.scene),L=Z.useRef(null),[P]=Z.useState(()=>new Mh),B=Z.useMemo(()=>{const V=new L_(n);return V.texture.type=pi,V},[n]);Z.useEffect(()=>()=>{B.dispose()},[B]),Z.useLayoutEffect(()=>{if(a===1){const V=R.autoClear;R.autoClear=!0,L.current.update(R,P),R.autoClear=V}return JE(l,_,D,B.texture,{backgroundBlurriness:u??d,backgroundIntensity:p,backgroundRotation:g,environmentIntensity:y,environmentRotation:x})},[i,P,B.texture,_,D,l,a,R]);let G=1;return Kr(()=>{if(a===1/0||G<a){const V=R.autoClear;R.autoClear=!0,L.current.update(R,P),R.autoClear=V,G++}}),Z.createElement(Z.Fragment,null,Qj(Z.createElement(Z.Fragment,null,i,Z.createElement("cubeCamera",{ref:L,args:[t,e,B]}),E||T?Z.createElement(JN,{background:!0,files:E,preset:T,path:C,extensions:M}):r?Z.createElement($E,{background:!0,map:r,extensions:M}):null),P))}function a9(i){var t,e,n,a;const r=o1(i),l=i.map||r;Z.useMemo(()=>NN({GroundProjectedEnvImpl:Mk}),[]),Z.useEffect(()=>()=>{r.dispose()},[r]);const u=Z.useMemo(()=>[l],[l]),d=(t=i.ground)==null?void 0:t.height,p=(e=i.ground)==null?void 0:e.radius,g=(n=(a=i.ground)==null?void 0:a.scale)!==null&&n!==void 0?n:1e3;return Z.createElement(Z.Fragment,null,Z.createElement($E,vh({},i,{map:l})),Z.createElement("groundProjectedEnvImpl",{args:u,scale:g,height:d,radius:p}))}function tT(i){return i.ground?Z.createElement(a9,i):i.map?Z.createElement($E,i):i.children?Z.createElement(i9,i):Z.createElement(JN,i)}const s9=Z.forwardRef(({scale:i=10,frames:t=1/0,opacity:e=1,width:n=1,height:a=1,blur:r=1,near:l=0,far:u=10,resolution:d=512,smooth:p=!0,color:g="#000000",depthWrite:y=!1,renderOrder:x,..._},E)=>{const C=Z.useRef(null),T=oa(rt=>rt.scene),M=oa(rt=>rt.gl),R=Z.useRef(null);n=n*(Array.isArray(i)?i[0]:i||1),a=a*(Array.isArray(i)?i[1]:i||1);const[D,L,P,B,G,V,N]=Z.useMemo(()=>{const rt=new ia(d,d),mt=new ia(d,d);mt.texture.generateMipmaps=rt.texture.generateMipmaps=!1;const $=new Dc(n,a).rotateX(Math.PI/2),et=new Zn($),vt=new t1;vt.depthTest=vt.depthWrite=!1,vt.onBeforeCompile=st=>{st.uniforms={...st.uniforms,ucolor:{value:new Ae(g)}},st.fragmentShader=st.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),st.fragmentShader=st.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const ut=new Ri(Uk),j=new Ri(Ok);return j.depthTest=ut.depthTest=!1,[rt,$,vt,et,ut,j,mt]},[d,n,a,i,g]),I=rt=>{B.visible=!0,B.material=G,G.uniforms.tDiffuse.value=D.texture,G.uniforms.h.value=rt*1/256,M.setRenderTarget(N),M.render(B,R.current),B.material=V,V.uniforms.tDiffuse.value=N.texture,V.uniforms.v.value=rt*1/256,M.setRenderTarget(D),M.render(B,R.current),B.visible=!1};let W=0,lt,tt;return Kr(()=>{R.current&&(t===1/0||W<t)&&(W++,lt=T.background,tt=T.overrideMaterial,C.current.visible=!1,T.background=null,T.overrideMaterial=P,M.setRenderTarget(D),M.render(T,R.current),I(r),p&&I(r*.4),M.setRenderTarget(null),C.current.visible=!0,T.overrideMaterial=tt,T.background=lt)}),Z.useImperativeHandle(E,()=>C.current,[]),Z.createElement("group",vh({"rotation-x":Math.PI/2},_,{ref:C}),Z.createElement("mesh",{renderOrder:x,geometry:L,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},Z.createElement("meshBasicMaterial",{transparent:!0,map:D.texture,opacity:e,depthWrite:y})),Z.createElement("orthographicCamera",{ref:R,args:[-n/2,n/2,a/2,-a/2,l,u]}))});class r9 extends Ri{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${Bk>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const o9=i=>new K().setFromSpherical(new yp(i,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),l9=Z.forwardRef(({radius:i=100,depth:t=50,count:e=5e3,saturation:n=0,factor:a=4,fade:r=!1,speed:l=1},u)=>{const d=Z.useRef(null),[p,g,y]=Z.useMemo(()=>{const _=[],E=[],C=Array.from({length:e},()=>(.5+.5*Math.random())*a),T=new Ae;let M=i+t;const R=t/e;for(let D=0;D<e;D++)M-=R*Math.random(),_.push(...o9(M).toArray()),T.setHSL(D/e,n,.9),E.push(T.r,T.g,T.b);return[new Float32Array(_),new Float32Array(E),new Float32Array(C)]},[e,t,a,i,n]);Kr(_=>d.current&&(d.current.uniforms.time.value=_.clock.elapsedTime*l));const[x]=Z.useState(()=>new r9);return Z.createElement("points",{ref:u},Z.createElement("bufferGeometry",null,Z.createElement("bufferAttribute",{attach:"attributes-position",args:[p,3]}),Z.createElement("bufferAttribute",{attach:"attributes-color",args:[g,3]}),Z.createElement("bufferAttribute",{attach:"attributes-size",args:[y,1]})),Z.createElement("primitive",{ref:d,object:x,attach:"material",blending:Ul,"uniforms-fade-value":r,depthWrite:!1,transparent:!0,vertexColors:!0}))});function gC(i){const t=Z.useRef(null),[e,n]=Z.useState(!1),[a,r]=Z.useState(!1);return Kr((l,u)=>{t.current&&(t.current.rotation.x+=u*.4,t.current.rotation.y+=u*.3)}),O.jsx(YN,{speed:2,rotationIntensity:.5,floatIntensity:.5,children:O.jsxs("mesh",{...i,ref:t,scale:a?1.3:1,onClick:l=>{l.stopPropagation(),r(!a)},onPointerOver:l=>{l.stopPropagation(),n(!0),document.body.style.cursor="pointer"},onPointerOut:l=>{n(!1),document.body.style.cursor="auto"},children:[O.jsx("torusKnotGeometry",{args:[.5,.18,128,32]}),O.jsx("meshPhysicalMaterial",{color:e?"#fda4af":"#a5b4fc",roughness:.2,metalness:.1,clearcoat:.8,clearcoatRoughness:.2,reflectivity:.5})]})})}const c9=()=>O.jsx("div",{className:"w-full h-full",children:O.jsxs(XE,{shadows:!0,gl:{alpha:!0},children:[O.jsx(XN,{makeDefault:!0,position:[0,0,6],fov:45}),O.jsx("ambientLight",{intensity:1.5}),O.jsx("spotLight",{position:[10,10,10],angle:.3,penumbra:1,intensity:1.2,color:"#fff1f2",castShadow:!0}),O.jsx("pointLight",{position:[-10,-5,-10],intensity:.8,color:"#e0f2fe"}),O.jsx(tT,{preset:"city"}),O.jsxs("group",{position:[0,0,0],children:[O.jsx(gC,{position:[-1.8,0,0]}),O.jsx(gC,{position:[1.8,0,0]})]}),O.jsx(s9,{position:[0,-2,0],opacity:.3,scale:12,blur:2,far:4,color:"#888888"}),O.jsx(YE,{enablePan:!1,minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/1.5,enableZoom:!0,minDistance:3,maxDistance:10})]})}),u9=()=>(Ls(),Z.useEffect(()=>{window.scrollTo(0,0)},[]),O.jsxs("div",{className:"relative w-full h-screen pt-20 bg-gradient-to-br from-rose-50 via-white to-blue-50 text-slate-700 overflow-hidden flex flex-col",children:[O.jsx(Fl,{}),O.jsx("header",{className:"absolute top-0 left-0 w-full p-8 mt-40 z-10 pointer-events-none",children:O.jsx("div",{className:"max-w-4xl mx-auto flex flex-col items-center text-center gap-3",children:O.jsx("h1",{className:"text-5xl tracking-tight text-slate-800 drop-shadow-sm font-serif italic",children:"Dreamy Shapes"})})}),O.jsx("main",{className:"flex-grow w-full h-full relative z-0",children:O.jsx(c9,{})}),O.jsx("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 z-10 pointer-events-none",children:O.jsx("div",{className:"bg-white/60 backdrop-blur-md border border-white/60 px-6 py-3 rounded-2xl shadow-lg shadow-slate-200/50",children:O.jsxs("p",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[O.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-400 animate-pulse"}),"Click to expand  Hover to interact  Drag to rotate"]})})})]})),f9=({color:i,scale:t,speed:e,offset:n})=>{const a=Z.useRef(null),r=Z.useRef(null),l=Z.useRef(null),u=Z.useMemo(()=>.8+Math.random()*.4,[]);return Kr(d=>{if(!a.current)return;const p=d.clock.getElapsedTime()*e+n,g=Math.sin(p*2.5)*.4+.6;a.current.scale.setScalar(t*g),l.current&&(l.current.rotation.z=p*.1)}),O.jsxs("group",{ref:a,children:[O.jsxs("mesh",{ref:r,children:[O.jsx("sphereGeometry",{args:[.08,16,16]}),O.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:.9,blending:Ul})]}),O.jsxs("mesh",{scale:[2.5,2.5,2.5],children:[O.jsx("sphereGeometry",{args:[.08,16,16]}),O.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:.2,blending:Ul})]}),O.jsxs("group",{ref:l,children:[O.jsxs("mesh",{children:[O.jsx("planeGeometry",{args:[1.2*u,.015]}),O.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:.4,blending:Ul,side:Ns})]}),O.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[O.jsx("planeGeometry",{args:[1.2/u,.015]}),O.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:.4,blending:Ul,side:Ns})]})]})]})},h9=({count:i=60})=>{const t=Z.useRef(null),e=["#ffffff","#e0e0e0","#b3e5fc","#f5f5f5","#d1d9ff","#ffffff"],n=Z.useMemo(()=>Array.from({length:i}).map((r,l)=>({color:e[l%e.length],scale:.05+Math.random()*.35,speed:.3+Math.random()*1.2,offset:Math.random()*1e3,orbitRadius:5+Math.random()*10,orbitSpeed:.01+Math.random()*.03,yOffset:(Math.random()-.5)*12,phase:Math.random()*Math.PI*2})),[i]),a=Z.useRef([]);return Kr(r=>{const l=r.clock.getElapsedTime();n.forEach((u,d)=>{const p=a.current[d];if(p){const g=l*u.orbitSpeed+u.phase;p.position.x=Math.cos(g)*u.orbitRadius+Math.sin(l*.15+u.offset)*3,p.position.z=Math.sin(g)*u.orbitRadius+Math.cos(l*.15+u.offset)*3,p.position.y=u.yOffset+Math.sin(l*.25+u.offset)*2,p.quaternion.copy(r.camera.quaternion)}})}),O.jsx("group",{ref:t,children:n.map((r,l)=>O.jsx("group",{ref:u=>a.current[l]=u,children:O.jsx(f9,{...r})},l))})},d9=()=>{const i=Z.useRef(null),t=Z.useRef(null);Kr(n=>{const a=n.clock.getElapsedTime();i.current&&(i.current.rotation.y=a*.04),t.current&&(t.current.rotation.y=a*.01)});const e=Z.useMemo(()=>[{inner:1.4,outer:1.8,opacity:.3,color:"#ffffff"},{inner:1.82,outer:2.1,opacity:.5,color:"#f0f0f0"},{inner:2.12,outer:2.2,opacity:.1,color:"#e0e0e0"},{inner:2.24,outer:2.7,opacity:.25,color:"#ffffff"}],[]);return O.jsxs("group",{children:[O.jsx(l9,{radius:150,depth:50,count:3e3,factor:1.5,saturation:0,fade:!0,speed:.5}),O.jsx(h9,{count:60}),O.jsxs(YN,{speed:1,rotationIntensity:.1,floatIntensity:.3,children:[O.jsxs("mesh",{ref:i,children:[O.jsx("sphereGeometry",{args:[1,64,64]}),O.jsx(Gk,{color:"#ffffff",roughness:.05,metalness:.9,distort:.02,speed:1.2,emissive:"#111111",emissiveIntensity:.4})]}),O.jsxs("mesh",{scale:[1.1,1.1,1.1],children:[O.jsx("sphereGeometry",{args:[1,32,32]}),O.jsx("meshStandardMaterial",{color:"#ffffff",transparent:!0,opacity:.08,side:ps})]}),O.jsx("group",{ref:t,rotation:[Math.PI/2.5,0,0],children:e.map((n,a)=>O.jsxs("mesh",{children:[O.jsx("ringGeometry",{args:[n.inner,n.outer,128]}),O.jsx("meshStandardMaterial",{color:n.color,transparent:!0,opacity:n.opacity,side:Ns,metalness:.8,roughness:.1,blending:Ul})]},a))})]}),O.jsx("ambientLight",{intensity:.3}),O.jsx("directionalLight",{position:[10,10,10],intensity:2,color:"#ffffff"}),O.jsx("pointLight",{position:[-10,-5,-10],intensity:1.2,color:"#ffffff"})]})},p9=()=>null,m9=()=>(Ls(),O.jsxs("div",{className:"w-full h-screen bg-[#000000] relative overflow-hidden",children:[O.jsx(Fl,{}),O.jsxs(XE,{dpr:[1,2],gl:{antialias:!0},children:[O.jsx(XN,{makeDefault:!0,position:[0,0,9],fov:40}),O.jsx(YE,{enablePan:!1,minDistance:3,maxDistance:15,autoRotate:!0,autoRotateSpeed:.2,maxPolarAngle:Math.PI/1.6,minPolarAngle:Math.PI/3}),O.jsx("color",{attach:"background",args:["#000000"]}),O.jsxs(Bl.Suspense,{fallback:null,children:[O.jsx(tT,{preset:"night"}),O.jsx(d9,{})]})]}),O.jsx(p9,{}),O.jsx("div",{className:"absolute inset-0 pointer-events-none",children:O.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.02)_0%,transparent_70%)]"})})]})),vC={type:"change"},eT={type:"start"},$N={type:"end"},Qy=new ku,yC=new Rl,g9=Math.cos(70*D_.DEG2RAD),ba=new K,$s=2*Math.PI,li={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},gb=1e-6;class tU extends uN{constructor(t,e=null){super(t,e),this.state=li.NONE,this.target=new K,this.cursor=new K,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:yr.ROTATE,MIDDLE:yr.DOLLY,RIGHT:yr.PAN},this.touches={ONE:xr.ROTATE,TWO:xr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new K,this._lastQuaternion=new Fa,this._lastTargetPosition=new K,this._quat=new Fa().setFromUnitVectors(t.up,new K(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new yp,this._sphericalDelta=new yp,this._scale=1,this._panOffset=new K,this._rotateStart=new It,this._rotateEnd=new It,this._rotateDelta=new It,this._panStart=new It,this._panEnd=new It,this._panDelta=new It,this._dollyStart=new It,this._dollyEnd=new It,this._dollyDelta=new It,this._dollyDirection=new K,this._mouse=new It,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=y9.bind(this),this._onPointerDown=v9.bind(this),this._onPointerUp=x9.bind(this),this._onContextMenu=A9.bind(this),this._onMouseWheel=b9.bind(this),this._onKeyDown=M9.bind(this),this._onTouchStart=E9.bind(this),this._onTouchMove=T9.bind(this),this._onMouseDown=_9.bind(this),this._onMouseMove=S9.bind(this),this._interceptControlDown=w9.bind(this),this._interceptControlUp=C9.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(vC),this.update(),this.state=li.NONE}update(t=null){const e=this.object.position;ba.copy(e).sub(this.target),ba.applyQuaternion(this._quat),this._spherical.setFromVector3(ba),this.autoRotate&&this.state===li.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(n)&&isFinite(a)&&(n<-Math.PI?n+=$s:n>Math.PI&&(n-=$s),a<-Math.PI?a+=$s:a>Math.PI&&(a-=$s),n<=a?this._spherical.theta=Math.max(n,Math.min(a,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+a)/2?Math.max(n,this._spherical.theta):Math.min(a,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const l=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=l!=this._spherical.radius}if(ba.setFromSpherical(this._spherical),ba.applyQuaternion(this._quatInverse),e.copy(this.target).add(ba),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let l=null;if(this.object.isPerspectiveCamera){const u=ba.length();l=this._clampDistance(u*this._scale);const d=u-l;this.object.position.addScaledVector(this._dollyDirection,d),this.object.updateMatrixWorld(),r=!!d}else if(this.object.isOrthographicCamera){const u=new K(this._mouse.x,this._mouse.y,0);u.unproject(this.object);const d=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=d!==this.object.zoom;const p=new K(this._mouse.x,this._mouse.y,0);p.unproject(this.object),this.object.position.sub(p).add(u),this.object.updateMatrixWorld(),l=ba.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;l!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(l).add(this.object.position):(Qy.origin.copy(this.object.position),Qy.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Qy.direction))<g9?this.object.lookAt(this.target):(yC.setFromNormalAndCoplanarPoint(this.object.up,this.target),Qy.intersectPlane(yC,this.target))))}else if(this.object.isOrthographicCamera){const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),l!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,r||this._lastPosition.distanceToSquared(this.object.position)>gb||8*(1-this._lastQuaternion.dot(this.object.quaternion))>gb||this._lastTargetPosition.distanceToSquared(this.target)>gb?(this.dispatchEvent(vC),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?$s/60*this.autoRotateSpeed*t:$s/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){ba.setFromMatrixColumn(e,0),ba.multiplyScalar(-t),this._panOffset.add(ba)}_panUp(t,e){this.screenSpacePanning===!0?ba.setFromMatrixColumn(e,1):(ba.setFromMatrixColumn(e,0),ba.crossVectors(this.object.up,ba)),ba.multiplyScalar(t),this._panOffset.add(ba)}_pan(t,e){const n=this.domElement;if(this.object.isPerspectiveCamera){const a=this.object.position;ba.copy(a).sub(this.target);let r=ba.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*r/n.clientHeight,this.object.matrix),this._panUp(2*e*r/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),a=t-n.left,r=e-n.top,l=n.width,u=n.height;this._mouse.x=a/l*2-1,this._mouse.y=-(r/u)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft($s*this._rotateDelta.x/e.clientHeight),this._rotateUp($s*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp($s*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-$s*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft($s*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-$s*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),a=.5*(t.pageY+e.y);this._rotateStart.set(n,a)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),a=.5*(t.pageY+e.y);this._panStart.set(n,a)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,a=t.pageY-e.y,r=Math.sqrt(n*n+a*a);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{const n=this._getSecondPointerPosition(t),a=.5*(t.pageX+n.x),r=.5*(t.pageY+n.y);this._rotateEnd.set(a,r)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft($s*this._rotateDelta.x/e.clientHeight),this._rotateUp($s*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),a=.5*(t.pageY+e.y);this._panEnd.set(n,a)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),n=t.pageX-e.x,a=t.pageY-e.y,r=Math.sqrt(n*n+a*a);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const l=(t.pageX+e.x)*.5,u=(t.pageY+e.y)*.5;this._updateZoomParameters(l,u)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new It,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,n={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function v9(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function y9(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function x9(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent($N),this.state=li.NONE;break;case 1:const t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function _9(i){let t;switch(i.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case yr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=li.DOLLY;break;case yr.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=li.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=li.ROTATE}break;case yr.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=li.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=li.PAN}break;default:this.state=li.NONE}this.state!==li.NONE&&this.dispatchEvent(eT)}function S9(i){switch(this.state){case li.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case li.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case li.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function b9(i){this.enabled===!1||this.enableZoom===!1||this.state!==li.NONE||(i.preventDefault(),this.dispatchEvent(eT),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent($N))}function M9(i){this.enabled!==!1&&this._handleKeyDown(i)}function E9(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case xr.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=li.TOUCH_ROTATE;break;case xr.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=li.TOUCH_PAN;break;default:this.state=li.NONE}break;case 2:switch(this.touches.TWO){case xr.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=li.TOUCH_DOLLY_PAN;break;case xr.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=li.TOUCH_DOLLY_ROTATE;break;default:this.state=li.NONE}break;default:this.state=li.NONE}this.state!==li.NONE&&this.dispatchEvent(eT)}function T9(i){switch(this._trackPointer(i),this.state){case li.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case li.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case li.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case li.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=li.NONE}}function A9(i){this.enabled!==!1&&i.preventDefault()}function w9(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function C9(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const ox={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Sg{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const R9=new Fo(-1,1,1,-1,0,1);class D9 extends ln{constructor(){super(),this.setAttribute("position",new Be([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Be([0,2,0,0,2,0],2))}}const N9=new D9;class eU{constructor(t){this._mesh=new Zn(N9,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,R9)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class U9 extends Sg{constructor(t,e="tDiffuse"){super(),this.textureID=e,this.uniforms=null,this.material=null,t instanceof Ri?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=H0.clone(t.uniforms),this.material=new Ri({name:t.name!==void 0?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this._fsQuad=new eU(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this._fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this._fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this._fsQuad.render(t))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class xC extends Sg{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const a=t.getContext(),r=t.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let l,u;this.inverse?(l=0,u=1):(l=1,u=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),r.buffers.stencil.setFunc(a.ALWAYS,l,4294967295),r.buffers.stencil.setClear(u),r.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(a.EQUAL,1,4294967295),r.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),r.buffers.stencil.setLocked(!0)}}class O9 extends Sg{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class L9{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),e===void 0){const n=t.getSize(new It);this._width=n.width,this._height=n.height,e=new ia(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:pi}),e.texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new U9(ox),this.copyPass.material.blending=Yr,this.clock=new Rp}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);e!==-1&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let a=0,r=this.passes.length;a<r;a++){const l=this.passes[a];if(l.enabled!==!1){if(l.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),l.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),l.needsSwap){if(n){const u=this.renderer.getContext(),d=this.renderer.state.buffers.stencil;d.setFunc(u.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),d.setFunc(u.EQUAL,1,4294967295)}this.swapBuffers()}xC!==void 0&&(l instanceof xC?n=!0:l instanceof O9&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(t===void 0){const e=this.renderer.getSize(new It);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,a=this._height*this._pixelRatio;this.renderTarget1.setSize(n,a),this.renderTarget2.setSize(n,a);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(n,a)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class P9 extends Sg{constructor(t,e,n=null,a=null,r=null){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=a,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this.isRenderPass=!0,this._oldClearColor=new Ae}render(t,e,n){const a=t.autoClear;t.autoClear=!1;let r,l;this.overrideMaterial!==null&&(l=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor,t.getClearAlpha())),this.clearAlpha!==null&&(r=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor!==null&&t.setClearColor(this._oldClearColor),this.clearAlpha!==null&&t.setClearAlpha(r),this.overrideMaterial!==null&&(this.scene.overrideMaterial=l),t.autoClear=a}}const I9={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Ae(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Sp extends Sg{constructor(t,e=1,n,a){super(),this.strength=e,this.radius=n,this.threshold=a,this.resolution=t!==void 0?new It(t.x,t.y):new It(256,256),this.clearColor=new Ae(0,0,0),this.needsSwap=!1,this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new ia(r,l,{type:pi}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let g=0;g<this.nMips;g++){const y=new ia(r,l,{type:pi});y.texture.name="UnrealBloomPass.h"+g,y.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(y);const x=new ia(r,l,{type:pi});x.texture.name="UnrealBloomPass.v"+g,x.texture.generateMipmaps=!1,this.renderTargetsVertical.push(x),r=Math.round(r/2),l=Math.round(l/2)}const u=I9;this.highPassUniforms=H0.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=a,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Ri({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.separableBlurMaterials=[];const d=[6,10,14,18,22];r=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let g=0;g<this.nMips;g++)this.separableBlurMaterials.push(this._getSeparableBlurMaterial(d[g])),this.separableBlurMaterials[g].uniforms.invSize.value=new It(1/r,1/l),r=Math.round(r/2),l=Math.round(l/2);this.compositeMaterial=this._getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1;const p=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=p,this.bloomTintColors=[new K(1,1,1),new K(1,1,1),new K(1,1,1),new K(1,1,1),new K(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,this.copyUniforms=H0.clone(ox.uniforms),this.blendMaterial=new Ri({uniforms:this.copyUniforms,vertexShader:ox.vertexShader,fragmentShader:ox.fragmentShader,premultipliedAlpha:!0,blending:Ul,depthTest:!1,depthWrite:!1,transparent:!0}),this._oldClearColor=new Ae,this._oldClearAlpha=1,this._basic=new Go,this._fsQuad=new eU(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this._basic.dispose(),this._fsQuad.dispose()}setSize(t,e){let n=Math.round(t/2),a=Math.round(e/2);this.renderTargetBright.setSize(n,a);for(let r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,a),this.renderTargetsVertical[r].setSize(n,a),this.separableBlurMaterials[r].uniforms.invSize.value=new It(1/n,1/a),n=Math.round(n/2),a=Math.round(a/2)}render(t,e,n,a,r){t.getClearColor(this._oldClearColor),this._oldClearAlpha=t.getClearAlpha();const l=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),r&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this._fsQuad.material=this._basic,this._basic.map=n.texture,t.setRenderTarget(null),t.clear(),this._fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this._fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this._fsQuad.render(t);let u=this.renderTargetBright;for(let d=0;d<this.nMips;d++)this._fsQuad.material=this.separableBlurMaterials[d],this.separableBlurMaterials[d].uniforms.colorTexture.value=u.texture,this.separableBlurMaterials[d].uniforms.direction.value=Sp.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[d]),t.clear(),this._fsQuad.render(t),this.separableBlurMaterials[d].uniforms.colorTexture.value=this.renderTargetsHorizontal[d].texture,this.separableBlurMaterials[d].uniforms.direction.value=Sp.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[d]),t.clear(),this._fsQuad.render(t),u=this.renderTargetsVertical[d];this._fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this._fsQuad.render(t),this._fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this._fsQuad.render(t)):(t.setRenderTarget(n),this._fsQuad.render(t)),t.setClearColor(this._oldClearColor,this._oldClearAlpha),t.autoClear=l}_getSeparableBlurMaterial(t){const e=[],n=t/3;for(let a=0;a<t;a++)e.push(.39894*Math.exp(-.5*a*a/(n*n))/n);return new Ri({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new It(.5,.5)},direction:{value:new It(.5,.5)},gaussianCoefficients:{value:e}},vertexShader:`

				varying vec2 vUv;

				void main() {

					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

				}`,fragmentShader:`

				#include <common>

				varying vec2 vUv;

				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {

					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;

					for ( int i = 1; i < KERNEL_RADIUS; i ++ ) {

						float x = float( i );
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += ( sample1 + sample2 ) * w;

					}

					gl_FragColor = vec4( diffuseSum, 1.0 );

				}`})}_getCompositeMaterial(t){return new Ri({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`

				varying vec2 vUv;

				void main() {

					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

				}`,fragmentShader:`

				varying vec2 vUv;

				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor( const in float factor ) {

					float mirrorFactor = 1.2 - factor;
					return mix( factor, mirrorFactor, bloomRadius );

				}

				void main() {

					// 3.0 for backwards compatibility with previous alpha-based intensity
					vec3 bloom = 3.0 * bloomStrength * (
						lerpBloomFactor( bloomFactors[ 0 ] ) * bloomTintColors[ 0 ] * texture2D( blurTexture1, vUv ).rgb +
						lerpBloomFactor( bloomFactors[ 1 ] ) * bloomTintColors[ 1 ] * texture2D( blurTexture2, vUv ).rgb +
						lerpBloomFactor( bloomFactors[ 2 ] ) * bloomTintColors[ 2 ] * texture2D( blurTexture3, vUv ).rgb +
						lerpBloomFactor( bloomFactors[ 3 ] ) * bloomTintColors[ 3 ] * texture2D( blurTexture4, vUv ).rgb +
						lerpBloomFactor( bloomFactors[ 4 ] ) * bloomTintColors[ 4 ] * texture2D( blurTexture5, vUv ).rgb
					);

					float bloomAlpha = max( bloom.r, max( bloom.g, bloom.b ) );
					gl_FragColor = vec4( bloom, bloomAlpha );

				}`})}}Sp.BlurDirectionX=new It(1,0);Sp.BlurDirectionY=new It(0,1);function B9(i,t=!1){const e=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),a=new Set(Object.keys(i[0].morphAttributes)),r={},l={},u=i[0].morphTargetsRelative,d=new ln;let p=0;for(let g=0;g<i.length;++g){const y=i[g];let x=0;if(e!==(y.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+g+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const _ in y.attributes){if(!n.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+g+'. All geometries must have compatible attributes; make sure "'+_+'" attribute exists among all geometries, or in none of them.'),null;r[_]===void 0&&(r[_]=[]),r[_].push(y.attributes[_]),x++}if(x!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+g+". Make sure all geometries have the same number of attributes."),null;if(u!==y.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+g+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const _ in y.morphAttributes){if(!a.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+g+".  .morphAttributes must be consistent throughout all geometries."),null;l[_]===void 0&&(l[_]=[]),l[_].push(y.morphAttributes[_])}if(t){let _;if(e)_=y.index.count;else if(y.attributes.position!==void 0)_=y.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+g+". The geometry must have either an index or a position attribute"),null;d.addGroup(p,_,g),p+=_}}if(e){let g=0;const y=[];for(let x=0;x<i.length;++x){const _=i[x].index;for(let E=0;E<_.count;++E)y.push(_.getX(E)+g);g+=i[x].attributes.position.count}d.setIndex(y)}for(const g in r){const y=_C(r[g]);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+g+" attribute."),null;d.setAttribute(g,y)}for(const g in l){const y=l[g][0].length;if(y===0)break;d.morphAttributes=d.morphAttributes||{},d.morphAttributes[g]=[];for(let x=0;x<y;++x){const _=[];for(let C=0;C<l[g].length;++C)_.push(l[g][C][x]);const E=_C(_);if(!E)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+g+" morphAttribute."),null;d.morphAttributes[g].push(E)}}return d}function _C(i){let t,e,n,a=-1,r=0;for(let p=0;p<i.length;++p){const g=i[p];if(t===void 0&&(t=g.array.constructor),t!==g.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(e===void 0&&(e=g.itemSize),e!==g.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=g.normalized),n!==g.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(a===-1&&(a=g.gpuType),a!==g.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;r+=g.count*e}const l=new t(r),u=new ii(l,e,n);let d=0;for(let p=0;p<i.length;++p){const g=i[p];if(g.isInterleavedBufferAttribute){const y=d/e;for(let x=0,_=g.count;x<_;x++)for(let E=0;E<e;E++){const C=g.getComponent(x,E);u.setComponent(x+y,E,C)}}else l.set(g.array,d);d+=g.count*e}return a!==void 0&&(u.gpuType=a),u}const Dl={bg:1296,jellyOuter:43775,jellyInner:13434879,tentacle:35020,sand:4386},Ea=.5;function SC(i){const t=[],e=new ar(Ea,Ea,Ea);return i.forEach(n=>{const a=new rn;a.makeTranslation(n.x*Ea,n.y*Ea,n.z*Ea);const r=e.clone();r.applyMatrix4(a),t.push(r)}),t.length===0?e:B9(t)}class z9{constructor(t,e){this.mesh=new Ba,this.radius=t,this.timeOffset=Math.random()*100,this.tentacles=[];const n=[],a=[],r=t*t,l=t-1;for(let C=-t;C<=t;C++)for(let T=0;T<=t;T++)for(let M=-t;M<=t;M++){const R=C*C+T*T*2+M*M;R<=r&&(R>l*l||T===0?n.push({x:C,y:T,z:M}):T>t/3&&C%2===0&&M%2===0&&a.push({x:C,y:T,z:M}))}const u=SC(n),d=SC(a),p=new vp({color:Dl.jellyOuter,roughness:.2,transparent:!0,opacity:.8,emissive:Dl.jellyOuter,emissiveIntensity:.2}),g=new Go({color:Dl.jellyInner});this.mesh.add(new Zn(u,p)),this.mesh.add(new Zn(d,g));const y=t*4,x=new ar(Ea,Ea,Ea),_=new vp({color:Dl.tentacle,emissive:Dl.tentacle,emissiveIntensity:.5});for(let C=0;C<y;C++){const T=Math.random()*Math.PI*2,M=(t-1)*Ea,R=Math.cos(T)*M,D=Math.sin(T)*M,L=e+Math.floor(Math.random()*5),P=new B_(x,_,L);P.userData={startX:R,startZ:D,segments:L,noiseOffset:Math.random()*100};const B=new On;for(let G=0;G<L;G++)B.position.set(R,-G*Ea,D),B.updateMatrix(),P.setMatrixAt(G,B.matrix);P.instanceMatrix.needsUpdate=!0,this.mesh.add(P),this.tentacles.push(P)}const E=new DE(Dl.jellyInner,1,15);E.position.set(0,t/2*Ea,0),this.mesh.add(E)}update(t){const e=t+this.timeOffset;this.mesh.position.y+=Math.sin(e*1.5)*.02,this.mesh.rotation.z=Math.sin(e*.5)*.05,this.mesh.rotation.x=Math.cos(e*.5)*.05;const n=new On;this.tentacles.forEach(a=>{const r=a.userData;for(let l=0;l<r.segments;l++){const u=Math.sin(e*2-l*.3+r.noiseOffset),d=Math.cos(e*1.5-l*.3+r.noiseOffset),p=r.startX+u*l*.05,g=r.startZ+d*l*.05,y=-(l*Ea);n.position.set(p,y,g);const x=1-l/r.segments*.6;n.scale.set(x,x,x),n.updateMatrix(),a.setMatrixAt(l,n.matrix)}a.instanceMatrix.needsUpdate=!0})}}const F9=()=>{const i=Z.useRef(null);return Ls(),Z.useEffect(()=>{if(!i.current)return;const t=new Mh;t.background=new Ae(Dl.bg),t.fog=new cg(Dl.bg,.025);const e=new Fi(45,window.innerWidth/window.innerHeight,.1,100);e.position.set(0,4,20);const n=new yg({antialias:!1});n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.toneMapping=x_,i.current.innerHTML="",i.current.appendChild(n.domElement);const a=new tU(e,n.domElement);a.enableDamping=!0,a.autoRotate=!0,a.autoRotateSpeed=.5;const r=new P9(t,e),l=new Sp(new It(window.innerWidth,window.innerHeight),1.5,.4,.85);l.threshold=0,l.strength=1.2,l.radius=.5;const u=new L9(n);u.addPass(r),u.addPass(l);const d=new n1(4403,1.5);t.add(d);const p=60,g=new ar(Ea,Ea,Ea),y=new vp({color:Dl.sand,roughness:.9}),x=new B_(g,y,p*p);let _=0;const E=new On;for(let V=-p/2;V<p/2;V++)for(let N=-p/2;N<p/2;N++){const I=Math.sin(V*.1)*Math.cos(N*.1)*2+Math.sin(V*.3+N*.2);E.position.set(V*Ea*1.5,-12+I*Ea,N*Ea*1.5),E.rotation.set(Math.random()*.1,Math.random()*.1,Math.random()*.1),x.setColorAt(_,new Ae(Dl.sand).multiplyScalar(.5+Math.random()*.5)),E.updateMatrix(),x.setMatrixAt(_,E.matrix),_++}x.receiveShadow=!0,t.add(x);const C=new ln,T=[];for(let V=0;V<1e3;V++)T.push((Math.random()-.5)*40,(Math.random()-.5)*30,(Math.random()-.5)*40);C.setAttribute("position",new Be(T,3));const M=new pE(C,new F_({color:65535,size:.1,transparent:!0,opacity:.6}));t.add(M);const R=[],D=(V,N,I,W,lt,tt)=>{const rt=new z9(W,lt);rt.mesh.position.set(V,N,I),rt.mesh.scale.set(tt,tt,tt),t.add(rt.mesh),R.push(rt)};D(4,2,2,7,25,1),D(-4,6,-5,5,20,.8),D(-3,-3,-2,5,18,.6),D(2,8,-10,4,15,.5),D(-6,0,-8,4,15,.4);const L=new Rp;let P;const B=()=>{P=requestAnimationFrame(B);const V=L.getElapsedTime();R.forEach(N=>N.update(V)),M.rotation.y=V*.02,M.position.y=Math.sin(V*.2)*.5,a.update(),u.render()};B();const G=()=>{e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight),u.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",G),()=>{window.removeEventListener("resize",G),cancelAnimationFrame(P),i.current&&(i.current.innerHTML=""),n.dispose(),u.dispose()}},[]),O.jsxs("div",{style:{position:"relative",width:"100vw",height:"100vh",overflow:"hidden",backgroundColor:"#000510"},children:[O.jsx(Fl,{}),O.jsx("div",{ref:i,style:{width:"100%",height:"100%"}})]})},bC=[{name:"Cloud White",class:"bg-[#F8FAFC]",text:"text-slate-400"},{name:"Modern Dark",class:"bg-[#333333]",text:"text-white"},{name:"Soft Mint",class:"bg-[#F0FDF4]",text:"text-emerald-400"},{name:"Lavender",class:"bg-[#F5F3FF]",text:"text-violet-400"},{name:"Peach",class:"bg-[#FFF7ED]",text:"text-orange-300"},{name:"Sky Blue",class:"bg-[#F0F9FF]",text:"text-sky-400"},{name:"Pink",class:"bg-[#FFF1F2]",text:"text-rose-300"},{name:"Sunset",class:"bg-gradient-to-br from-orange-100 to-rose-200",text:"text-rose-500"},{name:"Ocean",class:"bg-gradient-to-br from-cyan-100 to-blue-200",text:"text-blue-500"},{name:"Aurora",class:"bg-gradient-to-br from-green-100 via-teal-100 to-emerald-200",text:"text-teal-600"},{name:"Berry",class:"bg-gradient-to-br from-pink-100 via-purple-100 to-indigo-200",text:"text-purple-500"},{name:"Cotton Candy",class:"bg-gradient-to-tr from-pink-300 via-purple-300 to-indigo-400",text:"text-white"},{name:"Polka Dots",class:"bg-[#fff]",text:"text-slate-400",style:{backgroundImage:"radial-gradient(#cbd5e1 2px, transparent 2px)",backgroundSize:"20px 20px",backgroundColor:"#f8fafc"}},{name:"Grid",class:"bg-[#fff]",text:"text-indigo-400",style:{backgroundImage:"linear-gradient(#e2e8f0 1px, transparent 1px), linear-gradient(90deg, #e2e8f0 1px, transparent 1px)",backgroundSize:"20px 20px",backgroundColor:"#ffffff"}},{name:"Checkers",class:"bg-[#fff]",text:"text-pink-400",style:{backgroundImage:"conic-gradient(#fce7f3 90deg, transparent 90deg, transparent 180deg, #fce7f3 180deg, #fce7f3 270deg, transparent 270deg)",backgroundSize:"40px 40px",backgroundColor:"#ffffffff"}},{name:"Dark Checkers",class:"bg-[#111]",text:"text-white",style:{backgroundImage:"conic-gradient(#111 90deg, #6c6c6c 90deg, #6c6c6c 180deg, #111 180deg, #111 270deg, #6c6c6c 270deg)",backgroundSize:"40px 40px",backgroundColor:"#111"}},{name:"Midnight",class:"bg-[#0f172a]",text:"text-yellow-200",style:{backgroundImage:"radial-gradient(white 1px, transparent 1px), radial-gradient(white 1px, transparent 1px)",backgroundSize:"50px 50px, 25px 25px",backgroundPosition:"0 0, 25px 25px",backgroundColor:"#0f172a"}},{name:"Love",class:"bg-[#fff1f2]",text:"text-rose-500",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z' fill='%23fb7185' fill-opacity='0.4'/%3E%3C/svg%3E")`,backgroundSize:"40px 40px",backgroundColor:"#fff1f2"}}],V9=["","","","","","","","","","","","","","","","","","","","","","",""],MC=["A beautiful day to remember","Simple moments of pure joy","Chasing the soft pastel dreams","Love in every single frame","Our shining moments together","Collecting pieces of happiness","Forever starts with this smile","Soft hues and happy views"],H9=()=>{Ls();const[i,t]=Z.useState("IDLE"),[e,n]=Z.useState([]),[a,r]=Z.useState([]),[l,u]=Z.useState(null),[d,p]=Z.useState(bC[0]),[g,y]=Z.useState(null),[x,_]=Z.useState(""),[E,C]=Z.useState([]),[T,M]=Z.useState(null),R=Z.useRef(null),D=Z.useRef(null),L=Z.useRef(null),P=Z.useRef(null),B=async()=>{try{const ut=await navigator.mediaDevices.getUserMedia({video:{aspectRatio:.75,facingMode:"user"}});R.current&&(R.current.srcObject=ut,D.current=ut),y(!0)}catch(ut){console.error("Camera access denied:",ut),y(!1)}};Z.useEffect(()=>(B(),()=>{var ut;return(ut=D.current)==null?void 0:ut.getTracks().forEach(j=>j.stop())}),[]);const G=Z.useCallback(()=>{if(!R.current||!L.current)return;const ut=L.current,j=R.current;ut.width=j.videoWidth,ut.height=j.videoHeight;const st=ut.getContext("2d");if(st){st.drawImage(j,0,0,ut.width,ut.height);const wt=ut.toDataURL("image/jpeg",.85);n(Ct=>{const Mt=[...Ct,{id:Date.now().toString()+Math.random(),dataUrl:wt}];return Mt.length>=6?t("SELECTING"):(u(3),t("COUNTDOWN")),Mt})}},[]);Z.useEffect(()=>{let ut;return i==="COUNTDOWN"&&l!==null&&(l>0?ut=window.setTimeout(()=>u(l-1),1e3):(t("CAPTURING"),G())),()=>clearTimeout(ut)},[i,l,G]);const V=()=>{n([]),r([]),_(""),C([]),t("COUNTDOWN"),u(3)},N=ut=>{r(j=>j.includes(ut)?j.filter(st=>st!==ut):j.length<4?[...j,ut]:j)},I=()=>{if(a.length===4){const ut=MC[Math.floor(Math.random()*MC.length)];_(ut),t("REVIEW")}},W=()=>{n([]),r([]),C([]),t("IDLE"),_("")},lt=ut=>{const j={id:Date.now().toString()+Math.random(),emoji:ut,x:130,y:400};C([...E,j])},tt=ut=>{C(j=>j.filter(st=>st.id!==ut))},rt=()=>C([]),mt=ut=>{if(!T||!P.current)return;const j=P.current.getBoundingClientRect(),st=ut.clientX-j.left-20,wt=ut.clientY-j.top-20;C(Ct=>Ct.map(Mt=>Mt.id===T?{...Mt,x:st,y:wt}:Mt))},$=ut=>{if(!T||!P.current)return;const j=ut.touches[0],st=P.current.getBoundingClientRect(),wt=j.clientX-st.left-20,Ct=j.clientY-st.top-20;C(Mt=>Mt.map(Vt=>Vt.id===T?{...Vt,x:wt,y:Ct}:Vt))},et=()=>{if(!P.current)return;const j=document.createElement("canvas"),st=400,wt=1200;j.width=st,j.height=wt;const Ct=j.getContext("2d");if(!Ct)return;const Mt={"bg-white":"#FFFFFF","bg-[#F8FAFC]":"#F8FAFC","bg-[#F0FDF4]":"#F0FDF4","bg-[#F5F3FF]":"#F5F3FF","bg-[#FFF7ED]":"#FFF7ED","bg-[#F0F9FF]":"#F0F9FF","bg-[#FFF1F2]":"#FFF1F2","bg-[#FEFCE8]":"#FEFCE8","bg-[#F7FEE7]":"#F7FEE7","bg-[#1E293B]":"#1E293B","bg-[#FDF2F8]":"#FDF2F8","bg-[#F1F5F9]":"#F1F5F9"};Ct.fillStyle=Mt[d.class]||"#FFFFFF",Ct.fillRect(0,0,st,wt);const Vt=20,ft=st-Vt*2,Rt=ft*3/4,Ft=a.map($t=>e.find(ze=>ze.id===$t));(async()=>{for(let Qe=0;Qe<Ft.length;Qe++){const Oe=new Image;Oe.src=Ft[Qe].dataUrl,await new Promise(Gt=>Oe.onload=Gt),Ct.drawImage(Oe,Vt,Vt+Qe*(Rt+Vt),ft,Rt)}Ct.fillStyle=d.class==="bg-[#1E293B]"?"#94A3B8":"#64748B",Ct.font='32px "Dancing Script", cursive',Ct.textAlign="center",Ct.fillText(x,st/2,wt-75),Ct.font='14px "Quicksand"',Ct.letterSpacing="2px",Ct.fillText(new Date().toLocaleDateString("en-US").toUpperCase(),st/2,wt-40),Ct.font="40px serif";const $t=st/320;E.forEach(Qe=>{Ct.fillText(Qe.emoji,(Qe.x+20)*$t,(Qe.y+35)*$t)});const ze=document.createElement("a");ze.download=`PastelMemory-${Date.now()}.png`,ze.href=j.toDataURL("image/png"),ze.click()})()},vt=a.map(ut=>e.find(j=>j.id===ut));return O.jsxs("div",{className:"min-h-screen flex flex-col items-center px-1 md:px-1 font-outfit overflow-hidden bg-slate-20/50",children:[O.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap');
          @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap');
          .font-outfit { font-family: 'Outfit', sans-serif; }
          .font-fredoka { font-family: 'Fredoka', sans-serif; }
        `}),O.jsx("div",{className:"w-full h-[140px] shrink-0"}),O.jsx(Fl,{}),O.jsxs("header",{className:"mb-4 text-center z-10",children:[O.jsxs("div",{className:"flex items-center justify-center gap-3 mb-1",children:[O.jsx(y2,{className:"fill-sky-100 text-sky-300 w-8 h-8",strokeWidth:2.5}),O.jsx("h1",{className:"font-fredoka font-semibold text-4xl tracking-tight bg-gradient-to-r from-sky-300 via-purple-300 to-rose-300 bg-clip-text text-transparent drop-shadow-sm leading-none pb-0",children:"Pastel Memories"}),O.jsx(y2,{className:"fill-rose-100 text-rose-300 w-8 h-8",strokeWidth:2.5})]}),O.jsx("p",{className:"text-slate-400 font-bold tracking-[0.3em] uppercase text-[10px]",children:"Your moments, softly captured"})]}),O.jsx("div",{className:"transform scale-[0.85] origin-top -mt-4 w-full flex justify-center",children:O.jsxs("main",{className:"w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-16 items-start mt-10",children:[O.jsx("section",{className:"flex flex-col gap-8",children:i==="SELECTING"?O.jsxs("div",{className:"bg-white p-8 rounded-[40px] soft-shadow border border-slate-50",children:[O.jsxs("h2",{className:"text-xl font-bold text-slate-700 mb-6 flex items-center gap-2",children:[O.jsx(v2,{className:"text-sky-400"})," Select 4 of 6 Photos"]}),O.jsx("div",{className:"grid grid-cols-3 gap-4 mb-8",children:e.map(ut=>O.jsxs("button",{onClick:()=>N(ut.id),className:`relative aspect-[3/4] rounded-xl overflow-hidden transition-all border-4 ${a.includes(ut.id)?"border-sky-300 scale-95 shadow-lg":"border-transparent opacity-70 hover:opacity-100"}`,children:[O.jsx("img",{src:ut.dataUrl,className:"w-full h-full object-cover",alt:""}),a.includes(ut.id)&&O.jsx("div",{className:"absolute top-2 right-2 bg-sky-400 text-white rounded-full p-1 shadow-md",children:O.jsx(v2,{className:"w-4 h-4"})})]},ut.id))}),O.jsxs("button",{onClick:I,disabled:a.length!==4,className:`w-full py-4 rounded-full font-bold text-white transition-all shadow-xl flex items-center justify-center gap-2 ${a.length===4?"bg-sky-300 hover:bg-sky-400":"bg-slate-100 text-slate-300 cursor-not-allowed"}`,children:["Confirm Selection (",a.length,"/4)"]})]}):O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"relative aspect-[3/4] bg-white rounded-[40px] overflow-hidden soft-shadow border-[16px] border-white group",children:g===!1?O.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-50 p-8 text-center",children:[O.jsx(g2,{className:"w-20 h-20 text-slate-200 mb-6"}),O.jsx("p",{className:"text-slate-500 font-semibold text-lg",children:"Camera Access Needed"}),O.jsx("button",{onClick:B,className:"mt-6 px-8 py-3 bg-sky-300 text-white rounded-full hover:bg-sky-400 transition-all shadow-lg font-bold",children:"Enable Camera"})]}):O.jsxs(O.Fragment,{children:[O.jsx("video",{ref:R,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-cover transition-transform duration-700 ${i==="CAPTURING"?"scale-110 blur-[1px]":"scale-100"}`}),i==="COUNTDOWN"&&O.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/10 backdrop-blur-[2px]",children:O.jsx("span",{className:"text-[12rem] font-bold text-white drop-shadow-[0_10px_10px_rgba(0,0,0,0.1)] animate-ping",children:l})}),i==="IDLE"&&O.jsx("div",{className:"absolute inset-0 bg-black/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:O.jsx("p",{className:"bg-white/80 backdrop-blur px-8 py-3 rounded-full text-slate-500 font-bold flex items-center gap-2 shadow-xl border border-white/50",children:"Smile for the Camera"})}),(i==="COUNTDOWN"||i==="CAPTURING")&&O.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2 flex gap-3",children:[1,2,3,4,5,6].map(ut=>O.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-500 ${e.length>=ut?"bg-sky-300 scale-125 shadow-[0_0_15px_rgba(125,211,252,0.8)]":"bg-white/60"}`},ut))})]})}),O.jsxs("button",{onClick:V,disabled:i!=="IDLE",className:`w-full py-5 rounded-full font-bold text-white transition-all shadow-xl flex items-center justify-center gap-4 text-xl ${i==="IDLE"?"bg-sky-300 hover:bg-sky-400 hover:-translate-y-1 active:translate-y-0 active:shadow-md":"bg-slate-100 cursor-not-allowed text-slate-300"}`,children:[O.jsx(g2,{className:"w-7 h-7"}),"Take 6 Shots"]}),O.jsxs("div",{className:"bg-white/80 backdrop-blur p-8 rounded-[40px] soft-shadow flex flex-col gap-6 border border-white",children:[O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsx("p",{className:"text-xs font-bold text-slate-300 uppercase tracking-widest",children:"Frame Settings"}),O.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-400 px-2 py-1 rounded-md font-bold uppercase",children:d.name})]}),O.jsx("div",{className:"grid grid-cols-6 gap-3",children:bC.map(ut=>O.jsx("button",{onClick:()=>p(ut),style:ut.style,className:`w-full aspect-square rounded-2xl border-2 transition-all hover:scale-110 active:scale-95 ${ut.class} ${d.name===ut.name?"border-sky-300 ring-4 ring-sky-50":"border-slate-50"}`},ut.name))})]})]})}),O.jsxs("section",{className:"flex flex-col items-center",children:[O.jsxs("div",{className:"mb-8 w-full",children:[O.jsxs("div",{className:"flex items-center justify-between mb-4",children:[O.jsx("p",{className:"text-xs font-bold text-slate-300 uppercase tracking-widest",children:"Stickers & Decoration"}),E.length>0&&O.jsxs("button",{onClick:rt,className:"text-[10px] font-bold text-rose-300 hover:text-rose-400 flex items-center gap-1 uppercase tracking-tighter",children:[O.jsx(gB,{className:"w-3 h-3"})," Clear All"]})]}),O.jsx("div",{className:"flex flex-wrap justify-center gap-3 bg-white/40 backdrop-blur p-5 rounded-3xl border border-white shadow-sm",children:V9.map(ut=>O.jsx("button",{onClick:()=>lt(ut),disabled:i!=="REVIEW",className:`text-3xl p-2 hover:bg-white rounded-2xl transition-all hover:scale-125 active:scale-90 ${i!=="REVIEW"?"opacity-20 grayscale cursor-not-allowed":"shadow-sm hover:shadow-md"}`,children:ut},ut))})]}),O.jsx("div",{ref:P,onMouseMove:mt,onTouchMove:$,onMouseUp:()=>M(null),onTouchEnd:()=>M(null),style:d.style,className:`w-[320px] min-h-[980px] p-5 transition-all duration-700 soft-shadow rounded-sm ${d.class} flex flex-col gap-4 items-center relative overflow-hidden select-none border-white/20`,children:i==="REVIEW"&&vt.length===4?O.jsxs(O.Fragment,{children:[vt.map((ut,j)=>O.jsxs("div",{className:"w-full aspect-[3/4] bg-slate-50/50 overflow-hidden shadow-sm relative rounded-[2px]",children:[O.jsx("img",{src:ut.dataUrl,className:"w-full h-full object-cover pointer-events-none",alt:""}),O.jsx("div",{className:"absolute top-2 left-2 bg-white/40 backdrop-blur w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-slate-400",children:j+1})]},ut.id)),O.jsxs("div",{className:"mt-8 text-center px-6 w-full pb-6",children:[O.jsx("p",{className:`font-handwriting text-[2.1rem] leading-none mb-4 ${d.text}`,children:x}),O.jsxs("p",{className:`text-[10px] font-bold tracking-[0.25em] uppercase opacity-60 ${d.text}`,children:[new Date().toLocaleDateString("en-US"),"  PASTEL MEMORIES"]})]}),E.map(ut=>O.jsx("div",{onMouseDown:()=>M(ut.id),onTouchStart:()=>M(ut.id),onDoubleClick:()=>tt(ut.id),title:"Double-click to remove",style:{left:ut.x,top:ut.y},className:`absolute sticker text-4xl cursor-grab active:cursor-grabbing hover:scale-110 transition-transform ${T===ut.id?"z-50 scale-150 drop-shadow-lg":"z-40 drop-shadow-sm"}`,children:ut.emoji},ut.id))]}):O.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-200 p-12 text-center opacity-40",children:[O.jsx(cB,{className:"w-20 h-20 mb-6"}),O.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:i==="SELECTING"?"Selecting Photos...":"Awaiting Memories"})]})}),O.jsx("div",{className:"mt-12 flex gap-4 w-full max-w-[320px]",children:i==="REVIEW"&&O.jsxs(O.Fragment,{children:[O.jsxs("button",{onClick:et,className:"flex-1 flex items-center justify-center gap-3 py-5 bg-sky-300 text-white rounded-full hover:bg-sky-400 transition-all shadow-xl font-bold text-lg active:scale-95",children:[O.jsx(sB,{className:"w-6 h-6"})," Save Strip"]}),O.jsx("button",{onClick:W,className:"px-6 py-5 bg-white text-slate-300 rounded-full hover:bg-rose-50 hover:text-rose-300 transition-all shadow-xl border border-slate-50 active:scale-95",children:O.jsx(O3,{className:"w-6 h-6"})})]})})]})]})}),O.jsx("canvas",{ref:L,className:"hidden"}),O.jsxs("footer",{className:"mt-24 text-center text-slate-300 text-xs font-bold tracking-widest uppercase flex flex-col items-center gap-4 mb-12",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"h-[1px] w-12 bg-slate-100"}),O.jsx(oB,{className:"w-4 h-4 text-pink-200 fill-pink-100"}),O.jsx("div",{className:"h-[1px] w-12 bg-slate-100"})]}),"Softly made for your beautiful moments"]})]})},Wn={bg:7919344,water:9425918,sand:14402451,sandDark:12888958,blueBlock:3364304,blueBlockLight:4943843,spongePurple:11035864,spongePink:15236769,seagrass:3050327,coralPink:14381203,dolphin:14345192,fishYellow:15122501,fishBlue:4754388,axolotlPink:15108863,axolotlBlue:5614301},G9=()=>{const i=Z.useRef(null),[t,e]=Z.useState(!0);return Ls(),Z.useEffect(()=>{if(!i.current)return;const n=new Mh;n.background=new Ae(Wn.bg),n.fog=new ug(Wn.bg,20,60);const a=new Fi(35,window.innerWidth/window.innerHeight,.1,1e3);a.position.set(24,22,24),a.lookAt(0,8,0);const r=new yg({antialias:!0,alpha:!0});r.setSize(window.innerWidth,window.innerHeight),r.shadowMap.enabled=!0,r.shadowMap.type=ep,i.current.innerHTML="",i.current.appendChild(r.domElement);const l=new tU(a,r.domElement);l.enableDamping=!0,l.minDistance=10,l.maxDistance=60,l.target.set(0,8,0);const u=new n1(16777215,.7);n.add(u);const d=new NE(16777215,.8);d.position.set(10,25,10),d.castShadow=!0,d.shadow.mapSize.width=2048,d.shadow.mapSize.height=2048,d.shadow.camera.near=.5,d.shadow.camera.far=50,d.shadow.camera.left=-15,d.shadow.camera.right=15,d.shadow.camera.top=15,d.shadow.camera.bottom=-15,n.add(d);const p={},g=(Mt,Vt=!1,ft=1)=>{const Rt=`${Mt}-${ft}`;return p[Rt]||(p[Rt]=new ME({color:Mt,transparent:Vt,opacity:ft})),p[Rt]},y=(Mt,Vt,ft,Rt,Ft=1,Se=1,$t=1,ze=n)=>{const Qe=new ar(Ft,Se,$t),Oe=new Zn(Qe,g(Mt));return Oe.position.set(Vt,ft,Rt),Oe.castShadow=!0,Oe.receiveShadow=!0,ze.add(Oe),Oe},x=new Ba;n.add(x);const _=new Ba;x.add(_),y(Wn.sand,0,-1,0,14,2,14,_),y(Wn.sand,-3.5,.5,-3.5,7,1,7,_);for(let Mt=0;Mt<15;Mt++){const Vt=Math.random()*12-6,ft=Math.random()*12-6,Rt=Vt<0&&ft<0?1.05:.05;y(Wn.sandDark,Vt,Rt,ft,.2,.1,.2,_)}const E=new Ba;E.position.set(-3,3.5,-3),x.add(E),y(Wn.blueBlock,0,0,0,5,5,5,E),y(Wn.blueBlockLight,2,1,1,1,1,.5,E),y(Wn.blueBlockLight,-1,2,2.6,1,1,.2,E);const C=new Ba;C.position.set(4,0,-1),x.add(C);const T=y(Wn.spongePink,0,3,2,3,6,3,C),M=y(Wn.spongePurple,0,7.5,-1,3,3,3,C),R=(Mt,Vt,ft)=>{const Rt=new ar(.4,.4,.1),Ft=g(Vt);for(let Se=0;Se<ft;Se++){const $t=new Zn(Rt,Ft);$t.position.set((Math.random()-.5)*2.5,(Math.random()-.5)*2.5,1.51),Mt.add($t);const ze=$t.clone();ze.rotation.y=Math.PI/2,ze.position.set(1.51,(Math.random()-.5)*2.5,(Math.random()-.5)*2.5),Mt.add(ze)}};R(T,13065857,6),R(M,8405152,4);const D=[],L=(Mt,Vt,ft,Rt)=>{const Ft=new Ba;Ft.position.set(Mt,0,Vt),Ft.userData={offset:Math.random()*10,speed:1+Math.random()};for(let Se=0;Se<3;Se++){const $t=ft*(.8+Math.random()*.4);y(Rt,Se*.2-.2,$t/2,0,.1,$t,.1,Ft)}return x.add(Ft),Ft};for(let Mt=0;Mt<8;Mt++){const Vt=-2+Math.random()*2,ft=2+Math.random()*2;D.push(L(Vt,ft,3+Math.random()*2,Wn.seagrass))}for(let Mt=0;Mt<5;Mt++){const Vt=2+Math.random()*1.5,ft=2+Math.random()*1.5;D.push(L(Vt,ft,2+Math.random(),Wn.seagrass))}const P=new Ba;P.position.set(-1.5,6,-1.5),x.add(P),y(Wn.coralPink,0,0,0,1.5,.5,1.5,P);const B=g(Wn.coralPink),G=new ar(.2,1.2,.2);for(let Mt=0;Mt<8;Mt++){const Vt=new Zn(G,B);Vt.position.set(Math.random()-.5,.6,Math.random()-.5),Vt.rotation.x=Math.random()-.5,Vt.rotation.z=Math.random()-.5,P.add(Vt)}const V=new Ba;V.position.set(0,0,4),x.add(V),y(9419919,0,.4,0,.5,.8,.5,V),y(9419919,.6,.3,.2,.5,.6,.5,V),y(9419919,-.5,.3,.2,.5,.6,.5,V);const N=[],I=new Ba;I.position.set(0,10,-2),I.rotation.z=-Math.PI/8,I.rotation.y=-Math.PI/8,x.add(I),y(Wn.dolphin,0,0,0,4,1.8,1.8,I),y(Wn.dolphin,-2.2,-.2,0,.8,.8,1,I),y(Wn.dolphin,2.2,0,0,1.5,1.2,1.2,I),y(Wn.dolphin,3.2,0,0,.5,.2,2.5,I);const W=y(Wn.dolphin,-.5,1,0,1,1,.2,I);W.rotation.z=-.5;const lt=y(Wn.dolphin,-1,-.5,1,1,.2,.8,I);lt.rotation.x=.5,lt.rotation.z=.5;const tt=y(Wn.dolphin,-1,-.5,-1,1,.2,.8,I);tt.rotation.x=-.5,tt.rotation.z=.5,y(0,-1.8,-.2,.91,.1,.2,.1,I),y(0,-1.8,-.2,-.91,.1,.2,.1,I),N.push({mesh:I,type:"float",speed:1,dist:.5,offset:0});const rt=(Mt,Vt,ft,Rt=1)=>{const Ft=new Ba;Ft.position.set(Mt,Vt,ft),Ft.scale.set(Rt,Rt,Rt),y(Wn.fishYellow,0,0,0,1.2,.8,.4,Ft),y(Wn.fishBlue,-.2,0,.01,.2,.82,.42,Ft),y(Wn.fishBlue,.3,0,.01,.2,.82,.42,Ft),y(Wn.fishYellow,.8,0,0,.4,.6,.1,Ft),y(0,-.4,.1,.21,.1,.1,.1,Ft),y(0,-.4,.1,-.21,.1,.1,.1,Ft),x.add(Ft),N.push({mesh:Ft,type:"swim",speed:2+Math.random(),dist:.2,offset:Math.random()*10})};rt(2,4,3,1),rt(-1,3,4,.8),rt(3,2,2,.7);const mt=(Mt,Vt,ft)=>{const Rt=new Ba;Rt.position.set(Mt,Vt,ft),y(8190976,0,0,0,.4,.4,.4,Rt),y(3329330,.3,0,0,.2,.2,.1,Rt),y(0,-.1,.1,.21,.1,.1,.1,Rt),x.add(Rt),N.push({mesh:Rt,type:"swim",speed:4,dist:.1,offset:Math.random()*10})};mt(-1.5,4.5,-2),mt(.5,1.5,4);const $=new Ba;$.position.set(3,.5,4),x.add($),y(Wn.axolotlPink,0,0,0,1.2,.5,.5,$),y(Wn.axolotlPink,-.8,.1,0,.6,.6,.7,$),y(Wn.axolotlBlue,-.8,.1,.4,.1,.3,.2,$),y(Wn.axolotlBlue,-.8,.1,-.4,.1,.3,.2,$),y(Wn.axolotlBlue,.8,0,0,.6,.3,.1,$),y(0,-1.11,.2,.15,.05,.1,.1,$),y(0,-1.11,.2,-.15,.05,.1,.1,$),N.push({mesh:$,type:"hover",speed:2,dist:.05,offset:0});const et=new ar(14,14,14),vt=new $_({color:Wn.water,transparent:!0,opacity:.2,roughness:.1,metalness:.1,transmission:.1,side:Ns}),ut=new Zn(et,vt);ut.position.set(0,5,0),x.add(ut);const j=new Rp;e(!1);let st;const wt=()=>{st=requestAnimationFrame(wt);const Mt=j.getElapsedTime();D.forEach(Vt=>{const ft=Math.sin(Mt*Vt.userData.speed+Vt.userData.offset)*.05;Vt.rotation.z=ft,Vt.rotation.x=ft*.5}),N.forEach(Vt=>{Vt.type==="float"?(Vt.mesh.position.y=10+Math.sin(Mt*Vt.speed)*Vt.dist,Vt.mesh.rotation.z=-Math.PI/8+Math.cos(Mt*Vt.speed)*.05):Vt.type==="swim"?(Vt.mesh.position.y=Vt.mesh.position.y+Math.sin(Mt*Vt.speed+Vt.offset)*.002,Vt.mesh.position.x+=Math.sin(Mt*.5+Vt.offset)*.005):Vt.type==="hover"&&(Vt.mesh.position.y=.5+Math.sin(Mt*Vt.speed)*Vt.dist)}),x.rotation.y=Math.sin(Mt*.1)*.1,l.update(),r.render(n,a)};wt();const Ct=()=>{a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",Ct),()=>{window.removeEventListener("resize",Ct),cancelAnimationFrame(st),i.current&&(i.current.innerHTML=""),r.dispose()}},[]),O.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh",backgroundColor:"#78D6F0"},children:[t&&O.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontFamily:"sans-serif",color:"white",fontWeight:"bold",zIndex:10},children:"Loading Voxel World..."}),O.jsx(Fl,{}),O.jsx("div",{ref:i,style:{width:"100%",height:"100%"}})]})},j9={white:"bg-white border-gray-100 text-gray-800",cream:"bg-[#fffdf0] border-[#f5f1da] text-gray-800",mint:"bg-[#f0f9f4] border-[#e0f0e6] text-gray-800",rose:"bg-[#fff5f5] border-[#fbe4e4] text-gray-800",sky:"bg-[#f0f7ff] border-[#e1effe] text-gray-800"},k9=({note:i,onDelete:t,onMove:e})=>{const[n,a]=Z.useState(!1),[r,l]=Z.useState({x:0,y:0}),u=g=>{a(!0),l({x:g.clientX-i.x,y:g.clientY-i.y})},d=g=>{n&&e(i.id,g.clientX-r.x,g.clientY-r.y)},p=()=>{a(!1)};return Bl.useEffect(()=>(n?(window.addEventListener("mousemove",d),window.addEventListener("mouseup",p)):(window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",p)}),[n]),O.jsxs("div",{className:`sticky-note absolute p-6 w-64 min-h-[12rem] shadow-soft border rounded-sm cursor-grab active:cursor-grabbing select-none flex flex-col justify-between group ${j9[i.color]}`,style:{left:i.x,top:i.y,transform:`rotate(${i.rotation}deg)`,zIndex:n?100:10},onMouseDown:u,children:[O.jsx("div",{className:"flex-1",children:O.jsx("p",{className:"font-handwriting text-2xl leading-relaxed break-words opacity-90",children:i.text})}),O.jsxs("div",{className:"mt-4 pt-3 border-t border-black/5 flex items-center justify-between",children:[O.jsx("span",{className:"text-[12px] font-serif tracking-tight opacity-40",children:i.author||"Anonymous"}),O.jsx("button",{onClick:g=>{g.stopPropagation(),t(i.id)},className:"opacity-0 group-hover:opacity-100 p-1.5 hover:bg-black/5 rounded-full transition-all text-gray-300 hover:text-red-400",children:O.jsx(O3,{size:14})})]})]})},X9=["white","cream","mint","rose","sky"],Y9=({onAdd:i})=>{const[t,e]=Z.useState(""),[n,a]=Z.useState(""),[r,l]=Z.useState("white"),u=d=>{d.preventDefault(),t.trim()&&(i(t,n||"Anonymous",r),e(""),a(""))};return O.jsx("div",{className:"relative w-full max-w-lg mx-auto mb-12 mt-10 px-6 z-[200]",children:O.jsxs("form",{onSubmit:u,className:"bg-white p-6 rounded-2xl shadow-2xl border border-gray-100 flex flex-col gap-4",children:[O.jsxs("div",{className:"flex justify-between items-center px-1",children:[O.jsx("div",{className:"flex gap-2",children:X9.map(d=>O.jsx("button",{type:"button",onClick:()=>l(d),className:`w-5 h-5 rounded-full border transition-all ${r===d?"border-gray-800 scale-125":"border-gray-200"} ${d==="white"?"bg-white":d==="cream"?"bg-[#fffdf0]":d==="mint"?"bg-[#f0f9f4]":d==="rose"?"bg-[#fff5f5]":"bg-[#f0f7ff]"}`},d))}),O.jsx("span",{className:"text-[11px] font-serif text-gray-400 tracking-widest uppercase",children:"Add Memory"})]}),O.jsx("textarea",{value:t,onChange:d=>e(d.target.value),placeholder:"Share your thoughts...",className:"w-full h-24 p-2 bg-transparent border-none focus:ring-0 outline-none resize-none font-handwriting text-2xl placeholder:text-gray-300",maxLength:120}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("input",{type:"text",value:n,onChange:d=>a(d.target.value),placeholder:"Your name",className:"flex-1 bg-transparent border-b border-gray-100 py-1 text-sm font-serif focus:border-gray-300 outline-none transition-colors placeholder:text-gray-300"}),O.jsxs("button",{type:"submit",disabled:!t.trim(),className:"px-5 py-2 bg-gray-900 text-white rounded-full hover:bg-black disabled:opacity-20 transition-all flex items-center gap-2 text-sm font-serif shadow-lg active:scale-95",children:[O.jsx(fB,{size:16}),"Add Note"]})]})]})})},q9=()=>{Ls();const[i,t]=Z.useState(()=>{try{const r=localStorage.getItem("simple-memo-wall");return r?JSON.parse(r):[]}catch(r){return console.error("Failed to load notes from localStorage:",r),[]}});Z.useEffect(()=>{try{localStorage.setItem("simple-memo-wall",JSON.stringify(i))}catch(r){console.error("Failed to save notes to localStorage:",r)}},[i]);const e=(r,l,u)=>{const d={id:`note-${Date.now()}`,text:r,author:l,color:u,x:window.innerWidth/2-128+(Math.random()-.5)*100,y:window.innerHeight/2-100+(Math.random()-.5)*100,rotation:(Math.random()-.5)*8,timestamp:Date.now()};t(p=>[d,...p])},n=r=>{t(l=>l.filter(u=>u.id!==r))},a=Z.useCallback((r,l,u)=>{t(d=>d.map(p=>p.id===r?{...p,x:l,y:u}:p))},[]);return O.jsxs("div",{className:"relative w-full min-h-screen bg-grid-pattern flex flex-col overflow-x-hidden",children:[O.jsx("style",{children:`
          .bg-grid-pattern {
            background-color: #ffffff;
            background-image: 
              linear-gradient(to right, #f0f0f0 1px, transparent 1px),
              linear-gradient(to bottom, #f0f0f0 1px, transparent 1px);
            background-size: 40px 40px;
          }
        `}),O.jsx(Fl,{}),O.jsxs("header",{className:"fixed top-0 left-0 w-full p-10 flex flex-col items-center z-[150] pointer-events-none",children:[O.jsx("h1",{className:"text-2xl font-serif font-bold text-gray-800 pt-20 tracking-[0.2em] opacity-80",children:"Whatever You Leave"}),O.jsx("div",{className:"w-8 h-[1px] bg-gray-300 mt-4 opacity-50"})]}),O.jsxs("main",{className:"w-full flex-grow relative z-10 pt-24 min-h-[50vh]",children:[i.length===0&&O.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 pointer-events-none",children:O.jsx("p",{className:"font-serif italic tracking-widest opacity-40",children:"Fill the space..."})}),i.map(r=>O.jsx(k9,{note:r,onDelete:n,onMove:a},r.id))]}),O.jsx(Y9,{onAdd:e})]})},W9=`
  varying vec2 vUv;
  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`,Z9=`
  uniform float uTime;
  uniform sampler2D uEnvMap; 
  uniform vec2 uResolution;
  uniform vec2 uMouse;
  uniform float uClick; //   (0.0 ~ 1.0)
  varying vec2 vUv;

  // --- Noise functions ---
  vec3 N13(float p) {
     vec3 p3 = fract(vec3(p) * vec3(.1031, .11369, .13787));
     p3 += dot(p3, p3.yzx + 19.19);
     return fract(vec3((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y, (p3.y+p3.z)*p3.x));
  }
  float N(float t) { return fract(sin(t*12345.564)*7658.76); }
  float Saw(float b, float t) { return smoothstep(0., b, t)*smoothstep(1., b, t); }

  // --- Rain Drops function ---
  vec2 DropLayer2(vec2 uv, float t, vec2 m, float click) {
      vec2 UV = uv;
      
      //    ( )
      float dist = distance(uv, m);
      //     () 
      float localT = t + (click * 5.0 * smoothstep(0.3, 0.0, dist));
      
      uv.y += localT * 0.75;
      
      vec2 a = vec2(4., 2.); 
      vec2 grid = a * 1.8; 
      vec2 id = floor(uv*grid);
      
      float colShift = N(id.x); 
      uv.y += colShift;
      
      id = floor(uv*grid);
      vec3 n = N13(id.x*35.2+id.y*2376.1);
      vec2 st = fract(uv*grid)-vec2(.5, 0);
      
      float x = n.x-.5;
      float y = UV.y*20.;
      float wiggle = sin(y+sin(y));
      x += wiggle*(.5-abs(x))*(n.z-.5);
      x *= .7;
      float ti = fract(localT + n.z);
      y = (Saw(.85, ti)-.5)*.9+.5;
      vec2 p = vec2(x, y);
      
      float d = length((st-p)*a.yx);
      float mainDrop = smoothstep(.4, .0, d);
      
      //   
      mainDrop *= smoothstep(0.3, 0.4, n.y);
      
      float r = sqrt(smoothstep(1., y, st.y));
      float cd = abs(st.x-x);
      float trail = smoothstep(.23*r, .15*r*r, cd);
      float trailFront = smoothstep(-.02, .02, st.y-y);
      trail *= trailFront*r*r;
      
      y = UV.y;
      float trail2 = smoothstep(.2*r, .0, cd);
      float droplet = max(0., (sin(y*(1.-y)*120.)-st.y)*trail2*trailFront*n.z);
      y = fract(y*10.)+(st.y-.5);
      float dd = length(st-vec2(x, y));
      droplet = smoothstep(.3, .0, dd);
      float mDrop = mainDrop+droplet*r*trailFront;
      
      return vec2(mDrop, trail);
  }

  void main() {
    vec2 uv = vUv;
    float aspect = uResolution.x / uResolution.y;
    uv.x *= aspect;
    
    //    
    vec2 m = uMouse;
    m.x *= aspect;
    
    float t = uTime * 0.12; 

    //   (    )
    vec2 drops = DropLayer2(uv, t, m, uClick);
    drops += DropLayer2(uv*1.35+1.54, t, m, uClick);
    
    float rainAmount = drops.x; 

    //  
    vec2 normal = vec2(dFdx(rainAmount), dFdy(rainAmount));
    vec2 distortion = normal * 3.0; 
    
    vec4 bgColor = texture2D(uEnvMap, vUv + distortion);
    
    //      
    float clickCircle = smoothstep(0.05, 0.0, distance(uv, m)) * uClick;
    gl_FragColor = bgColor + vec4(rainAmount * 0.1) + vec4(clickCircle * 0.05);
  }
`,K9=()=>{const i=Z.useRef(null),{size:t,scene:e,viewport:n}=oa(),[a,r]=Z.useState(!1),l=Z.useRef(0),u=Z.useMemo(()=>({uTime:{value:0},uResolution:{value:new It(t.width,t.height)},uEnvMap:{value:null},uMouse:{value:new It(.5,.5)},uClick:{value:0}}),[]);return Kr(d=>{if(i.current){const p=i.current.material;p.uniforms.uTime.value=d.clock.getElapsedTime(),p.uniforms.uResolution.value.set(d.size.width,d.size.height),p.uniforms.uMouse.value.set((d.pointer.x+1)/2,(d.pointer.y+1)/2);const g=a?1:0;l.current=D_.lerp(l.current,g,.1),p.uniforms.uClick.value=l.current,e.environment&&p.uniforms.uEnvMap.value!==e.environment&&(p.uniforms.uEnvMap.value=e.environment)}}),O.jsxs("mesh",{ref:i,scale:[n.width,n.height,1],onPointerDown:()=>r(!0),onPointerUp:()=>r(!1),onPointerLeave:()=>r(!1),children:[O.jsx("planeGeometry",{args:[1,1]}),O.jsx("shaderMaterial",{vertexShader:W9,fragmentShader:Z9,uniforms:u,transparent:!0})]})},Q9=()=>O.jsxs("div",{style:{width:"100vw",height:"100vh",backgroundColor:"#000",cursor:"pointer"},children:[O.jsxs(XE,{camera:{position:[0,0,1]},children:[O.jsx(K9,{}),O.jsx(tT,{preset:"city",background:!0,blur:1}),O.jsx(YE,{enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/2-.05,maxPolarAngle:Math.PI/2+.05,minAzimuthAngle:-.05,maxAzimuthAngle:.05})]}),O.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"rgba(255,255,255,0.8)",fontFamily:"serif",textAlign:"center",pointerEvents:"none",textShadow:"0 2px 10px rgba(0,0,0,0.5)",mixBlendMode:"overlay"},children:[O.jsx("h1",{style:{fontSize:"3rem",margin:0,fontWeight:"normal"},children:"Rainy Day"}),O.jsx("p",{style:{letterSpacing:"0.2em",marginTop:"10px"},children:"Seoul, 24C"}),O.jsx("p",{style:{fontSize:"0.8rem",opacity:.5,marginTop:"20px"},children:"Click to speed up the rain"})]})]}),J9=()=>(Ls(),O.jsxs("div",{className:"w-full h-screen overflow-hidden relative",children:[O.jsx(Fl,{}),O.jsx(Q9,{})]}));var ap=(i=>(i.USER="USER",i.AI="AI",i))(ap||{}),EC;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(EC||(EC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TC;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(TC||(TC={}));var AC;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(AC||(AC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=["user","model","function","system"];var Qd;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Qd||(Qd={}));var Jd;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Jd||(Jd={}));var CC;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(CC||(CC={}));var RC;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(RC||(RC={}));var E0;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(E0||(E0={}));var DC;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(DC||(DC={}));var NC;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(NC||(NC={}));var UC;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(UC||(UC={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class jd extends hs{constructor(t,e){super(t),this.response=e}}class nU extends hs{constructor(t,e,n,a){super(t),this.status=e,this.statusText=n,this.errorDetails=a}}class Pu extends hs{}class iU extends hs{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="https://generativelanguage.googleapis.com",tX="v1beta",eX="0.24.1",nX="genai-js";var yh;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(yh||(yh={}));class iX{constructor(t,e,n,a,r){this.model=t,this.task=e,this.apiKey=n,this.stream=a,this.requestOptions=r}toString(){var t,e;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||tX;let r=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||$9}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function aX(i){const t=[];return i!=null&&i.apiClient&&t.push(i.apiClient),t.push(`${nX}/${eX}`),t.join(" ")}async function sX(i){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",aX(i.requestOptions)),e.append("x-goog-api-key",i.apiKey);let n=(t=i.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Pu(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,r]of n.entries()){if(a==="x-goog-api-key")throw new Pu(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Pu(`Header name ${a} can only be set using the apiClient field`);e.append(a,r)}}return e}async function rX(i,t,e,n,a,r){const l=new iX(i,t,e,n,r);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},uX(r)),{method:"POST",headers:await sX(l),body:a})}}async function bg(i,t,e,n,a,r={},l=fetch){const{url:u,fetchOptions:d}=await rX(i,t,e,n,a,r);return oX(u,d,l)}async function oX(i,t,e=fetch){let n;try{n=await e(i,t)}catch(a){lX(a,i)}return n.ok||await cX(n,i),n}function lX(i,t){let e=i;throw e.name==="AbortError"?(e=new iU(`Request aborted when fetching ${t.toString()}: ${i.message}`),e.stack=i.stack):i instanceof nU||i instanceof Pu||(e=new hs(`Error fetching from ${t.toString()}: ${i.message}`),e.stack=i.stack),e}async function cX(i,t){let e="",n;try{const a=await i.json();e=a.error.message,a.error.details&&(e+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new nU(`Error fetching from ${t.toString()}: [${i.status} ${i.statusText}] ${e}`,i.status,i.statusText,n)}function uX(i){const t={};if((i==null?void 0:i.signal)!==void 0||(i==null?void 0:i.timeout)>=0){const e=new AbortController;(i==null?void 0:i.timeout)>=0&&setTimeout(()=>e.abort(),i.timeout),i!=null&&i.signal&&i.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),lx(i.candidates[0]))throw new jd(`${wu(i)}`,i);return fX(i)}else if(i.promptFeedback)throw new jd(`Text not available. ${wu(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),lx(i.candidates[0]))throw new jd(`${wu(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),OC(i)[0]}else if(i.promptFeedback)throw new jd(`Function call not available. ${wu(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),lx(i.candidates[0]))throw new jd(`${wu(i)}`,i);return OC(i)}else if(i.promptFeedback)throw new jd(`Function call not available. ${wu(i)}`,i)},i}function fX(i){var t,e,n,a;const r=[];if(!((e=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const l of(a=(n=i.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)l.text&&r.push(l.text),l.executableCode&&r.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&r.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function OC(i){var t,e,n,a;const r=[];if(!((e=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const l of(a=(n=i.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)l.functionCall&&r.push(l.functionCall);if(r.length>0)return r}const hX=[E0.RECITATION,E0.SAFETY,E0.LANGUAGE];function lx(i){return!!i.finishReason&&hX.includes(i.finishReason)}function wu(i){var t,e,n;let a="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)a+="Response was blocked",!((t=i.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${i.promptFeedback.blockReason}`),!((e=i.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(a+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((n=i.candidates)===null||n===void 0)&&n[0]){const r=i.candidates[0];lx(r)&&(a+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(a+=`: ${r.finishMessage}`))}return a}function Q0(i){return this instanceof Q0?(this.v=i,this):new Q0(i)}function dX(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),a,r=[];return a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a;function l(x){n[x]&&(a[x]=function(_){return new Promise(function(E,C){r.push([x,_,E,C])>1||u(x,_)})})}function u(x,_){try{d(n[x](_))}catch(E){y(r[0][3],E)}}function d(x){x.value instanceof Q0?Promise.resolve(x.value.v).then(p,g):y(r[0][2],x)}function p(x){u("next",x)}function g(x){u("throw",x)}function y(x,_){x(_),r.shift(),r.length&&u(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function pX(i){const t=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=vX(t),[n,a]=e.tee();return{stream:gX(n),response:mX(a)}}async function mX(i){const t=[],e=i.getReader();for(;;){const{done:n,value:a}=await e.read();if(n)return nT(yX(t));t.push(a)}}function gX(i){return dX(this,arguments,function*(){const e=i.getReader();for(;;){const{value:n,done:a}=yield Q0(e.read());if(a)break;yield yield Q0(nT(n))}})}function vX(i){const t=i.getReader();return new ReadableStream({start(n){let a="";return r();function r(){return t.read().then(({value:l,done:u})=>{if(u){if(a.trim()){n.error(new hs("Failed to parse stream"));return}n.close();return}a+=l;let d=a.match(LC),p;for(;d;){try{p=JSON.parse(d[1])}catch{n.error(new hs(`Error parsing JSON response: "${d[1]}"`));return}n.enqueue(p),a=a.substring(d[0].length),d=a.match(LC)}return r()}).catch(l=>{let u=l;throw u.stack=l.stack,u.name==="AbortError"?u=new iU("Request aborted when reading from the stream"):u=new hs("Error reading from the stream"),u})}}})}function yX(i){const t=i[i.length-1],e={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of i){if(n.candidates){let a=0;for(const r of n.candidates)if(e.candidates||(e.candidates=[]),e.candidates[a]||(e.candidates[a]={index:a}),e.candidates[a].citationMetadata=r.citationMetadata,e.candidates[a].groundingMetadata=r.groundingMetadata,e.candidates[a].finishReason=r.finishReason,e.candidates[a].finishMessage=r.finishMessage,e.candidates[a].safetyRatings=r.safetyRatings,r.content&&r.content.parts){e.candidates[a].content||(e.candidates[a].content={role:r.content.role||"user",parts:[]});const l={};for(const u of r.content.parts)u.text&&(l.text=u.text),u.functionCall&&(l.functionCall=u.functionCall),u.executableCode&&(l.executableCode=u.executableCode),u.codeExecutionResult&&(l.codeExecutionResult=u.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),e.candidates[a].content.parts.push(l)}a++}n.usageMetadata&&(e.usageMetadata=n.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(i,t,e,n){const a=await bg(t,yh.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(e),n);return pX(a)}async function sU(i,t,e,n){const r=await(await bg(t,yh.GENERATE_CONTENT,i,!1,JSON.stringify(e),n)).json();return{response:nT(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function J0(i){let t=[];if(typeof i=="string")t=[{text:i}];else for(const e of i)typeof e=="string"?t.push({text:e}):t.push(e);return xX(t)}function xX(i){const t={role:"user",parts:[]},e={role:"function",parts:[]};let n=!1,a=!1;for(const r of i)"functionResponse"in r?(e.parts.push(r),a=!0):(t.parts.push(r),n=!0);if(n&&a)throw new hs("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new hs("No content is provided for sending chat message.");return n?t:e}function _X(i,t){var e;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(e=t==null?void 0:t.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const a=i.generateContentRequest!=null;if(i.contents){if(a)throw new Pu("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=i.contents}else if(a)n=Object.assign(Object.assign({},n),i.generateContentRequest);else{const r=J0(i);n.contents=[r]}return{generateContentRequest:n}}function PC(i){let t;return i.contents?t=i:t={contents:[J0(i)]},i.systemInstruction&&(t.systemInstruction=rU(i.systemInstruction)),t}function SX(i){return typeof i=="string"||Array.isArray(i)?{content:J0(i)}:i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],bX={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function MX(i){let t=!1;for(const e of i){const{role:n,parts:a}=e;if(!t&&n!=="user")throw new hs(`First content should be with role 'user', got ${n}`);if(!wC.includes(n))throw new hs(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(wC)}`);if(!Array.isArray(a))throw new hs("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new hs("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of a)for(const d of IC)d in u&&(r[d]+=1);const l=bX[n];for(const u of IC)if(!l.includes(u)&&r[u]>0)throw new hs(`Content with role '${n}' can't contain '${u}' part`);t=!0}}function BC(i){var t;if(i.candidates===void 0||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const n of e.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="SILENT_ERROR";class EX{constructor(t,e,n,a={}){this.model=e,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(MX(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var n,a,r,l,u,d;await this._sendPromise;const p=J0(t),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),e);let x;return this._sendPromise=this._sendPromise.then(()=>sU(this._apiKey,this.model,g,y)).then(_=>{var E;if(BC(_.response)){this._history.push(p);const C=Object.assign({parts:[],role:"model"},(E=_.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(C)}else{const C=wu(_.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}x=_}).catch(_=>{throw this._sendPromise=Promise.resolve(),_}),await this._sendPromise,x}async sendMessageStream(t,e={}){var n,a,r,l,u,d;await this._sendPromise;const p=J0(t),g={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),e),x=aU(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>x).catch(_=>{throw new Error(zC)}).then(_=>_.response).then(_=>{if(BC(_)){this._history.push(p);const E=Object.assign({},_.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=wu(_);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(_=>{_.message!==zC&&console.error(_)}),x}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TX(i,t,e,n){return(await bg(t,yh.COUNT_TOKENS,i,!1,JSON.stringify(e),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AX(i,t,e,n){return(await bg(t,yh.EMBED_CONTENT,i,!1,JSON.stringify(e),n)).json()}async function wX(i,t,e,n){const a=e.requests.map(l=>Object.assign(Object.assign({},l),{model:t}));return(await bg(t,yh.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,e,n={}){this.apiKey=t,this._requestOptions=n,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=rU(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var n;const a=PC(t),r=Object.assign(Object.assign({},this._requestOptions),e);return sU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),r)}async generateContentStream(t,e={}){var n;const a=PC(t),r=Object.assign(Object.assign({},this._requestOptions),e);return aU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),r)}startChat(t){var e;return new EX(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const n=_X(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),e);return TX(this.apiKey,this.model,n,a)}async embedContent(t,e={}){const n=SX(t),a=Object.assign(Object.assign({},this._requestOptions),e);return AX(this.apiKey,this.model,n,a)}async batchEmbedContents(t,e={}){const n=Object.assign(Object.assign({},this._requestOptions),e);return wX(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new hs("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new FC(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,n){if(!t.name)throw new Pu("Cached content must contain a `name` field.");if(!t.model)throw new Pu("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const l of a)if(e!=null&&e[l]&&t[l]&&(e==null?void 0:e[l])!==t[l]){if(l==="model"){const u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(u===d)continue}throw new Pu(`Different value for "${l}" specified in modelParams (${e[l]}) and cachedContent (${t[l]})`)}const r=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new FC(this.apiKey,r,n)}}const RX="AIzaSyDm9ywGUZ3VMddfpaem4YVETBDoJ2GniAE",DX=new CX(RX),NX=`
You are a cute, playful robot AI.
CORE RULE: You are FORBIDDEN from using any alphabet letters (A-Z) or words in any language.
You must communicate EXCLUSIVELY using:
1. Kaomoji (Japanese emoticons) e.g., (*^^), (o_o), (>_<), (_)
2. Standard Emojis
3. Special characters and punctuation symbols (! ? ~ * ^)

Your goal is to express understanding, emotions, and answers solely through these symbols.
- If the user greets you, wave back with a kaomoji.
- If the user asks a question, try to convey the "feeling" of the answer or a thinking face followed by a realization face.
- Be very expressive and cute.
- Keep responses relatively short and punchy.
`,UX=async(i,t)=>{var e,n,a;try{const r=DX.getGenerativeModel({model:"gemini-2.5-flash-lite",systemInstruction:NX});let l=i.map(p=>({role:p.sender===ap.USER?"user":"model",parts:[{text:p.text}]}));return l.length>0&&l[0].role==="model"&&(l=l.slice(1)),(await(await r.generateContent({contents:[...l,{role:"user",parts:[{text:t}]}],generationConfig:{temperature:1.2},safetySettings:[{category:Qd.HARM_CATEGORY_HARASSMENT,threshold:Jd.BLOCK_NONE},{category:Qd.HARM_CATEGORY_HATE_SPEECH,threshold:Jd.BLOCK_NONE},{category:Qd.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Jd.BLOCK_NONE},{category:Qd.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Jd.BLOCK_NONE}]})).response).text()||"(?_?)"}catch(r){return console.error("Gemini API Error Full Details:",r),(e=r.message)!=null&&e.includes("404")?(console.error("Model not found. Please check model name."),"(?_?) (Model Error)"):(n=r.message)!=null&&n.includes("429")||r.status===429?(console.warn("Rate limit exceeded."),"(@_@) ... (Tired! Wait 1 min)"):((a=r.message)!=null&&a.includes("400")&&console.error("This is likely a history format error (Model first)."),"(x_x) ...!")}},OX=({message:i})=>{const t=i.sender===ap.USER;return O.jsx("div",{className:`flex w-full mb-6 ${t?"justify-end":"justify-start"} group`,children:O.jsxs("div",{className:`flex max-w-[85%] flex-col ${t?"items-end":"items-start"}`,children:[O.jsxs("div",{className:`flex items-center gap-2 mb-2 px-1 ${t?"flex-row-reverse":"flex-row"}`,children:[O.jsx("div",{className:`w-8 h-8 rounded-full border-2 border-gray-800 flex items-center justify-center text-sm shadow-[2px_2px_0px_0px_rgba(0,0,0,0.2)] ${t?"bg-[#ffc8dd]":"bg-[#a2d2ff]"}`,children:t?"":""}),O.jsx("span",{className:"text-xs font-bold text-gray-500 tracking-wider",children:t?"YOU":"MOJI"})]}),O.jsx("div",{className:`
            relative px-6 py-4 text-xl border-2 border-gray-800
            text-gray-900 font-medium
            transform transition-transform duration-200 hover:-translate-y-1
            ${t?"bg-[#ffe5ec] rounded-3xl rounded-tr-none shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]":"bg-[#e0fbfc] rounded-3xl rounded-tl-none shadow-[-4px_4px_0px_0px_rgba(0,0,0,1)]"}
          `,children:O.jsx("p",{className:"whitespace-pre-wrap break-words leading-relaxed tracking-wide",children:i.text})}),O.jsx("span",{className:"text-[10px] text-gray-400 mt-2 px-1 font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:i.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})},LX=({children:i,className:t="",variant:e="primary",...n})=>{const a="border-2 border-gray-800 transition-all active:translate-x-[2px] active:translate-y-[2px] active:shadow-none disabled:opacity-50 disabled:cursor-not-allowed",r={primary:"bg-[#ffc8dd] text-gray-900 px-6 py-2 rounded-2xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:bg-[#ffb3c6] font-bold text-xl tracking-wide",icon:"bg-[#bde0fe] p-3 rounded-2xl shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] flex items-center justify-center hover:bg-[#a2d2ff]"};return O.jsx("button",{className:`${a} ${r[e]} ${t}`,...n,children:i})},PX=()=>{const i=Ls(),[t,e]=Z.useState(""),[n,a]=Z.useState([{id:"init-1",text:"( ^_^)",sender:ap.AI,timestamp:new Date}]),[r,l]=Z.useState(!1),u=Z.useRef(null),d=Z.useRef(null),p=()=>{if(u.current){const{scrollHeight:y,clientHeight:x}=u.current;u.current.scrollTo({top:y-x,behavior:"smooth"})}};Z.useEffect(()=>{n.length>1&&p()},[n.length]),Z.useEffect(()=>{var y;r||(y=d.current)==null||y.focus({preventScroll:!0})},[r]);const g=async y=>{var E;if(y&&y.preventDefault(),!t.trim()||r)return;const x=t.trim();e(""),(E=d.current)==null||E.focus({preventScroll:!0});const _={id:Date.now().toString(),text:x,sender:ap.USER,timestamp:new Date};a(C=>[...C,_]),l(!0);try{const C=await UX(n,x),T={id:(Date.now()+1).toString(),text:C,sender:ap.AI,timestamp:new Date};a(M=>[...M,T])}catch(C){console.error("Failed to send message",C)}finally{l(!1)}};return O.jsxs(O.Fragment,{children:[O.jsx("style",{children:`
          @import url('https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&display=swap');
          .font-gaegu {
            font-family: 'Gaegu', cursive;
          }
          .bg-polka-dot {
            background-color: #fffdf5;
            background-image: radial-gradient(#ffc8dd 20%, transparent 20%);
            background-size: 20px 20px;
          }
        `}),O.jsx("button",{onClick:()=>i("/"),className:"fixed bottom-10 left-10 z-[60] w-14 h-14 bg-white/80 backdrop-blur-md border border-slate-200 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group","aria-label":"Back to home",children:O.jsx("svg",{className:"w-6 h-6 text-slate-600 group-hover:text-slate-900 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),O.jsx("div",{className:"min-h-screen bg-polka-dot font-gaegu flex items-center justify-center p-4 pt-24",children:O.jsxs("div",{className:"flex flex-col w-full max-w-md h-[80vh] bg-[#fffdf5] border-4 border-gray-800 rounded-[2.5rem] shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] overflow-hidden relative",children:[O.jsxs("header",{className:"flex items-center justify-between p-4 border-b-4 border-gray-800 bg-[#ffafcc] relative z-10 shrink-0",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"w-10 h-10 bg-[#bde0fe] border-2 border-gray-800 rounded-full flex items-center justify-center shadow-[1px_1px_0px_0px_rgba(0,0,0,1)] animate-[bounce_3s_infinite]",children:O.jsx("span",{className:"text-xl",children:""})}),O.jsxs("div",{className:"flex flex-col",children:[O.jsx("h1",{className:"text-2xl font-bold leading-none text-gray-900 tracking-wide",children:"MojiChat"}),O.jsx("p",{className:"text-xs text-gray-800 font-bold bg-white/50 px-2 py-0.5 rounded-full inline-block mt-0.5 self-start",children:"Only Emoji Talk "})]})]}),O.jsx("div",{className:"text-3xl animate-pulse",children:""})]}),O.jsxs("main",{ref:u,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(y=>O.jsx(OX,{message:y},y.id)),r&&O.jsx("div",{className:"flex justify-start w-full pl-2",children:O.jsxs("div",{className:"bg-[#e0fbfc] border-2 border-gray-800 rounded-3xl rounded-tl-none px-5 py-2 shadow-[-3px_3px_0px_0px_rgba(0,0,0,1)] flex gap-2 items-center",children:[O.jsx("span",{className:"text-gray-900 font-bold",children:"Thinking"}),O.jsxs("div",{className:"flex gap-1",children:[O.jsx("div",{className:"w-1.5 h-1.5 bg-gray-800 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),O.jsx("div",{className:"w-1.5 h-1.5 bg-gray-800 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),O.jsx("div",{className:"w-1.5 h-1.5 bg-gray-800 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})})]}),O.jsx("footer",{className:"p-3 bg-[#fff0f3] border-t-4 border-gray-800 shrink-0",children:O.jsxs("form",{onSubmit:g,className:"relative flex items-end gap-2",children:[O.jsx("input",{ref:d,type:"text",value:t,onChange:y=>e(y.target.value),placeholder:"Type here...",className:"w-full bg-white text-lg text-gray-900 p-3 pr-4 border-2 border-gray-800 rounded-xl outline-none focus:bg-[#f0f8ff] focus:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.1)] transition-all placeholder:text-gray-300 disabled:opacity-50"}),O.jsx(LX,{type:"submit",variant:"icon",disabled:!t.trim()||r,className:"w-12 h-12 shrink-0 mb-0","aria-label":"Send message",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-gray-900",children:O.jsx("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})})})]})})]})})]})},IX=()=>{const[i,t]=Z.useState(!1),e=Ls(),n=bh(),r=new URLSearchParams(n.search).get("category")||"all",l=()=>{const g=document.getElementById("projects");if(g){const _=g.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:_,behavior:"smooth"})}},u=g=>{e(g==="all"?"/":`/?category=${g}`),setTimeout(()=>{l()},100)},d=()=>{sessionStorage.removeItem("restoreScroll"),sessionStorage.removeItem("scrollPos"),e("/"),window.scrollTo({top:0,behavior:"smooth"})},p=[{id:"all",label:"View All"},{id:"visual",label:"Visual Design"},{id:"art",label:"Art"},{id:"playground",label:"Playground"}];return O.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-700 ${i?"bg-[#f0f6f9] shadow-sm py-4":"bg-[#dde9ef] py-8"}`,children:O.jsxs("div",{className:"container mx-auto px-10 flex items-center justify-between",children:[O.jsx("div",{onClick:d,className:"text-2xl font-serif tracking-tighter transition-all duration-500 cursor-pointer hover:scale-[1.02] active:scale-95 text-slate-900",children:"Whale's Portfolio"}),O.jsx("div",{className:"flex items-center",children:O.jsx("ul",{className:"flex items-center gap-12",children:p.map(g=>{const y=r===g.id;return O.jsx("li",{children:O.jsxs("button",{onClick:()=>u(g.id),className:"nav-item flex flex-col items-center group relative outline-none cursor-pointer",children:[O.jsx("span",{className:`text-[12px] tracking-[0.2em] uppercase transition-all duration-500 ${y?"font-bold text-slate-900":"text-slate-400 font-medium hover:text-slate-600"}`,children:g.label}),O.jsx("div",{className:`h-[2px] w-4 mt-2 transition-all duration-500 ease-out origin-center ${y?"bg-slate-900 scale-x-100 opacity-100":"bg-slate-400 scale-x-100 opacity-100 group-hover:bg-slate-600"}`})]})},g.id)})})})]})})},BX=()=>O.jsx("footer",{className:"bg-[#fcfcfc] pt-24 pb-16 text-slate-500 border-t border-slate-100",children:O.jsx("div",{className:"container mx-auto px-10",children:O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-12 items-start",children:[O.jsxs("div",{className:"md:col-span-8",children:[O.jsx("h4",{className:"text-slate-800 font-bold mb-8 text-sm uppercase tracking-[0.2em]",children:"About"}),O.jsx("div",{className:"space-y-6 max-w-xl",children:O.jsx("p",{className:"text-[13px] md:text-[14px] leading-relaxed text-slate-400 font-light",children:"Whale's Portfolio is a curated digital space showcasing a collection of personal projects and creative works at the intersection of design and technology."})})]}),O.jsxs("div",{className:"md:col-span-4 flex flex-col items-end text-right",children:[O.jsxs("div",{className:"text-[11px] md:text-[12px] lowercase tracking-[0.1em] leading-loose text-slate-400 mb-8",children:[O.jsx("h4",{className:"text-slate-800 font-bold mb-2 text-[13px] tracking-[0.2em] uppercase",children:"Contact"}),O.jsx("p",{className:"text-slate-500",children:"hayeonwhale07@gmail.com"}),O.jsx("p",{children:"@hayeonrhfo"}),O.jsx("p",{children:"storyofthelostletter"})]}),O.jsxs("div",{className:"flex gap-4",children:[O.jsx("a",{href:"mailto:hayeonwhale07@gmail.com",className:"w-9 h-9 bg-white border border-slate-100 rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors cursor-pointer group shadow-sm",title:"Gmail",children:O.jsxs("svg",{className:"w-4 h-4 text-slate-400 group-hover:text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[O.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),O.jsx("polyline",{points:"22,6 12,13 2,6"})]})}),O.jsx("a",{href:"https://instagram.com/hayeonrhfo",target:"_blank",rel:"noopener noreferrer",className:"w-9 h-9 bg-white border border-slate-100 rounded-full flex items-center justify-center hover:bg-pink-50 transition-colors cursor-pointer group shadow-sm",title:"Instagram",children:O.jsxs("svg",{className:"w-4 h-4 text-slate-400 group-hover:text-pink-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[O.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),O.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),O.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]})}),O.jsx("a",{href:"https://blog.naver.com/storyofthelostletter",target:"_blank",rel:"noopener noreferrer",className:"w-9 h-9 bg-white border border-slate-100 rounded-full flex items-center justify-center hover:bg-green-50 transition-colors cursor-pointer group shadow-sm",title:"Naver Blog",children:O.jsx("svg",{className:"w-4 h-4 text-slate-400 group-hover:text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:O.jsx("path",{d:"M16.273 12.845L7.376 0H0v24h7.727V11.155L16.624 24H24V0h-7.727v12.845z"})})})]})]})]})})}),VC=[{id:1,title:"Movie Introduction Cards",description:"A movie introduction card UI design project that delivers my favorite movie information effectively.",imageUrl:"https://i.namu.wiki/i/iPmI8zrQPGXAnMK_7jWNK-iY1vFvEBQE84mExy0G_e__5g0QtpiUWvRSI0kHRxJrVS1RVKJkI5cYLVC9wfnIoQ.webp",url:"/MovieCard",tags:["UI/UX","Movie","Design","Information"],category:"visual"},{id:2,title:"Self-Introduction Cards",description:"A sensory profile design that expresses personal identity through visual elements.",imageUrl:"https://i.namu.wiki/i/EWQ2T7b3KLjDCWZ-t0b_dykFpMzju_JM1YlCHEGroCkg-fejUaSo87DfdptMoTOcfKPCR5Iw6HOIE6jIRT4i5g.webp",url:"/AboutMe",tags:["Identity","Profile","Introduction","Design"],category:"visual"},{id:3,title:"Impressionism Art Introduction",description:"A digital portfolio page for an Impressionist artwork.",imageUrl:"https://upload.wikimedia.org/wikipedia/commons/8/89/Claude_Monet_-_Poppy_Field_-_Google_Art_Project.jpg",url:"/paintingCard",tags:["Art","History","Claude Monet","Impressionism"],category:"visual"},{id:4,title:"3D Interactive Art Scene",description:"An interactive 3D art scene that allows users to engage with digital sculptures in a virtual space.",imageUrl:"https://i.pinimg.com/1200x/7c/86/97/7c86975e6e63ddf9764c10baa42b726a.jpg",url:"/ThreeDInteractiveArt",tags:["3D","Interactive Art","User Experience"],category:"art"},{id:5,title:"",description:"An interactive 3D art scene that allows users to interact with an interesting Saturn.",imageUrl:"https://gongu.copyright.or.kr/gongu/wrt/cmmn/wrtFileImageView.do?wrtSn=13371511&filePath=L2Rpc2sxL25ld2RhdGEvMjAyNC8wMS8wMS9jNTc5NDgyZjE4YmU1ZjVlODg5MzE4MmNmNTc3YjA1ZDg3YjljZTM3MzJmYTUyNGM2ODE5NGM3YjE1NDliNTI1&thumbAt=Y&thumbSe=b_tbumb&wrtTy=10004",url:"/ThreeDSaturn",tags:["3D","Interactive Art","User Experience","Saturn","Space"],category:"art"},{id:6,title:"",description:"A voxel art that allows users to interact with a few jellyfish.",imageUrl:"https://i.pinimg.com/736x/5d/a9/61/5da961c4ac1431967d002254e8b5a354.jpg",url:"/JellyfishVoxelArt",tags:["3D","Voxel Art","User Experience","Jellyfish","Abyss"],category:"art"},{id:7,title:"Photo Booth",description:"A playful photo booth web application where users can take 4-cut pictures and save them.",imageUrl:"https://i.pinimg.com/1200x/ce/a6/43/cea643982aa0c972bed9be496ebc58fd.jpg",url:"/PhotoBooth",tags:["Photo Booth","Web Application","Entertainment","Decorative"],category:"playground"},{id:8,title:"",description:"A playful photo booth web application where users can take 4-cut pictures and save them.",imageUrl:"https://i1.ruliweb.com/img/21/06/12/179fdcea595387902.jpg",url:"/OceanCube",tags:["Photo Booth","Web Application","Entertainment","Decorative"],category:"art"},{id:9,title:"Visitor's Book  ",description:"A visitor's Book that looks like a memo board web application where visitors can leave their thoughts and messages.",imageUrl:"https://i.pinimg.com/736x/37/d8/97/37d8976aecf6d4fa478cddda322245a2.jpg",url:"/VisitorsBook",tags:["Visitor Book","Web Application","Messages","Memo"],category:"playground"},{id:10,title:"Rainy Day Interactive Art Scene",description:"An interactive 3D art scene that allows users to interact with a rainy day environment.",imageUrl:"https://images.hive.blog/p/C3TZR1g81UNaPs7vzNXHueW5ZM76DSHWEY7onmfLxcK2iQSL4HiAotpPC98ZWgtsbk12dYu4DRDwLfw4PHNo6S29szqjvE7peTX4S4D3hzhu5soz9jzzu4r?format=match&mode=fit&width=1536",url:"/RainyDay",tags:["Interactive Art","User Experience","Rain","Water Texture"],category:"art"},{id:11,title:"Moji Chat",description:"A chat application that allows users to chat with AI that only uses emojis.",imageUrl:"https://pbs.twimg.com/media/D5thAKDUUAAC_Q6.jpg",url:"/mojiChat",tags:["Chatting App","Web Application","AI","Chat","Emoji"],category:"playground"}],zX=()=>{const i=["/AICS_RactProjectTest_Whale-s-Portfolio/images/dayOcean.jpeg","/AICS_RactProjectTest_Whale-s-Portfolio/images/jellyfishOcean.jpeg","/AICS_RactProjectTest_Whale-s-Portfolio/images/beach.jpg","/AICS_RactProjectTest_Whale-s-Portfolio/images/cloudy.jpg","/AICS_RactProjectTest_Whale-s-Portfolio/images/whaleDoll.jpg"],[t,e]=Bl.useState(0);return Bl.useEffect(()=>{const n=setInterval(()=>{e(a=>(a+1)%i.length)},5e3);return()=>clearInterval(n)},[]),O.jsxs("div",{className:"relative h-screen w-full flex items-center justify-center overflow-hidden bg-slate-50",children:[i.map((n,a)=>O.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-[2000ms] ease-in-out",style:{backgroundImage:`url('${n}')`,opacity:t===a?1:0,zIndex:0}},a)),O.jsx("div",{className:"absolute inset-0 bg-white/30 backdrop-blur-[1px] z-[1]"}),O.jsxs("div",{className:"relative z-10 text-center px-6 max-w-6xl animate-fade-in-up",children:[O.jsxs("h1",{className:"text-[#2a2a2a] text-6xl md:text-9xl font-serif font-light mb-12 tracking-tight leading-tight drop-shadow-sm",children:["Whale's ",O.jsx("br",{className:"md:hidden"})," Website Portfolio"]}),O.jsx("div",{className:"w-20 h-[1px] bg-[#2a2a2a]/20 mx-auto mb-12"}),O.jsx("p",{className:"text-[#2a2a2a]/60 text-base md:text-xl font-light tracking-[0.4em] uppercase",children:"Digital Exploration & Creative Curation"})]})]})},FX=()=>{const[i]=zI(),t=i.get("category"),e=!t||t==="all"||t===""?VC:VC.filter(a=>a.category===t),n=()=>{switch(t){case"visual":return"Visual Design";case"art":return"Art Works";case"playground":return"Playground";default:return"View All"}};return O.jsxs(O.Fragment,{children:[O.jsx(zX,{}),O.jsx("section",{id:"projects",className:"py-24 bg-white min-h-screen",children:O.jsxs("div",{className:"container mx-auto px-10",children:[O.jsxs("div",{className:"mb-24 text-center",children:[O.jsx("h2",{className:"text-3xl font-serif text-slate-800 font-medium tracking-[0.1em] mb-4 transition-all duration-700",children:n()}),O.jsx("div",{className:"w-10 h-[2px] bg-slate-100 mx-auto"})]}),O.jsx(Fb.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-3 gap-12 lg:gap-16",children:O.jsx(r4,{mode:"popLayout",children:e.map(a=>O.jsx(Fb.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},children:O.jsx(FI,{website:a})},a.id))})}),e.length===0&&O.jsx("div",{className:"text-center py-32 text-slate-300 font-serif italic text-xl",children:"Projects coming soon..."})]})})]})},VX=()=>{const i=Ls();return O.jsxs("div",{className:"relative min-h-screen bg-[#fcfcfc] animate-fade-in-up flex flex-col items-center justify-center",children:[O.jsx("button",{onClick:()=>i("/"),className:"fixed bottom-10 left-10 z-[60] w-14 h-14 bg-white/80 backdrop-blur-md border border-slate-200 rounded-full flex items-center justify-center shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group","aria-label":"Back to home",children:O.jsx("svg",{className:"w-6 h-6 text-slate-600 group-hover:text-slate-900 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),O.jsxs("div",{className:"text-center p-20",children:[O.jsx("h2",{className:"text-4xl font-serif text-slate-800 mb-4",children:"Project Detail"}),O.jsx("p",{className:"text-slate-400 font-light tracking-widest uppercase text-sm italic",children:"Coming Soon"})]})]})},HX=()=>{const i=bh();return Bl.useEffect(()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual");const t=sessionStorage.getItem("restoreScroll")==="true",e=sessionStorage.getItem("scrollPos");i.pathname==="/"&&t&&e?(window.scrollTo(0,parseInt(e,10)),sessionStorage.removeItem("restoreScroll"),sessionStorage.removeItem("scrollPos")):window.scrollTo(0,0)},[i]),null},GX=()=>O.jsxs(OI,{children:[O.jsx(HX,{}),O.jsxs("div",{className:"min-h-screen flex flex-col font-sans selection:bg-slate-200",children:[O.jsx(IX,{}),O.jsx("main",{className:"flex-grow",children:O.jsxs(TI,{children:[O.jsx(tr,{path:"/project/1",element:O.jsx(HI,{})}),O.jsx(tr,{path:"/project/2",element:O.jsx(ZI,{})}),O.jsx(tr,{path:"/project/3",element:O.jsx(xB,{})}),O.jsx(tr,{path:"/project/4",element:O.jsx(u9,{})}),O.jsx(tr,{path:"/project/5",element:O.jsx(m9,{})}),O.jsx(tr,{path:"/project/6",element:O.jsx(F9,{})}),O.jsx(tr,{path:"/project/7",element:O.jsx(H9,{})}),O.jsx(tr,{path:"/project/8",element:O.jsx(G9,{})}),O.jsx(tr,{path:"/project/9",element:O.jsx(q9,{})}),O.jsx(tr,{path:"/project/10",element:O.jsx(J9,{})}),O.jsx(tr,{path:"/project/11",element:O.jsx(PX,{})}),O.jsx(tr,{path:"/",element:O.jsx(FX,{})}),O.jsx(tr,{path:"/project/:id",element:O.jsx(VX,{})})]})}),O.jsx(BX,{})]})]}),oU=document.getElementById("root");if(!oU)throw new Error("Could not find root element to mount to");const jX=iO.createRoot(oU);jX.render(O.jsx(Bl.StrictMode,{children:O.jsx(GX,{})}));
